function pk(Un,Fo){for(var Ji=0;Ji<Fo.length;Ji++){const Di=Fo[Ji];if(typeof Di!="string"&&!Array.isArray(Di)){for(const B in Di)if(B!=="default"&&!(B in Un)){const Or=Object.getOwnPropertyDescriptor(Di,B);Or&&Object.defineProperty(Un,B,Or.get?Or:{enumerable:!0,get:()=>Di[B]})}}}return Object.freeze(Object.defineProperty(Un,Symbol.toStringTag,{value:"Module"}))}var hk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gk(Un){return Un&&Un.__esModule&&Object.prototype.hasOwnProperty.call(Un,"default")?Un.default:Un}var eh={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/var ax;function mk(){return ax||(ax=1,function(Un){(function(){var Fo=typeof window<"u"?window:hk,Ji={};(function(B,Or,Zl){var d;function th(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var pu=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function cx(e){e=[typeof globalThis=="object"&&globalThis,e,typeof B=="object"&&B,typeof self=="object"&&self,typeof Or=="object"&&Or];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var ni=cx(this);function Ze(e,t){if(t)e:{var n=ni;e=e.split(".");for(var i=0;i<e.length-1;i++){var r=e[i];if(!(r in n))break e;n=n[r]}e=e[e.length-1],i=n[e],t=t(i),t!=i&&t!=null&&pu(n,e,{configurable:!0,writable:!0,value:t})}}Ze("Symbol",function(e){function t(o){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(i+(o||"")+"_"+r++,o)}function n(o,s){this.g=o,pu(this,"description",{configurable:!0,writable:!0,value:s})}if(e)return e;n.prototype.toString=function(){return this.g};var i="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return t}),Ze("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var i=ni[t[n]];typeof i=="function"&&typeof i.prototype[e]!="function"&&pu(i.prototype,e,{configurable:!0,writable:!0,value:function(){return nh(th(this))}})}return e});function nh(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function g(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return{next:th(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function H(e){if(!(e instanceof Array)){e=g(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var fx=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},ec;if(typeof Object.setPrototypeOf=="function")ec=Object.setPrototypeOf;else{var tc;e:{var dx={a:!0},ih={};try{ih.__proto__=dx,tc=ih.a;break e}catch{}tc=!1}ec=tc?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var rh=ec;function et(e,t){if(e.prototype=fx(t.prototype),e.prototype.constructor=e,rh)rh(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.wm=t.prototype}function hu(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.A=this.i=null}function nc(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}hu.prototype.s=function(e){this.h=e};function ic(e,t){e.i={Oh:t,$h:!0},e.g=e.m||e.j}hu.prototype.return=function(e){this.i={return:e},this.g=this.j};function T(e,t,n){return e.g=n,{value:t}}hu.prototype.u=function(e){this.g=e};function K(e){e.g=0}function ue(e,t,n){e.m=t,n!=null&&(e.j=n)}function ii(e,t){e.m=0,e.j=t||0}function pe(e,t,n){e.g=t,e.m=n||0}function ae(e,t){return e.m=t||0,t=e.i.Oh,e.i=null,t}function sn(e){e.A=[e.i],e.m=0,e.j=0}function un(e,t){var n=e.A.splice(0)[0];(n=e.i=e.i||n)?n.$h?e.g=e.m||e.j:n.u!=null&&e.j<n.u?(e.g=n.u,e.i=null):e.g=e.j:e.g=t}function px(e){this.g=new hu,this.h=e}function hx(e,t){nc(e.g);var n=e.g.l;return n?rc(e,"return"in n?n.return:function(i){return{value:i,done:!0}},t,e.g.return):(e.g.return(t),Vo(e))}function rc(e,t,n,i){try{var r=t.call(e.g.l,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.o=!1,r;var o=r.value}catch(s){return e.g.l=null,ic(e.g,s),Vo(e)}return e.g.l=null,i.call(e.g,o),Vo(e)}function Vo(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,ic(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.$h)throw t.Oh;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function gx(e){this.next=function(t){return nc(e.g),e.g.l?t=rc(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=Vo(e)),t},this.throw=function(t){return nc(e.g),e.g.l?t=rc(e,e.g.l.throw,t,e.g.s):(ic(e.g,t),t=Vo(e)),t},this.return=function(t){return hx(e,t)},this[Symbol.iterator]=function(){return this}}function mx(e){function t(i){return e.next(i)}function n(i){return e.throw(i)}return new Promise(function(i,r){function o(s){s.done?i(s.value):Promise.resolve(s.value).then(t,n).then(o,r)}o(e.next())})}function k(e){return mx(new gx(new px(e)))}function ht(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}Ze("Promise",function(e){function t(s){this.h=0,this.i=void 0,this.g=[],this.o=!1;var u=this.j();try{s(u.resolve,u.reject)}catch(a){u.reject(a)}}function n(){this.g=null}function i(s){return s instanceof t?s:new t(function(u){u(s)})}if(e)return e;n.prototype.h=function(s){if(this.g==null){this.g=[];var u=this;this.i(function(){u.l()})}this.g.push(s)};var r=ni.setTimeout;n.prototype.i=function(s){r(s,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var s=this.g;this.g=[];for(var u=0;u<s.length;++u){var a=s[u];s[u]=null;try{a()}catch(l){this.j(l)}}}this.g=null},n.prototype.j=function(s){this.i(function(){throw s})},t.prototype.j=function(){function s(l){return function(c){a||(a=!0,l.call(u,c))}}var u=this,a=!1;return{resolve:s(this.F),reject:s(this.l)}},t.prototype.F=function(s){if(s===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(s instanceof t)this.H(s);else{e:switch(typeof s){case"object":var u=s!=null;break e;case"function":u=!0;break e;default:u=!1}u?this.C(s):this.m(s)}},t.prototype.C=function(s){var u=void 0;try{u=s.then}catch(a){this.l(a);return}typeof u=="function"?this.I(u,s):this.m(s)},t.prototype.l=function(s){this.s(2,s)},t.prototype.m=function(s){this.s(1,s)},t.prototype.s=function(s,u){if(this.h!=0)throw Error("Cannot settle("+s+", "+u+"): Promise already settled in state"+this.h);this.h=s,this.i=u,this.h===2&&this.G(),this.A()},t.prototype.G=function(){var s=this;r(function(){if(s.B()){var u=ni.console;typeof u<"u"&&u.error(s.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var s=ni.CustomEvent,u=ni.Event,a=ni.dispatchEvent;return typeof a>"u"?!0:(typeof s=="function"?s=new s("unhandledrejection",{cancelable:!0}):typeof u=="function"?s=new u("unhandledrejection",{cancelable:!0}):(s=ni.document.createEvent("CustomEvent"),s.initCustomEvent("unhandledrejection",!1,!0,s)),s.promise=this,s.reason=this.i,a(s))},t.prototype.A=function(){if(this.g!=null){for(var s=0;s<this.g.length;++s)o.h(this.g[s]);this.g=null}};var o=new n;return t.prototype.H=function(s){var u=this.j();s.Je(u.resolve,u.reject)},t.prototype.I=function(s,u){var a=this.j();try{s.call(u,a.resolve,a.reject)}catch(l){a.reject(l)}},t.prototype.then=function(s,u){function a(p,h){return typeof p=="function"?function(m){try{l(p(m))}catch(y){c(y)}}:h}var l,c,f=new t(function(p,h){l=p,c=h});return this.Je(a(s,l),a(u,c)),f},t.prototype.catch=function(s){return this.then(void 0,s)},t.prototype.Je=function(s,u){function a(){switch(l.h){case 1:s(l.i);break;case 2:u(l.i);break;default:throw Error("Unexpected state: "+l.h)}}var l=this;this.g==null?o.h(a):this.g.push(a),this.o=!0},t.resolve=i,t.reject=function(s){return new t(function(u,a){a(s)})},t.race=function(s){return new t(function(u,a){for(var l=g(s),c=l.next();!c.done;c=l.next())i(c.value).Je(u,a)})},t.all=function(s){var u=g(s),a=u.next();return a.done?i([]):new t(function(l,c){function f(m){return function(y){p[m]=y,h--,h==0&&l(p)}}var p=[],h=0;do p.push(void 0),h++,i(a.value).Je(f(p.length-1),c),a=u.next();while(!a.done)})},t});function On(e,t){return Object.prototype.hasOwnProperty.call(e,t)}Ze("WeakMap",function(e){function t(a){if(this.g=(u+=Math.random()+1).toString(),a){a=g(a);for(var l;!(l=a.next()).done;)l=l.value,this.set(l[0],l[1])}}function n(){}function i(a){var l=typeof a;return l==="object"&&a!==null||l==="function"}function r(a){if(!On(a,s)){var l=new n;pu(a,s,{value:l})}}function o(a){var l=Object[a];l&&(Object[a]=function(c){return c instanceof n?c:(Object.isExtensible(c)&&r(c),l(c))})}if(function(){if(!e||!Object.seal)return!1;try{var a=Object.seal({}),l=Object.seal({}),c=new e([[a,2],[l,3]]);return c.get(a)!=2||c.get(l)!=3?!1:(c.delete(a),c.set(l,4),!c.has(a)&&c.get(l)==4)}catch{return!1}}())return e;var s="$jscomp_hidden_"+Math.random();o("freeze"),o("preventExtensions"),o("seal");var u=0;return t.prototype.set=function(a,l){if(!i(a))throw Error("Invalid WeakMap key");if(r(a),!On(a,s))throw Error("WeakMap key fail: "+a);return a[s][this.g]=l,this},t.prototype.get=function(a){return i(a)&&On(a,s)?a[s][this.g]:void 0},t.prototype.has=function(a){return i(a)&&On(a,s)&&On(a[s],this.g)},t.prototype.delete=function(a){return i(a)&&On(a,s)&&On(a[s],this.g)?delete a[s][this.g]:!1},t}),Ze("Map",function(e){function t(){var u={};return u.nc=u.next=u.head=u}function n(u,a){var l=u[1];return nh(function(){if(l){for(;l.head!=u[1];)l=l.nc;for(;l.next!=l.head;)return l=l.next,{done:!1,value:a(l)};l=null}return{done:!0,value:void 0}})}function i(u,a){var l=a&&typeof a;l=="object"||l=="function"?o.has(a)?l=o.get(a):(l=""+ ++s,o.set(a,l)):l="p_"+a;var c=u[0][l];if(c&&On(u[0],l))for(u=0;u<c.length;u++){var f=c[u];if(a!==a&&f.key!==f.key||a===f.key)return{id:l,list:c,index:u,entry:f}}return{id:l,list:c,index:-1,entry:void 0}}function r(u){if(this[0]={},this[1]=t(),this.size=0,u){u=g(u);for(var a;!(a=u.next()).done;)a=a.value,this.set(a[0],a[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var u=Object.seal({x:4}),a=new e(g([[u,"s"]]));if(a.get(u)!="s"||a.size!=1||a.get({x:4})||a.set({x:4},"t")!=a||a.size!=2)return!1;var l=a.entries(),c=l.next();return c.done||c.value[0]!=u||c.value[1]!="s"?!1:(c=l.next(),!(c.done||c.value[0].x!=4||c.value[1]!="t"||!l.next().done))}catch{return!1}}())return e;var o=new WeakMap;r.prototype.set=function(u,a){u=u===0?0:u;var l=i(this,u);return l.list||(l.list=this[0][l.id]=[]),l.entry?l.entry.value=a:(l.entry={next:this[1],nc:this[1].nc,head:this[1],key:u,value:a},l.list.push(l.entry),this[1].nc.next=l.entry,this[1].nc=l.entry,this.size++),this},r.prototype.delete=function(u){return u=i(this,u),u.entry&&u.list?(u.list.splice(u.index,1),u.list.length||delete this[0][u.id],u.entry.nc.next=u.entry.next,u.entry.next.nc=u.entry.nc,u.entry.head=null,this.size--,!0):!1},r.prototype.clear=function(){this[0]={},this[1]=this[1].nc=t(),this.size=0},r.prototype.has=function(u){return!!i(this,u).entry},r.prototype.get=function(u){return(u=i(this,u).entry)&&u.value},r.prototype.entries=function(){return n(this,function(u){return[u.key,u.value]})},r.prototype.keys=function(){return n(this,function(u){return u.key})},r.prototype.values=function(){return n(this,function(u){return u.value})},r.prototype.forEach=function(u,a){for(var l=this.entries(),c;!(c=l.next()).done;)c=c.value,u.call(a,c[1],c[0],this)},r.prototype[Symbol.iterator]=r.prototype.entries;var s=0;return r}),Ze("Set",function(e){function t(n){if(this.g=new Map,n){n=g(n);for(var i;!(i=n.next()).done;)this.add(i.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),i=new e(g([n]));if(!i.has(n)||i.size!=1||i.add(n)!=i||i.size!=1||i.add({x:4})!=i||i.size!=2)return!1;var r=i.entries(),o=r.next();return o.done||o.value[0]!=n||o.value[1]!=n?!1:(o=r.next(),o.done||o.value[0]==n||o.value[0].x!=4||o.value[1]!=o.value[0]?!1:r.next().done)}catch{return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,i){var r=this;this.g.forEach(function(o){return n.call(i,o,o,r)})},t)});function oc(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var o=n++;return{value:t(o,e[o]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}Ze("Array.prototype.values",function(e){return e||function(){return oc(this,function(t,n){return n})}}),Ze("Array.from",function(e){return e||function(t,n,i){n=n??function(u){return u};var r=[],o=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof o=="function"){t=o.call(t);for(var s=0;!(o=t.next()).done;)r.push(n.call(i,o.value,s++))}else for(o=t.length,s=0;s<o;s++)r.push(n.call(i,t[s],s));return r}}),Ze("Array.prototype.keys",function(e){return e||function(){return oc(this,function(t){return t})}}),Ze("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),Ze("Array.prototype.includes",function(e){return e||function(t,n){var i=this;i instanceof String&&(i=String(i));var r=i.length;for(n=n||0,0>n&&(n=Math.max(n+r,0));n<r;n++){var o=i[n];if(o===t||Object.is(o,t))return!0}return!1}});function gu(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}Ze("String.prototype.includes",function(e){return e||function(t,n){return gu(this,t,"includes").indexOf(t,n||0)!==-1}}),Ze("String.fromCodePoint",function(e){return e||function(t){for(var n="",i=0;i<arguments.length;i++){var r=Number(arguments[i]);if(0>r||1114111<r||r!==Math.floor(r))throw new RangeError("invalid_code_point "+r);65535>=r?n+=String.fromCharCode(r):(r-=65536,n+=String.fromCharCode(r>>>10&1023|55296),n+=String.fromCharCode(r&1023|56320))}return n}});function oh(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var o=e[r];if(t.call(n,o,r,e))return{Xh:r,v:o}}return{Xh:-1,v:void 0}}Ze("Array.prototype.findIndex",function(e){return e||function(t,n){return oh(this,t,n).Xh}}),Ze("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=g(n);for(var i;!(i=n.next()).done;)this.add(i.value)}}return function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),i=Object.seal({}),r=new e([n]);return!r.has(n)||r.has(i)?!1:(r.delete(n),r.add(i),!r.has(n)&&r.has(i))}catch{return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)}),Ze("Array.prototype.find",function(e){return e||function(t,n){return oh(this,t,n).v}}),Ze("String.prototype.startsWith",function(e){return e||function(t,n){var i=gu(this,t,"startsWith"),r=i.length,o=t.length;n=Math.max(0,Math.min(n|0,i.length));for(var s=0;s<o&&n<r;)if(i[n++]!=t[s++])return!1;return s>=o}}),Ze("Object.entries",function(e){return e||function(t){var n=[],i;for(i in t)On(t,i)&&n.push([i,t[i]]);return n}});var vx=typeof Object.assign=="function"?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)On(i,r)&&(e[r]=i[r])}return e};Ze("Object.assign",function(e){return e||vx}),Ze("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),Ze("Array.prototype.entries",function(e){return e||function(){return oc(this,function(t,n){return[t,n]})}}),Ze("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),Ze("String.prototype.repeat",function(e){return e||function(t){var n=gu(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var i="";t;)t&1&&(i+=n),(t>>>=1)&&(n+=n);return i}}),Ze("Number.EPSILON",function(){return Math.pow(2,-52)}),Ze("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),Ze("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),Ze("Object.values",function(e){return e||function(t){var n=[],i;for(i in t)On(t,i)&&n.push(t[i]);return n}}),Ze("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),Ze("String.prototype.endsWith",function(e){return e||function(t,n){var i=gu(this,t,"endsWith");n===void 0&&(n=i.length),n=Math.max(0,Math.min(n|0,i.length));for(var r=t.length;0<r&&0<n;)if(i[--n]!=t[--r])return!1;return 0>=r}}),Ze("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return 0>t?-n:n}});var yx=this||self;function W(e,t){e=e.split(".");var n=yx;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var i;e.length&&(i=e.shift());)e.length||t===void 0?n[i]&&n[i]!==Object.prototype[i]?n=n[i]:n=n[i]={}:n[i]=t}function _r(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}_r.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function mu(e){return e.h/(1-Math.pow(e.g,e.i))}function Ho(){this.h=new _r(2),this.j=new _r(5),this.g=0,this.i=128e3,this.l=16e3}Ho.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},Ho.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},Ho.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(mu(this.h),mu(this.j))};function Tx(){}function zn(){}function we(){}function Zi(e){var t=ht.apply(1,arguments);sh.has(e)||(sh.add(e),we.apply(Tx,H(t)))}function xx(){}function yk(){}function Tk(){}var sh=new Set;B.console&&(new Map().set(1,function(){return console.error.apply(console,H(ht.apply(0,arguments)))}).set(2,function(){return console.warn.apply(console,H(ht.apply(0,arguments)))}).set(3,function(){return console.info.apply(console,H(ht.apply(0,arguments)))}).set(4,function(){return console.log.apply(console,H(ht.apply(0,arguments)))}).set(5,function(){return console.debug.apply(console,H(ht.apply(0,arguments)))}).set(6,function(){return console.debug.apply(console,H(ht.apply(0,arguments)))}),we=function(){return console.warn.apply(console,H(ht.apply(0,arguments)))},zn=function(){console.error.apply(console,H(ht.apply(0,arguments)))});function vu(){this.g=new Map}d=vu.prototype,d.push=function(e,t){this.g.has(e)?this.g.get(e).push(t):this.g.set(e,[t])},d.get=function(e){return this.g.has(e)?this.g.get(e).slice():null},d.remove=function(e,t){if(this.g.has(e)){var n=this.g.get(e).filter(function(i){return i!=t});this.g.set(e,n),n.length||this.g.delete(e)}},d.forEach=function(e){this.g.forEach(function(t,n){e(n,t)})},d.size=function(){return this.g.size},d.keys=function(){return Array.from(this.g.keys())};function Ce(){this.g=new vu}d=Ce.prototype,d.release=function(){this.Ra(),this.g=null},d.D=function(e,t,n,i){this.g&&(e=new uh(e,t,n,i),this.g.push(t,e))},d.za=function(e,t,n,i){function r(s){o.Ja(e,t,r),n(s)}var o=this;this.D(e,t,r,i)},d.Ja=function(e,t,n){if(this.g){var i=this.g.get(t)||[];i=g(i);for(var r=i.next();!r.done;r=i.next())r=r.value,r.target!=e||n!=r.listener&&n||(r.Ja(),this.g.remove(t,r))}},d.Ra=function(){if(this.g){for(var e=[],t=g(this.g.g.values()),n=t.next();!n.done;n=t.next())e.push.apply(e,H(n.value));for(e=g(e),t=e.next();!t.done;t=e.next())t.value.Ja();this.g.g.clear()}},W("shaka.util.EventManager",Ce),Ce.prototype.removeAll=Ce.prototype.Ra,Ce.prototype.unlisten=Ce.prototype.Ja,Ce.prototype.listenOnce=Ce.prototype.za,Ce.prototype.listen=Ce.prototype.D,Ce.prototype.release=Ce.prototype.release;function uh(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.g=Sx(e,i),this.target.addEventListener(t,n,this.g)}uh.prototype.Ja=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function Sx(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(i){return!n.has(i)}),wx(e)?t:t.capture||!1}function wx(e){var t=ah;if(t==null){t=!1;try{var n={},i={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch{t=!1}ah=t}return t||!1}var ah=void 0;W("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3});function St(e){this.h=e,this.g=void 0}St.prototype.value=function(){return this.g===void 0&&(this.g=this.h()),this.g};/*
 @license
 Shaka Player
 Copyright 2025 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function ye(){return Ax.value()}var _n=null,sc=null,Ax=new St(function(){var e=void 0;return _n&&(e=_n()),!e&&sc&&(e=sc()),e});function uc(e,t){this.g=e,this.h=t}uc.prototype.toString=function(){return"v"+this.g+"."+this.h};function Ae(e,t){var n=new uc(5,0),i=lh,r=i.g,o=n.h-r.h;(0<(n.g-r.g||o)?i.i:i.h)(i.g,n,e,t)}function Ex(e,t,n,i){we([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function Ix(e,t,n,i){zn([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(" "))}var lh=null;/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var Mx=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function tt(e){var t;e instanceof tt?(yu(this,e.ac),this.$c=e.$c,Tu(this,e.Bb),ac(this,e.rd),this.mb=e.mb,er(this,e.g.clone()),this.Jc=e.Jc):e&&(t=String(e).match(Mx))?(yu(this,t[1]||"",!0),this.$c=br(t[2]||""),Tu(this,t[3]||"",!0),ac(this,t[4]),this.mb=br(t[5]||"",!0),er(this,t[6]||"",!0),this.Jc=br(t[7]||"")):this.g=new Br(null)}d=tt.prototype,d.ac="",d.$c="",d.Bb="",d.rd=null,d.mb="",d.Jc="",d.toString=function(){var e=[],t=this.ac;if(t&&e.push(Go(t,ch,!0),":"),t=this.Bb){e.push("//");var n=this.$c;n&&e.push(Go(n,ch,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.rd,t!=null&&e.push(":",String(t))}return(t=this.mb)&&(this.Bb&&t.charAt(0)!="/"&&e.push("/"),e.push(Go(t,t.charAt(0)=="/"?Dx:kx,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.Jc)&&e.push("#",Go(t,Px)),e.join("")},d.resolve=function(e){var t=this.clone();t.ac==="data"&&(t=new tt);var n=!!e.ac;n?yu(t,e.ac):n=!!e.$c,n?t.$c=e.$c:n=!!e.Bb,n?Tu(t,e.Bb):n=e.rd!=null;var i=e.mb;if(n)ac(t,e.rd);else if(n=!!e.mb){if(i.charAt(0)!="/")if(this.Bb&&!this.mb)i="/"+i;else{var r=t.mb.lastIndexOf("/");r!=-1&&(i=t.mb.substr(0,r+1)+i)}if(i==".."||i==".")i="";else if(i.indexOf("./")!=-1||i.indexOf("/.")!=-1){r=i.lastIndexOf("/",0)==0,i=i.split("/");for(var o=[],s=0;s<i.length;){var u=i[s++];u=="."?r&&s==i.length&&o.push(""):u==".."?((1<o.length||o.length==1&&o[0]!="")&&o.pop(),r&&s==i.length&&o.push("")):(o.push(u),r=!0)}i=o.join("/")}}return n?t.mb=i:n=e.g.toString()!=="",n?er(t,e.g.clone()):n=!!e.Jc,n&&(t.Jc=e.Jc),t},d.clone=function(){return new tt(this)};function yu(e,t,n){e.ac=n?br(t,!0):t,e.ac&&(e.ac=e.ac.replace(/:$/,""))}function Tu(e,t,n){e.Bb=n?br(t,!0):t}function ac(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.rd=t}else e.rd=null}function er(e,t,n){t instanceof Br?e.g=t:(n||(t=Go(t,Rx)),e.g=new Br(t))}function br(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Go(e,t,n){return e!=null?(e=encodeURI(e).replace(t,Cx),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Cx(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var ch=/[#\/\?@]/g,kx=/[#\?:]/g,Dx=/[#\?]/g,Rx=/[#\?@]/g,Px=/#/g;function Br(e){this.g=e||null}function xu(e){if(!e.fb&&(e.fb=new Map,e.Hd=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];o=decodeURIComponent(o.replace(/\+/g," ")),r=r||"",e.add(o,decodeURIComponent(r.replace(/\+/g," ")))}}d=Br.prototype,d.fb=null,d.Hd=null;function fh(e){return xu(e),e.Hd}d.add=function(e,t){xu(this),this.g=null;var n=this.fb.has(e)?this.fb.get(e):null;return n||this.fb.set(e,n=[]),n.push(t),this.Hd++,this},d.set=function(e,t){return xu(this),this.g=null,this.fb.has(e)?this.fb.set(e,[t]):this.add(e,t),this},d.get=function(e){return xu(this),this.fb.get(e)||[]},d.toString=function(){if(this.g)return this.g;if(!this.fb||!this.fb.size)return"";for(var e=[],t=g(this.fb.keys()),n=t.next();!n.done;n=t.next()){var i=n.value;n=encodeURIComponent(i),i=this.fb.get(i);for(var r=0;r<i.length;r++){var o=n;i[r]!==""&&(o+="="+encodeURIComponent(i[r])),e.push(o)}}return this.g=e.join("&")},d.clone=function(){var e=new Br;if(e.g=this.g,this.fb){for(var t=new Map,n=g(this.fb),i=n.next();!i.done;i=n.next()){var r=g(i.value);i=r.next().value,r=r.next().value,t.set(i,r.concat())}e.fb=t,e.Hd=this.Hd}return e};function Fr(){}function ri(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if((ArrayBuffer.isView(e)?e.buffer:e)==(ArrayBuffer.isView(t)?t.buffer:t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=le(e);t=le(t);for(var i=0;i<e.byteLength;i++)if(n[i]!=t[i])return!1;return!0}function gn(e){return ArrayBuffer.isView(e)?e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer:e}function le(e,t,n){return n=n===void 0?1/0:n,lc(e,t===void 0?0:t,n,Uint8Array)}function dh(e,t,n){return n=n===void 0?1/0:n,lc(e,t===void 0?0:t,n,Uint16Array)}function Ht(e,t,n){return n=n===void 0?1/0:n,lc(e,t===void 0?0:t,n,DataView)}function lc(e,t,n,i){var r=ArrayBuffer.isView(e)?e.buffer:e,o=1;"BYTES_PER_ELEMENT"in i&&(o=i.BYTES_PER_ELEMENT);var s=((e.byteOffset||0)+e.byteLength)/o;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/o,s))),new i(r,e,Math.floor(Math.min(e+Math.max(n,0),s))-e)}W("shaka.util.BufferUtils",Fr),Fr.toDataView=Ht,Fr.toUint16=dh,Fr.toUint8=le,Fr.toArrayBuffer=gn,Fr.equal=ri;function C(e,t,n){var i=ht.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=i,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(r){this.stack=r.stack}}C.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},W("shaka.util.Error",C),C.Severity={RECOVERABLE:1,CRITICAL:2},C.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},C.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,STREAMING_NOT_ALLOWED:3024,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,HLS_EMPTY_MEDIA_PLAYLIST:4053,DASH_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4054,CANNOT_ADD_EXTERNAL_CHAPTERS_TO_LIVE_STREAM:4054,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,MISSING_EME_SUPPORT:6020,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,PRELOAD_DESTROYED:7006,QUEUE_INDEX_OUT_OF_BOUNDS:7007,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005,INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED:10006,VAST_INVALID_XML:10007};function tr(){}function ze(e){if(!e)return"";if(e=le(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),B.TextDecoder&&!ye().jh())return e=new TextDecoder().decode(e),e.includes("�")&&zn('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var i=65533;if((e[n]&128)==0?i=e[n]:e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(i=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(i=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(i=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3),65535>=i)t+=String.fromCharCode(i);else{i-=65536;var r=i&1023;t+=String.fromCharCode(55296+(i>>10)),t+=String.fromCharCode(56320+r)}}return t}function Ri(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new C(2,2,2004);n=Math.floor(e.byteLength/2);var i=new Uint16Array(n);e=Ht(e);for(var r=0;r<n;r++)i[r]=e.getUint16(2*r,t);return fc(i)}function Yn(e){function t(i){return n.byteLength<=i||9<=n[i]&&126>=n[i]}if(!e)return"";var n=le(e);if(n[0]==239&&n[1]==187&&n[2]==191)return ze(n);if(n[0]==254&&n[1]==255)return Ri(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return Ri(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return Ri(e,!1);if(n[1]==0&&n[3]==0)return Ri(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return ze(e);throw new C(2,2,2003)}function Cn(e){if(B.TextEncoder&&!ye().jh()){var t=new TextEncoder;return gn(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return gn(t)}function cc(e,t){for(var n=new ArrayBuffer(2*e.length),i=new DataView(n),r=0;r<e.length;++r)i.setUint16(2*r,e.charCodeAt(r),t);return n}function fc(e){return ph.value()(e)}function Gt(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,function(r){return r[1]=="#"?(r=r[2]=="x"||r[2]=="X"?parseInt(r.substring(3),16):parseInt(r.substring(2),10),0<=r&&1114111>=r?String.fromCodePoint(r):""):t[r]||"'"}):e||""}W("shaka.util.StringUtils",tr),tr.resetFromCharCode=function(){ph.g=void 0},tr.toUTF16=cc,tr.toUTF8=Cn,tr.fromBytesAutoDetect=Yn,tr.fromUTF16=Ri,tr.fromUTF8=ze;var ph=new St(function(){function e(n){try{var i=new Uint8Array(n);return 0<String.fromCharCode.apply(null,i).length}catch{return!1}}for(var t={Dc:65536};0<t.Dc;t={Dc:t.Dc},t.Dc/=2)if(e(t.Dc))return function(n){return function(i){for(var r="",o=0;o<i.length;o+=n.Dc)r+=String.fromCharCode.apply(null,i.subarray(o,o+n.Dc));return r}}(t);return null});function Et(){}function Su(e){return e=fc(le(e)),btoa(e)}function oi(e,t){return t=t??!0,e=Su(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function mn(e){e=B.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function nr(e){for(var t=e.length/2,n=new Uint8Array(t),i=0;i<t;i++)n[i]=B.parseInt(e.substr(2*i,2),16);return n}function si(e){var t=le(e);e="",t=g(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function nt(){for(var e=ht.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var i=n=0;i<e.length;++i){var r=e[i];ArrayBuffer.isView(r)&&r.BYTES_PER_ELEMENT===1?t.set(r,n):t.set(le(r),n),n+=r.byteLength}return t}W("shaka.util.Uint8ArrayUtils",Et),Et.concat=nt,Et.toHex=si,Et.fromHex=nr,Et.fromBase64=mn,Et.toBase64=oi,Et.toStandardBase64=Su;function gt(e,t,n){if(n=n===void 0?"":n,t.length==0)return e;if(e.length==1&&t.length==1){var i=new tt(e[0]);return t=new tt(t[0]),t=i.resolve(t),n&&er(t,n),[t.toString()]}t=t.map(function(u){return new tt(u)}),i=[],e=g(e);for(var r=e.next();!r.done;r=e.next()){r=new tt(r.value);for(var o=g(t),s=o.next();!s.done;s=o.next())s=r.resolve(s.value),n&&er(s,n),i.push(s.toString())}return i}function Pi(e,t,n,i){return e={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set},i&&(e.keySystemUris=new Set([i])),e}function hh(e,t){t=t===void 0?"cenc":t;var n=[],i=[],r=[];e.forEach(function(s,u){var a=u;a.length!=22&&(a=oi(nr(u),!1));var l=s;l.length!=22&&(l=oi(nr(s),!1)),s={kty:"oct",kid:a,k:l},n.push(s),i.push(s.kid),r.push(u)}),e=JSON.stringify({keys:n});var o=JSON.stringify({kids:i});return o=[{initData:le(Cn(o)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+B.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:o,keyIds:new Set(r)}}function Vr(e,t){if(t.length==1)return t[0];if(e=Kt(e,t),e!=null)return e;throw new C(2,4,4025,t)}function Kt(e,t){var n=mh.get(e);n=g(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;for(var r=g(t),o=r.next();!o.done;o=r.next())if(o=o.value,i.test(o.trim()))return o.trim()}return e==he?"":null}function dc(e,t){var n=[];e=mh.get(e),e=g(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;for(var r=g(t),o=r.next();!o.done;o=r.next())o=o.value,i.test(o.trim())&&n.push(o.trim())}return n}var he="text",lt={xa:"video",Y:"audio",Oa:he,Nf:"image",al:"application"},gh=1/15,mh=new Map().set("audio",[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/,/^ac3$/,/^eac3$/]).set("video",[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/]).set("text",[/^vtt$/,/^wvtt/,/^stpp/]);function Ko(e,t,n,i){this.g=null,this.l=e,this.i=t,this.m=n,this.o=i,this.j=!1;e:{if(typeof libDPIModule>"u"&&we("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,Ae("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{we("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(we("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||we(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function pc(e,t,n,i){i.type!=="video"||e.o&&!i.baseOriginalId||e.g&&e.g.appendBuffer(t,"video",i.id,-n,!e.o)}function vh(e){e.g&&e.i.classList.add("shaka-hidden")}Ko.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function yh(e){return e&&typeof LCEVCdec<"u"?e.codecs=="lvc1":!1}W("shaka.lcevc.Dec",Ko),Ko.prototype.release=Ko.prototype.release;function It(e){if(hc.has(e))return hc.get(e);var t=B.ManagedMediaSource||B.MediaSource;return t?(t=t.isTypeSupported(e),hc.set(e,t),t):!1}function ir(){var e=B.ManagedSourceBuffer||B.SourceBuffer;return!!e&&!!e.prototype&&!!e.prototype.changeType}function Th(){var e=B.ManagedMediaSource||B.MediaSource;return e&&e.prototype?!!e.prototype.setLiveSeekableRange&&!!e.prototype.clearLiveSeekableRange:!1}var hc=new Map;function Xo(){}Xo.prototype.extract=function(){},Xo.prototype.decode=function(){return[]},Xo.prototype.clear=function(){},Xo.prototype.getStreams=function(){return[]};function gc(){}gc.prototype.init=function(){},gc.prototype.parse=function(){return[]};function xh(){}d=xh.prototype,d.init=function(){},d.qf=function(){},d.Bd=function(){},d.remove=function(){},d.Of=function(){},W("shaka.media.IClosedCaptionParser",xh);function bn(e){this.h=new Map,this.i=0,this.j=new gc,(e=Sh(e.toLowerCase()))&&(this.j=e()),this.g=new Xo,(e=rr)&&(this.g=e(),this.h.set(this.i,this.g))}d=bn.prototype,d.init=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?-1:n,n!=-1&&this.i!=n){t=n;var i=this.h.get(t);this.h.set(this.i,this.g),i?this.g=i:((i=rr)&&(this.g=i()),this.h.set(t,this.g))}else t||this.Bd();this.j.init(e),n!=-1&&(this.i=n)},d.qf=function(e){e=this.j.parse(e),e=g(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=le(t.packet);0<n.length&&this.g.extract(n,t.pts)}return this.g.decode()},d.Bd=function(){this.g.clear()},d.remove=function(e){e=e===void 0?[]:e,e=new Set(e);for(var t=g(this.h.keys()),n=t.next();!n.done;n=t.next())if(n=n.value,!e.has(n)){var i=this.h.get(n);i&&i.clear(),this.h.delete(n)}},d.Of=function(){return this.g.getStreams()};function mc(e,t){vc.set(e,t)}function Sh(e){return vc.get(e)}W("shaka.media.ClosedCaptionParser",bn),bn.findDecoder=function(){return rr},bn.unregisterDecoder=function(){rr=null},bn.registerDecoder=function(e){rr=e},bn.findParser=Sh,bn.unregisterParser=function(e){vc.delete(e)},bn.registerParser=mc;var vc=new Map,rr=null;function or(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=qt,this.scroll=wh}W("shaka.text.CueRegion",or);var qt=1;or.units={PX:0,PERCENTAGE:qt,LINES:2};var wh="";or.scrollMode={NONE:wh,UP:"up"};function Ah(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function kn(e,t){t=e.indexOf(t),-1<t&&e.splice(t,1)}function yc(e,t,n){if(n||(n=Ah),e.length!=t.length)return!1;t=t.slice(),e=g(e);for(var i=e.next(),r={};!i.done;r={bi:void 0},i=e.next()){if(r.bi=i.value,i=t.findIndex(function(o){return function(s){return n(o.bi,s)}}(r)),i==-1)return!1;t[i]=t[t.length-1],t.pop()}return t.length==0}function Wo(e,t,n){if(e===t)return!0;if(!e||!t)return e==t;if(n||(n=Ah),e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function Hr(e){this.h=e||"",this.g=0}function Gr(e){sr(e,/[ \t]+/gm)}function sr(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function ur(e){return e.g==e.h.length?null:(e=sr(e,/[^ \t\n]*/gm))?e[0]:null}function zo(e){if(e=sr(e,Lx),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:(Number(e[6])||0)/1e3+n+60*t+3600*(Number(e[1])||0)}function Kr(e){return e?zo(new Hr(e)):null}var Lx=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function Bn(e){function t(i){switch(typeof i){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return i;default:if(!i||ArrayBuffer.isView(i))return i;if(n.has(i))return null;var r=Array.isArray(i);if(i.constructor!=Object&&!r)return null;n.add(i);var o=r?[]:{},s;for(s in i)o[s]=t(i[s]);return r&&(o.length=i.length),o}}var n=new WeakSet;return t(e)}function ar(e){var t={},n;for(n in e)t[n]=e[n];return t}function Tc(e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++){var i=n.toString(),r=e[n];r!==void 0&&(r=Tc(r))&&t.push(i+":"+r)}e="["+t.join(",")+"]"}else if(typeof e=="function")e="";else if(e instanceof Object){for(n=Object.keys(e),n.sort(),t=[],n=g(n),i=n.next();!i.done;i=n.next())r=i.value,i=JSON.stringify(r),r=e[r],r!==void 0&&(r=Tc(r))&&t.push(i+":"+r);e="{"+t.join(",")+"}"}else e=JSON.stringify(e);return e}function Yo(e,t){var n=n===void 0?!1:n;return e=Yn(e),lr(e,t,n)}function lr(e,t,n){return e=Nx(e,n===void 0?!1:n),!t&&e.length?e[0]:(e=e.find(function(i){return t.split(",").includes(i.tagName)}))?e:null}function xc(e){return wc.has(e)?wc.get(e):""}function Nx(e,t){function n(o,s){s=s===void 0?!1:s;for(var u=[];e[r];)if(e.charCodeAt(r)==60){if(e.charCodeAt(r+1)===47){s=r+2,r=e.indexOf(">",r),s=e.substring(s,r);var a=s.indexOf(o);if(a==-1){var l=o.indexOf(".");0<l&&(a=s.indexOf(o.substring(0,l)))}if(a==-1)throw o=e.substring(0,r).split(`
`),Error(`Unexpected close tag
Line: `+(o.length-1)+`
Column: `+(o[o.length-1].length+1)+`
Char: `+e[r]);r+1&&(r+=1);break}else if(e.charCodeAt(r+1)===33){if(e.charCodeAt(r+2)==45){for(;r!==-1&&(e.charCodeAt(r)!==62||e.charCodeAt(r-1)!=45||e.charCodeAt(r-2)!=45||r==-1);)r=e.indexOf(">",r+1);r===-1&&(r=e.length)}else if(e.charCodeAt(r+2)===91&&e.charCodeAt(r+8)===91&&e.substr(r+3,5).toLowerCase()==="cdata"){a=e.indexOf("]]>",r),a==-1?(u.push(e.substr(r+9)),r=e.length):(u.push(e.substring(r+9,a)),r=a+3);continue}r++;continue}e:{l=s,r++;var c=i(),f={};for(a=[];e.charCodeAt(r)!==62&&e[r];){var p=e.charCodeAt(r);if(64<p&&91>p||96<p&&123>p){p=i();for(var h=e.charCodeAt(r);h&&h!==39&&h!==34&&!(64<h&&91>h||96<h&&123>h)&&h!==62;)r++,h=e.charCodeAt(r);var m=r+1;if(r=e.indexOf(e[r],m),m=e.slice(m,r),h===39||h===34){if(r===-1){if(l={tagName:c,attributes:f,children:a,parent:null},t)for(c=0;c<a.length;c++)typeof a[c]!="string"&&(a[c].parent=l);a=l;break e}}else m=null,r--;if(p.startsWith("xmlns:")){h=m;var y=p.split(":")[1];wc.set(h,y),Ac.set(y,h)}c==="tt"&&p==="xml:space"&&m==="preserve"&&(l=!0),f[p]=m}r++}for(e.charCodeAt(r-1)!==47?(r++,a=n(c,l)):r++,l={tagName:c,attributes:f,children:a,parent:null},c=a.length,f=0;f<c;f++)p=a[f],typeof p!="string"?t&&(p.parent=l):f==c-1&&p==`
`&&a.pop();a=l}if(u.push(a),typeof a=="string")break;a.tagName[0]==="?"&&a.children&&(u.push.apply(u,H(a.children)),a.children=[])}else a=r,r=e.indexOf("<",r)-1,r===-2&&(r=e.length),a=e.slice(a,r+1),s?0<a.length&&u.push(a):(u.length&&a.length==1&&a[0]==`
`||0<a.trim().length)&&u.push(a),r++;return u}function i(){for(var o=r;`\r
	>/= `.indexOf(e[r])===-1&&e[r];)r++;return e.slice(o,r)}var r=0;return n("")}function wu(e){return typeof e=="string"}function Eh(e){var t=[];if(!e.children)return[];e=g(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function Pe(e,t){var n=[];if(!e.children)return[];e=g(e.children);for(var i=e.next();!i.done;i=e.next())i=i.value,i.tagName===t&&n.push(i);return n}function ot(e){return typeof e=="string"?Gt(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:Gt(e))}function $t(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=ot(e))&&(e=e.trim()),e):null}function Fn(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=g(e.children);for(var i=e.next();!i.done;i=e.next())Fn(i.value,t,n)}return n}function Ye(e,t){return e=Pe(e,t),e.length!=1?null:e[0]}function Dn(e,t,n){return e=Ih(e,t,n),e.length!=1?null:e[0]}function se(e,t,n,i){i=i===void 0?null:i;var r=null;return e=e.attributes[t],e!=null&&(r=n(e)),r??i}function ui(e,t,n){return t=xc(t),e.attributes[t+":"+n]||null}function Ih(e,t,n){var i=xc(t);if(t=[],e.children)for(n=i?i+":"+n:n,e=g(e.children),i=e.next();!i.done;i=e.next())(i=i.value)&&i.tagName===n&&t.push(i);return t}function qn(e,t,n){t=g(t);for(var i=t.next();!i.done;i=t.next())if(i=ui(e,i.value,n))return i;return null}function ai(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function $n(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$","i").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function Au(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function yt(e){return e=Number(e),e%1===0?e:null}function li(e){return e=Number(e),e%1===0&&0<e?e:null}function wt(e){return e=Number(e),e%1===0&&0<=e?e:null}function Eu(e){return e=Number(e),isNaN(e)?null:e}function Iu(e){return e?e.toLowerCase()==="true":!1}function jx(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function Mu(e){var t=[];e=Gt(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/),e=g(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=n.match(/^([\w]+)/);if(i){var r=n.match(/(@id='(.*?)')/),o=n.match(/(@t='(\d+)')/),s=n.match(/(@n='(\d+)')/),u=n.match(/\[(\d+)\]/);t.push({name:i[0],id:r?r[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:o?Number(o[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:s?Number(s[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:u?Number(u[1])-1:null,sc:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].sc=n.slice(1))}return t}function Mh(e,t){var n=Mu(t.attributes.sel||"");if(n.length){var i=n[n.length-1],r=t.attributes.pos||null;n=i.position,n==null&&(i.t!==null&&(n=Ch(e,"t",i.t)),i.n!==null&&(n=Ch(e,"n",i.n))),n===null?n=r==="prepend"?0:e.length:r==="prepend"?--n:r==="after"&&++n,r=t.tagName,(i=i.sc)&&e[n]?kh(e[n],r,i,$t(t)||""):(r!=="remove"&&r!=="replace"||e.splice(n,1),r!=="add"&&r!=="replace"||e.splice.apply(e,[n,0].concat(H(t.children))))}}function Ch(e,t,n){var i=0;e=g(e);for(var r=e.next();!r.done;r=e.next()){if(Number(r.value.attributes[t])===n)return i;i++}return null}function kh(e,t,n,i){t==="remove"?delete e.attributes[n]:(t==="add"||t==="replace")&&(e.attributes[n]=i)}function Dh(e){var t="",n=e.tagName.split(":");0<n.length&&(t=n[0],t=Ac.has(t)?Ac.get(t):""),t=document.createElementNS(t,e.tagName);for(var i in e.attributes)t.setAttribute(i,e.attributes[i]);for(e=g(e.children),i=e.next();!i.done;i=e.next())i=i.value,n=void 0,typeof i=="string"?n=new Text(i):n=Dh(i),t.appendChild(n);return t}function Sc(e){if(!e)return null;var t={tagName:e.tagName,attributes:ar(e.attributes),children:[],parent:null};e=g(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n=="string"||(n=Sc(n),n.parent=t),t.children.push(n);return t}var wc=new Map,Ac=new Map;function Be(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new or,this.position=null,this.positionAlign=Du,this.size=0,this.textAlign=Qn,this.direction=Qo,this.writingMode=cr,this.lineInterpretation=Jo,this.line=null,this.lineHeight="",this.lineAlign=fr,this.displayAlign=$o,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Oh,this.fontStyle=Mc,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={Hc:32,rows:15}}function Rh(e,t){return e=new Be(e,t,""),e.lineBreak=!0,e}Be.prototype.clone=function(){var e=new Be(0,0,""),t;for(t in this)e[t]=this[t],Array.isArray(e[t])&&(e[t]=e[t].slice());return e};function Cu(e,t){if(e.payload!=t.payload||!(.001>Math.abs(e.startTime-t.startTime)&&.001>Math.abs(e.endTime-t.endTime)))return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!Wo(e.nestedCues,t.nestedCues,Cu))return!1}else if(n=="region"||n=="cellResolution"){for(var i in e[n])if(e[n][i]!=t[n][i])return!1}else if(Array.isArray(e[n])){if(!Wo(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}function ku(e,t){t=t===void 0?new Map:t;var n=e.payload;if(n.includes("<")){t.size===0&&Ph(t);var i=n;n=[];for(var r=-1,o=0;o<i.length;o++)i[o]==="<"?r=o+1:i[o]===">"&&0<r&&(r=i.substr(r,o-r),r.match(Ox)&&n.push(r),r=-1);for(n=g(n),o=n.next();!o.done;o=n.next())o=o.value,i=i.replace("<"+o+">",'<div time="'+o+'">'),i+="</div>";e:{o=i,r=[];var s=-1;n="",i=!1;for(var u=0;u<o.length;u++)if(o[u]==="/"){var a=o.indexOf(">",u);if(a===-1){n=o;break e}if((a=o.substring(u+1,a))&&a=="v"){i=!0;var l=null;if(r.length&&(l=r[r.length-1]),l){if(l===a)n+="/"+a+">";else{if(!l.startsWith("v")){n+=o[u];continue}n+="/"+l+">"}u+=a.length+1}else n+=o[u]}else n+=o[u]}else o[u]==="<"?(s=u+1,o[s]!="v"&&(s=-1)):o[u]===">"&&0<s&&(r.push(o.substr(s,u-s)),s=-1),n+=o[u];for(o=g(r),r=o.next();!r.done;r=o.next())r=r.value,s=r.replace(" ",".voice-"),n=n.replace("<"+r+">","<"+s+">"),n=n.replace("</"+r+">","</"+s+">"),i||(n+="</"+s+">")}n=Ux(n),e.payload="";try{var c=lr("<span>"+n+"</span>","span")}catch{}if(c)if(c=c.children,c.length!=1||c[0].tagName)for(c=g(c),n=c.next();!n.done;n=c.next())Lh(n.value,e,t);else e.payload=Gt(n);else e.payload=Gt(n)}else e.payload=Gt(n)}function Ph(e){for(var t=g(Object.entries(jh)),n=t.next();!n.done;n=t.next()){var i=g(n.value);n=i.next().value,i=i.next().value;var r=new Be(0,0,"");r.color=i,e.set("."+n,r)}for(t=g(Object.entries(Uh)),n=t.next();!n.done;n=t.next())i=g(n.value),n=i.next().value,i=i.next().value,r=new Be(0,0,""),r.backgroundColor=i,e.set("."+n,r)}function Ux(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,function(r){return t[r]||""}):e||""}function Lh(e,t,n){var i=t.clone();if(i.nestedCues=[],i.payload="",i.rubyTag="",i.line=null,i.region=new or,i.position=null,i.size=0,i.textAlign=Qn,e.tagName)for(var r=g(e.tagName.split(/(?=[ .])+/g)),o=r.next();!o.done;o=r.next()){var s=o=o.value;if(s.startsWith(".voice-")){var u=s.split("-").pop();s='v[voice="'+u+'"]',n.has(s)||(s="v[voice="+u+"]")}switch(n.has(s)&&(u=i,s=n.get(s))&&(u.backgroundColor=qo(s.backgroundColor,u.backgroundColor),u.color=qo(s.color,u.color),u.fontFamily=qo(s.fontFamily,u.fontFamily),u.fontSize=qo(s.fontSize,u.fontSize),u.textShadow=qo(s.textShadow,u.textShadow),u.fontWeight=s.fontWeight,u.fontStyle=s.fontStyle,u.opacity=s.opacity,u.rubyTag=s.rubyTag,u.textCombineUpright=s.textCombineUpright,u.wrapLine=s.wrapLine),o){case"br":i=Rh(i.startTime,i.endTime),t.nestedCues.push(i);return;case"b":i.fontWeight=Xr;break;case"i":i.fontStyle=Wr;break;case"u":i.textDecoration.push(ci);break;case"font":(o=e.attributes.color)&&(i.color=o);break;case"div":if(o=e.attributes.time,!o)break;(o=Kr(o))&&(i.startTime=o);break;case"ruby":case"rp":case"rt":i.rubyTag=o}}if(r=e.children,wu(e)||r.length==1&&wu(r[0]))for(n=ot(e).split(`
`),e=!0,n=g(n),r=n.next();!r.done;r=n.next())r=r.value,e||(e=Rh(i.startTime,i.endTime),t.nestedCues.push(e)),0<r.length&&(e=i.clone(),e.payload=Gt(r),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(i),t=g(r),e=t.next();!e.done;e=t.next())Lh(e.value,i,n)}function qo(e,t){return e&&0<e.length?e:t}W("shaka.text.Cue",Be),Be.parseCuePayload=ku,Be.equal=Cu,Be.prototype.clone=Be.prototype.clone;var Du="auto";Be.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Du};var Qn="center",Ec={LEFT:"left",RIGHT:"right",CENTER:Qn,START:"start",END:"end"};Be.textAlign=Ec;var $o="after",Nh={BEFORE:"before",CENTER:"center",AFTER:$o};Be.displayAlign=Nh;var Qo="ltr";Be.direction={HORIZONTAL_LEFT_TO_RIGHT:Qo,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var cr="horizontal-tb";Be.writingMode={HORIZONTAL_TOP_TO_BOTTOM:cr,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Jo=0;Be.lineInterpretation={LINE_NUMBER:Jo,PERCENTAGE:1};var fr="start",Ic={CENTER:"center",START:fr,END:"end"};Be.lineAlign=Ic;var jh={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};Be.defaultTextColor=jh;var Uh={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};Be.defaultTextBackgroundColor=Uh;var Oh=400,Xr=700;Be.fontWeight={NORMAL:Oh,BOLD:Xr};var Mc="normal",Wr="italic",_h={NORMAL:Mc,ITALIC:Wr,OBLIQUE:"oblique"};Be.fontStyle=_h;var ci="underline";Be.textDecoration={UNDERLINE:ci,LINE_THROUGH:"lineThrough",OVERLINE:"overline"};var Ox=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function Li(){}Li.prototype.destroy=function(){};function fi(e,t,n){Cc.set(e.toLowerCase().split(";")[0]+"-"+n,{priority:n,rf:t})}function dr(e,t){for(var n=e.toLowerCase().split(";")[0],i=g([bh,Dc,kc,Ni]),r=i.next();!r.done;r=i.next())if(r=Cc.get(n+"-"+r.value)){var o=r.rf(),s=o.isSupported(e,t);if(o.destroy(),s)return r.rf}return null}W("shaka.transmuxer.TransmuxerEngine",Li),Li.findTransmuxer=dr,Li.unregisterTransmuxer=function(e,t){Cc.delete(e.toLowerCase().split(";")[0]+"-"+t)},Li.registerTransmuxer=fi,Li.prototype.destroy=Li.prototype.destroy;var Cc=new Map,Ni=1,kc=2,Dc=3,bh=4;Li.PluginPriority={FALLBACK:Ni,PREFERRED_SECONDARY:kc,PREFERRED:Dc,APPLICATION:bh};function Rc(){}function it(e,t){var n=e;return t&&!Ui.includes(e)&&(n+='; codecs="'+t+'"'),n}function Zo(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Pc(e,t,n){var i=it(e,t);return t=Zo(e,t),dr(t)?(e=dr(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?i.replace("video","audio"):i,n}function Ru(e){return e.split(";")[0].split("/")[1]}function Mt(e){var t=Bh(e);switch(e=t[0].toLowerCase(),t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):case e==="ac3":case e==="ac-3":return"ac-3";case(e==="mp4a"&&t==="a6"):case e==="eac3":case e==="ec-3":return"ec-3";case e==="ac-4":return"ac-4";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="vp09":case e==="vp9":return"vp9";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="vvc1":case e==="vvi1":return"vvc";case e==="dvh1":case e==="dvhe":return t&&t.startsWith("05")?"dovi-p5":"dovi-hevc";case e==="dvav":case e==="dva1":return"dovi-avc";case e==="dav1":return"dovi-av1";case e==="dvc1":case e==="dvi1":return"dovi-vvc"}return e}function ji(e){var t=[];e=g(e.split(","));for(var n=e.next();!n.done;n=e.next())n=Bh(n.value),t.push(n[0]);return t.sort().join(",")}function Qt(e){return e.split(";")[0]}function Jt(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function Lc(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function Bh(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}W("shaka.util.MimeUtils",Rc),Rc.getFullTypeWithAllCodecs=Zo,Rc.getFullType=it,new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");var Ui=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function di(e){this.i=null,this.j=e,this.B=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.C="",this.A=function(){},this.o=new Map}function At(e,t){ns.set(e,t)}function es(e){return ns.get(e)}function ts(e){return ns.has(e)?!0:e=="application/cea-608"||e=="application/cea-708"?!!rr:!1}di.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()};function _x(e,t,n,i,r){var o,s,u,a,l,c,f;return k(function(p){if(p.g==1)return T(p,Promise.resolve(),2);if(!e.i||!e.j)return p.return();if(n==null||i==null)return e.i.parseInit(le(t)),p.return();for(o=e.B?n:e.s,s={periodStart:e.s,segmentStart:n,segmentEnd:i,vttOffset:o},u=e.i.parseMedia(le(t),s,r,[]),a=g(u),l=a.next();!l.done;l=a.next())c=l.value,e.A(c,r||null,s);f=u.filter(function(h){return h.startTime>=e.l&&h.startTime<e.m}),e.j.append(f),e.g==null&&(e.g=Math.max(n,e.l)),e.h=Math.min(i,e.m),K(p)})}di.prototype.remove=function(e,t){var n=this;return k(function(i){if(i.g==1)return T(i,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||n.g==null||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),K(i)})};function bx(e,t,n){e.l=t,e.m=n}function Fh(e,t,n){if(e.C=t,t=e.o.get(t))for(var i=g(t.keys()),r=i.next();!r.done;r=i.next())(r=t.get(r.value).filter(function(o){return o.endTime<=n}))&&e.j.append(r)}function Vh(e,t,n){t.startTime+=n,t.endTime+=n,t=g(t.nestedCues);for(var i=t.next();!i.done;i=t.next())Vh(e,i.value,n)}function Bx(e,t,n,i,r){var o=n+" "+i,s=new Map;t=g(t);for(var u=t.next();!u.done;u=t.next()){var a=u.value;u=a.stream,a=a.cue,s.has(u)||s.set(u,new Map),s.get(u).has(o)||s.get(u).set(o,[]),Vh(e,a,r),a.startTime>=e.l&&a.startTime<e.m&&(s.get(u).get(o).push(a),u==e.C&&e.j.append([a]))}for(r=g(s.keys()),o=r.next();!o.done;o=r.next())for(o=o.value,e.o.has(o)||e.o.set(o,new Map),t=g(s.get(o).keys()),u=t.next();!u.done;u=t.next())u=u.value,a=s.get(o).get(u),e.o.get(o).set(u,a);e.g=e.g==null?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(i,e.m))}W("shaka.text.TextEngine",di),di.prototype.destroy=di.prototype.destroy,di.findParser=es,di.unregisterParser=function(e){ns.delete(e)},di.registerParser=At;var ns=new Map;function is(e){this.h=e,this.g=null}is.prototype.ha=function(e){var t=this;this.stop();var n=!0,i=null;return this.g=function(){B.clearTimeout(i),n=!1},i=B.setTimeout(function(){n&&t.h()},1e3*e),this},is.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function ve(e){this.h=e,this.g=null}ve.prototype.Gb=function(){return this.stop(),this.h(),this},ve.prototype.ha=function(e){var t=this;return this.stop(),this.g=new is(function(){t.h()}).ha(e),this},ve.prototype.Ga=function(e){var t=this;return this.stop(),this.g=new is(function(){t.g.ha(e),t.h()}).ha(e),this},ve.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},W("shaka.util.Timer",ve),ve.prototype.stop=ve.prototype.stop,ve.prototype.tickEvery=ve.prototype.Ga,ve.prototype.tickAfter=ve.prototype.ha,ve.prototype.tickNow=ve.prototype.Gb;function Fx(e,t){return e.concat(t)}function Vx(){}function Oi(e){return e!=null}function rs(e,t){return Promise.race([t,new Promise(function(n,i){new ve(i).ha(e)})])}function Rn(){}function zr(e,t){return e=Ne(e),t=Ne(t),e.split("-")[0]==t.split("-")[0]}function os(e,t){return e=Ne(e),t=Ne(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function Nc(e,t){return e=Ne(e),t=Ne(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function Ne(e){e=g(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=g(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=Hh.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function pr(e,t){return e=Ne(e),t=Ne(t),t==e?4:os(t,e)?3:Nc(t,e)?2:os(e,t)?1:0}function Pu(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=Hh.get(e)||e}function jc(e){return e.language?Ne(e.language):e.audio&&e.audio.language?Ne(e.audio.language):e.video&&e.video.language?Ne(e.video.language):"und"}function Lu(e,t){e=Ne(e);var n=new Set;t=g(t);for(var i=t.next();!i.done;i=t.next())n.add(Ne(i.value));for(t=g(n),i=t.next();!i.done;i=t.next())if(i=i.value,i==e)return i;for(t=g(n),i=t.next();!i.done;i=t.next())if(i=i.value,os(i,e))return i;for(t=g(n),i=t.next();!i.done;i=t.next())if(i=i.value,Nc(i,e))return i;for(n=g(n),t=n.next();!t.done;t=n.next())if(t=t.value,os(e,t))return t;return null}W("shaka.util.LanguageUtils",Rn),Rn.findClosestLocale=Lu,Rn.getLocaleForVariant=jc,Rn.getLocaleForText=function(e){return Ne(e.language||"und")},Rn.getBase=Pu,Rn.relatedness=pr,Rn.areSiblings=function(e,t){var n=Pu(e),i=Pu(t);return e!=n&&t!=i&&n==i},Rn.normalize=Ne,Rn.isSiblingOf=Nc,Rn.isParentOf=os,Rn.areLanguageCompatible=zr,Rn.areLocaleCompatible=function(e,t){return e=Ne(e),t=Ne(t),e==t};var Hh=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Gh(){}function Kh(e,t,n,i,r){function o(x){var S=String(x.width||"")+String(x.height||"")+String(Math.round(x.frameRate||0))+(x.hdr||"")+x.fastSwitching;return x.dependencyStream&&(S+=x.dependencyStream.baseOriginalId||""),S}function s(x){var S=x.language+(x.channelsCount||0)+(x.audioSamplingRate||0)+x.roles.join(",")+x.label+x.groupId+x.fastSwitching;return x.dependencyStream&&(S+=x.dependencyStream.baseOriginalId||""),S}if(r.length){var u=e.textStreams;r=g(r);for(var a=r.next(),l={};!a.done;l={rh:void 0},a=r.next())if(l.rh=a.value,a=u.filter(function(x){return function(S){return!!(S.codecs.startsWith(x.rh)||S.mimeType.startsWith(x.rh))}}(l)),a.length){u=a;break}e.textStreams=u}if(u=e.variants,(t.length||n.length)&&(u=Hx(u,t,n)),i.length){for(t=new vu,n=g(u),u=n.next();!u.done;u=n.next())u=u.value,t.push(String(u.video.width||0),u);var c=[];t.forEach(function(x,S){x=0;var w=[];S=g(S);for(var A=S.next(),D={};!A.done;D={Lf:void 0},A=S.next())D.Lf=A.value,A=i.filter(function(I){return function(E){return I.Lf.decodingInfos[0][E]}}(D)).length,A>x?(x=A,w=[D.Lf]):A==x&&w.push(D.Lf);c.push.apply(c,H(w))}),u=c}for(n=new Set,t=new Set,u=g(u),r=u.next();!r.done;r=u.next())r=r.value,r.audio&&n.add(r.audio),r.video&&t.add(r.video);u=Array.from(n).sort(function(x,S){return x.bandwidth-S.bandwidth});var f=[];for(n=new Map,u=g(u),r=u.next();!r.done;r=u.next()){if(r=r.value,a=s(r),l=n.get(a)||[],l.length){var p=l[l.length-1],h=Mt(p.codecs),m=Mt(r.codecs);h!=m||r.bandwidth&&p.bandwidth&&!(r.bandwidth>p.bandwidth)||(l.push(r),f.push(r.id))}else l.push(r),f.push(r.id);n.set(a,l)}var y={vp8:1,avc:1,"dovi-avc":.95,vp9:.9,vp09:.9,hevc:.85,"dovi-hevc":.8,"dovi-p5":.75,av01:.7,"dovi-av1":.65,vvc:.6};u=Array.from(t).sort(function(x,S){if(!x.bandwidth||!S.bandwidth||x.bandwidth==S.bandwidth){if(x.codecs&&S.codecs&&x.codecs!=S.codecs&&x.width==S.width){var w=Mt(x.codecs),A=Mt(S.codecs);if(w!=A)return(y[w]||1)-(y[A]||1)}return x.width-S.width}return x.bandwidth-S.bandwidth}),t=ir();var v=[];for(n=new Map,u=g(u),r=u.next();!r.done;r=u.next()){if(r=r.value,a=o(r),l=n.get(a)||[],l.length){if(p=l[l.length-1],!t&&(h=Mt(p.codecs),m=Mt(r.codecs),h!==m))continue;h=Mt(p.codecs),m=Mt(r.codecs),h!=m||r.bandwidth&&p.bandwidth&&!(r.bandwidth>p.bandwidth)||(l.push(r),v.push(r.id))}else l.push(r),v.push(r.id);n.set(a,l)}e.variants=e.variants.filter(function(x){var S=x.audio;return x=x.video,!(S&&!f.includes(S.id)||x&&!v.includes(x.id))})}function Hx(e,t,n){t=g(t);for(var i=t.next(),r={};!i.done;r={videoCodec:void 0},i=t.next())if(r.videoCodec=i.value,i=e.filter(function(o){return function(s){return s.video&&s.video.codecs.startsWith(o.videoCodec)}}(r)),i.length){e=i;break}for(n=g(n),t=n.next(),i={};!t.done;i={audioCodec:void 0},t=n.next())if(i.audioCodec=t.value,t=e.filter(function(o){return function(s){return s.audio&&s.audio.codecs.startsWith(o.audioCodec)}}(i)),t.length){e=t;break}return e}function Gx(e,t,n){e.variants=e.variants.filter(function(i){return Nu(i,t,n)})}function Nu(e,t,n){function i(u,a,l){return u>=a&&u<=l}var r=e.video;if(r&&r.width&&r.height){var o=r.width,s=r.height;if(s>o&&(s=g([s,o]),o=s.next().value,s=s.next().value),!i(o,t.minWidth,Math.min(t.maxWidth,n.width))||!i(s,t.minHeight,Math.min(t.maxHeight,n.height))||!i(r.width*r.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!i(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function Kx(e,t,n,i){return n=n===void 0?[]:n,i=i===void 0?{}:i,k(function(r){return r.g==1?T(r,Xh(e,t,0<t.offlineSessionIds.length,n,i),2):(Yx(t),T(r,qx(t),0))})}function Xh(e,t,n,i,r){var o,s;return k(function(u){if(u.g==1)return ye().Mi()&&Xx(t.variants),T(u,zh(t.variants,n,!1,i),2);o=null,e&&(s=e.h)&&(o=s.keySystem),t.variants=t.variants.filter(function(a){var l=Wx(a,o,r);if(!l){var c=[];a.audio&&c.push(Zh(a.audio)),a.video&&c.push(Zh(a.video))}return l}),K(u)})}function Xx(e){var t=new Map().set("dvav","avc3").set("dva1","avc1").set("dvhe","hev1").set("dvh1","hvc1").set("dvc1","vvc1").set("dvi1","vvi1"),n=new Set;e=g(e);for(var i=e.next();!i.done;i=e.next())i=i.value,i.video&&n.add(i.video);for(n=g(n),e=n.next();!e.done;e=n.next()){e=e.value,i=g(t);for(var r=i.next();!r.done;r=i.next()){var o=g(r.value);if(r=o.next().value,o=o.next().value,e.codecs.includes(r)){e.codecs=e.codecs.replace(r,o);break}}}}function Wx(e,t,n){if(!e.decodingInfos.some(function(a){return!(!a.supported||t&&(a=a.keySystemAccess)&&(n[a.keySystem]||a.keySystem)!=t)}))return!1;var i=ye(),r=i.Lb()==="Xbox";i=i.La()==="MOBILE"&&i.Ea()==="GECKO";var o=e.video,s=o&&o.width||0,u=o&&o.height||0;return r&&o&&(1920<s||1080<u)&&(o.codecs.includes("avc1.")||o.codecs.includes("avc3."))||(r=o&&o.dependencyStream)&&!yh(r)?!1:(e=e.audio,!(i&&e&&e.encrypted&&e.codecs.toLowerCase().includes("opus")||e&&e.dependencyStream))}function Wh(e,t){var n,i,r,o,s,u,a;return k(function(l){if(l.g==1){for(n=function(c,f){if(c){var p=ar(c);return p.supported=c.supported&&f.supported,p.powerEfficient=c.powerEfficient&&f.powerEfficient,p.smooth=c.smooth&&f.smooth,f.keySystemAccess&&!p.keySystemAccess&&(p.keySystemAccess=f.keySystemAccess),p}return f},i=null,r=[],o=g(t),s=o.next(),u={};!s.done;u={cache:void 0,Ie:void 0},s=o.next())a=s.value,u.Ie=Tc(a),u.cache=bu,u.cache.has(u.Ie)?i=n(i,u.cache.get(u.Ie)):r.push(zx(a).then(function(c){return function(f){var p=null;f=g(f||[]);for(var h=f.next();!h.done;h=f.next())p=n(p,h.value);p&&(c.cache.set(c.Ie,p),i=n(i,p))}}(u)));return T(l,Promise.all(r),2)}i&&e.decodingInfos.push(i),K(l)})}function zx(e){var t=[""];e.video&&(t=Jt(e.video.contentType).split(","));var n=[""];e.audio&&(n=Jt(e.audio.contentType).split(","));var i=[];t=g(t);for(var r=t.next();!r.done;r=t.next()){r=r.value;for(var o=g(n),s=o.next(),u={};!s.done;u={Ic:void 0},s=o.next())s=s.value,u.Ic=Bn(e),e.video&&(u.Ic.video.contentType=it(Qt(u.Ic.video.contentType),r)),e.audio&&(u.Ic.audio.contentType=it(Qt(u.Ic.audio.contentType),s)),i.push(new Promise(function(a){return function(l,c){(ye().La()=="MOBILE"?rs(5,navigator.mediaCapabilities.decodingInfo(a.Ic)):navigator.mediaCapabilities.decodingInfo(a.Ic)).then(function(f){l(f)}).catch(c)}}(u)))}return Promise.all(i).catch(function(){return JSON.stringify(e),null})}function zh(e,t,n,i){var r,o,s,u,a,l,c,f,p,h,m,y,v,x,S,w,A,D;return k(function(I){switch(I.g){case 1:if(e.some(function(E){return E.decodingInfos.length}))return I.return();r=g(i),o=r.next(),s={};case 2:if(o.done){I.u(4);break}s.ri=o.value,u=!1,a=g(e),l=a.next();case 5:if(l.done){I.u(7);break}c=l.value,f=Yh(c,t,n).filter(function(E){return function(M){return M=M[0],(M.keySystemConfiguration&&M.keySystemConfiguration.keySystem)===E.ri}}(s)),p=g(f),h=p.next();case 8:if(h.done){I.u(10);break}return m=h.value,T(I,Wh(c,m),9);case 9:h=p.next(),I.u(8);break;case 10:c.decodingInfos.length&&(u=!0),l=a.next(),I.u(5);break;case 7:if(u)return I.return();s={ri:void 0},o=r.next(),I.u(2);break;case 4:y=g(e),v=y.next();case 12:if(v.done){I.u(0);break}x=v.value,S=Yh(x,t,n).filter(function(E){return E=E[0],E=E.keySystemConfiguration&&E.keySystemConfiguration.keySystem,!E||!i.includes(E)}),w=g(S),A=w.next();case 15:if(A.done){v=y.next(),I.u(12);break}return D=A.value,T(I,Wh(x,D),16);case 16:A=w.next(),I.u(15)}})}function Yh(e,t,n){var i=e.audio,r=e.video,o=[],s=[];if(r)for(var u=g(r.fullMimeTypes),a=u.next();!a.done;a=u.next()){a=a.value;var l=Jt(a);if(l.includes(",")&&!i){var c=l.split(","),f=Qt(a);l=Vr("video",c),c=Vr("audio",c),c=ju(c,f),f=Pc(f,c,"audio"),s.push({contentType:f,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(l=qh(l),a={contentType:Pc(Qt(a),l,"video"),width:r.width||64,height:r.height||64,bitrate:r.bandwidth||e.bandwidth||1,framerate:r.frameRate||1},r.hdr)switch(r.hdr){case"SDR":a.transferFunction="srgb";break;case"PQ":a.transferFunction="pq";break;case"HLG":a.transferFunction="hlg"}r.colorGamut&&(a.colorGamut=r.colorGamut),o.push(a)}if(i)for(u=g(i.fullMimeTypes),a=u.next();!a.done;a=u.next())l=a.value,a=Qt(l),l=ju(Jt(l),a),a=Pc(a,l,"audio"),s.push({contentType:a,channels:i.channelsCount||2,bitrate:i.bandwidth||e.bandwidth||1,samplerate:i.audioSamplingRate||1,spatialRendering:i.spatialAudio});for(u=[],o.length==0&&o.push(null),s.length==0&&s.push(null),o=g(o),a=o.next();!a.done;a=o.next())for(a=a.value,l=g(s),f=l.next();!f.done;f=l.next())f=f.value,c={type:n?"file":"media-source"},a&&(c.video=a),f&&(c.audio=f),u.push(c);if(s=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!s.length)return[u];for(e=[],n=new Map,s=g(s),o=s.next();!o.done;o=s.next())o=o.value,n.get(o.keySystem)||n.set(o.keySystem,[]),n.get(o.keySystem).push(o);for(s=t?"required":"optional",t=t?["persistent-license"]:["temporary"],o=g(n.keys()),a=o.next();!a.done;a=o.next()){for(a=a.value,f=n.get(a),l=new Map,f=g(f),c=f.next();!c.done;c=f.next()){c=c.value;var p=c.videoRobustness+","+c.audioRobustness;l.get(p)||l.set(p,[]),l.get(p).push(c)}for(l=g(l.values()),f=l.next();!f.done;f=l.next()){f=f.value,c=[],p=g(u);for(var h=p.next();!h.done;h=p.next()){h=Object.assign({},h.value);for(var m={keySystem:a,initDataType:"cenc",persistentState:s,distinctiveIdentifier:"optional",sessionTypes:t},y=g(f),v=y.next();!v.done;v=y.next()){if(v=v.value,v.initData&&v.initData.length){for(var x=new Set,S=g(v.initData),w=S.next();!w.done;w=S.next())x.add(w.value.initDataType);m.initDataType=v.initData[0].initDataType}v.distinctiveIdentifierRequired&&(m.distinctiveIdentifier="required"),v.persistentStateRequired&&(m.persistentState="required"),v.sessionType&&(m.sessionTypes=[v.sessionType]),i&&(m.audio?(v.encryptionScheme&&(m.audio.encryptionScheme=m.audio.encryptionScheme||v.encryptionScheme),m.audio.robustness=m.audio.robustness||v.audioRobustness):(m.audio={robustness:v.audioRobustness},v.encryptionScheme&&(m.audio.encryptionScheme=v.encryptionScheme)),m.audio.robustness==""&&delete m.audio.robustness),r&&(m.video?(v.encryptionScheme&&(m.video.encryptionScheme=m.video.encryptionScheme||v.encryptionScheme),m.video.robustness=m.video.robustness||v.videoRobustness):(m.video={robustness:v.videoRobustness},v.encryptionScheme&&(m.video.encryptionScheme=v.encryptionScheme)),m.video.robustness==""&&delete m.video.robustness)}h.keySystemConfiguration=m,c.push(h)}e.push(c)}}return e}function ju(e,t){var n=ye();return e.toLowerCase()=="flac"?n.Ea()!="WEBKIT"?"flac":"fLaC":e.toLowerCase()==="opus"?n.Ea()!="WEBKIT"?"opus":Ru(t)=="mp4"?"Opus":"opus":e.toLowerCase()=="ac-3"&&n.ae()?"ec-3":e}function qh(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function Yx(e){e.textStreams=e.textStreams.filter(function(t){return t=it(t.mimeType,t.codecs),ts(t)})}function qx(e){var t,n,i,r,o,s,u;return k(function(a){switch(a.g){case 1:t=[],n=g(e.imageStreams),i=n.next();case 2:if(i.done){a.u(4);break}if(r=i.value,o=r.mimeType,o=="application/mp4"&&r.codecs=="mjpg"&&(o="image/jpg"),Bu.has(o)){a.u(5);break}if(s=Jx.get(o),!s){Bu.set(o,!1),a.u(5);break}return T(a,$x(s),7);case 7:u=a.h,Bu.set(o,u);case 5:Bu.get(o)&&t.push(r),i=n.next(),a.u(2);break;case 4:e.imageStreams=t,K(a)}})}function $x(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function hr(e){var t=e.audio,n=e.video,i=t?t.mimeType:null,r=n?n.mimeType:null,o=t?t.codecs:null,s=n?n.codecs:null,u=t?t.groupId:null,a=[];n&&a.push(n.mimeType),t&&a.push(t.mimeType),a=a[0]||null;var l=[];t&&l.push(t.kind),n&&l.push(n.kind),l=l[0]||null;var c=new Set;if(t)for(var f=g(t.roles),p=f.next();!p.done;p=f.next())c.add(p.value);if(n)for(f=g(n.roles),p=f.next();!p.done;p=f.next())c.add(p.value);if(e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:l,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:a,audioMimeType:i,videoMimeType:r,codecs:"",audioCodec:o,videoCodec:s,primary:e.primary,roles:Array.from(c),audioRoles:null,forced:!1,videoId:null,audioId:null,audioGroupId:u,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null,(i=n.dependencyStream)&&(e.width=i.width||e.width,e.height=i.height||e.height,e.videoCodec=i.codecs||e.videoCodec),s.includes(","))){e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.spatialAudio=n.spatialAudio,e.originalLanguage=n.originalLanguage,e.audioMimeType=r,n=s.split(",");try{e.videoCodec=Vr("video",n),e.audioCodec=Vr("audio",n)}catch{}}return t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage,t=t.dependencyStream)&&(e.audioCodec=t.codecs||e.audioCodec),t=[],e.videoCodec&&t.push(e.videoCodec),e.audioCodec&&t.push(e.audioCodec),e.codecs=t.join(", "),e}function gr(e){return{id:e.id,active:!1,type:he,bandwidth:e.bandwidth||0,language:e.language,label:e.label,kind:e.kind||null,mimeType:e.mimeType,codecs:e.codecs||null,primary:e.primary,roles:e.roles,accessibilityPurpose:e.accessibilityPurpose,forced:e.forced,originalTextId:e.originalId,originalLanguage:e.originalLanguage}}function Uc(e){var t=e.width||null,n=e.height||null,i=null;e.segmentIndex&&(i=Hn(e.segmentIndex));var r=e.tilesLayout;return i&&(r=i.tilesLayout||r),r&&t!=null&&(t/=Number(r.split("x")[0])),r&&n!=null&&(n/=Number(r.split("x")[1])),{id:e.id,type:"image",bandwidth:e.bandwidth||0,width:t,height:n,mimeType:e.mimeType,codecs:e.codecs||null,tilesLayout:r||null,originalImageId:e.originalId}}function Uu(e){return e.__shaka_id||(e.__shaka_id=Qx++),e.__shaka_id}function $h(e){var t={id:Uu(e),active:e.mode!="disabled",type:he,bandwidth:0,language:Ne(e.language||"und"),label:e.label,kind:e.kind,mimeType:null,codecs:null,primary:!1,roles:[],accessibilityPurpose:null,forced:e.kind=="forced",originalTextId:e.id,originalLanguage:e.language};return e.kind=="captions"&&(t.mimeType="unknown"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),t}function Ou(e,t){var n=e?e.language:null;if(n={id:Uu(e||t),active:e?e.enabled:t.selected,type:"variant",bandwidth:0,language:Ne(n||"und"),label:e?e.label:null,kind:e?e.kind:null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:e?e.kind=="main":!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,audioGroupId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:t?t.id:null,originalAudioId:e?e.id:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:n},e&&e.kind&&(n.roles=[e.kind],n.audioRoles=[e.kind]),e&&e.configuration&&(e.configuration.codec&&(n.audioCodec=e.configuration.codec,n.codecs=n.audioCodec),e.configuration.bitrate&&(n.audioBandwidth=e.configuration.bitrate,n.bandwidth+=n.audioBandwidth),e.configuration.sampleRate&&(n.audioSamplingRate=e.configuration.sampleRate),e.configuration.numberOfChannels&&(n.channelsCount=e.configuration.numberOfChannels)),t&&t.configuration&&(t.configuration.codec&&(n.videoCodec=t.configuration.codec,n.codecs=n.codecs?n.codecs+(","+n.videoCodec):n.videoCodec),t.configuration.bitrate&&(n.videoBandwidth=t.configuration.bitrate,n.bandwidth+=n.videoBandwidth),t.configuration.framerate&&(n.frameRate=t.configuration.framerate),t.configuration.width&&(n.width=t.configuration.width),t.configuration.height&&(n.height=t.configuration.height),t.configuration.colorSpace&&t.configuration.colorSpace.transfer))switch(t.configuration.colorSpace.transfer){case"pq":n.hdr="PQ";break;case"hlg":n.hdr="HLG";break;case"bt709":n.hdr="SDR"}return n}function ss(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function _u(e){return e.filter(function(t){return ss(t)})}function Yr(e,t,n,i){var r=e,o=e.filter(function(a){return a.primary});o.length&&(r=o);var s=r.length?r[0].language:"";if(r=r.filter(function(a){return a.language==s}),t){var u=Lu(Ne(t),e.map(function(a){return a.language}));u&&(r=e.filter(function(a){return Ne(a.language)==u}))}if(r=r.filter(function(a){return a.forced==i}),n){if(e=Qh(r,n),e.length)return e}else if(e=r.filter(function(a){return a.roles.length==0}),e.length)return e;return e=r.map(function(a){return a.roles}).reduce(Fx,[]),e.length?Qh(r,e[0]):r}function Qh(e,t){return e.filter(function(n){return n.roles.includes(t)})}function Jh(e,t){t.length&&(t=t.filter(function(n){return Mt(e.codecs)==Mt(n.codecs)}).sort(function(n,i){return n.bandwidth&&i.bandwidth&&n.bandwidth!=i.bandwidth?n.bandwidth-i.bandwidth:(n.width||0)-(i.width||0)}),e.trickModeVideo=t[0],1<t.length&&(t=t.find(function(n){return e.width==n.width&&e.height==n.height})))&&(e.trickModeVideo=t)}function Zh(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}function eg(e,t,n){if(n.autoShowText==0)return!1;if(n.autoShowText==1)return!0;var i=Ne(n.preferredTextLanguage);return t=Ne(t.language),n.autoShowText==2?zr(t,i):n.autoShowText==3?e?(e=Ne(e.language),zr(t,i)&&!zr(e,t)):!1:(we("Invalid autoShowText setting!"),!1)}W("shaka.util.StreamUtils",Gh),Gh.meetsRestrictions=Nu;var bu=new Map,Qx=0,Bu=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),Jx=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Qe(){var e=this;this.G=null,this.o=!1,this.m=new Ho,this.j=new Ce,navigator.connection&&navigator.connection.addEventListener&&this.j.D(navigator.connection,"change",function(){if(e.o&&e.g.useNetworkInformation){e.m=new Ho,e.g&&e.m.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.G(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.F=[],this.H=1,this.I=!1,this.h=this.l=this.g=this.s=null,this.A=new ve(function(){if(e.o&&(e.g.restrictToElementSize||e.g.restrictToScreenSize)){var t=e.chooseVariant();t&&e.G(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.B=B,"documentPictureInPicture"in B&&this.j.D(B.documentPictureInPicture,"enter",function(){e.B=B.documentPictureInPicture.window,e.A&&e.A.Gb(),e.j.za(e.B,"pagehide",function(){e.B=B,e.A&&e.A.Gb()})}),this.C=this.i=null}d=Qe.prototype,d.stop=function(){this.G=null,this.o=!1,this.F=[],this.H=1,this.l=this.s=null,this.h&&(this.h.disconnect(),this.h=null),this.A.stop(),this.C=this.i=null},d.release=function(){this.j.release(),this.A=null},d.init=function(e){this.G=e},d.chooseVariant=function(){var e=1/0,t=1/0;if(this.g.restrictToScreenSize){var n=this.g.ignoreDevicePixelRatio?1:this.B.devicePixelRatio;e=this.B.screen.height*n,t=this.B.screen.width*n}if(this.h&&this.g.restrictToElementSize){n=this.g.ignoreDevicePixelRatio?1:this.B.devicePixelRatio;var i=this.l.clientHeight,r=this.l.clientWidth;this.i&&document.pictureInPictureElement&&document.pictureInPictureElement==this.l&&(i=this.i.height,r=this.i.width),e=Math.min(e,i*n),t=Math.min(t,r*n)}if(n=this.F.filter(function(l){return l&&!(l.audio&&l.audio.fastSwitching||l.video&&l.video.fastSwitching)}),n.length||(n=this.F),i=n,n.length!=this.F.length&&(i=this.F.filter(function(l){return l&&!!(l.audio&&l.audio.fastSwitching||l.video&&l.video.fastSwitching)})),n=Oc(this,this.g.restrictions,i,1/0,1/0),e!=1/0||t!=1/0){for(n=Zx(n),n=g(n),r=n.next();!r.done;r=n.next())if(r=r.value,r.height>=e&&r.width>=t){e=r.height,t=r.width;break}n=Oc(this,this.g.restrictions,i,e,t)}for(e=this.getBandwidthEstimate(),i.length&&!n.length&&(n=Oc(this,null,i,1/0,1/0),n=[n[0]]),t=n[0]||null,i=0;i<n.length;i++){r=n[i];for(var o=isNaN(this.H)?1:Math.abs(this.H),s=o*r.bandwidth/this.g.bandwidthDowngradeTarget,u={bandwidth:1/0},a=i+1;a<n.length;a++)if(r.bandwidth!=n[a].bandwidth){u=n[a];break}o=o*u.bandwidth/this.g.bandwidthUpgradeTarget,e>=s&&e<=o&&(t.bandwidth!=r.bandwidth||t.bandwidth==r.bandwidth&&t.video&&r.video&&(t.video.width<r.video.width||t.video.height<r.video.height))&&(t=r)}return this.s=Date.now(),t},d.enable=function(){this.o=!0},d.disable=function(){this.o=!1},d.segmentDownloaded=function(e,t,n,i){var r=e;this.g.removeLatencyFromFirstPacketTime&&i&&i.packetNumber===1&&i.timeToFirstByte&&(r=e-i.timeToFirstByte),r<this.g.cacheLoadThreshold||(this.m.sample(r,t),n&&this.s!=null&&this.o&&tg(this))},d.trySuggestStreams=function(){this.s!=null&&this.o&&tg(this)},d.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&this.g.preferNetworkInformationBandwidth?e:(e=this.m.getBandwidthEstimate(e),this.C?this.C.getBandwidthEstimate(e):e)},d.setVariants=function(e){this.F=e},d.playbackRateChanged=function(e){this.H=e},d.setMediaElement=function(e){function t(){n.A.ha(eS)}var n=this;this.l=e,this.h&&(this.h.disconnect(),this.h=null),this.l&&"ResizeObserver"in B&&(this.h=new ResizeObserver(t),this.h.observe(this.l)),this.j.D(e,"enterpictureinpicture",function(i){i.pictureInPictureWindow&&(n.i=i.pictureInPictureWindow,n.j.D(n.i,"resize",t))}),this.j.D(e,"leavepictureinpicture",function(){n.i&&n.j.Ja(n.i,"resize",t),n.i=null})},d.setCmsdManager=function(e){this.C=e},d.configure=function(e){this.g=e,this.m&&this.g&&this.m.configure(this.g.advanced)};function tg(e){if(!e.I){var t=e.m;if(!(t.g>=t.i))return;e.I=!0,e.s-=1e3*(e.g.switchInterval-e.g.minTimeToSwitch)}Date.now()-e.s<1e3*e.g.switchInterval||(t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.G(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch))}function Oc(e,t,n,i,r){if(e.C){var o=e.C.Uh();o&&(n=n.filter(function(s){return s.bandwidth&&o?s.bandwidth<=o:!0}))}return t&&(n=n.filter(function(s){return Nu(s,t,{width:r,height:i})})),n.sort(function(s,u){return s.bandwidth-u.bandwidth})}function Zx(e){var t=[];e=g(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(i,r){return i.width-r.width})}W("shaka.abr.SimpleAbrManager",Qe),Qe.prototype.configure=Qe.prototype.configure,Qe.prototype.setCmsdManager=Qe.prototype.setCmsdManager,Qe.prototype.setMediaElement=Qe.prototype.setMediaElement,Qe.prototype.playbackRateChanged=Qe.prototype.playbackRateChanged,Qe.prototype.setVariants=Qe.prototype.setVariants,Qe.prototype.getBandwidthEstimate=Qe.prototype.getBandwidthEstimate,Qe.prototype.trySuggestStreams=Qe.prototype.trySuggestStreams,Qe.prototype.segmentDownloaded=Qe.prototype.segmentDownloaded,Qe.prototype.disable=Qe.prototype.disable,Qe.prototype.enable=Qe.prototype.enable,Qe.prototype.chooseVariant=Qe.prototype.chooseVariant,Qe.prototype.init=Qe.prototype.init,Qe.prototype.release=Qe.prototype.release,Qe.prototype.stop=Qe.prototype.stop;var eS=1;W("shaka.config.CrossBoundaryStrategy",{KEEP:"keep",RESET:"reset",RESET_TO_ENCRYPTED:"reset_to_encrypted",RESET_ON_ENCRYPTION_CHANGE:"RESET_ON_ENCRYPTION_CHANGE"});function ng(e,t){if(e===t||!e.length||!t.length)return!0;e=g(e);for(var n=e.next();!n.done;n=e.next()){if(n=n.value,Vu(n))return!0;for(var i=g(t),r=i.next();!r.done;r=i.next())if(r=r.value,n.keySystem===r.keySystem||Vu(r))return!0}return!1}function ig(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=g(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;for(var r=g(t),o=r.next();!o.done;o=r.next())if(o=o.value,i.keySystem==o.keySystem){r=new Map;for(var s=g((i.initData||[]).concat(o.initData||[])),u=s.next();!u.done;u=s.next())u=u.value,r.set(u.keyId,u);r=Array.from(r.values()),s=i.keyIds&&o.keyIds?new Set([].concat(H(i.keyIds),H(o.keyIds))):i.keyIds||o.keyIds,n.push({keySystem:i.keySystem,licenseServerUri:i.licenseServerUri||o.licenseServerUri,distinctiveIdentifierRequired:i.distinctiveIdentifierRequired||o.distinctiveIdentifierRequired,persistentStateRequired:i.persistentStateRequired||o.persistentStateRequired,videoRobustness:i.videoRobustness||o.videoRobustness,audioRobustness:i.audioRobustness||o.audioRobustness,serverCertificate:i.serverCertificate||o.serverCertificate,serverCertificateUri:i.serverCertificateUri||o.serverCertificateUri,initData:r,keyIds:s});break}else Vu(i)?n.push(i):Vu(o)&&n.push(o)}return n}function _c(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function Fu(e){return e?!!e.match(/^com\.apple\.fps/):!1}function Vu(e){return(e=e.licenseServerUri)?e.startsWith("data:application/json;base64,"):!1}var Hu=new St(function(){return gn(new Uint8Array([0]))}),qr=new Map;function rg(e,t){var n=Vn();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function og(e){var t,n;return k(function(i){if(i.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new C(2,7,1010);return t=e.g,e.g++,t==0?i.return():(n=e.h*(1+(2*Math.random()-1)*e.o),T(i,new Promise(function(r){new ve(r).ha(n/1e3)}),2))}e.h*=e.m,K(i)})}function Vn(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function je(){var e,t,n=new Promise(function(i,r){e=i,t=r});return n.resolve=e,n.reject=t,n}je.prototype.resolve=function(){},je.prototype.reject=function(){};function rt(e,t){this.promise=e,this.i=t,this.g=null}function mr(e){return new rt(Promise.reject(e),function(){return Promise.resolve()})}function bc(){var e=Promise.reject(new C(2,7,7001));return e.catch(function(){}),new rt(e,function(){return Promise.resolve()})}function $r(e){return new rt(Promise.resolve(e),function(){return Promise.resolve()})}function sg(e){return new rt(e,function(){return e.catch(function(){})})}rt.prototype.abort=function(){return this.g||(this.g=this.i()),this.g};function ug(e){return new rt(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}rt.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},rt.prototype.Va=function(e,t){function n(u){return function(a){if(r.g&&u)o.reject(s);else{var l=u?e:t;l?i=tS(l,a,o):(u?o.resolve:o.reject)(a)}}}function i(){return o.reject(s),r.abort()}var r=this,o=new je;o.catch(function(){});var s=new C(2,7,7001);return this.promise.then(n(!0),n(!1)),new rt(o,function(){return i()})};function tS(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then(function(){},function(){})})}catch(r){return n.reject(r),function(){return Promise.resolve()}}}ni.Object.defineProperties(rt.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.g!==null}}}),W("shaka.util.AbortableOperation",rt),rt.prototype.chain=rt.prototype.Va,rt.prototype.finally=rt.prototype.finally,rt.all=ug,rt.prototype.abort=rt.prototype.abort,rt.notAbortable=sg,rt.completed=$r,rt.aborted=bc,rt.failed=mr;function G(e,t){if(t)if(t instanceof Map)for(var n=g(t.keys()),i=n.next();!i.done;i=n.next())i=i.value,Object.defineProperty(this,i,{value:t.get(i),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=B.performance&&B.performance.now?B.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function ag(e){var t=new G(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}G.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},G.prototype.stopImmediatePropagation=function(){this.g=!0},G.prototype.stopPropagation=function(){},W("shaka.util.FakeEvent",G);var Gu={fl:"abrstatuschanged",hl:"adaptation",il:"audiotrackchanged",jl:"audiotrackschanged",kl:"boundarycrossed",ll:"buffering",ol:"canupdatestarttime",ql:"complete",rl:"currentitemchanged",ul:"downloadcompleted",vl:"downloadfailed",wl:"downloadheadersreceived",xl:"drmsessionupdate",zl:"emsg",Fl:"itemsinserted",Gl:"itemsremoved",Wl:"prft",Error:"error",Al:"expirationupdated",Bl:"firstquartile",Cl:"gapjumped",Hl:"keystatuschanged",Ll:"loaded",Ml:"loading",Ol:"manifestparsed",Pl:"manifestupdated",Ql:"mediaqualitychanged",Rl:"mediasourcerecovered",Sl:"metadataadded",Metadata:"metadata",Tl:"midpoint",Ul:"nospatialvideoinfo",Vl:"onstatechange",Xl:"ratechange",$l:"segmentappended",am:"sessiondata",bm:"spatialvideoinfo",cm:"stalldetected",dm:"started",em:"statechanged",fm:"streaming",gm:"textchanged",hm:"texttrackvisibility",im:"thirdquartile",jm:"timelineregionadded",lm:"timelineregionenter",mm:"timelineregionexit",nm:"trackschanged",pm:"unloading",rm:"variantchanged"};function ke(){this.Ya=new vu,this.we=this}ke.prototype.addEventListener=function(e,t){this.Ya&&this.Ya.push(e,t)},ke.prototype.removeEventListener=function(e,t){this.Ya&&this.Ya.remove(e,t)},ke.prototype.dispatchEvent=function(e){if(!this.Ya)return!0;var t=this.Ya.get(e.type)||[],n=this.Ya.get("All");for(n&&(t=t.concat(n)),t=g(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.we,e.currentTarget=this.we;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch{}if(e.g)break}return e.defaultPrevented},ke.prototype.release=function(){this.Ya=null};function Qr(){this.g=[]}function vr(e,t){e.g.push(t.finally(function(){kn(e.g,t)}))}Qr.prototype.destroy=function(){for(var e=[],t=g(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function He(e,t,n,i,r,o,s){ke.call(this),this.i=null,this.j=!1,this.s=new Qr,this.g=new Set,this.h=new Set,this.o=e||null,this.m=t||null,this.A=n||null,this.B=i||null,this.C=r||null,this.G=o||null,this.F=s||null,this.l=new Map}et(He,ke),d=He.prototype,d.configure=function(e){this.i=e};function pi(e,t,n,i){i=i===void 0?!1:i,n=n||pg;var r=Xu.get(e);(!r||n>=r.priority)&&Xu.set(e,{priority:n,rf:t,xk:i})}function lg(e,t){for(var n=g(e.g),i=n.next();!i.done;i=n.next())t.g.add(i.value);for(e=g(e.h),n=e.next();!n.done;n=e.next())t.h.add(n.value)}d.Ak=function(e){this.g.add(e)},d.Wk=function(e){this.g.delete(e)},d.hj=function(){this.g.clear()},d.Bk=function(e){this.h.add(e)},d.Xk=function(e){this.h.delete(e)},d.ij=function(){this.h.clear()},d.Ih=function(){this.l.clear()};function ct(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}d.destroy=function(){return this.j=!0,this.g.clear(),this.h.clear(),this.l.clear(),ke.prototype.release.call(this),this.s.destroy()},d.request=function(e,t,n){var i=this,r=new dg;if(this.j){var o=Promise.reject(new C(2,7,7001));return o.catch(function(){}),new Ku(o,function(){return Promise.resolve()},r)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Bn(t.retryParameters):Vn(),t.uris=Bn(t.uris),o=nS(this,e,t,n);var s=o.Va(function(){return cg(i,e,t,n,new rg(t.retryParameters,!1),0,null,r)}),u=s.Va(function(p){return iS(i,e,p,n)}),a=Date.now(),l=0;o.promise.then(function(){l=Date.now()-a},function(){});var c=0;s.promise.then(function(){c=Date.now()},function(){});var f=u.Va(function(p){var h=Date.now()-c,m=p.response;return m.timeMs+=l,m.timeMs+=h,p.Xj||!i.o||m.fromCache||t.method=="HEAD"||e!=Pn||i.o(m.timeMs,m.data.byteLength,fg(n),t,n),i.F&&i.F(e,m,n),m},function(p){throw p&&(p.severity=2),p});return o=new Ku(f.promise,function(){return f.abort()},r),vr(this.s,o),o};function nS(e,t,n,i){function r(u){o=o.Va(function(){return n.body&&(n.body=gn(n.body)),u(t,n,i)})}var o=$r(void 0);e.C&&r(e.C),e=g(e.g);for(var s=e.next();!s.done;s=e.next())r(s.value);return o.Va(void 0,function(u){throw u instanceof C&&u.code==7001?u:new C(2,1,1006,u)})}function cg(e,t,n,i,r,o,s,u){e.i.forceHTTP&&(n.uris[o]=n.uris[o].replace("https://","http://")),e.i.forceHTTPS&&(n.uris[o]=n.uris[o].replace("http://","https://")),0<o&&e.G&&e.G(t,i,n.uris[o],n.uris[o-1]);var a=new tt(n.uris[o]),l=a.ac,c=!1;l||(l=location.protocol,l=l.slice(0,-1),yu(a,l),n.uris[o]=a.toString()),l=l.toLowerCase();var f=(l=Xu.get(l))?l.rf:null;if(!f)return mr(new C(2,1,1e3,a));var p=l.xk;(a=e.l.get(a.Bb))&&(n.headers["common-access-token"]=a);var h=null,m=null,y=!1,v=!1,x;return sg(og(r)).Va(function(){if(e.j)return bc();x=Date.now();var S=0;n.requestStartTime=Date.now();var w=f(n.uris[o],n,t,function(I,E,M){h&&h.stop(),m&&m.ha(D/1e3),e.o&&t==Pn&&(S++,n.packetNumber=S,e.o(I,E,fg(i),n,i),c=!0,u.g=M)},function(I){v=!0,n.timeToFirstByte=Date.now()-n.requestStartTime,e.m&&e.m(I,n,t)},{minBytesForProgressEvents:e.i.minBytesForProgressEvents});if(!p)return w;var A=n.retryParameters.connectionTimeout;A&&(h=new ve(function(){y=!0,w.abort()}),h.ha(A/1e3));var D=n.retryParameters.stallTimeout;return D&&(m=new ve(function(){y=!0,w.abort()})),w}).Va(function(S){h&&h.stop(),m&&m.stop(),S.timeMs==null&&(S.timeMs=Date.now()-x);var w=S.headers["common-access-token"];if(w){var A=new tt(S.uri);e.l.set(A.Bb,w)}return w={response:S,Xj:c},!v&&e.m&&e.m(S.headers,n,t),e.A&&e.A(n,S),w},function(S){if(h&&h.stop(),m&&m.stop(),e.B){var w=null,A=0;S instanceof C&&(w=S,S.code==1001&&(A=S.data[1])),e.B(n,w,A,y)}if(e.j)return bc();if(y&&(S=new C(1,1,1003,n.uris[o],t)),S instanceof C){if(S.code==7001)throw S;if(S.code==1010)throw s;if(S.severity==1){if(w=new Map().set("error",S),w=new G("retry",w),w.cancelable=!0,e.dispatchEvent(w),w.defaultPrevented)throw S;return o=(o+1)%n.uris.length,cg(e,t,n,i,r,o,S,u)}}throw S})}function iS(e,t,n,i){var r=$r(void 0);e=g(e.h);for(var o=e.next(),s={};!o.done;s={Ai:void 0},o=e.next())s.Ai=o.value,r=r.Va(function(u){return function(){var a=n.response;return a.data&&(a.data=gn(a.data)),(0,u.Ai)(t,a,i)}}(s));return r.Va(function(){return n},function(u){var a=2;if(u instanceof C){if(u.code==7001)throw u;a=u.severity}throw new C(a,1,1007,u)})}function fg(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.o)return!1}return!0}W("shaka.net.NetworkingEngine",He),He.prototype.request=He.prototype.request,He.prototype.destroy=He.prototype.destroy,He.makeRequest=ct,He.defaultRetryParameters=function(){return Vn()},He.prototype.clearCommonAccessTokenMap=He.prototype.Ih,He.prototype.clearAllResponseFilters=He.prototype.ij,He.prototype.unregisterResponseFilter=He.prototype.Xk,He.prototype.registerResponseFilter=He.prototype.Bk,He.prototype.clearAllRequestFilters=He.prototype.hj,He.prototype.unregisterRequestFilter=He.prototype.Wk,He.prototype.registerRequestFilter=He.prototype.Ak,He.unregisterScheme=function(e){Xu.delete(e)},He.registerScheme=pi,He.prototype.configure=He.prototype.configure;function dg(){this.g=0}He.NumBytesRemainingClass=dg;function Ku(e,t,n){rt.call(this,e,t),this.h=n}et(Ku,rt),He.PendingRequest=Ku;var Pn=1;He.RequestType={MANIFEST:0,SEGMENT:Pn,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},He.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6,MEDIATAILOR_SESSION_INFO:7,MEDIATAILOR_TRACKING_INFO:8,MEDIATAILOR_STATIC_RESOURCE:9,MEDIATAILOR_TRACKING_EVENT:10,INTERSTITIAL_ASSET_LIST:11,INTERSTITIAL_AD_URL:12};var pg=3;He.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:pg};var Xu=new Map;function Jr(e){this.g=!1,this.h=new je,this.i=e}Jr.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function be(e,t){if(e.g)throw t instanceof C&&t.code==7003?t:new C(2,7,7003,t)}function Bc(e,t){var n=[];e=g(e);for(var i=e.next();!i.done;i=e.next())n.push(t(i.value));return n}function rS(e,t){e=g(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function yr(e){for(var t=new Map,n=g(Object.keys(e)),i=n.next();!i.done;i=n.next())i=i.value,t.set(i,e[i]);return t}function Fc(e){var t={};return e.forEach(function(n,i){t[i]=n}),t}function Fe(e,t){this.h=Ht(e),this.i=t==hg,this.g=0}d=Fe.prototype,d.Fa=function(){return this.g<this.h.byteLength},d.Ma=function(){return this.g},d.getLength=function(){return this.h.byteLength},d.X=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch{throw hi()}},d.Aa=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch{throw hi()}},d.T=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch{throw hi()}},d.Sg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch{throw hi()}},d.ud=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch{throw hi()}if(2097151<t)throw new C(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},d.Sb=function(e){if(this.g+e>this.h.byteLength)throw hi();var t=le(this.h,this.g,e);return this.g+=e,t},d.skip=function(e){if(this.g+e>this.h.byteLength)throw hi();this.g+=e},d.Bi=function(e){if(this.g<e)throw hi();this.g-=e},d.seek=function(e){if(0>e||e>this.h.byteLength)throw hi();this.g=e},d.Tc=function(){for(var e=this.g;this.Fa()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=le(this.h,e,this.g-e),this.g+=1,ze(e)};function hi(){return new C(2,3,3e3)}W("shaka.util.DataViewReader",Fe),Fe.prototype.readTerminatedString=Fe.prototype.Tc,Fe.prototype.seek=Fe.prototype.seek,Fe.prototype.rewind=Fe.prototype.Bi,Fe.prototype.skip=Fe.prototype.skip,Fe.prototype.readBytes=Fe.prototype.Sb,Fe.prototype.readUint64=Fe.prototype.ud,Fe.prototype.readInt32=Fe.prototype.Sg,Fe.prototype.readUint32=Fe.prototype.T,Fe.prototype.readUint16=Fe.prototype.Aa,Fe.prototype.readUint8=Fe.prototype.X,Fe.prototype.getLength=Fe.prototype.getLength,Fe.prototype.getPosition=Fe.prototype.Ma,Fe.prototype.hasMoreData=Fe.prototype.Fa;var hg=1;Fe.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:hg};function Ue(){this.i=new Map,this.h=new Map,this.g=!1}d=Ue.prototype,d.box=function(e,t){return e=gg(e),this.i.set(e,oS),this.h.set(e,t),this},d.R=function(e,t){return e=gg(e),this.i.set(e,mg),this.h.set(e,t),this},d.stop=function(){this.g=!0},d.parse=function(e,t,n){for(e=new Fe(e,0),this.g=!1;e.Fa()&&!this.g;)this.pd(0,e,t,n)},d.pd=function(e,t,n,i){var r=t.Ma();if(i&&r+8>t.getLength())this.g=!0;else{var o=t.T(),s=t.T(),u=zu(s),a=!1;switch(o){case 0:o=t.getLength()-r;break;case 1:if(i&&t.Ma()+8>t.getLength()){this.g=!0;return}o=t.ud(),a=!0}var l=this.h.get(s);if(l){var c=null,f=null;if(this.i.get(s)==mg){if(i&&t.Ma()+4>t.getLength()){this.g=!0;return}f=t.T(),c=f>>>24,f&=16777215}s=r+o,n&&s>t.getLength()&&(s=t.getLength()),i&&s>t.getLength()?this.g=!0:(i=s-t.Ma(),t=0<i?t.Sb(i):new Uint8Array(0),t=new Fe(t,0),l({name:u,parser:this,partialOkay:n||!1,version:c,flags:f,reader:t,size:o,start:r+e,has64BitSize:a}))}else t.skip(Math.min(r+o-t.Ma(),t.getLength()-t.Ma()))}};function de(e){for(var t=_i(e);e.reader.Fa()&&!e.parser.g;)e.parser.pd(e.start+t,e.reader,e.partialOkay)}function gi(e){for(var t=_i(e),n=e.reader.T(),i=0;i<n&&(e.parser.pd(e.start+t,e.reader,e.partialOkay),!e.parser.g);i++);}function Zt(e){var t=_i(e);for(e.reader.skip(78);e.reader.Fa()&&!e.parser.g;)e.parser.pd(e.start+t,e.reader,e.partialOkay)}function Wu(e){var t=_i(e);e.reader.skip(8);var n=e.reader.Aa();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.Fa()&&!e.parser.g;)e.parser.pd(e.start+t,e.reader,e.partialOkay)}function Zr(e){return function(t){e(t.reader.Sb(t.reader.getLength()-t.reader.Ma()))}}function gg(e){var t=0;e=g(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function zu(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function _i(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}W("shaka.util.Mp4Parser",Ue),Ue.headerSize=_i,Ue.typeToString=zu,Ue.allData=Zr,Ue.audioSampleEntry=Wu,Ue.visualSampleEntry=Zt,Ue.sampleDescription=gi,Ue.children=de,Ue.prototype.parseNext=Ue.prototype.pd,Ue.prototype.parse=Ue.prototype.parse,Ue.prototype.stop=Ue.prototype.stop,Ue.prototype.fullBox=Ue.prototype.R,Ue.prototype.box=Ue.prototype.box;var oS=0,mg=1;function Vc(e){var t=this;this.g=[],this.h=[],this.data=[],new Ue().box("moov",de).box("moof",de).R("pssh",function(n){if(!(1<n.version)){var i=le(n.reader.h,-12,n.size);if(t.data.push(i),t.g.push(si(n.reader.Sb(16))),0<n.version){i=n.reader.T();for(var r=0;r<i;r++){var o=si(n.reader.Sb(16));t.h.push(o)}}}}).parse(e)}function Yu(e,t,n,i){var r=e.length,o=t.length+16+r;0<i&&(o+=4+16*n.size);var s=new Uint8Array(o),u=Ht(s),a=0;if(u.setUint32(a,o),a+=4,u.setUint32(a,1886614376),a+=4,1>i?u.setUint32(a,0):u.setUint32(a,16777216),a+=4,s.set(t,a),a+=t.length,0<i)for(u.setUint32(a,n.size),a+=4,t=g(n),n=t.next();!n.done;n=t.next())n=nr(n.value),s.set(n,a),a+=n.length;return u.setUint32(a,r),s.set(e,a+4),s}function qu(e){var t=this;this.C=e,this.j=this.A=null,this.oa=this.ia=!1,this.H=0,this.h=null,this.o=new Ce,this.i=new Map,this.S=[],this.B=new Map,this.K=!1,this.m=new je,this.g=null,this.s=function(n){n.severity==2&&t.m.reject(n),e.onError(n)},this.W=new Map,this.ka=new Map,this.L=new ve(function(){return vS(t)}),this.N=!1,this.M=[],this.U=!1,this.I=new ve(function(){TS(t)}),this.m.catch(function(){}),this.l=new Jr(function(){return sS(t)}),this.$=!1,this.F=this.G=null,this.P=function(){return!1}}d=qu.prototype,d.destroy=function(){return this.l.destroy()};function sS(e){return k(function(t){switch(t.g){case 1:return e.o.release(),e.o=null,e.m.reject(),e.I.stop(),e.I=null,e.L.stop(),e.L=null,T(t,as(e),2);case 2:if(!e.j){t.u(3);break}return ue(t,4),T(t,e.j.setMediaKeys(null),6);case 6:pe(t,5);break;case 4:ae(t);case 5:e.j=null;case 3:e.h=null,e.A=null,e.B=new Map,e.g=null,e.s=function(){},e.C=null,e.$=!1,e.G=null,K(t)}})}d.configure=function(e,t){this.g=e,t&&(this.P=t),this.I&&this.I.Ga(this.g.updateExpirationTime)};function uS(e,t,n){return e.oa=!0,e.B=new Map,e.N=n,yg(e,t,!1)}function vg(e,t,n,i){i=i===void 0?!0:i,e.B=new Map,n=g(n);for(var r=n.next();!r.done;r=n.next())e.B.set(r.value,{initData:null,initDataType:null});for(n=g(e.g.persistentSessionsMetadata),r=n.next();!r.done;r=n.next())r=r.value,e.B.set(r.sessionId,{initData:r.initData,initDataType:r.initDataType});return e.N=0<e.B.size,yg(e,t,i)}function aS(e,t,n,i,r,o){var s=new Map;return r={audioCapabilities:r,videoCapabilities:o,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},r.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:i,serverCertificateUri:"",initData:null,keyIds:null}],s.set(t,r),wg(e,s,[])}function yg(e,t,n){var i,r,o,s,u,a,l,c,f,p,h,m,y,v,x,S,w,A,D,I;return k(function(E){if(E.g==1){for(Dg(e.g.clearKeys,t),i=t.some(function(M){return!!(M.video&&M.video.drmInfos.length||M.audio&&M.audio.drmInfos.length)}),!i&&n&&(r=yr(e.g.servers),SS(t,r)),o=new Set,s=g(t),u=s.next();!u.done;u=s.next())for(a=u.value,l=Cg(a),c=g(l),f=c.next();!f.done;f=c.next())p=f.value,o.add(p);for(h=g(o),m=h.next();!m.done;m=h.next())y=m.value,wS(y,yr(e.g.servers),yr(e.g.advanced||{}),e.g.keySystemsMapping);for(v=function(M,P){var N=[];M=g(M);for(var L=M.next();!L.done;L=M.next()){L=L.value;var R=L[P]||e.g.advanced&&e.g.advanced[L.keySystem]&&e.g.advanced[L.keySystem][P]||"",O;if((O=R=="")&&(O=(O=L.keySystem)?!!O.match(/^com\.widevine\.alpha/):!1),O&&(P=="audioRobustness"?R=[e.g.defaultAudioRobustnessForWidevine]:P=="videoRobustness"&&(R=[e.g.defaultVideoRobustnessForWidevine])),typeof R=="string")N.push(L);else if(Array.isArray(R))for(R.length===0&&(R=[""]),R=g(R),O=R.next();!O.done;O=R.next()){var U={};N.push(Object.assign({},L,(U[P]=O.value,U)))}}return N},x=new Set,S=g(t),w=S.next();!w.done;w=S.next())A=w.value,A.video&&!x.has(A.video)&&(A.video.drmInfos=v(A.video.drmInfos,"videoRobustness"),A.video.drmInfos=v(A.video.drmInfos,"audioRobustness"),x.add(A.video)),A.audio&&!x.has(A.audio)&&(A.audio.drmInfos=v(A.audio.drmInfos,"videoRobustness"),A.audio.drmInfos=v(A.audio.drmInfos,"audioRobustness"),x.add(A.audio));return x.clear(),T(E,zh(t,e.N,e.$,e.g.preferredKeySystems),2)}return be(e.l),D=i||Object.keys(e.g.servers).length,D?(I=wg(e,void 0,t),E.return(i?I:I.catch(function(){}))):(e.ia=!0,E.return(Promise.resolve()))})}function Tg(e){var t;return k(function(n){switch(n.g){case 1:if(e.j.mediaKeys)return n.return();if(!e.G){n.u(2);break}return T(n,e.G,3);case 3:return be(e.l),n.return();case 2:return ue(n,4),e.G=e.j.setMediaKeys(e.A),T(n,e.G,6);case 6:pe(n,5);break;case 4:t=ae(n),e.s(new C(2,6,6003,t.message));case 5:be(e.l),K(n)}})}function lS(e,t){return k(function(n){if(n.g==1)return T(n,Tg(e),2);us(e,t.initDataType,le(t.initData)),K(n)})}d.cc=function(e){var t=this,n,i,r;return k(function(o){if(o.g==1)return t.j===e?o.return():t.A?(t.j=e,t.o.za(t.j,"play",function(){for(var s=g(t.M),u=s.next();!u.done;u=s.next())Gc(t,u.value);t.U=!0,t.M=[]}),t.j.remote?(t.o.D(t.j.remote,"connect",function(){return as(t)}),t.o.D(t.j.remote,"connecting",function(){return as(t)}),t.o.D(t.j.remote,"disconnect",function(){return as(t)})):"webkitCurrentPlaybackTargetIsWireless"in t.j&&t.o.D(t.j,"webkitcurrentplaybacktargetiswirelesschanged",function(){return as(t)}),t.F=t.h&&t.h.initData.find(function(s){return 0<s.initData.length})||null,n=t.h.keySystem,i=n=="com.apple.fps",r=ye().Ea(),r==="GECKO"&&n.startsWith("com.microsoft.playready.recommendation")&&(i=!0),i||!(t.F||t.B.size||t.g.parseInbandPsshEnabled)?(t.o.D(t.j,"encrypted",function(s){return lS(t,s)}),o.u(2)):T(o,Tg(t),2)):(t.o.za(e,"encrypted",function(){t.s(new C(2,6,6010))}),o.return());xg(t).catch(function(){}),K(o)})};function cS(e){var t,n,i,r,o;return k(function(s){switch(s.g){case 1:if(!e.A||!e.h)return s.return();if(!e.h.serverCertificateUri||e.h.serverCertificate&&e.h.serverCertificate.length){s.u(2);break}return t=ct([e.h.serverCertificateUri],e.g.retryParameters),ue(s,3),n=e.C.lc.request(5,t,{isPreload:e.P()}),T(s,n.promise,5);case 5:i=s.h,e.h.serverCertificate=le(i.data),pe(s,4);break;case 3:throw r=ae(s),new C(2,6,6017,r);case 4:if(e.l.g)return s.return();case 2:return!e.h.serverCertificate||!e.h.serverCertificate.length?s.return():(ue(s,6),T(s,e.A.setServerCertificate(e.h.serverCertificate),8));case 8:pe(s,0);break;case 6:throw o=ae(s),new C(2,6,6004,o.message)}})}function fS(e,t){var n,i,r;return k(function(o){if(o.g==1)return T(o,Eg(e,t,{initData:null,initDataType:null}),2);if(o.g!=3)return n=o.h,n?(i=[],(r=e.i.get(n))&&(r.Hb=new je,i.push(r.Hb)),i.push(n.remove()),T(o,Promise.all(i),3)):o.return();e.i.delete(n),K(o)})}function xg(e){var t,n,i,r,o;return k(function(s){if(s.g==1)return e.B.size?(e.B.forEach(function(u,a){Eg(e,a,u)}),T(s,e.m,3)):s.u(2);if(s.g!=2){if(t=e.h&&e.h.keyIds||new Set([]),0<t.size&&xS(e))return s.return(e.m);e.K=!1,e.m=new je,e.m.catch(function(){})}for(n=(e.h?e.h.initData:[])||[],i=g(n),r=i.next();!r.done;r=i.next())o=r.value,us(e,o.initDataType,o.initData);return ls(e)&&e.m.resolve(),s.return(e.m)})}function us(e,t,n){if(n.length){if(e.g.ignoreDuplicateInitData){var i=e.i.values();i=g(i);for(var r=i.next();!r.done;r=i.next())if(ri(n,r.value.initData))return;var o=!1;if(e.B.forEach(function(s){!o&&ri(n,s.initData)&&(o=!0)}),o)return}e.K=!0,0<e.i.size&&ls(e)&&(e.m.resolve(),e.K=!1,e.m=new je,e.m.catch(function(){})),gS(e,t,n,e.h.sessionType)}}function Sg(e){return e=e.i.keys(),e=Bc(e,function(t){return t.sessionId}),Array.from(e)}d.yg=function(){var e=this,t=this.i.keys();return t=Bc(t,function(n){var i=e.i.get(n);return{sessionId:n.sessionId,sessionType:i.type,initData:i.initData,initDataType:i.initDataType}}),Array.from(t)},d.Md=function(){var e=1/0,t=this.i.keys();t=g(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e};function dS(e){return e.H?e.H:NaN}d.Re=function(){return Fc(this.ka)};function wg(e,t,n){var i,r,o,s,u,a,l,c;return k(function(f){switch(f.g){case 1:if(i=new Map,n.length){r=pS(e,n,i),f.u(2);break}return T(f,hS(e,t),3);case 3:r=f.h;case 2:if(o=r,!o)throw navigator.requestMediaKeySystemAccess?new C(2,6,6001):new C(2,6,6020);if(be(e.l),ue(f,4),o.getConfiguration(),s=e.g.keySystemsMapping[o.keySystem]||o.keySystem,n.length){var p=s,h=i.get(s),m=[],y=[],v=[],x=[],S=[],w=new Set,A=new Set;kg(h,m,y,x,v,S,w,A);var D=e.N?"persistent-license":"temporary";for(p={keySystem:p,encryptionScheme:m[0],licenseServerUri:y[0],distinctiveIdentifierRequired:h[0].distinctiveIdentifierRequired,persistentStateRequired:h[0].persistentStateRequired,sessionType:h[0].sessionType||D,audioRobustness:h[0].audioRobustness||"",videoRobustness:h[0].videoRobustness||"",serverCertificate:x[0],serverCertificateUri:v[0],initData:S,keyIds:w},0<A.size&&(p.keySystemUris=A),h=g(h),A=h.next();!A.done;A=h.next())A=A.value,A.distinctiveIdentifierRequired&&(p.distinctiveIdentifierRequired=A.distinctiveIdentifierRequired),A.persistentStateRequired&&(p.persistentStateRequired=A.persistentStateRequired);h=p}else h=s,A=t.get(s),p=[],m=[],y=[],v=[],x=[],S=new Set,kg(A.drmInfos,p,m,v,y,x,S),h={keySystem:h,encryptionScheme:p[0],licenseServerUri:m[0],distinctiveIdentifierRequired:A.distinctiveIdentifier=="required",persistentStateRequired:A.persistentState=="required",sessionType:A.sessionTypes[0]||"temporary",audioRobustness:(A.audioCapabilities?A.audioCapabilities[0].robustness:"")||"",videoRobustness:(A.videoCapabilities?A.videoCapabilities[0].robustness:"")||"",serverCertificate:v[0],serverCertificateUri:y[0],initData:x,keyIds:S};if(e.h=h,!e.h.licenseServerUri)throw new C(2,6,6012,e.h.keySystem);return T(f,o.createMediaKeys(),6);case 6:if(u=f.h,be(e.l),e.A=u,!(e.g.minHdcpVersion!=""&&"getStatusForPolicy"in e.A)){f.u(7);break}return ue(f,8),T(f,e.A.getStatusForPolicy({minHdcpVersion:e.g.minHdcpVersion}),10);case 10:if(a=f.h,a!="usable")throw new C(2,6,6018);be(e.l),pe(f,7,4);break;case 8:throw l=ae(f,4),l instanceof C?l:new C(2,6,6019,l.message);case 7:return e.ia=!0,T(f,cS(e),11);case 11:be(e.l),pe(f,0);break;case 4:throw c=ae(f),be(e.l,c),e.h=null,c instanceof C?c:new C(2,6,6002,c.message)}})}function pS(e,t,n){for(var i=g(t),r=i.next();!r.done;r=i.next()){r=g(Cg(r.value));for(var o=r.next();!o.done;o=r.next())o=o.value,n.has(o.keySystem)||n.set(o.keySystem,[]),n.get(o.keySystem).push(o)}if(n.size==1&&n.has(""))throw new C(2,6,6e3);i=e.g.preferredKeySystems,i.length||(r=yr(e.g.servers),r.size==1&&(i=Array.from(r.keys()))),r=g(i);var s=r.next();for(o={};!s.done;o={si:void 0},s=r.next()){o.si=s.value,s=g(t);for(var u=s.next();!u.done;u=s.next())if(u=u.value.decodingInfos.find(function(f){return function(p){return p.supported&&p.keySystemAccess!=null&&p.keySystemAccess.keySystem==f.si}}(o)))return u.keySystemAccess}for(r=g([!0,!1]),o=r.next();!o.done;o=r.next())for(o=o.value,s=g(t),u=s.next();!u.done;u=s.next()){u=g(u.value.decodingInfos);for(var a=u.next();!a.done;a=u.next())if(a=a.value,a.supported&&a.keySystemAccess){var l=a.keySystemAccess.keySystem;if(!i.includes(l)){var c=n.get(l);for(!c&&e.g.keySystemsMapping[l]&&(c=n.get(e.g.keySystemsMapping[l])),l=g(c),c=l.next();!c.done;c=l.next())if(!!c.value.licenseServerUri==o)return a.keySystemAccess}}}return null}function hS(e,t){var n,i,r,o,s,u,a,l,c,f,p,h,m,y,v,x;return k(function(S){switch(S.g){case 1:if(t.size==1&&t.has(""))throw new C(2,6,6e3);for(i=g(t.values()),r=i.next();!r.done;r=i.next())o=r.value,o.audioCapabilities.length==0&&delete o.audioCapabilities,o.videoCapabilities.length==0&&delete o.videoCapabilities;s=g(e.g.preferredKeySystems),u=s.next();case 2:if(u.done){S.u(4);break}if(a=u.value,!t.has(a)){S.u(3);break}return l=t.get(a),ue(S,6),T(S,navigator.requestMediaKeySystemAccess(a,[l]),8);case 8:return n=S.h,S.return(n);case 6:ae(S);case 7:be(e.l);case 3:u=s.next(),S.u(2);break;case 4:c=g([!0,!1]),f=c.next();case 9:if(f.done){S.u(11);break}p=f.value,h=g(t.keys()),m=h.next();case 12:if(m.done){f=c.next(),S.u(9);break}if(y=m.value,v=t.get(y),x=v.drmInfos.some(function(w){return!!w.licenseServerUri}),x!=p){S.u(13);break}return ue(S,15),T(S,navigator.requestMediaKeySystemAccess(y,[v]),17);case 17:return n=S.h,S.return(n);case 15:ae(S);case 16:be(e.l);case 13:m=h.next(),S.u(12);break;case 11:return S.return(n)}})}function Hc(e){ls(e)&&e.m.resolve()}function Ag(e,t){new ve(function(){t.loaded=!0,Hc(e)}).ha(ES)}function Eg(e,t,n){var i,r,o,s,u,a,l;return k(function(c){switch(c.g){case 1:try{i=e.A.createSession("persistent-license")}catch(f){return r=new C(2,6,6005,f.message),e.s(r),c.return(Promise.reject(r))}return e.o.D(i,"message",function(f){e.j&&e.g.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.U?e.M.push(f):Gc(e,f)}),e.o.D(i,"keystatuseschange",function(f){return Ig(e,f)}),o={initData:n.initData,initDataType:n.initDataType,loaded:!1,Ng:1/0,Hb:null,type:"persistent-license"},e.i.set(i,o),ue(c,2),T(c,i.load(t),4);case 4:return s=c.h,be(e.l),s||(e.i.delete(i),u=e.g.persistentSessionOnlinePlayback?1:2,e.s(new C(u,6,6013)),o.loaded=!0),Ag(e,o),Hc(e),c.return(i);case 2:a=ae(c),be(e.l,a),e.i.delete(i),l=e.g.persistentSessionOnlinePlayback?1:2,e.s(new C(l,6,6005,a.message)),o.loaded=!0,Hc(e);case 3:return c.return(Promise.resolve())}})}function gS(e,t,n,i){try{var r=e.A.createSession(i)}catch(o){e.s(new C(2,6,6005,o.message));return}e.o.D(r,"message",function(o){e.j&&e.g.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.U?e.M.push(o):Gc(e,o)}),e.o.D(r,"keystatuseschange",function(o){return Ig(e,o)}),e.i.set(r,{initData:n,initDataType:t,loaded:!1,Ng:1/0,Hb:null,type:i});try{n=e.g.initDataTransform(n,t,e.h)}catch(o){t=o,o instanceof C||(t=new C(2,6,6016,o)),e.s(t);return}e.g.logLicenseExchange&&oi(n),r.generateRequest(t,n).catch(function(o){if(!e.l.g){e.i.delete(r);var s=o.errorCode;if(s&&s.systemCode){var u=s.systemCode;0>u&&(u+=Math.pow(2,32)),u="0x"+u.toString(16)}e.s(new C(2,6,6006,o.message,o,u))}})}function mS(e){return k(function(t){return t.g==1?e.K?T(t,e.m,3):t.u(0):T(t,Promise.all(e.S.map(function(n){return n.promise})),0)})}function Gc(e,t){var n,i,r,o,s,u,a,l,c,f,p,h,m,y;k(function(v){switch(v.g){case 1:if(n=t.target,e.g.logLicenseExchange&&oi(t.message),i=e.i.get(n),r=e.h.licenseServerUri,o=e.g.advanced[e.h.keySystem],t.messageType=="individualization-request"&&o&&o.individualizationServer&&(r=o.individualizationServer),s=ct([r],e.g.retryParameters),s.body=t.message,s.method="POST",s.licenseRequestType=t.messageType,s.sessionId=n.sessionId,s.drmInfo=e.h,i&&(s.initData=i.initData,s.initDataType=i.initDataType),o&&o.headers)for(u in o.headers)s.headers[u]=o.headers[u];if(e.h.keySystem==="org.w3.clearkey"){var x=s,S=e.h;try{var w=Yn(x.body);if(w){var A=JSON.parse(w);A.type||(A.type=S.sessionType,x.body=Cn(JSON.stringify(A)))}}catch{}}if(_c(e.h.keySystem))if(x=Ri(s.body,!0,!0),x.includes("PlayReadyKeyMessage")){for(x=lr(x,"PlayReadyKeyMessage"),S=Fn(x,"HttpHeader"),S=g(S),w=S.next();!w.done;w=S.next())A=w.value,w=Fn(A,"name")[0],A=Fn(A,"value")[0],s.headers[ot(w)]=ot(A);x=Fn(x,"Challenge")[0],s.body=mn(ot(x))}else s.headers["Content-Type"]="text/xml; charset=utf-8";return a=Date.now(),ue(v,2),c=e.C.lc.request(2,s,{isPreload:e.P()}),e.S.push(c),T(v,c.promise,4);case 4:l=v.h,kn(e.S,c),pe(v,3);break;case 2:return f=ae(v),e.l.g||(p=new C(2,6,6007,f),e.i.size==1?(e.s(p),i&&i.Hb&&i.Hb.reject(p)):(i&&i.Hb&&i.Hb.reject(p),e.i.delete(n),ls(e)&&(e.m.resolve(),e.L.ha(.1)))),v.return();case 3:return e.l.g?v.return():(e.H+=(Date.now()-a)/1e3,e.g.logLicenseExchange&&oi(l.data),ue(v,5),T(v,n.update(l.data),7));case 7:pe(v,6);break;case 5:return h=ae(v),m=new C(2,6,6008,h.message),e.s(m),i&&i.Hb&&i.Hb.reject(m),v.return();case 6:if(e.l.g)return v.return();y=new G("drmsessionupdate"),e.C.onEvent(y),i&&(i.Hb&&i.Hb.resolve(),Ag(e,i)),K(v)}})}function Ig(e,t){t=t.target;var n=e.i.get(t),i=!1;t.keyStatuses.forEach(function(o,s){if(typeof s=="string"){var u=s;s=o,o=u}if(u=ye(),_c(e.h.keySystem)&&s.byteLength==16&&u.Zg()){u=Ht(s);var a=u.getUint32(0,!0),l=u.getUint16(4,!0),c=u.getUint16(6,!0);u.setUint32(0,a,!1),u.setUint16(4,l,!1),u.setUint16(6,c,!1)}o!="status-pending"&&(n.loaded=!0),o=="expired"&&(i=!0),s=si(s).slice(0,32),e.W.set(s,o)});var r=t.expiration-Date.now();(0>r||i&&1e3>r)&&n&&!n.Hb&&(e.i.delete(t),Mg(t)),ls(e)&&(e.m.resolve(),e.L.ha(IS))}function vS(e){var t=e.W,n=e.ka;n.clear(),t.forEach(function(i,r){return n.set(r,i)}),t=Array.from(n.values()),t.length&&t.every(function(i){return i=="expired"})&&e.s(new C(2,6,6014)),e.C.mf(Fc(n))}function yS(){var e,t,n,i,r,o,s,u,a,l,c,f,p,h,m,y,v,x,S,w,A,D,I,E,M,P,N,L,R,O,U,j,_,F,V;return k(function(q){if(q.g==1){if(e="org.w3.clearkey com.widevine.alpha com.widevine.alpha.experiment com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.microsoft.playready.recommendation.3000 com.microsoft.playready.recommendation.3000.clearlead com.chromecast.playready com.apple.fps.1_0 com.apple.fps com.huawei.wiseplay".split(" "),!(B.MediaKeys&&B.navigator&&B.navigator.requestMediaKeySystemAccess&&B.MediaKeySystemAccess&&B.MediaKeySystemAccess.prototype.getConfiguration)){for(t={},n=g(e),i=n.next();!i.done;i=n.next())r=i.value,t[r]=null;return q.return(t)}for(o="1.0 1.1 1.2 1.3 1.4 2.0 2.1 2.2 2.3".split(" "),s=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],u=["150","2000","3000"],a={"com.widevine.alpha":s,"com.widevine.alpha.experiment":s,"com.microsoft.playready.recommendation":u},l=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],c=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],f={videoCapabilities:l,audioCapabilities:c,initDataTypes:["cenc","sinf","skd","keyids"]},p=[null,"cenc","cbcs","cbcs-1-9"],h=new Map,m=ye(),y=function(X,Me){var ge,xe,me,Ee,Le,fe,re,ce,Xe,We,$e,at,ut;return k(function(Re){switch(Re.g){case 1:return ue(Re,2),T(Re,Me.createMediaKeys(),5);case 5:ge=Re.h;case 4:pe(Re,3);break;case 2:return ae(Re),Re.return();case 3:if(me=(xe=Me.getConfiguration().sessionTypes)?xe.includes("persistent-license"):!1,m.ji()&&(me=!1),Ee=Me.getConfiguration().videoCapabilities,Le=Me.getConfiguration().audioCapabilities,fe={persistentState:me,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[],minHdcpVersions:[]},h.has(X)&&h.get(X)?fe=h.get(X):h.set(X,fe),(re=Ee[0].encryptionScheme)&&!fe.encryptionSchemes.includes(re)&&fe.encryptionSchemes.push(re),(ce=Ee[0].robustness)&&!fe.videoRobustnessLevels.includes(ce)&&fe.videoRobustnessLevels.push(ce),(Xe=Le[0].robustness)&&!fe.audioRobustnessLevels.includes(Xe)&&fe.audioRobustnessLevels.push(Xe),"getStatusForPolicy"in ge){for(We=[],$e=g(o),at=$e.next(),ut={};!at.done;ut={Qd:void 0},at=$e.next())ut.Qd=at.value,fe.minHdcpVersions.includes(ut.Qd)||We.push(ge.getStatusForPolicy({minHdcpVersion:ut.Qd}).then(function(Yi){return function(Wn){Wn!="usable"||fe.minHdcpVersions.includes(Yi.Qd)||fe.minHdcpVersions.push(Yi.Qd)}}(ut)));return T(Re,Promise.all(We),0)}Re.u(0)}})},v=function(X,Me,ge,xe){var me,Ee,Le,fe,re,ce,Xe,We,$e,at,ut;return k(function(Re){switch(Re.g){case 1:for(ue(Re,2),me=Bn(f),Ee=g(me.videoCapabilities),Le=Ee.next();!Le.done;Le=Ee.next())fe=Le.value,fe.encryptionScheme=Me,fe.robustness=ge;for(re=g(me.audioCapabilities),ce=re.next();!ce.done;ce=re.next())Xe=ce.value,Xe.encryptionScheme=Me,Xe.robustness=xe;return We=Bn(me),We.persistentState="required",We.sessionTypes=["persistent-license"],$e=[We,me],ut=ye(),ut.La()=="MOBILE"?T(Re,rs(5,navigator.requestMediaKeySystemAccess(X,$e)),7):T(Re,navigator.requestMediaKeySystemAccess(X,$e),6);case 6:at=Re.h,Re.u(5);break;case 7:at=Re.h;case 5:return T(Re,y(X,at),8);case 8:pe(Re,0);break;case 2:ae(Re),K(Re)}})},x=function(X,Me,ge,xe){var me,Ee,Le,fe;return k(function(re){switch(re.g){case 1:return ue(re,2),me={type:"media-source",video:{contentType:l[0].contentType,width:640,height:480,bitrate:1,framerate:1},audio:{contentType:c[0].contentType,channels:2,bitrate:1,samplerate:1},keySystemConfiguration:{keySystem:X,video:{encryptionScheme:Me,robustness:ge},audio:{encryptionScheme:Me,robustness:xe}}},Le=ye(),Le.La()=="MOBILE"?T(re,rs(5,navigator.mediaCapabilities.decodingInfo(me)),7):T(re,navigator.mediaCapabilities.decodingInfo(me),6);case 6:Ee=re.h,re.u(5);break;case 7:Ee=re.h;case 5:return fe=Ee.keySystemAccess,T(re,y(X,fe),8);case 8:pe(re,0);break;case 2:ae(re),K(re)}})},S=g(e),w=S.next();!w.done;w=S.next())A=w.value,h.set(A,null);for(D=function(X){return!(ye().Ea()==="WEBKIT"&&X==="org.w3.clearkey")},I=[],E=g(p),M=E.next();!M.done;M=E.next())for(P=M.value,N=g(e),L=N.next();!L.done;L=N.next())R=L.value,D(R)&&(I.push(v(R,P,"","")),I.push(x(R,P,"","")));for(O=g(e),U=O.next();!U.done;U=O.next())for(j=U.value,_=g(a[j]||[]),F=_.next();!F.done;F=_.next())V=F.value,D(j)&&(I.push(v(j,null,V,"")),I.push(v(j,null,"",V)),I.push(x(j,null,V,"")),I.push(x(j,null,"",V)));return T(q,Promise.all(I),2)}return q.return(Fc(h))})}function Mg(e){return k(function(t){if(t.g==1)return ue(t,2),T(t,rs(AS,Promise.all([e.close().catch(function(){}),e.closed])),4);if(t.g!=2)return pe(t,0);ae(t),K(t)})}function as(e){var t;return k(function(n){return t=Array.from(e.i.entries()),e.i.clear(),T(n,Promise.all(t.map(function(i){i=g(i);var r=i.next().value,o=i.next().value;return k(function(s){if(s.g==1)return ue(s,2),e.oa||e.B.has(r.sessionId)||o.type!=="persistent-license"||e.g.persistentSessionOnlinePlayback?T(s,Mg(r),5):T(s,r.remove(),5);if(s.g!=2)return pe(s,0);ae(s),K(s)})})),0)})}function Cg(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function TS(e){e.i.forEach(function(t,n){var i=t.Ng,r=n.expiration;isNaN(r)&&(r=1/0),r!=i&&(e.C.onExpirationUpdated(n.sessionId,r),t.Ng=r)})}function ls(e){return e=e.i.values(),rS(e,function(t){return t.loaded})}function xS(e){for(var t=g(e.h&&e.h.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.W.get(n.value)!=="usable")return!1;return!0}function SS(e,t){var n=[];for(t.forEach(function(i,r){n.push({keySystem:r,licenseServerUri:i,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=g(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function kg(e,t,n,i,r,o,s,u){var a=[];e=g(e);for(var l=e.next(),c={};!l.done;c={Ha:void 0},l=e.next()){if(c.Ha=l.value,t.includes(c.Ha.encryptionScheme)||t.push(c.Ha.encryptionScheme),c.Ha.keySystem=="org.w3.clearkey"&&c.Ha.licenseServerUri.startsWith("data:application/json;base64,")?a.includes(c.Ha.licenseServerUri)||a.push(c.Ha.licenseServerUri):n.includes(c.Ha.licenseServerUri)||n.push(c.Ha.licenseServerUri),r.includes(c.Ha.serverCertificateUri)||r.push(c.Ha.serverCertificateUri),c.Ha.serverCertificate&&(i.some(function(h){return function(m){return ri(m,h.Ha.serverCertificate)}}(c))||i.push(c.Ha.serverCertificate)),c.Ha.initData){l=g(c.Ha.initData);for(var f=l.next(),p={};!f.done;p={Eg:void 0},f=l.next())p.Eg=f.value,o.some(function(h){return function(m){var y=h.Eg;return m.keyId&&m.keyId==y.keyId?!0:m.initDataType==y.initDataType&&ri(m.initData,y.initData)}}(p))||o.push(p.Eg)}if(c.Ha.keyIds)for(l=g(c.Ha.keyIds),f=l.next();!f.done;f=l.next())s.add(f.value);if(c.Ha.keySystemUris&&u)for(c=g(c.Ha.keySystemUris),l=c.next();!l.done;l=c.next())u.add(l.value)}if(a.length==1)n.push(a[0]);else if(0<a.length){for(t=[],a=g(a),i=a.next();!i.done;i=a.next())i=B.atob(i.value.split("data:application/json;base64,").pop()),i=JSON.parse(i),t.push.apply(t,H(i.keys));a=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+B.btoa(a))}}function wS(e,t,n,i){var r=e.keySystem;r&&(r!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&t.get(r)&&(t=t.get(r),e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(r))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),i[r]&&(e.keySystem=i[r]),B.cast&&B.cast.__platform__&&r=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}function Dg(e,t){if(e=yr(e),e.size!=0){e=hh(e),t=g(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.drmInfos=[e]),n.audio&&(n.audio.drmInfos=[e])}}var AS=1,ES=5,IS=.5;function $u(e,t,n){for(n=n===void 0?!0:n,this.h=e,this.g=new Set([e]),t=t||[],e=g(t),t=e.next();!t.done;t=e.next())this.add(t.value,n)}$u.prototype.add=function(e,t){var n=this.h;t=t===void 0?!0:t;var i;if(!(i=!!n.audio!=!!e.audio||!!n.video!=!!e.video||n.language!=e.language)&&(i=n.audio&&e.audio)){i=n.audio;var r=e.audio;i=!(!((!i.channelsCount||!r.channelsCount||2<i.channelsCount||2<r.channelsCount)&&i.channelsCount!=r.channelsCount||i.spatialAudio!==r.spatialAudio||t&&!Rg(i,r))&&Pg(i.roles,r.roles)&&i.groupId===r.groupId)}return!i&&(i=n.video&&e.video)&&(n=n.video,i=e.video,i=!((!t||Rg(n,i))&&Pg(n.roles,i.roles))),i?!1:(this.g.add(e),!0)},$u.prototype.values=function(){return this.g.values()};function Rg(e,t){if(e.mimeType!=t.mimeType||(e=e.codecs.split(",").map(function(i){return ji(i)}),t=t.codecs.split(",").map(function(i){return ji(i)}),e.length!=t.length))return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Pg(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=g(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}W("shaka.media.AdaptationSet",$u),W("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"});function Qu(){}Qu.prototype.create=function(){},Qu.prototype.configure=function(){},Qu.prototype.getConfiguration=function(){},W("shaka.media.AdaptationSetCriteria",Qu);function MS(){this.g=cs,this.i=new Map().set(cs,2).set(eo,1),this.h=0}var eo=0,cs=1;/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function Kc(e,t,n){this.g=e,this.i=t,this.h=n}function Lg(e,t){return k(function(n){if(n.g==1)return T(n,Kx(e.h,t,e.g.drm.preferredKeySystems,e.g.drm.keySystemsMapping),2);if(e.g.streaming.dontChooseCodecs||Kh(t,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredDecodingAttributes,e.g.preferredTextFormats),!t.variants.some(ss))throw new C(2,4,4032);return n.return(jg(e,t))})}function Ng(e,t){var n=e.g.restrictions;e=e.i;var i=!1;t=g(t.variants);for(var r=t.next();!r.done;r=t.next()){r=r.value;var o=r.allowedByApplication;r.allowedByApplication=Nu(r,n,e),o!=r.allowedByApplication&&(i=!0)}return i}function jg(e,t){var n=Ng(e,t);if(t){var i=e.h?e.h.h:null;if(i&&e.h.A){for(var r=new Set,o=g(t.variants),s=o.next();!s.done;s=o.next())s=s.value,s.audio&&r.add(s.audio),s.video&&r.add(s.video);for(r=g(r),o=r.next();!o.done;o=r.next())Ug(e,i.keySystem,o.value)}Og(e,t)}return n}function Ug(e,t,n){n=g(n.drmInfos);for(var i=n.next();!i.done;i=n.next())if(i=i.value,i.keySystem==t){i=g(i.initData||[]);for(var r=i.next();!r.done;r=i.next())r=r.value,us(e.h,r.initDataType,r.initData)}}function Og(e,t){e=e.h?e.h.Re():{};var n=Object.keys(e);n=n.length&&n[0]=="00";var i=!1,r=!1,o=new Set,s=new Set,u=new Set;t=g(t.variants);for(var a=t.next();!a.done;a=t.next())a=a.value,a.audio&&u.add(a.audio),a.video&&u.add(a.video),a.allowedByApplication?a.allowedByKeySystem&&(i=!0):r=!0;for(u=g(u),t=u.next();!t.done;t=u.next())if(t=t.value,t.keyIds.size)for(t=g(t.keyIds),a=t.next();!a.done;a=t.next()){a=a.value;var l=e[n?"00":a];l?Xc.includes(l)&&s.add(l):o.add(a)}if(!i)throw e={hasAppRestrictions:r,missingKeys:Array.from(o),restrictedKeyStatuses:Array.from(s)},new C(2,4,4012,e)}var Xc=["output-restricted","internal-error"];function fs(){}function Tr(e,t){to.set(e,t)}function CS(){var e={};if(ye(),Zn())for(var t=g(to.keys()),n=t.next();!n.done;n=t.next())e[n.value]=!0;for(t=g(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]),n=t.next();!n.done;n=t.next())n=n.value,e[n]=Zn()?to.has(n):wr().canPlayType(n)!="";return e}function _g(e,t){if(t){var n=to.get(t.toLowerCase());if(n)return n}throw new C(2,4,4e3,e,t)}W("shaka.media.ManifestParser",fs),fs.unregisterParserByMime=function(e){to.delete(e)},fs.registerParserByMime=Tr,fs.registerParserByExtension=function(){Ae("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},fs.AccessibilityPurpose={qm:"visually impaired",Dl:"hard of hearing",Zl:"spoken subtitles"};var to=new Map;function Ju(e,t){var n=null,i=null,r=null,o=null,s=e.T();return t&1&&(r=e.ud()),t&2&&(o=e.T()),t&8&&(n=e.T()),t&16&&(i=e.T()),{trackId:s,Id:n,Jd:i,dj:r,Ci:o}}function Zu(e,t){return t==1?(t=e.T(),e=e.T(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.T()}}function ea(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.T(),e.skip(4),e=e.Aa(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function ta(e,t,n){var i=e.T(),r=[],o=null;n&1&&(o=e.Sg()),n&4&&e.skip(4);for(var s=0;s<i;s++){var u={ah:null,sampleSize:null,xf:null};n&256&&(u.ah=e.T()),n&512&&(u.sampleSize=e.T()),n&1024&&e.skip(4),n&2048&&(u.xf=t==0?e.T():e.Sg()),r.push(u)}return{vm:i,$g:r,gg:o}}function bg(e){e.skip(6),e.skip(2),e.skip(8);var t=e.Aa();return e.skip(2),e.skip(2),e.skip(2),e=e.Aa()+e.Aa()/65536,{channelCount:t,sampleRate:e}}function Wc(e){return e=e.T(),{codec:zu(e)}}function kS(e){var t=null,n=null,i=e.Sb(4),r=String.fromCharCode(i[0]);if(r+=String.fromCharCode(i[1]),r+=String.fromCharCode(i[2]),r+=String.fromCharCode(i[3]),r==="nclx"){switch(e.Aa()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(i=e.Aa(),e.Aa(),i){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,ke:n}}function ds(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function en(e){return(10>e?"0":"")+e}function xr(e){if(!Gg){Gg=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),i=new Uint8Array([0,0,0,1]);na=Se("ftyp",t,i,t,n),t=Se("dref",BS),zc=Se("dinf",t)}this.g=e}function no(e){for(var t=[],n=g(e.g),i=n.next();!i.done;i=n.next()){var r=t,o=r.push,s=i.value;i=Se;var u=s.id+1,a=s.stream.width||0,l=s.stream.height||0;s.type=="audio"&&(l=a=0);var c=s.duration*s.timescale,f=Math.floor(c/(bi+1));switch(c=Math.floor(c%(bi+1)),u=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(H(qe(u,4)),[0,0,0,0],H(qe(f,4)),H(qe(c,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],H(qe(a,2)),[0,0],H(qe(l,2)),[0,0])),u=Se("tkhd",u),a=Se,f=s.duration*s.timescale,l=Math.floor(f/(bi+1)),f=Math.floor(f%(bi+1)),c=s.stream.language,c=c.charCodeAt(0)-96<<10|c.charCodeAt(1)-96<<5|c.charCodeAt(2)-96,l=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(H(qe(s.timescale,4)),H(qe(l,4)),H(qe(f,4)),H(qe(c,2)),[0,0])),l=Se("mdhd",l),f=s,c=new Uint8Array([]),f.type){case"video":c=RS;break;case"audio":c=PS}f=Se("hdlr",c);e:{switch(s.type){case"video":s=Se("minf",Se("vmhd",OS),zc,Bg(s));break e;case"audio":s=Se("minf",Se("smhd",_S),zc,Bg(s));break e}s=new Uint8Array([])}s=a("mdia",l,f,s),i=i("trak",u,s),o.call(r,i)}for(t=nt.apply(Et,H(t)),o=e.g[0],n=Se,i=o.duration*o.timescale,r=Math.floor(i/(bi+1)),i=Math.floor(i%(bi+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(H(qe(o.timescale,4)),H(qe(r,4)),H(qe(i,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),r=Se("mvhd",r),i=[],e=g(e.g),a=e.next();!a.done;a=e.next())s=i,u=s.push,a=new Uint8Array([0,0,0,0].concat(H(qe(a.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=Se("trex",a),u.call(s,a);if(e=nt.apply(Et,H(i)),e=Se("mvex",e),i=[],o.encrypted){for(o=g(o.stream.drmInfos),s=o.next();!s.done;s=o.next())if(s=s.value,s.initData)for(s=g(s.initData),u=s.next();!u.done;u=s.next())i.push(u.value.initData);o=nt.apply(Et,H(i))}else o=new Uint8Array([]);return e=n("moov",r,t,e,o),t=new Uint8Array(na.byteLength+e.byteLength),t.set(na),t.set(e,na.byteLength),t}function Bg(e){var t=Se,n="aac";e.codecs.includes("mp3")?n="mp3":e.codecs.includes("ac-3")?n=ye().ae()?"ec-3":"ac-3":e.codecs.includes("ec-3")?n="ec-3":e.codecs.includes("opus")&&(n="opus");var i=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){if(n=e.stream.width||0,i=e.stream.height||0,0<e.Na.byteLength)var r=Se("avcC",e.Na);else{r=Se;for(var o=7,s=[],u=[],a=0,l=0,c=0,f=0;f<e.zb.length;f++){var p=Vg(e.zb[f]);switch(p[0]&31){case 7:s.push(p),o+=p.length+2;break;case 8:u.push(p),o+=p.length+2}}for(0<s.length&&(a=s[0][1],c=s[0][2],l=s[0][3]),o=new Uint8Array(o),f=0,o[f++]=1,o[f++]=a,o[f++]=c,o[f++]=l,o[f++]=255,o[f++]=224|s.length,a=0;a<s.length;a++)o[f++]=(s[a].length&65280)>>8,o[f++]=s[a].length&255,o.set(s[a],f),f+=s[a].length;for(o[f++]=u.length,s=0;s<u.length;s++)o[f++]=(u[s].length&65280)>>8,o[f++]=u[s].length&255,o.set(u[s],f),f+=u[s].length;r=r("avcC",o)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(H(qe(n,2)),H(qe(i,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),i="avc1",u=Fg(e),s=new Uint8Array([]),e.encrypted&&(s=Sr(0,e.stream,e.codecs),i="encv"),i=Se(i,n,r,u,s)}else e.codecs.includes("hvc1")&&(i=e.stream.width||0,r=e.stream.height||0,n=new Uint8Array([]),0<e.Na.byteLength&&(n=Se("hvcC",e.Na)),i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(H(qe(i,2)),H(qe(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="hvc1",u=Fg(e),s=new Uint8Array([]),e.encrypted&&(s=Sr(0,e.stream,e.codecs),r="encv"),i=Se(r,i,n,u,s));break;case"audio":n=="mp3"?e=Se(".mp3",ps(e)):n=="ac-3"?(n=Se("dac3",e.Da),i="ac-3",r=new Uint8Array([]),e.encrypted&&(r=Sr(0,e.stream,e.codecs),i="enca"),e=Se(i,ps(e),n,r)):n=="ec-3"?(n=Se("dec3",e.Da),i="ec-3",r=new Uint8Array([]),e.encrypted&&(r=Sr(0,e.stream,e.codecs),i="enca"),e=Se(i,ps(e),n,r)):n=="opus"?(n=Se("dOps",e.Da),i="Opus",r=new Uint8Array([]),e.encrypted&&(r=Sr(0,e.stream,e.codecs),i="enca"),e=Se(i,ps(e),n,r)):(0<e.Da.byteLength?n=Se("esds",e.Da):(n=Se,i=e.id+1,r=e.stream.channelsCount||2,s=e.stream.audioSamplingRate||44100,a=Vr("audio",e.codecs.split(",")),l={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},u=l[s],(a==="mp4a.40.5"||a==="mp4a.40.29")&&(u=l[2*s]),s=parseInt(a.split(".").pop(),10),i=new Uint8Array([0,0,0,0,3,25].concat(H(qe(i,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,s<<3|u>>>1,u<<7|r<<3,6,1,2])),n=n("esds",i)),i="mp4a",r=new Uint8Array([]),e.encrypted&&(r=Sr(0,e.stream,e.codecs),i="enca"),e=Se(i,ps(e),n,r)),i=e}return e=Se("stsd",bS,i),t("stbl",e,Se("stts",LS),Se("stsc",NS),Se("stsz",US),Se("stco",jS))}function Fg(e){if(!e.Wa&&!e.Xa)return new Uint8Array([]);var t=e.Xa;return e=new Uint8Array([].concat(H(qe(e.Wa,4)),H(qe(t,4)))),Se("pasp",e)}function ps(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(H(qe(e.stream.audioSamplingRate||44100,2)),[0,0]))}function Sr(e,t,n){e=Se,n=new Uint8Array([].concat(H(qe(Hg(n.split(".")[0]),4)))),n=Se("frma",n);var i="cenc",r=t.drmInfos[0];r&&r.encryptionScheme&&(i=r.encryptionScheme),i=new Uint8Array([0,0,0,0].concat(H(qe(Hg(i),4)),[0,1,0,0])),i=Se("schm",i),r=Se;var o=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);t=g(t.drmInfos);for(var s=t.next();!s.done;s=t.next())if((s=s.value)&&s.keyIds&&s.keyIds.size){s=g(s.keyIds);for(var u=s.next();!u.done;u=s.next())o=Vg(u.value)}return t=new Uint8Array([0,0,0,0,0,0,1,8]),t=Se("tenc",t,o),e("sinf",n,i,r("schi",t))}function hs(e){var t=[];e=g(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=t.push,r=i.apply,o=Se,s=new Uint8Array([0,0,0,0].concat(H(qe(n.data?n.data.Tb:0,4))));s=Se("mfhd",s);var u,a=n.data?n.data.xb:[],l=new Uint8Array(4+a.length);for(u=0;u<a.length;u++){var c=a[u].flags;l[u+4]=c.ib<<4|c.kb<<2|c.jb}a=Se("sdtp",l);var f=a.length+92;l=Se,u=new Uint8Array([0,0,0,58].concat(H(qe(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),u=Se("tfhd",u),c=n.data?n.data.baseMediaDecodeTime:0;var p=Math.floor(c%(bi+1));c=new Uint8Array([1,0,0,0].concat(H(qe(Math.floor(c/(bi+1)),4)),H(qe(p,4)))),c=Se("tfdt",c);var h=f;f=n.data?n.data.xb:[],p=f.length;var m=12+16*p,y=new Uint8Array(m);for(h+=8+m,y.set([n.type==="video"?1:0,0,15,1].concat(H(qe(p,4)),H(qe(h,4))),0),h=0;h<p;h++){var v=f[h];m=qe(v.duration,4);var x=qe(v.size,4),S=v.flags;v=qe(v.qb,4),y.set([].concat(H(m),H(x),[S.vb<<2|S.ib,S.kb<<6|S.jb<<4|S.wb,S.hb&61440,S.hb&15],H(v)),12+16*h)}f=Se("trun",y),a=l("traf",u,c,f,a),o=o("moof",s,a),r.call(i,t,[o,DS(n)])}return nt.apply(Et,H(t))}function DS(e){return e=(e.data?e.data.xb:[]).map(function(t){return t.data}),e=nt.apply(Et,H(e)),Se("mdat",e)}function qe(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function Vg(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function Hg(e){for(var t=0,n=0;n<e.length;n+=1)t|=e.charCodeAt(n)<<8*(e.length-n-1);return t}function Se(e){var t=ht.apply(1,arguments),n=Kg.get(e);n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],Kg.set(e,n));for(var i=8,r=t.length-1;0<=r;r--)i+=t[r].byteLength;for(r=new Uint8Array(i),r[0]=i>>24&255,r[1]=i>>16&255,r[2]=i>>8&255,r[3]=i&255,r.set(n,4),n=0,i=8;n<t.length;n++)r.set(t[n],i),i+=t[n].byteLength;return r}var Gg=!1,bi=Math.pow(2,32)-1,Kg=new Map,RS=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),PS=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),LS=new Uint8Array([0,0,0,0,0,0,0,0]),NS=new Uint8Array([0,0,0,0,0,0,0,0]),jS=new Uint8Array([0,0,0,0,0,0,0,0]),US=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),OS=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),_S=new Uint8Array([0,0,0,0,0,0,0,0]),bS=new Uint8Array([0,0,0,0,0,0,0,1]),na=new Uint8Array([]),BS=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),zc=new Uint8Array([]);function FS(e){e=le(e);var t=null;return new Ue().box("moov",de).box("trak",de).box("mdia",de).box("minf",de).box("stbl",de).R("stsd",gi).box("enca",function(n){return t=n.reader.h,Wu(n)}).box("sinf",de).box("frma",function(n){n.parser.stop(),Wc(n.reader).codec==="ec-3"&&t&&t.getUint16(16)!==2&&t.setUint16(16,2)}).parse(e),e}function VS(e,t,n){function i(h){f.push({box:h,li:1701733217})}function r(h){f.push({box:h,li:1701733238})}function o(h){a=!0,h.parser.stop()}function s(h){c.push(h),de(h)}var u=t=le(t),a=!1,l,c=[],f=[];if(new Ue().box("moov",s).box("trak",s).box("mdia",s).box("minf",s).box("stbl",s).R("stsd",function(h){l=h,c.push(h),gi(h)}).R("encv",o).R("enca",o).R("dvav",r).R("dva1",r).R("dvh1",r).R("dvhe",r).R("dvc1",r).R("dvi1",r).R("hev1",r).R("hvc1",r).R("avc1",r).R("avc3",r).R("ac-3",i).R("ec-3",i).R("ac-4",i).R("Opus",i).R("fLaC",i).R("mp4a",i).parse(t),a)return t;if(f.length==0||!l)throw si(t),new C(2,3,3019,n);f.reverse(),n=g(f);for(var p=n.next();!p.done;p=n.next())p=p.value,u=KS(e,u,l,p.box,c,p.li);return ye().wi()?(e=new Uint8Array(t.byteLength+u.byteLength),e.set(u),e.set(t,u.byteLength),e):u}function HS(e){e=le(e);var t=[];new Ue().box("mdat",function(s){t.push(s)}).parse(e);for(var n=[],i=0;i<t.length;i++){var r=t[i-1],o=t[i];n.push(GS(e.subarray(r?r.start+r.size:0,o.start+o.size)))}return nt.apply(Et,H(n))}function GS(e){function t(f){s.push(f),de(f)}var n,i,r,o,s=[];if(new Ue().box("moof",t).box("traf",t).R("tfhd",function(f){n=f,r=Ju(f.reader,f.flags)}).R("trun",function(f){i=f,o=ta(f.reader,f.version,f.flags)}).parse(e),r&&r.Ci!==2){var u=n.start+_i(n)+4+(r.dj!==null?8:0),a=Ht(e);if(r.Ci!==null)a.setUint32(u,2);else{ia(e,n.start,n.size+4);var l=a.getUint32(n.start+8);a.setUint32(n.start+8,l|2),o&&o.gg!==null&&a.setInt32(i.start+_i(i)+4,o.gg+4),l=e.subarray(0,u),a=e.subarray(u),e=new Uint8Array(e.byteLength+4),e.set(l),l=[];for(var c=3;0<=c;c--)l.push(2>>8*c&255);for(e.set(new Uint8Array(l),u),e.set(a,u+4),u=g(s),a=u.next();!a.done;a=u.next())a=a.value,ia(e,a.start,a.size+4)}}return e}function KS(e,t,n,i,r,o){var s=Sr(new xr([]),e,i.name),u=t.subarray(i.start,i.start+i.size);for(e=new Uint8Array(i.size+s.byteLength),e.set(u,0),Ht(e).setUint32(4,o),e.set(s,i.size),ia(e,0,e.byteLength),o=new Uint8Array(t.byteLength+e.byteLength),i=ye().Ye()?i.start:i.start+i.size,s=t.subarray(i),o.set(t.subarray(0,i)),o.set(e,i),o.set(s,i+e.byteLength),t=g(r),r=t.next();!r.done;r=t.next())r=r.value,ia(o,r.start,r.size+e.byteLength);return e=Ht(o,n.start),n=_i(n),t=e.getUint32(n),e.setUint32(n,t+1),o}function ia(e,t,n){e=Ht(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}function XS(e){function t(r){i.push({start:r.start,size:r.size}),de(r)}var n=le(e),i=[];return new Ue().box("moov",t).box("trak",t).box("mdia",t).box("minf",t).box("stbl",t).box("stsd",function(r){i.push({start:r.start,size:r.size});for(var o=Ht(n,r.start),s=0;s<r.size-3;s++){var u=o.getUint32(s);u==1633889587?o.setUint32(s,1700998451):u==1684103987&&o.setUint32(s,1684366131)}}).parse(n),n}function Xt(e,t,n,i,r,o,s,u){this.O=e,this.startByte=t,this.endByte=n,this.nd=i===void 0?null:i,this.timescale=r===void 0?null:r,this.h=o===void 0?null:o,this.aesKey=s===void 0?null:s,this.g=this.mimeType=this.codecs=null,this.encrypted=u===void 0?!1:u}Xt.prototype.wc=function(){return this.startByte},Xt.prototype.uc=function(){return this.endByte},Xt.prototype.ce=function(e){this.h=e},Xt.prototype.Wb=function(){return this.h};function ra(e,t){return e===t?!0:e&&t?e.wc()==t.wc()&&e.uc()==t.uc()&&Wo(e.O().sort(),t.O().sort())&&ri(e.Wb(),t.Wb()):e==t}W("shaka.media.InitSegmentReference",Xt),Xt.prototype.getEndByte=Xt.prototype.uc,Xt.prototype.getStartByte=Xt.prototype.wc;function Z(e,t,n,i,r,o,s,u,a,l,c,f,p,h,m,y){for(l=l===void 0?[]:l,h=h===void 0?mi:h,this.startTime=e,this.j=this.endTime=t,this.C=n,this.startByte=i,this.endByte=r,this.Z=o,this.timestampOffset=s,this.appendWindowStart=u,this.appendWindowEnd=a,this.g=l,this.tilesLayout=c===void 0?"":c,this.B=f===void 0?null:f,this.h=p===void 0?null:p,this.status=h,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=m===void 0?null:m,this.thumbnailSprite=null,this.i=-1,this.A=y===void 0?!1:y,this.F=this.o=!1,e=g(this.g),t=e.next();!t.done;t=e.next())t.value.gi();this.A&&this.g.length&&this.g[this.g.length-1].ei(),this.s=this.bandwidth=this.mimeType=this.codecs=null,this.G=!1}d=Z.prototype,d.O=function(){return this.C()},d.getStartTime=function(){return this.startTime},d.wj=function(){return this.endTime},d.wc=function(){return this.startByte},d.uc=function(){return this.endByte},d.Sj=function(){return this.tilesLayout},d.Rj=function(){return this.B},d.xc=function(){return this.status},d.lk=function(){this.status=Wg},d.Kg=function(){this.preload=!0},d.isPreload=function(){return this.preload},d.md=function(){this.l=!1},d.ck=function(){return this.l},d.gi=function(){this.o=!0},d.ek=function(){return this.o},d.ei=function(){this.F=!0},d.dk=function(){return this.F},d.di=function(){this.m=!0},d.Yj=function(){return this.m},d.Cf=function(e){this.thumbnailSprite=e},d.Pj=function(){return this.thumbnailSprite},d.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=g(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.j+=e},d.ph=function(e){this.h==null?zn("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},d.ce=function(e,t){this.s=e,this.G=t===void 0?!1:t},d.Wb=function(e){var t=this.s;return(e===void 0||e)&&this.G&&(this.s=null),t};function Xg(e,t){e.Z=t,e=g(e.g);for(var n=e.next();!n.done;n=e.next())Xg(n.value,t)}W("shaka.media.SegmentReference",Z),Z.prototype.getSegmentData=Z.prototype.Wb,Z.prototype.setSegmentData=Z.prototype.ce,Z.prototype.syncAgainst=Z.prototype.ph,Z.prototype.offset=Z.prototype.offset,Z.prototype.getThumbnailSprite=Z.prototype.Pj,Z.prototype.setThumbnailSprite=Z.prototype.Cf,Z.prototype.hasByterangeOptimization=Z.prototype.Yj,Z.prototype.markAsByterangeOptimization=Z.prototype.di,Z.prototype.isLastPartial=Z.prototype.dk,Z.prototype.markAsLastPartial=Z.prototype.ei,Z.prototype.isPartial=Z.prototype.ek,Z.prototype.markAsPartial=Z.prototype.gi,Z.prototype.isIndependent=Z.prototype.ck,Z.prototype.markAsNonIndependent=Z.prototype.md,Z.prototype.isPreload=Z.prototype.isPreload,Z.prototype.markAsPreload=Z.prototype.Kg,Z.prototype.markAsUnavailable=Z.prototype.lk,Z.prototype.getStatus=Z.prototype.xc,Z.prototype.getTileDuration=Z.prototype.Rj,Z.prototype.getTilesLayout=Z.prototype.Sj,Z.prototype.getEndByte=Z.prototype.uc,Z.prototype.getStartByte=Z.prototype.wc,Z.prototype.getEndTime=Z.prototype.wj,Z.prototype.getStartTime=Z.prototype.getStartTime,Z.prototype.getUris=Z.prototype.O;var mi=0,Wg=1;Z.Status={cl:mi,om:Wg,Nl:2};function gs(e){return e.length==1&&1e-4>e.end(0)-e.start(0)}function Yc(e){return!e||gs(e)?null:e.length?e.end(e.length-1):null}function qc(e,t){return!e||!e.length||gs(e)||t>e.end(e.length-1)?!1:t>=e.start(0)}function zg(e,t){if(!e||!e.length||gs(e))return 0;var n=0;e=g(vi(e));for(var i=e.next();!i.done;i=e.next()){var r=i.value;i=r.start,r=r.end,r>t&&(n+=r-Math.max(i,t))}return n}function WS(e,t,n){return!e||!e.length||gs(e)?null:(e=vi(e).findIndex(function(i,r,o){return i.start>t&&(r==0||o[r-1].end-t<=n)}),0<=e?e:null)}function vi(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function $c(){}function Yg(e,t){var n=document.createElement("source");return n.src=e,n.type=t===void 0?"":t,n}function oa(e){for(var t=!1,n=e.getElementsByTagName("source"),i=n.length-1;0<=i;--i)e.removeChild(n[i]),t=!0;return e.src&&(e.removeAttribute("src"),t=!0),t}function ms(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function wr(){return io||(Qc||(Qc=new ve(function(){io=null})),(io=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(io=document.createElement("video")),Qc.ha(1),io)}function zS(e,t){var n,i,r,o,s;return k(function(u){if(u.g==1)return"fonts"in document&&"FontFace"in B?T(u,document.fonts.ready,2):u.return();if(!("entries"in document.fonts))return u.return();for(n=function(a){a=a.entries();for(var l=[],c=a.next();c.done===!1;)l.push(c.value),c=a.next();return l},i=g(n(document.fonts)),r=i.next();!r.done;r=i.next())if(o=r.value,o.family===e&&o.display==="swap")return u.return();s=new FontFace(e,"url("+t+")",{display:"swap"}),document.fonts.add(s),K(u)})}W("shaka.util.Dom",$c),$c.removeAllChildren=ms,$c.clearSourceFromVideo=oa;var Qc=null,io=null;/*
 @license
 Shaka Player
 Copyright 2022 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function Jc(){}function qg(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function $g(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function Zc(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function YS(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(2>e.size||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var i=ze(le(e.data,1,n)),r=e.data[2+n],o=e.data.subarray(3+n).indexOf(0);if(o===-1)return null;var s=ze(le(e.data,3+n,o)),u;return i==="-->"?u=ze(le(e.data,4+n+o)):u=gn(e.data.subarray(4+n+o)),t.mimeType=i,t.pictureType=r,t.description=s,t.data=u,t}return e.type==="TXXX"?2>e.size||e.data[0]!==3||(i=e.data.subarray(1).indexOf(0),i===-1)?null:(n=ze(le(e.data,1,i)),e=ze(le(e.data,2+i)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?2>e.size||e.data[0]!==3||(i=e.data.subarray(1).indexOf(0),i===-1)?null:(n=ze(le(e.data,1,i)),e=ze(le(e.data,2+i)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?2>e.size||(n=e.data.indexOf(0),n===-1)?null:(n=ze(le(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=gn(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=ze(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=ze(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=gn(e.data),t):null}function Ar(e){for(var t=0,n=[];qg(e,t);){var i=Zc(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,i=t+i;t+10<i;){var r=e.subarray(t),o=Zc(r,4);r={type:String.fromCharCode(r[0],r[1],r[2],r[3]),size:o,data:r.subarray(10,10+o)},(o=YS(r))&&n.push(o),t+=r.size+10}$g(e,t)&&(t+=10)}return n}function ro(e,t){for(var n=t=t===void 0?0:t,i=0;qg(e,t);)e[t+5]>>6&1&&(i+=10),i+=10,i+=Zc(e,t+6),$g(e,t+10)&&(i+=10),t+=i;return 0<i?e.subarray(n,n+i):new Uint8Array([])}W("shaka.util.Id3Utils",Jc),Jc.getID3Data=ro,Jc.getID3Frames=Ar;function Qg(e){return new Date(Date.UTC(1900,0,1,0,0,0,0)+e).getTime()}function yi(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,i=0;i<e.byteLength;i++)2<=i&&e[i]==3&&e[i-1]==0&&e[i-2]==0||(t[n]=e[i],n++);this.j=le(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function ef(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),i=Math.min(4,e.i);i!==0&&(n.set(e.j.subarray(t,t+i)),e.h=new Fe(n,0).T(),e.g=8*i,e.i-=i)}function tn(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,ef(e)}e.h<<=t,e.g-=t}function Te(e,t){var n=Math.min(e.g,t),i=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&ef(e),n=t-n,0<n?i<<n|Te(e,n):i}function tf(e){var t;for(t=0;t<e.g;++t)if((e.h&2147483648>>>t)!==0)return e.h<<=t,e.g-=t,t;return ef(e),t+tf(e)}function Wt(e){tn(e,1+tf(e))}function z(e){var t=tf(e);return Te(e,t+1)-1}function oo(e){return e=z(e),1&e?1+e>>>1:-1*(e>>>1)}function Q(e){return Te(e,1)===1}function De(e){return Te(e,8)}function sa(e,t){for(var n=8,i=8,r=0;r<t;r++)i!==0&&(i=oo(e),i=(n+i+256)%256),n=i===0?n:i}function qS(e){return De(e),z(e),z(e)}W("shaka.util.ExpGolomb",yi);function Ge(){this.G=null,this.H=!1,this.m=this.I=null,this.j=[],this.g=[],this.A=this.B=null,this.i=[],this.h=[],this.C=null,this.l=[],this.F=this.o=this.s=null}d=Ge.prototype,d.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},d.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,rf(e)),n=e.length-(e.length+t)%188,i=!1,r=t;r<n;r+=188)if(e[r]==71){var o=!!(e[r+1]&64),s=((e[r+1]&31)<<8)+e[r+2];if(1<(e[r+3]&48)>>4){var u=r+5+e[r+4];if(u==r+188)continue}else u=r+4;switch(s){case 0:o&&(u+=e[u]+1),this.G=(e[u+10]&31)<<8|e[u+11];break;case 17:case 8191:break;case this.G:o&&(u+=e[u]+1),o=e,s={audio:-1,video:-1,We:-1,audioCodec:"",videoCodec:""};var a=u+3+((o[u+1]&15)<<8|o[u+2])-4;for(u+=12+((o[u+10]&15)<<8|o[u+11]);u<a;){var l=(o[u+1]&31)<<8|o[u+2],c=(o[u+3]&15)<<8|o[u+4];switch(o[u]){case 6:if(0<c)for(var f=u+5,p=c;2<p;){var h=o[f+1]+2;switch(o[f]){case 5:var m=fc(o.subarray(f+2,f+h));s.audio==-1&&m==="Opus"?(s.audio=l,s.audioCodec="opus"):s.video==-1&&m==="AV01"&&(s.video=l,s.videoCodec="av1");break;case 106:s.audio==-1&&(s.audio=l,s.audioCodec="ac3");break;case 122:s.audio==-1&&(s.audio=l,s.audioCodec="ec3");break;case 124:s.audio==-1&&(s.audio=l,s.audioCodec="aac");break;case 127:s.audioCodec=="opus"&&(m=null,o[f+2]===128&&(m=o[f+3]),m!=null&&(this.F={channelCount:(m&15)===0?2:m&15,gj:m,sampleRate:48e3}))}f+=h,p-=h}break;case 15:s.audio==-1&&(s.audio=l,s.audioCodec="aac");break;case 17:s.audio==-1&&(s.audio=l,s.audioCodec="aac-loas");break;case 21:s.We==-1&&(s.We=l);break;case 27:s.video==-1&&(s.video=l,s.videoCodec="avc");break;case 3:case 4:s.audio==-1&&(s.audio=l,s.audioCodec="mp3");break;case 36:s.video==-1&&(s.video=l,s.videoCodec="hvc");break;case 129:s.audio==-1&&(s.audio=l,s.audioCodec="ac3");break;case 132:case 135:s.audio==-1&&(s.audio=l,s.audioCodec="ec3")}u+=c+5}o=s,o.video!=-1&&(this.I=o.video,this.m=o.videoCodec),o.audio!=-1&&(this.B=o.audio,this.A=o.audioCodec),o.We!=-1&&(this.C=o.We),i&&!this.H&&(i=!1,r=t-188),this.H=!0;break;case this.I:u=e.subarray(u,r+188),o?this.j.push([u]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(u);break;case this.B:u=e.subarray(u,r+188),o?this.i.push([u]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(u);break;case this.C:u=e.subarray(u,r+188),o?this.l.push([u]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(u);break;default:i=!0}}return this};function nf(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var i=t[7];if(i&192){var r=536870912*(t[9]&14)+4194304*(t[10]&255)+16384*(t[11]&254)+128*(t[12]&255)+(t[13]&254)/2;e.s==null&&(e.s=r),n.pts=Zg(r,e.s),e.s=n.pts,n.dts=n.pts,i&64&&(i=536870912*(t[14]&14)+4194304*(t[15]&255)+16384*(t[16]&254)+128*(t[17]&255)+(t[18]&254)/2,e.o==null&&(e.o=i),n.dts=n.pts!=r?Zg(i,e.o):i),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}d.wk=function(e){return Ae("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.Pg(e,{Wd:null,state:null})},d.Pg=function(e,t){var n=e.pts?e.pts/9e4:null;e=e.data;var i=e.byteLength,r=1;this.m=="hvc"&&(r=2);var o=t.state||0,s=o,u=0,a=[],l=-1,c=0;for(o==-1&&(l=0,c=this.m=="hvc"?e[0]>>1&63:e[0]&31,o=0,u=1);u<i;){var f=e[u++];o?o===1?o=f?0:2:f?f==1?(f=u-o-1,0<=l?a.push({data:e.subarray(l+r,f),fullData:e.subarray(l,f),type:c,time:n,state:null}):(o=a.length?a[a.length-1]:t.Wd)&&(s&&u<=4-s&&o.state&&(o.data=o.data.subarray(0,o.data.byteLength-s),o.fullData=o.fullData.subarray(0,o.fullData.byteLength-s)),0<f&&(f=e.subarray(0,f),o.data=nt(o.data,f),o.fullData=nt(o.fullData,f),o.state=0)),u<i?(c=this.m=="hvc"?e[u]>>1&63:e[u]&31,l=u,o=0):o=-1):o=0:o=3:o=f?0:1}return 0<=l&&0<=o&&a.push({data:e.subarray(l+r,i),fullData:e.subarray(l,i),type:c,time:n,state:o}),!a.length&&t.Wd&&(n=a.length?a[a.length-1]:t.Wd)&&(n.data=nt(n.data,e),n.fullData=nt(n.fullData,e)),t.state=o,a},d.getMetadata=function(){for(var e=[],t=g(this.l),n=t.next();!n.done;n=t.next())n=nt.apply(Et,H(n.value)),(n=nf(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:Ar(n.data),dts:n.dts,pts:n.pts});return e},d.rb=function(){if(this.i.length&&!this.h.length)for(var e=g(this.i),t=e.next();!t.done;t=e.next()){var n=nt.apply(Et,H(t.value)),i=nf(this,n);t=this.h.length?this.h[this.h.length-1]:null,i&&i.pts!=null&&i.dts!=null&&(!t||t.pts!=i.pts&&t.dts!=i.dts)?this.h.push(i):this.h.length&&(n=i?i.data:n)&&(t=this.h.pop(),t.data=nt(t.data,n),this.h.push(t))}return this.h},d.Nc=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=g(this.j),n=t.next();!n.done;n=t.next()){var i=nt.apply(Et,H(n.value)),r=nf(this,i);n=this.g.length?this.g[this.g.length-1]:null,r&&r.pts!=null&&r.dts!=null&&(!n||n.pts!=r.pts&&n.dts!=r.dts)?this.g.push(r):this.g.length&&(i=r?r.data:i)&&(n=this.g.pop(),n.data=nt(n.data,i),this.g.push(n))}if(e){for(t={Wd:null,state:null},n=[],i=g(this.g),r=i.next();!r.done;r=i.next())r=r.value,r.nalus=this.Pg(r,t),r.nalus.length&&(n.push(r),t.Wd=r.nalus[r.nalus.length-1]);this.g=n}}return e?this.g:(e=this.g,this.g=[],e)},d.getStartTime=function(e){if(e=="audio"){e=null;var t=this.rb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.Nc(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},d.Ld=function(){return{audio:this.A,video:this.m}},d.Ve=function(){for(var e=[],t=g(this.Nc()),n=t.next();!n.done;n=t.next())e.push.apply(e,H(n.value.nalus));return e},d.Vj=function(){Ae("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.Cg();return{height:e.height,width:e.width}},d.Cg=function(){return this.m=="hvc"?QS(this):$S(this)};function Jg(e){var t=e.Nc();return 1<t.length&&(e=t[0].pts,t=t[1].pts,!isNaN(t-e))?String(1/(t-e)*9e4):null}function $S(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.Ve();if(!n.length||(n=n.find(function(h){return h.type==7}),!n))return t;n=new yi(n.data);var i=De(n),r=De(n),o=De(n);if(Wt(n),JS.includes(i)){var s=z(n);if(s===3&&tn(n,1),Wt(n),Wt(n),tn(n,1),Q(n)){s=s!==3?8:12;for(var u=0;u<s;u++)Q(n)&&(6>u?sa(n,16):sa(n,64))}}if(Wt(n),s=z(n),s===0)z(n);else if(s===1)for(tn(n,1),Wt(n),Wt(n),s=z(n),u=0;u<s;u++)Wt(n);Wt(n),tn(n,1),s=z(n),u=z(n);var a=Te(n,1);a===0&&tn(n,1),tn(n,1);var l=0,c=0,f=0,p=0;return Q(n)&&(l=z(n),c=z(n),f=z(n),p=z(n)),t.height=String((2-a)*(u+1)*16-2*f-2*p),t.width=String(16*(s+1)-2*l-2*c),t.codec="avc1."+("0"+i.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+o.toString(16).toUpperCase()).slice(-2),t.frameRate=Jg(e),t}function QS(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.Ve();if(!n.length||(n=n.find(function(D){return D.type==33}),!n))return t;var i=new yi(n.fullData,!0);De(i),De(i),Te(i,4);var r=Te(i,3);Q(i);var o=Te(i,2),s=Te(i,1),u=Te(i,5),a=Te(i,32);n=De(i);for(var l=De(i),c=De(i),f=De(i),p=De(i),h=De(i),m=De(i),y=[],v=[],x=0;x<r;x++)y.push(Q(i)),v.push(Q(i));if(0<r)for(x=r;8>x;x++)Te(i,2);for(x=0;x<r;x++)y[x]&&Te(i,88),v[x]&&De(i);z(i),r=z(i),r==3&&Te(i,1),y=z(i),v=z(i);var S=x=0,w=0,A=0;return Q(i)&&(x+=z(i),S+=z(i),w+=z(i),A+=z(i)),t.width=String(y-(x+S)*(r===1||r===2?2:1)),t.height=String(v-(w+A)*(r===1?2:1)),i=function(D){for(var I=0,E=0;32>E;E++)I|=(D>>E&1)<<31-E;return I>>>0}(a),s=s==1?"H":"L",o="hvc1"+("."+["","A","B","C"][o]+u),o+="."+i.toString(16).toUpperCase(),o+="."+s+m,h&&(o+="."+h.toString(16).toUpperCase()),p&&(o+="."+p.toString(16).toUpperCase()),f&&(o+="."+f.toString(16).toUpperCase()),c&&(o+="."+c.toString(16).toUpperCase()),l&&(o+="."+l.toString(16).toUpperCase()),n&&(o+="."+n.toString(16).toUpperCase()),t.codec=o,t.frameRate=Jg(e),t}function Zg(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function so(e){return!(0>rf(e))}function rf(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}W("shaka.util.TsParser",Ge),Ge.syncOffset=rf,Ge.probe=so,Ge.prototype.getVideoInfo=Ge.prototype.Cg,Ge.prototype.getVideoResolution=Ge.prototype.Vj,Ge.prototype.getVideoNalus=Ge.prototype.Ve,Ge.prototype.getCodecs=Ge.prototype.Ld,Ge.prototype.getStartTime=Ge.prototype.getStartTime,Ge.prototype.getVideoData=Ge.prototype.Nc,Ge.prototype.getAudioData=Ge.prototype.rb,Ge.prototype.getMetadata=Ge.prototype.getMetadata,Ge.prototype.parseNalus=Ge.prototype.Pg,Ge.prototype.parseAvcNalus=Ge.prototype.wk,Ge.prototype.parse=Ge.prototype.parse,Ge.prototype.clearData=Ge.prototype.clearData,Ge.Timescale=9e4;var JS=[100,110,122,244,44,83,86,118,128,138,139,134];function em(e,t,n,i,r){var o=this;this.g=e,this.N=n,this.s=i,this.ia=t,this.l=new Map,this.B=new Map,this.Ya=new Map,this.h=null,this.Ka=!1,this.M=r||null,this.o=new Map,this.A=new Ce,this.j=new Map,this.I=null,this.K=new je,this.Ba="",this.eb=!1,this.ya=!0,this.L=!1,this.C=this.P=null,this.i=of(this,this.K),this.Pa=this.G=!1,this.H=new Jr(function(){return tw(o)}),this.F=!1,this.S="UNKNOWN",this.Za=this.ab=!1,this.Ua=new je,this.m=!1,this.wa=null,this.$=new Map,this.oa=this.U=this.va=this.W=null,this.ka=new je,this.g.remote&&(this.L=this.g.remote.state!="disconnected",this.A.D(this.g.remote,"connect",function(){o.L=o.g.remote.state!="disconnected"}),this.A.D(this.g.remote,"connecting",function(){o.L=o.g.remote.state!="disconnected"}),this.A.D(this.g.remote,"disconnect",function(){o.L=o.g.remote.state!="disconnected"}))}function of(e,t){if(e.ya=!0,B.ManagedMediaSource){e.C||(e.g.disableRemotePlayback=!0);var n=new ManagedMediaSource;e.A.D(n,"startstreaming",function(){e.ya=!0}),e.A.D(n,"endstreaming",function(){e.ya=!1})}else n=new MediaSource;return e.A.za(n,"sourceopen",function(){URL.revokeObjectURL(e.Ba),t.resolve()}),e.A.za(e.g,"playing",function(){e.eb=!0}),e.Ba=lf(n),e.s.useSourceElements?(e.g.removeAttribute("src"),e.P&&e.g.removeChild(e.P),e.C&&e.g.removeChild(e.C),e.P=Yg(e.Ba),e.g.appendChild(e.P),e.C&&e.g.appendChild(e.C),e.g.load()):e.g.src=e.Ba,n}function ZS(e,t,n){e.g&&B.ManagedMediaSource&&e.i&&e.s.useSourceElements&&(e.C&&e.g.removeChild(e.C),e.C=Yg(t,n),e.g.appendChild(e.C),e.g.disableRemotePlayback=!1)}function ew(){var e='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.05.01",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(H(Ui)),t={};ye(),e=g(e);for(var n=e.next();!n.done;n=e.next()){n=n.value,ts(n)?t[n]=!0:t[n]=Zn()?It(n)||!!dr(n):wr().canPlayType(n)!="";var i=n.split(";")[0];t[i]=t[i]||t[n]}return t}d=em.prototype,d.destroy=function(){return this.H.destroy()};function tw(e){var t,n,i,r,o,s,u,a,l,c,f,p,h,m,y;return k(function(v){if(v.g==1){for(t=[],n=g(e.o),i=n.next();!i.done;i=n.next())for(r=i.value,o=g(r),s=o.next().value,u=o.next().value,a=u[0],l=s,e.o.set(l,u.slice(0,1)),a&&t.push(a.p.catch(Vx)),c=g(u.slice(1)),f=c.next();!f.done;f=c.next())p=f.value,p.p.reject(new C(2,7,7003,void 0));return e.h&&t.push(e.h.destroy()),T(v,Promise.all(t),2)}for(h=g(e.j.values()),m=h.next();!m.done;m=h.next())y=m.value,y.destroy();e.A&&(e.A.release(),e.A=null),e.g&&e.C&&e.g.removeChild(e.C),e.g&&e.P&&(e.g.removeChild(e.P),e.g.load(),e.g.disableRemotePlayback=!1),e.g=null,e.P=null,e.C=null,e.s=null,e.i=null,e.h=null,e.ia=null,e.l.clear(),e.Ya.clear(),e.j.clear(),e.I=null,e.o.clear(),e.M=null,e.$.clear(),e.N=null,K(v)})}d.init=function(e,t,n,i){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,i=i===void 0?!1:i;var r=this,o,s,u,a,l,c;return k(function(f){if(f.g==1)return o=lt,T(f,r.K,2);if(f.g!=3)return!uo(r)&&!ao(r)?f.u(3):(zn("Expected MediaSource to be open during init(); reopening the media source."),r.K=new je,r.i=of(r,r.K),T(f,r.K,3));for(r.F=t,r.S=n,r.ab=i,r.Za=!r.F&&r.S=="HLS"&&!r.ab,r.$.clear(),r.W=null,r.va=null,r.U=null,r.oa=null,r.ka=new je,s=g(e.keys()),u=s.next();!u.done;u=s.next())a=u.value,l=e.get(a),ua(r,a,l,l.codecs),r.m?(r.o.set(o.Y,[]),r.o.set(o.xa,[])):r.o.set(a,[]);(c=e.get(o.Y))&&c.isAudioMuxedInVideo&&(r.m=!0),K(f)})};function ua(e,t,n,i){t=="audio"&&i&&(i=ju(i,n.mimeType));var r=it(n.mimeType,i);if(t==he)aa(e,r,e.F,n.external);else{var o=e.s.forceTransmux;(!It(r)||!e.F&&Ui.includes(r))&&(o=!0);var s=Zo(n.mimeType,i);if(o){if(o=Kt("audio",(i||"").split(",")),i=Kt("video",(i||"").split(",")),o&&i){e.m=!0,ua(e,"audio",n,o),ua(e,"video",n,i);return}(i=dr(s))&&(r=i(),e.j.set(t,r),r=r.convertCodecs(t,s))}s=r+e.s.addExtraFeaturesToSourceBuffer(r),be(e.H);try{var u=e.i.addSourceBuffer(s)}catch(a){throw new C(2,3,3015,a,"The mediaSource_ status was "+e.i.readyState+" expected 'open'",null)}e.F&&(u.mode=hw),e.A.D(u,"error",function(){var a=e.o.get(t)[0];a.p.reject(new C(2,3,3014,e.g.error?e.g.error.code:0,a.uri))}),e.A.D(u,"updateend",function(){return Bi(e,t)}),e.l.set(t,u),e.B.set(t,r),e.Ya.set(t,!!n.drmInfos.length)}}d.configure=function(e){this.s=e,this.h&&(this.h.A=e.modifyCueCallback)};function tm(e){return e.ya&&!e.L&&!e.G}function aa(e,t,n,i){e.h||(e.h=new di(e.ia),e.h&&(e.h.A=e.s.modifyCueCallback));var r=e.h;i=i||e.Ka,e=e.S,t=="application/cea-608"||t=="application/cea-708"?r.i=null:(r.i=ns.get(t)(),r.i.setSequenceMode?r.i.setSequenceMode(n):Ae("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),r.i.setManifestType?r.i.setManifestType(e):Ae("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),r.B=i)}function uo(e){return e.G?!1:e.i?e.i.readyState=="ended":!0}function ao(e){return e.G?!1:e.i?e.i.readyState=="closed":!0}function sf(e,t){return e.l.size?t==he?e=e.h.g:(e=lo(e,t),e=!e||gs(e)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null):e=null,e}function Er(e,t){return e.l.size?t==he?e.h.h:Yc(lo(e,t)):null}function nw(e,t,n){return t==he?(e=e.h,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=lo(e,t),zg(e,n))}d.Kb=function(){var e={total:this.G?[]:vi(this.g.buffered),audio:vi(lo(this,"audio")),video:vi(lo(this,"video")),text:[]};if(this.h){var t=this.h.g,n=this.h.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function lo(e,t){if(e.G||e.L)return null;try{return e.l.get(t).buffered}catch{return e.l.has(t),null}}function iw(e,t,n,i,r,o){var s=null,u=[],a=le(n);if(Ui.includes(o))t=Ar(a),t.length&&i&&((n=t.find(function(h){return h.description==="com.apple.streaming.transportStreamTimestamp"}))&&typeof n.data=="number"&&(s=Math.round(n.data)/1e3),e.N.onMetadata([{cueTime:i.startTime,data:a,frames:t,dts:i.startTime,pts:i.startTime}],0,i.endTime));else if(o.includes("/mp4")&&i&&i.Z&&i.Z.timescale){var l=i.Z.timescale;if(!isNaN(l)){var c=r.emsgSchemeIdUris!=null&&0<r.emsgSchemeIdUris.length||e.s.dispatchAllEmsgBoxes,f=0,p=!1;a=new Ue,c&&a.R("emsg",function(h){var m=r.emsgSchemeIdUris;if(h.version===0)var y=h.reader.Tc(),v=h.reader.Tc(),x=h.reader.T(),S=h.reader.T(),w=h.reader.T(),A=h.reader.T(),D=i.startTime+S/x;else x=h.reader.T(),D=h.reader.ud()/x+i.timestampOffset,S=D-i.startTime,w=h.reader.T(),A=h.reader.T(),y=h.reader.Tc(),v=h.reader.Tc();h=h.reader.Sb(h.reader.getLength()-h.reader.Ma()),(m&&m.includes(y)||e.s.dispatchAllEmsgBoxes)&&(y=="urn:mpeg:dash:event:2012"?e.N.vk():(m=D+w/x,x={startTime:D,endTime:m,schemeIdUri:y,value:v,timescale:x,presentationTimeDelta:S,eventDuration:w,id:A,messageData:h},A=new Map().set("detail",x),new G("emsg",A).cancelable=!0,e.N.rk(x),(y=="https://aomedia.org/emsg/ID3"||y=="https://developer.apple.com/streaming/emsg-id3")&&(y=Ar(h),y.length&&e.N.onMetadata([{cueTime:D,data:h,frames:y,dts:D,pts:D}],0,m))))}),a.R("prft",function(h){var m=h.reader,y=h.version;m.T(),h=m.T();var v=m.T();h=1e3*h+v/Math.pow(2,32)*1e3,y===0?m=m.T():(y=m.T(),m=m.T(),m=y*Math.pow(2,32)+m),h=Qg(h),m=new Map().set("detail",{wallClockTime:h,programStartDate:new Date(h-m/l*1e3)}),m=new G("prft",m),e.N.onEvent(m)}).box("moof",de).box("traf",de).R("tfdt",function(h){p||(f=Zu(h.reader,h.version).baseMediaDecodeTime/l,p=!0,c||h.parser.stop())}).parse(n,!0),p&&i.timestampOffset==0&&(s=f)}}else o.includes("/mp4")||o.includes("/webm")||!so(a)||(e.$.has(t)?e.$.get(t).clearData():e.$.set(t,new Ge),u=e.$.get(t).parse(a),a=u.getStartTime(t),a!=null&&(s=a),u=u.getMetadata());return{timestamp:s,metadata:u}}function la(e,t,n,i,r,o,s,u,a,l,c){s=s===void 0?!1:s,u=u===void 0?!1:u,a=a===void 0?!1:a,l=l===void 0?!1:l;var f,p,h,m,y,v,x,S,w,A,D,I,E,M,P,N,L;return k(function(R){switch(R.g){case 1:if(f=lt,t!=f.Oa){R.u(2);break}if(e.S!="HLS"){R.u(3);break}return T(R,e.Ua,4);case 4:p=R.h,e.h.s=p;case 3:return T(R,_x(e.h,n,i?i.startTime:null,i?i.endTime:null,i?i.O()[0]:null),5);case 5:return R.return();case 2:if(l||!e.m){R.u(6);break}return T(R,la(e,f.Y,n,i,r,o,s,u,a,!0),7);case 7:return T(R,la(e,f.xa,n,i,r,o,s,u,a,!0),8);case 8:return R.return();case 6:if(!e.l.has(t))return R.return();if(h=e.l.get(t).timestampOffset,m=e.B.get(t),e.j.has(t)&&(m=e.j.get(t).getOriginalMimeType()),i&&(y=iw(e,t,n,i,r,m),v=y.timestamp,x=y.metadata,v!=null&&(e.W==null&&t==f.xa&&(e.W=v,e.va=i.startTime,e.U!=null&&(S=0,e.va==e.oa&&(S=e.W-e.U),e.ka.resolve(S))),e.U==null&&t==f.Y&&(e.U=v,e.oa=i.startTime,e.W!=null&&(w=0,e.va==e.oa&&(w=e.W-e.U),e.ka.resolve(w))),A=v,D=Ui,!e.F&&D.includes(e.B.get(t))&&(A=0),I=i.startTime-A,E=Math.abs(h-I),(.001<=E||s||u)&&(!a||0<I||!h)&&(h=I,e.Za&&(mt(e,t,function(){return co(e,t)},null),mt(e,t,function(){return fo(e,t,h)},null))),(t==f.xa||!e.l.has(f.xa))&&e.Ua.resolve(h)),x.length)&&e.N.onMetadata(x,h,i?i.endTime:null),o&&t==f.xa&&(e.h||aa(e,"application/cea-608",e.F,!1),e.I||(M=m.split(";",1)[0],e.I=new bn(M)),i?(P=e.I.qf(n),P.length&&Bx(e.h,P,i.startTime,i.endTime,h)):e.I.init(n,u,c)),!e.j.has(t)){R.u(9);break}return T(R,e.j.get(t).transmux(n,r,i,e.i.duration,t),10);case 10:n=R.h;case 9:if(n=lw(e,r,n,i,t),!i||!e.F||t==f.Oa){R.u(11);break}if(!s&&!u){R.u(11);break}if(N=i.startTime,e.S!="HLS"||e.m||t!=f.Y||!e.l.has(f.xa)){R.u(13);break}return T(R,e.ka,14);case 14:L=R.h,.15<Math.abs(L)&&(N-=L);case 13:mt(e,t,function(){return co(e,t)},null),mt(e,t,function(){return fo(e,t,N)},null);case 11:return T(R,mt(e,t,function(){var O=n;e.M&&pc(e.M,O,h,r),e.l.get(t).appendBuffer(O)},i?i.O()[0]:null),15);case 15:K(R)}})}function rw(e,t){var n=Er(e,"video")||0;Fh(e.h,t,n)}function ow(e){e.h&&Fh(e.h,"",0)}d.remove=function(e,t,n,i){var r=this,o;return k(function(s){return s.g==1?(o=lt,e==o.xa&&r.I&&r.I.remove(i),e==o.Oa?T(s,r.h.remove(t,n),0):n>t?T(s,mt(r,e,function(){return ca(r,e,t,n)},null),5):s.u(0)):r.m?T(s,mt(r,o.Y,function(){return ca(r,o.Y,t,n)},null),0):s.u(0)})};function nm(e,t){var n;return k(function(i){return i.g==1?(n=lt,t==n.Oa?e.h?T(i,e.h.remove(0,1/0),0):i.return():T(i,mt(e,t,function(){return ca(e,t,0,e.i.duration)},null),4)):e.m?T(i,mt(e,n.Y,function(){return ca(e,n.Y,0,e.i.duration)},null),0):i.u(0)})}d.flush=function(e){var t=this,n;return k(function(i){return i.g==1?(n=lt,e==n.Oa?i.return():T(i,mt(t,e,function(){t.g.currentTime-=.001,Bi(t,e)},null),2)):t.m?T(i,mt(t,n.Y,function(){var r=n.Y;t.g.currentTime-=.001,Bi(t,r)},null),0):i.u(0)})};function sw(e,t,n,i,r,o,s,u,a){var l,c,f;return k(function(p){return p.g==1?(l=lt,t==l.Oa?(o||(e.h.s=n),bx(e.h,i,r),p.return()):(c=[],T(p,dw(e,t,s,u,a),2))):(f=p.h,f||(c.push(mt(e,t,function(){return co(e,t)},null)),e.m&&c.push(mt(e,l.Y,function(){return co(e,l.Y)},null))),o||(c.push(mt(e,t,function(){return fo(e,t,n)},null)),e.m&&c.push(mt(e,l.Y,function(){return fo(e,l.Y,n)},null))),(i!=0||r!=1/0)&&(c.push(mt(e,t,function(){return im(e,t,i,r)},null)),e.m&&c.push(mt(e,l.Y,function(){return im(e,l.Y,i,r)},null))),c.length?T(p,Promise.all(c),0):p.u(0))})}function uw(e,t,n){var i,r;return k(function(o){return o.g==1?(i=lt,t==i.Oa||(t==i.xa&&(e.Ua=new je),!e.F||(r=Er(e,t))&&.1>Math.abs(r-n))?o.return():(mt(e,t,function(){return co(e,t)},null),e.m&&mt(e,i.Y,function(){return co(e,i.Y)},null),T(o,mt(e,t,function(){return fo(e,t,n)},null),2))):e.m?T(o,mt(e,i.Y,function(){return fo(e,i.Y,n)},null),0):o.u(0)})}d.endOfStream=function(e){var t=this;return k(function(n){return T(n,vs(t,function(){uo(t)||ao(t)||(e?t.i.endOfStream(e):t.i.endOfStream())}),0)})},d.ob=function(e){var t=this;return k(function(n){return T(n,vs(t,function(){if(t.s.durationReductionEmitsUpdateEnd&&e<t.i.duration)for(var i=g(t.l.keys()),r=i.next();!r.done;r=i.next()){r=r.value;var o={start:function(){},p:new je,uri:null};t.o.get(r).unshift(o)}t.i.duration=e,t.wa=e}),0)})},d.getDuration=function(){return this.i.duration};function aw(e,t,n){k(function(i){return e.H.g||e.g.error||e.L||e.G||uo(e)||ao(e)?i.return():T(i,vs(e,function(){uo(e)||ao(e)||e.i.setLiveSeekableRange(t,n)}),0)})}function uf(e){k(function(t){return e.H.g||e.g.error||e.L||e.G||uo(e)||ao(e)?t.return():T(t,vs(e,function(){uo(e)||ao(e)||e.i.clearLiveSeekableRange()}),0)})}function ca(e,t,n,i){i<=n?Bi(e,t):e.l.get(t).remove(n,i)}function co(e,t){var n=e.l.get(t),i=n.appendWindowStart,r=n.appendWindowEnd;n.abort(),n.appendWindowStart=i,n.appendWindowEnd=r,Bi(e,t)}function fo(e,t,n){0>n&&(n+=.001);var i=!0;e.S=="HLS"&&(i=Er(e,t),i=!i||.15<Math.abs(i-n)),i&&(e.l.get(t).timestampOffset=n),Bi(e,t)}function im(e,t,n,i){var r=e.l.get(t);(r.appendWindowEnd!==i||r.appendWindowStart!==n)&&(r.appendWindowStart=0,r.appendWindowEnd=i,r.appendWindowStart=n),Bi(e,t)}function Bi(e,t){if(e.G||e.H.g){var n=e.o.get(t);n&&n.length&&((n=n[0])&&n.p&&n.p.resolve(),e.o.set(t,[]))}else(n=e.o.get(t)[0])&&(n.p.resolve(),af(e,t))}function mt(e,t,n,i){return be(e.H),n={start:n,p:new je,uri:i},e.o.get(t).push(n),e.o.get(t).length==1&&rm(e,t),n.p}function vs(e,t){var n,i,r,o,s,u,a,l,c,f,p,h,m;return k(function(y){switch(y.g){case 1:for(be(e.H),n=[],i=Array.from(e.l.keys()),r=g(i),o=r.next(),s={};!o.done;s={ready:void 0},o=r.next())u=o.value,s.ready=new je,a={start:function(v){return function(){return v.ready.resolve()}}(s),p:s.ready,uri:null},l=e.o.get(u),l.push(a),n.push(s.ready),l.length==1&&a.start();return ue(y,2),T(y,Promise.all(n),4);case 4:pe(y,3);break;case 2:throw c=ae(y),c;case 3:return ue(y,5,6),T(y,t(),6);case 6:for(sn(y),f=g(i),p=f.next();!p.done;p=f.next())h=p.value,af(e,h);un(y,0);break;case 5:throw m=ae(y),new C(2,3,3015,m,e.g.error||"No error in the media element",null)}})}function af(e,t){e.o.get(t).shift(),rm(e,t)}function rm(e,t){var n=e.o.get(t)[0];if(n)try{n.start()}catch(i){i.name=="QuotaExceededError"?n.p.reject(new C(2,3,3017,t)):tm(e)?n.p.reject(new C(2,3,3015,i,e.g.error||"No error in the media element",n.uri)):n.p.reject(new C(2,3,3024,t)),af(e,t)}}function lw(e,t,n,i,r){if(Ru(e.B.get(r))!="mp4")return n;var o=i===null,s=e.Ya.get(r),u=e.N.Bj(),a=!1;i&&i.Z&&(a=i.Z.encrypted),i=i?i.O()[0]:null;var l=ye();return e.s.correctEc3Enca&&o&&r==="audio"&&(n=FS(n)),e.s.insertFakeEncryptionInInit&&s&&l.be(u,r)&&(o?n=VS(t,n,i):!a&&l.xi(r)&&(n=HS(n))),o&&l.ae()&&(n=XS(n)),n}function cw(e,t,n,i){return mt(e,t,function(){if(t!==he){if(e.B.get(t),ir()){e.j.has(t)&&(e.j.get(t).destroy(),e.j.delete(t)),i&&e.j.set(t,i);var r=n+e.s.addExtraFeaturesToSourceBuffer(n);e.l.get(t).changeType(r),e.B.set(t,n)}Bi(e,t)}},null)}function fw(e,t){var n,i,r,o,s,u,a,l,c,f,p,h,m,y,v,x,S,w,A,D;return k(function(I){if(I.g==1){if(e.G||e.L)return I.return();for(n=lt,e.G=!0,e.m=!1,i=e.g.currentTime,r=e.g.autoplay,e.g.paused||(e.Pa=!0),e.eb&&(e.g.autoplay=!1),ii(I,2),e.A.Ra(),o=g(e.j.values()),s=o.next();!s.done;s=o.next())u=s.value,u.destroy();for(a=g(e.l.values()),l=a.next();!l.done;l=a.next()){c=l.value;try{e.i.removeSourceBuffer(c)}catch{}}return e.j.clear(),e.l.clear(),f=e.i.duration,e.K=new je,e.i=of(e,e.K),T(I,e.K,4)}if(I.g!=2){for(!isNaN(f)&&f?e.i.duration=f:!isNaN(e.wa)&&e.wa&&(e.i.duration=e.wa),p=new je,h=e.i.sourceBuffers,m=t.size,y=0,v=function(){y++,y===m&&(p.resolve(),e.A.Ja(h,"addsourcebuffer",v))},e.A.D(h,"addsourcebuffer",v),x=g(t.keys()),S=x.next();!S.done;S=x.next())w=S.value,A=t.get(w),ua(e,w,A,A.codecs);return(D=t.get(n.Y))&&D.isAudioMuxedInVideo&&(e.m=!0),e.m&&!e.o.has(n.Y)&&e.o.set(n.Y,[]),e.g.currentTime=i,T(I,p,2)}return sn(I),e.G=!1,be(e.H),e.A.za(e.g,"canplaythrough",function(){e.H.g||(e.g.autoplay=r,e.Pa&&(e.Pa=!1,e.g.play()))}),un(I,0)})}function om(e,t){return vs(e,function(){return fw(e,t)})}function sm(e,t,n,i){var r=!1,o=Kt("audio",(i||"").split(",")),s=Kt("video",(i||"").split(",")),u=s;t=="audio"&&(u=o),u||(u=i),i=it(n,u);var a=e.s.forceTransmux;if((!It(i)||!e.F&&Ui.includes(i))&&(a=!0),a&&(e=Zo(n,u),n=dr(e))){var l=n();o&&s&&(r=!0),i=l.convertCodecs(t,e)}return t=Mt(Jt(i)),{uh:l,Uk:r,Fh:Qt(i),codec:t,mimeType:i}}function dw(e,t,n,i,r){var o,s,u,a,l,c,f,p,h,m,y,v,x,S;return k(function(w){return w.g==1?(o=lt,t==o.Oa?w.return(!1):(s=Mt(Jt(e.B.get(t))),u=Qt(e.B.get(t)),a=sm(e,t,n,i),l=a.uh,c=a.Uk,f=a.Fh,p=a.codec,h=a.mimeType,m=!0,c&&e.B.has(o.Y)&&(y=sm(e,o.Y,n,i),v=Mt(Jt(e.B.get(o.Y))),x=Qt(e.B.get(o.Y)),m=v==y.codec&&x==y.Fh,y.uh&&y.uh.destroy()),s===p&&u===f&&m?(e.j.has(t)&&!l?(e.j.get(t).destroy(),e.j.delete(t)):!e.j.has(t)&&l?e.j.set(t,l):l&&(e.j.has(t)&&e.j.get(t).transmux!=l.transmux?(e.j.get(t).destroy(),e.j.delete(t),e.j.set(t,l)):l.destroy()),w.return(!1)):(S=!0,(e.m||c&&l&&!e.j.has(t))&&(S=!1),S&&e.s.codecSwitchingStrategy==="smooth"&&ir()?T(w,cw(e,t,h,l),3):(l&&l.destroy(),T(w,om(e,r),3))))):w.return(!0)})}function pw(e,t,n,i){if(t==he)var r=!1;else{r=Mt(Jt(e.B.get(t)));var o=Qt(e.B.get(t)),s=it(n,i),u=e.s.forceTransmux;(!It(s)||!e.F&&Ui.includes(s))&&(u=!0),n=Zo(n,i),u&&(u=dr(n))&&(u=u(),s=u.convertCodecs(t,n),u.destroy()),t=Mt(Jt(s)),s=Qt(s),r=r!==t||o!==s}return r?e.s.codecSwitchingStrategy!=="smooth"||!ir()||e.m:!1}var lf=B.URL.createObjectURL,hw="sequence";function oe(e,t,n){this.i=e,this.C=t,this.s=this.l=1/0,this.h=1,this.g=this.j=null,this.A=0,this.B=!0,this.I=!1,this.H=0,this.F=n===void 0?!0:n,this.G=0,this.o=!1,this.m=e}d=oe.prototype,d.getDuration=function(){return this.l},d.Ej=function(){return this.h},d.Ii=function(e){this.i=e},d.ob=function(e){this.l=e},d.Kj=function(){return this.i},d.Hi=function(e){this.A=e},d.Xc=function(e){e&&!this.B&&(this.I=!0),this.B=e},d.Bf=function(e){this.s=e},d.Ue=function(){return this.s},d.fh=function(e){this.C=e},d.vj=function(){return this.C},d.oi=function(e,t){if(e.length!=0){var n=(Date.now()+this.A)/1e3;if(e=e.filter(function(r){return r.start+t<n}),e.length!=0){var i=e[e.length-1].end+t;this.kf(e[0].start+t),this.h=e.reduce(function(r,o){return Math.max(r,o.end-o.start)},this.h),this.g=Math.max(this.g,i),this.i!=null&&this.F&&!this.o&&(this.i=n-this.g-this.h)}}},d.Xd=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,i=(Date.now()+this.A)/1e3;e=g(e);for(var r=e.next();!r.done;r=e.next())r=r.value,i<r.startTime||(t=Math.min(t,r.startTime),n=Math.max(n,r.endTime),this.h=Math.max(this.h,r.endTime-r.startTime));this.kf(t),this.g=Math.max(this.g,n),this.i!=null&&this.F&&!this.o&&(this.i=i-this.g-this.h)}},d.ni=function(e,t){this.kf(e),t==1/0||this.V()||(this.g=Math.max(this.g,t))},d.Fj=function(){return this.g},d.df=function(){this.o=!0},d.fk=function(){return this.o},d.gh=function(e){this.m=e},d.Aj=function(){return this.m},d.kf=function(e){this.j==null?this.j=e:this.I||(this.j=Math.min(this.j,e))},d.Lg=function(e){this.h=Math.max(this.h,e)},d.offset=function(e){this.j!=null&&(this.j+=e),this.g!=null&&(this.g+=e)},d.V=function(){return this.l==1/0&&!this.B},d.Pc=function(){return this.l!=1/0&&!this.B},d.Eb=function(){return Math.max(this.H,this.vc()-this.s)},d.Ki=function(e){this.H=e},d.vc=function(){return this.V()||this.Pc()?Math.min(Math.max(0,(Date.now()+this.A)/1e3-this.h-this.i)+this.G,this.l):this.g?Math.min(this.g,this.l):this.l},d.Nd=function(e){var t=Math.max(this.j,this.H);return this.s==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.vc()-this.s+e,this.Db()))},d.Vb=function(){return this.Nd(0)},d.Db=function(){return Math.max(0,this.vc()-(this.V()||this.Pc()?this.C:0))},d.Wi=function(){return!(this.i==null||this.g!=null&&this.F)},d.Gi=function(e){this.G=e},d.qj=function(){return this.G},W("shaka.media.PresentationTimeline",oe),oe.prototype.getAvailabilityTimeOffset=oe.prototype.qj,oe.prototype.setAvailabilityTimeOffset=oe.prototype.Gi,oe.prototype.usingPresentationStartTime=oe.prototype.Wi,oe.prototype.getSeekRangeEnd=oe.prototype.Db,oe.prototype.getSeekRangeStart=oe.prototype.Vb,oe.prototype.getSafeSeekRangeStart=oe.prototype.Nd,oe.prototype.getSegmentAvailabilityEnd=oe.prototype.vc,oe.prototype.setUserSeekStart=oe.prototype.Ki,oe.prototype.getSegmentAvailabilityStart=oe.prototype.Eb,oe.prototype.isInProgress=oe.prototype.Pc,oe.prototype.isLive=oe.prototype.V,oe.prototype.offset=oe.prototype.offset,oe.prototype.notifyMaxSegmentDuration=oe.prototype.Lg,oe.prototype.notifyMinSegmentStartTime=oe.prototype.kf,oe.prototype.getInitialProgramDateTime=oe.prototype.Aj,oe.prototype.setInitialProgramDateTime=oe.prototype.gh,oe.prototype.isStartTimeLocked=oe.prototype.fk,oe.prototype.lockStartTime=oe.prototype.df,oe.prototype.getMaxSegmentEndTime=oe.prototype.Fj,oe.prototype.notifyPeriodDuration=oe.prototype.ni,oe.prototype.notifySegments=oe.prototype.Xd,oe.prototype.notifyTimeRange=oe.prototype.oi,oe.prototype.getDelay=oe.prototype.vj,oe.prototype.setDelay=oe.prototype.fh,oe.prototype.getSegmentAvailabilityDuration=oe.prototype.Ue,oe.prototype.setSegmentAvailabilityDuration=oe.prototype.Bf,oe.prototype.setStatic=oe.prototype.Xc,oe.prototype.setClockOffset=oe.prototype.Hi,oe.prototype.getPresentationStartTime=oe.prototype.Kj,oe.prototype.setDuration=oe.prototype.ob,oe.prototype.setPresentationStartTime=oe.prototype.Ii,oe.prototype.getMaxSegmentDuration=oe.prototype.Ej,oe.prototype.getDuration=oe.prototype.getDuration;function cf(e,t,n,i){var r=this;this.s=i,this.g=e,this.B=t,this.h=n,this.o=new Ce,this.l=!1,this.F=e.readyState,this.G=this.C=this.j=0,this.m=gw(this),this.A=!1,this.o.D(e,"waiting",function(){return ys(r)}),this.i=new ve(function(){ys(r)}).Ga(this.h.gapJumpTimerTime)}cf.prototype.release=function(){this.o&&(this.o.release(),this.o=null),this.i!=null&&(this.i.stop(),this.i=null),this.m&&(this.m.release(),this.m=null),this.g=this.B=this.s=null},cf.prototype.nf=function(){this.A=!0,this.i&&this.i.Ga(this.h.gapJumpTimerTime),ys(this)};function ys(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.l)return}else e.l=!1;if(!e.g.paused||e.g.currentTime==e.j&&(e.g.autoplay||e.g.currentTime!=e.j)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.m)){t=e.m;var n=t.h,i=lm(n),r=n.g.currentTime,o=Date.now()/1e3;(t.g!=r||t.m!=i)&&(t.l=o,t.g=r,t.m=i,t.i=!1),r=o-t.l,(i=r>=t.o&&i&&!t.i)&&(t.j&&t.j(t.g,r),t.i=!0,t.g=n.g.currentTime),t=!i}t&&(t=e.g.currentTime,n=e.g.buffered,i=WS(n,t,e.h.gapDetectionThreshold),i==null||i==0&&!e.A||(r=n.start(i),(o=e.h.gapPadding)&&(r=Math.ceil(100*(r+o))/100),r>=e.B.Db()||.001>r-t||(i!=0&&n.end(i-1),e.g.currentTime=r,t==e.j&&(e.j=r),e.C++,e.s(new G("gapjumped")))))}}}function gw(e){if(!e.h.stallEnabled)return null;var t=e.h.stallThreshold,n=e.h.stallSkip;return new um(new am(e.g),t,function(){var i;return k(function(r){if(r.g==1)return i=vi(e.g.buffered),i.length?n?(e.g.currentTime+=n,r.u(2)):T(r,e.g.play(),3):r.return();if(r.g!=2){if(!e.g)return r.return();e.g.pause(),e.g.play()}e.G++,e.s(new G("stalldetected")),K(r)})})}function um(e,t,n){this.h=e,this.m=lm(e),this.g=e.g.currentTime,this.l=Date.now()/1e3,this.i=!1,this.o=t,this.j=n}um.prototype.release=function(){this.h&&this.h.release(),this.j=this.h=null};function am(e){var t=this;this.g=e,this.h=new Ce,this.i=!1,this.h.D(this.g,"audiofocuspaused",function(){t.i=!0}),this.h.D(this.g,"audiofocusgranted",function(){t.i=!1}),this.h.D(this.g,"audiofocuslost",function(){t.i=!0})}function lm(e){if(e.g.paused||e.g.playbackRate==0||e.i||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=g(vi(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}am.prototype.release=function(){this.h&&this.h.release(),this.h=null};function po(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=mw.value().get(t),n.za(e,t,i))}var mw=new St(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function cm(e,t,n,i){var r=this;this.g=e,this.m=t,this.s=n,this.l=null,this.j=function(){return r.l==null&&(r.l=i()),r.l},this.o=!1,this.h=new Ce,this.i=new hm(e),po(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){dm(r,r.j())})}cm.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function ff(e){return e.o?e.g.currentTime:e.j()}function fm(e,t){0<e.g.readyState?gm(e.i,t):po(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){dm(e,e.j())})}function dm(e,t){.001>Math.abs(e.g.currentTime-t)?pm(e):(e.h.za(e.g,"seeking",function(){pm(e)}),gm(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function pm(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.s(e.g.currentTime)}function hm(e){var t=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new ve(function(){0>=t.i||t.g.currentTime!=t.l||t.g.currentTime===t.j?t.h.stop():(t.g.currentTime=t.j,t.i--)})}hm.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null};function gm(e,t){e.l=e.g.currentTime,e.j=t,e.i=e.m,e.g.currentTime=t,e.h.Ga(.1)}function mm(e){this.g=e,this.i=!1,this.h=null,this.j=new Ce}d=mm.prototype,d.ready=function(){function e(){if(t.h==null||t.h==0&&t.g.duration!=1/0)t.i=!0;else{var n=t.g.currentTime,i=null;if(typeof t.h=="number")i=t.h;else if(t.h instanceof Date){var r=vm(t);r!==null&&(i=t.h.getTime()/1e3-r,i=ym(t,i))}i==null?t.i=!0:(0>i&&(i=Math.max(0,n+i)),n!=i?(t.j.za(t.g,"seeking",function(){t.i=!0}),t.g.currentTime=i):t.i=!0)}}var t=this;po(this.g,HTMLMediaElement.HAVE_FUTURE_DATA,this.j,function(){e()})},d.release=function(){this.j&&(this.j.release(),this.j=null),this.g=null},d.Pf=function(e){this.h=this.i?this.h:e},d.Ae=function(){var e=this.i?this.g.currentTime:this.h;return e instanceof Date&&(e=e.getTime()/1e3-(vm(this)||0),e=ym(this,e)),e||0},d.Bh=function(){return 0},d.Ah=function(){return 0},d.mi=function(){},d.Zh=function(){var e=Yc(this.g.buffered);return e!=null&&e>=this.g.duration-1};function vm(e){return e.g.getStartDate&&(e=e.g.getStartDate().getTime(),!isNaN(e))?e/1e3:null}function ym(e,t){return e=e.g.seekable,0<e.length&&(t=Math.max(e.start(0),t),t=Math.min(e.end(e.length-1),t)),t}function Tm(e,t,n,i,r,o){var s=this;this.h=e,this.g=t.presentationTimeline,this.l=n,this.s=r,this.o=null,this.j=new cf(e,t.presentationTimeline,n,o),this.i=new cm(e,function(){e:{var u=s.j;u.l=!0,u.A=!1,u.i&&u.i.Ga(u.h.gapJumpTimerTime),ys(u);var a=ff(s.i);if(u=wm(s,a),!Th()&&.001<Math.abs(u-a)){a=!1;var l=ye().Di();if(l){var c=Date.now()/1e3;(!s.o||s.o<c-l)&&(s.o=c,a=!0)}else a=!0;if(a){fm(s.i,u),u=void 0;break e}}s.s(),u=void 0}return u},function(u){var a=s.j;a.g.seeking&&!a.l&&(a.l=!0,a.j=u),a.i&&a.i.Ga(a.h.gapJumpTimerTime),ys(a)},function(){return xm(s,i)}),this.m=new ve(function(){if(s.h.readyState!=0&&!s.h.paused){var u=ff(s.i),a=s.g.Vb(),l=s.g.Db();3>l-a&&(a=l-3),u<a&&(u=wm(s,u),s.h.currentTime=u)}})}d=Tm.prototype,d.ready=function(){this.m.Ga(.25)},d.release=function(){this.i&&(this.i.release(),this.i=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.h=this.i=this.g=this.l=null,this.s=function(){}},d.Pf=function(e){fm(this.i,xm(this,e))},d.Ae=function(){var e=ff(this.i);return 0<this.h.readyState&&!this.h.paused?Am(this,e):e},d.Bh=function(){return this.j.G},d.Ah=function(){return this.j.C};function xm(e,t){return t==null?t=1/0>e.g.getDuration()?e.g.Vb():e.g.Db():t instanceof Date?t=t.getTime()/1e3-(e.g.m||e.g.i):0>t&&(t=e.g.Db()+t),Sm(e,Am(e,t))}d.mi=function(){this.j.nf()},d.Zh=function(){if(this.g.V()){var e=this.g.vc(),t=Yc(this.h.buffered);if(t!=null&&t>=e)return!0}return!1};function Sm(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function wm(e,t){var n=e.l.rebufferingGoal,i=e.l.safeSeekOffset,r=e.g.Vb(),o=e.g.Db(),s=e.g.getDuration();3>o-r&&(r=o-3);var u=e.g.Nd(n),a=e.g.Nd(i);return n=e.g.Nd(n+i),t>=s?Sm(e,t):t>o?o-e.l.safeSeekEndOffset:t<r?e.g.V()&&e.l.returnToEndOfLiveWindowWhenOutside?o-e.l.safeSeekEndOffset:qc(e.h.buffered,a)?a:n:t>=u||qc(e.h.buffered,t)?t:n}function Am(e,t){var n=e.g.Vb();return t<n?n:(e=e.g.Db(),t>e?e:t)}function Ie(e){this.g=e,this.m=null,this.i=0,this.o=!1}d=Ie.prototype,d.getNumReferences=function(){return this.g.length},d.getNumEvicted=function(){return this.i},d.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},d.nk=function(){this.o=!0},d.Cb=function(e){for(var t=g(this.g),n=t.next();!n.done;n=t.next())e(n.value)};function Hn(e){return e.g[0]||null}d.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var i=this.g[n],r=n<t?this.g[n+1].startTime:i.endTime;if(e>=i.startTime&&e<r)return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},d.get=function(e){return this.g.length==0?null:(e-=this.i,0>e||e>=this.g.length?null:this.g[e])},d.offset=function(e){if(!this.o)for(var t=g(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},d.gf=function(e){if(!this.o&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(n){return Math.round(1e3*n.startTime)/1e3<t}),this.g.push.apply(this.g,H(e))}},d.Vd=function(e,t){var n=this;e=e.filter(function(i){return i.endTime>t&&(n.g.length==0||i.endTime>n.g[0].startTime)}),this.gf(e),this.$a(t)},d.$a=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter(function(n){return n.endTime>e}),this.i+=t-this.g.length}},d.gd=function(e,t,n){if(n=n===void 0?!1:n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.i++;this.g.length!=0&&(e=this.g[this.g.length-1],t=new Z(e.startTime,t,e.C,e.startByte,e.endByte,e.Z,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.B,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.i=e.i,this.g[this.g.length-1]=t)}},d.Ff=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new ve(function(){var i=t();i?n.g.push.apply(n.g,H(i)):(n.m.stop(),n.m=null)}),this.m.Ga(e))},Ie.prototype[Symbol.iterator]=function(){return this.Ub(0)},Ie.prototype.Ub=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var i=this.find(e);if(i==null)return null;var r=this.get(i);n?i++:i--;var o=-1;if(r&&0<r.g.length)for(var s=r.g.length-1;0<=s;--s){var u=r.g[s];if(e>=u.startTime&&e<u.endTime){if(!t){for(;s&&!u.l;)s--,u=r.g[s];if(!u.l)return zn("No independent partial segment found!"),null}n?i--:i++,o=s-1;break}}return new vn(this,i,o,n)},Ie.prototype.Ne=function(){return-1};function fa(e,t,n){return e=new Z(e,e+t,function(){return n},0,null,null,e,e,e+t),new Ie([e])}W("shaka.media.SegmentIndex",Ie),Ie.forSingleSegment=fa,Ie.prototype.getIteratorForTime=Ie.prototype.Ub,Ie.prototype.updateEvery=Ie.prototype.Ff,Ie.prototype.fit=Ie.prototype.gd,Ie.prototype.evict=Ie.prototype.$a,Ie.prototype.mergeAndEvict=Ie.prototype.Vd,Ie.prototype.offset=Ie.prototype.offset,Ie.prototype.get=Ie.prototype.get,Ie.prototype.find=Ie.prototype.find,Ie.prototype.markImmutable=Ie.prototype.nk,Ie.prototype.release=Ie.prototype.release,Ie.prototype.getNumEvicted=Ie.prototype.getNumEvicted,Ie.prototype.getNumReferences=Ie.prototype.getNumReferences;function vn(e,t,n,i){this.i=e,this.h=t,this.g=n,this.reverse=i}d=vn.prototype,d.yd=function(e){this.reverse=e},d.lj=function(){return this.h},d.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.A&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},d.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.A&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},d.Xg=function(){var e=this.current();if(e.o&&!e.l&&(e=this.i.get(this.h))&&0<e.g.length)for(var t=e.g[this.g];t.l&&!(0>=this.g);)this.g--,t=e.g[this.g]},W("shaka.media.SegmentIterator",vn),vn.prototype.resetToLastIndependent=vn.prototype.Xg,vn.prototype.next=vn.prototype.next,vn.prototype.current=vn.prototype.current,vn.prototype.currentPosition=vn.prototype.lj,vn.prototype.setReverse=vn.prototype.yd;function Je(){Ie.call(this,[]),this.h=[]}et(Je,Ie),d=Je.prototype,d.clone=function(){var e=new Je;return e.h=this.h.slice(),e.i=this.i,e},d.release=function(){for(var e=g(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]},d.Cb=function(e){for(var t=g(this.h),n=t.next();!n.done;n=t.next())n.value.Cb(e)};function vw(e,t){e=g(e.h);for(var n=e.next();!n.done;n=e.next())t(n.value)}d.find=function(e){for(var t=this.i,n=g(this.h),i=n.next();!i.done;i=n.next()){i=i.value;var r=i.find(e);if(r!=null)return r+t;t+=i.getNumEvicted()+i.getNumReferences()}return null};function yw(e,t){e=g(e.h);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.find(t)!=null)return n.Ne();return-1}d.get=function(e){for(var t=this.i,n=g(this.h),i=n.next();!i.done;i=n.next()){i=i.value;var r=i.get(e-t);if(r)return r;r=i.getNumReferences(),t+=i.getNumEvicted()+r}return null},d.offset=function(){},d.gf=function(){},d.$a=function(e){for(var t=g(this.h),n=t.next();!n.done;n=t.next())n.value.$a(e);for(;1<this.h.length&&this.h[0].getNumReferences()==0;)e=this.h.shift(),this.i+=e.getNumEvicted(),e.release()},d.Vd=function(){},d.gd=function(){},d.Ff=function(){},W("shaka.media.MetaSegmentIndex",Je),Je.prototype.updateEvery=Je.prototype.Ff,Je.prototype.fit=Je.prototype.gd,Je.prototype.mergeAndEvict=Je.prototype.Vd,Je.prototype.evict=Je.prototype.$a,Je.prototype.merge=Je.prototype.gf,Je.prototype.offset=Je.prototype.offset,Je.prototype.get=Je.prototype.get,Je.prototype.find=Je.prototype.find,Je.prototype.forEachTopLevelReference=Je.prototype.Cb,Je.prototype.release=Je.prototype.release;function Ts(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Te(),this.h=new ve(function(){t.g.ki(.25*t.i)})}Ts.prototype.release=function(){this.set(this.Lc()),this.h&&(this.h.stop(),this.h=null),this.g=null},Ts.prototype.set=function(e){this.i=e,df(this)},Ts.prototype.Lc=function(){return this.g.Lc()};function df(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{e.g.Te()!=t&&e.g.hh(t);return}catch{}e.h.Ga(.25),e.g.Te()!=0&&e.g.hh(0)}function pf(e){var t=this;this.j=e,this.h=new Ce,this.g=new Set,this.i=new ve(function(){Em(t,!1)}).Gb(),e.paused||this.i.Ga(.25),this.h.D(e,"playing",function(){t.i.Gb().Ga(.25)}),this.h.D(e,"pause",function(){t.i.stop()})}pf.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i.stop();for(var e=g(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function Em(e,t){var n=e.j.currentTime;e=g(e.g);for(var i=e.next();!i.done;i=e.next())i.value.j(n,t)}function da(e){ke.call(this),this.g=new Map,this.h=e}et(da,ke),da.prototype.release=function(){this.g.clear(),ke.prototype.release.call(this)};function Tw(e,t){var n=e.g.get(t);return n||(n={$d:[],fg:null,contentType:t},e.g.set(t,n)),n}function xw(e,t,n){var i=Tw(e,t.contentType);Sw(e,i),e={nd:t,position:n},i=i.$d,t=i.findIndex(function(r){return r.position>=n}),0<=t?i.splice(t,i[t].position==n?1:0,e):i.push(e)}da.prototype.j=function(e){for(var t=g(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;var i=n.fg;e:{for(var r=n.$d,o=r.length-1;0<=o;o--){var s=r[o];if(s.position<=e){r=s.nd;break e}}r=null}o=r&&!(i===r||i&&r&&i.bandwidth==r.bandwidth&&i.audioSamplingRate==r.audioSamplingRate&&i.codecs==r.codecs&&i.contentType==r.contentType&&i.frameRate==r.frameRate&&i.height==r.height&&i.mimeType==r.mimeType&&i.channelsCount==r.channelsCount&&i.pixelAspectRatio==r.pixelAspectRatio&&i.width==r.width),s=r&&i&&r.label&&i.label&&i.label!==r.label;var u=r&&i&&r.language&&i.language&&i.language!==r.language;i=r&&i&&r.roles&&i.roles&&!Wo(i.roles,r.roles),(s||u||i)&&Im(this,e,r.contentType)&&(n.fg=r,i=new G("audiotrackchange",new Map([["quality",r],["position",e]])),this.dispatchEvent(i)),o&&Im(this,e,r.contentType)&&(n.fg=r,JSON.stringify(r),n=new G("qualitychange",new Map([["quality",r],["position",e]])),this.dispatchEvent(n))}};function Im(e,t,n){return!!((e=e.h()[n])&&0<e.length&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function Sw(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,i=e[e.length-1].end,r=t.$d;t.$d=r.filter(function(o,s){return!(o.position<=n&&s+1<r.length&&r[s+1].position<=n||o.position>=i)})}else t.$d=[]}function pa(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return e.type=="video"&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),e.type=="audio"&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function xs(e){ke.call(this),this.h=new Map,this.i=e,this.g=null}et(xs,ke),xs.prototype.release=function(){this.h.clear(),this.g&&(this.g.stop(),this.g=null),ke.prototype.release.call(this)};function hf(e,t){var n=t.schemeIdUri+"_"+t.id+"_"+(t.startTime.toFixed(1)+"_"+t.endTime.toFixed(1));e.h.has(n)||(e.h.set(n,t),t=new G("regionadd",new Map([["region",t]])),e.dispatchEvent(t),ww(e))}function ww(e){e.g||(e.g=new ve(function(){for(var t=e.i(),n=g(e.h),i=n.next();!i.done;i=n.next()){var r=g(i.value);i=r.next().value,r=r.next().value,r.endTime<t.start&&(e.h.delete(i),i=new G("regionremove",new Map([["region",r]])),e.dispatchEvent(i))}!e.h.size&&e.g&&(e.g.stop(),e.g=null)}).Ga(2))}function ha(e,t,n,i){this.m=e,this.i=t,this.l=n,this.h=new Map,this.j=new Map,this.g=null,this.o=i}function Aw(e,t){e.l=t,e=g(e.h.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function Ss(e,t,n){if(n=n===void 0?!1:n,!e.i.segmentIndex||(e.g||(e.g=e.i.segmentIndex.Ub(t,!0,e.o)),!e.g))return Promise.resolve();for(n&&e.g.next(),t=[];e.h.size<e.m&&(n=e.g.next().value,!!n);){var i=!0;n.isPreload()&&n.endByte!=null&&(i=!1),n.xc()==2&&(i=!1),n.Wb(!1)&&(i=!1),i&&n.Z&&t.push(Mm(e,n.Z)),i&&!e.h.has(n)&&(i=new mf(e.l),t.push(Dm(i,n,e.i)),e.h.set(n,i))}return gf(e),Promise.all(t)}function Mm(e,t){if(!e.i.segmentIndex||t.Wb()||Array.from(e.j.keys()).some(function(r){return ra(r,t)}))return Promise.resolve();var n=new mf(e.l),i=Dm(n,t,e.i);return e.j.set(t,n),i}function Cm(e,t){t=g(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&ws(e,n)}function Gn(e){Cm(e,e.h),Cm(e,e.j),e.g=null}ha.prototype.$a=function(e,t){t=t===void 0?!1:t;for(var n=g(this.h.keys()),i=n.next();!i.done;i=n.next())i=i.value,e>i.endTime&&ws(this,i);t&&gf(this)},ha.prototype.yd=function(e){this.o=e,this.g&&this.g.yd(e)};function gf(e){for(var t=Array.from(e.h.keys()),n=g(e.j.keys()),i=n.next(),r={};!i.done;r={Fg:void 0},i=n.next())r.Fg=i.value,t.some(function(o){return function(s){return ra(s.Z,o.Fg)}}(r))||ws(e,r.Fg)}function km(e,t){e.m=t;for(var n=Array.from(e.h.keys());n.length>t;){var i=n.pop();i&&ws(e,i)}gf(e)}function Ew(e,t){t&&t!==e.i&&(Gn(e),e.i=t)}function ws(e,t){var n=e.h;t instanceof Xt&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function mf(e){this.g=e,this.Yd=this.mh=null}function Dm(e,t,n){var i=new Uint8Array(0);return e.Yd=e.g(t,n,function(r){return k(function(o){if(o.g==1)return 0<i.byteLength?i=nt(i,r):i=r,e.mh?T(o,e.mh(i),3):o.u(0);i=new Uint8Array(0),K(o)})}),e.Yd.promise.catch(function(r){return r instanceof C&&r.code==7001?Promise.resolve():Promise.reject(r)})}mf.prototype.abort=function(){this.Yd&&this.Yd.abort()};function vf(e){var t=Qt(e),n=t.split("/")[0];return e=Jt(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,ke:null,colorGamut:null,frameRate:null}}function Iw(e,t,n){function i(E){x=E.name;var M=E.reader;M.skip(24);var P=M.Aa(),N=M.Aa();M.skip(50),p=String(P),f=String(N),E.reader.Fa()&&de(E)}function r(E){var M=bg(E.reader);h=M.channelCount,m=M.sampleRate,o(E.name)}function o(E){switch(E=E.toLowerCase(),E){case"avc1":case"avc3":u.push(E+".42E01E"),l=!0;break;case"hev1":case"hvc1":u.push(E+".1.6.L93.90"),l=!0;break;case"dvh1":case"dvhe":u.push(E+".05.04"),l=!0;break;case"vp09":u.push(E+".00.10.08"),l=!0;break;case"av01":u.push(E+".0.01M.08"),l=!0;break;case"mp4a":s.push("mp4a.40.2"),a=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":s.push(E),a=!0}}var s=[],u=[],a=!1,l=!1,c=null,f=null,p=null,h=null,m=null,y=null,v=null,x;if(new Ue().box("moov",de).box("trak",de).box("mdia",de).R("mdhd",function(E){c=ea(E.reader,E.version).language}).box("minf",de).box("stbl",de).R("stsd",gi).box("mp4a",function(E){var M=bg(E.reader);h=M.channelCount,m=M.sampleRate,E.reader.Fa()?de(E):o(E.name)}).box("esds",function(E){E=E.reader;for(var M="mp4a",P,N;E.Fa();){P=E.X();for(var L=E.X();L&128;)L=E.X();if(P==3)E.Aa(),L=E.X(),L&128&&E.Aa(),L&64&&E.skip(E.X()),L&32&&E.Aa();else if(P==4)N=E.X(),E.skip(12);else if(P==5)break}N&&(M+="."+ds(N),P==5&&E.Fa()&&(P=E.X(),N=(P&248)>>3,N===31&&E.Fa()&&(N=32+((P&7)<<3)+((E.X()&224)>>5)),M+="."+N)),s.push(M),a=!0}).box("ac-3",r).box("ec-3",r).box("ac-4",r).box("Opus",r).box("fLaC",r).box("avc1",i).box("avc3",i).box("hev1",i).box("hvc1",i).box("dva1",i).box("dvav",i).box("dvh1",i).box("dvhe",i).box("vp09",i).box("av01",i).box("avcC",function(E){var M=x||"";switch(x){case"dvav":M="avc3";break;case"dva1":M="avc1"}E=E.reader,E.skip(1),E=M+"."+ds(E.X())+ds(E.X())+ds(E.X()),u.push(E),l=!0}).box("hvcC",function(E){var M=x||"";switch(x){case"dvh1":M="hvc1";break;case"dvhe":M="hev1"}var P=E.reader;P.skip(1),E=P.X();var N=["","A","B","C"][E>>6],L=E&31,R=P.T(),O=(E&32)>>5?"H":"L";E=[P.X(),P.X(),P.X(),P.X(),P.X(),P.X()],P=P.X();for(var U=0,j=0;32>j&&(U|=R&1,j!=31);j++)U<<=1,R>>=1;for(M=M+("."+N+L)+("."+ds(U,!0)),M+="."+O+P,N="",L=E.length;L--;)((O=E[L])||N)&&(N="."+O.toString(16).toUpperCase()+N);M+=N,u.push(M),l=!0}).box("dvcC",function(E){var M=x||"";switch(x){case"hvc1":M="dvh1";break;case"hev1":M="dvhe";break;case"avc1":M="dva1";break;case"avc3":M="dvav";break;case"av01":M="dav1"}var P=E.reader;P.skip(2),E=P.X(),P=P.X(),u.push(M+"."+en(E>>1&127)+"."+en(E<<5&32|P>>3&31)),l=!0}).box("dvvC",function(E){var M=x||"";switch(x){case"hvc1":M="dvh1";break;case"hev1":M="dvhe";break;case"avc1":M="dva1";break;case"avc3":M="dvav";break;case"av01":M="dav1"}var P=E.reader;P.skip(2),E=P.X(),P=P.X(),u.push(M+"."+en(E>>1&127)+"."+en(E<<5&32|P>>3&31)),l=!0}).R("vpcC",function(E){var M=x||"",P=E.reader;E=P.X();var N=P.X();P=P.X()>>4&15,u.push(M+"."+en(E)+"."+en(N)+"."+en(P)),l=!0}).box("av1C",function(E){var M=x||"";switch(x){case"dav1":M="av01"}var P=E.reader;P.skip(1),E=P.X(),P=P.X();var N=E>>>5,L=(P&64)>>6;u.push(M+"."+N+"."+en(E&31)+(P>>>7?"H":"M")+"."+en(N===2&&L?(P&32)>>5?12:10:L?10:8)+"."+((P&16)>>4)+"."+((P&8)>>3)+((P&4)>>2)+(P&3)+"."+en(1)+"."+en(1)+"."+en(1)+".0"),l=!0}).box("enca",Wu).box("encv",Zt).box("sinf",de).box("frma",function(E){E=Wc(E.reader).codec,o(E)}).box("colr",function(E){u=u.map(function(N){if(N.startsWith("av01.")){var L=E.reader,R=L.Ma(),O=L.Sb(4),U=String.fromCharCode(O[0]);if(U+=String.fromCharCode(O[1]),U+=String.fromCharCode(O[2]),U+=String.fromCharCode(O[3]),U==="nclx"){O=L.Aa(),U=L.Aa();var j=L.Aa(),_=L.X()>>7,F=N.split(".");F.length==10&&(F[6]=en(O),F[7]=en(U),F[8]=en(j),F[9]=String(_),N=F.join("."))}L.seek(R)}return N});var M=kS(E.reader),P=M.colorGamut;y=M.ke,v=P}).parse(e||t,!0),!s.length&&!u.length)return null;var S=a&&!l,w=new Map;if(l&&!n){n=new bn("video/mp4"),e&&n.init(e);try{n.qf(t);for(var A=g(n.Of()),D=A.next();!D.done;D=A.next()){var I=D.value;w.set(I,I)}}catch{}n.Bd()}return{type:S?"audio":"video",mimeType:S?"audio/mp4":"video/mp4",codecs:yf(s.concat(u)).join(", "),language:c,height:f,width:p,channelCount:h,sampleRate:m,closedCaptions:w,ke:y,colorGamut:v,frameRate:null}}function yf(e){var t=new Set,n=[];e=g(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var r=ji(i);t.has(r)||(n.push(i),t.add(r))}return t=dc("audio",n),i=dc("video",n),e=dc(he,n),i=Mw(i),t=t.concat(i).concat(e),n.length&&!t.length?n:t}function Mw(e){if(1>=e.length)return e;var t=e.find(function(n){return n.startsWith("dvav.")||n.startsWith("dva1.")||n.startsWith("dvh1.")||n.startsWith("dvhe.")||n.startsWith("dav1.")||n.startsWith("dvc1.")||n.startsWith("dvi1.")});return t?It('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(n){return n!=t}):e}function Cw(e){var t=null;return new Ue().box("moov",de).box("trak",de).box("mdia",de).box("minf",de).box("stbl",de).R("stsd",gi).box("encv",Zt).box("enca",Wu).box("sinf",de).box("schi",de).R("tenc",function(n){n=n.reader,n.X(),n.X(),n.X(),n.X(),t=si(n.Sb(16))}).parse(e,!0),t}function Tf(e,t,n){var i,r,o,s,u;return k(function(a){if(a.g==1)return i=t,i.cryptoKey?a.u(2):T(a,i.fetchKey(),3);if(r=i.iv,!r)for(r=le(new ArrayBuffer(16)),o=i.firstMediaSequenceNumber+n,s=r.byteLength-1;0<=s;s--)r[s]=o&255,o>>=8;return t.blockCipherMode=="CBC"?u={name:"AES-CBC",iv:r}:u={name:"AES-CTR",counter:r,length:64},a.return(B.crypto.subtle.decrypt(u,i.cryptoKey,e))})}function As(e,t,n,i,r){return e=ct(e,i,r),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function Rm(e,t){var n=this;this.g=t,this.j=e,this.h=null,this.K=new Map,this.C=1,this.A=this.l=null,this.P=0,this.i=new Map,this.I=!1,this.S=null,this.B=!1,this.m=new Jr(function(){return kw(n)}),this.M=Date.now()/1e3,this.o=new Map,this.N={projection:null,hfov:null},this.W=0,this.U=1/0,this.F=null,this.L=[],this.s=new ve(function(){if(n.j&&n.g)if(n.j.presentationTimeline.V()){var i=n.j.presentationTimeline.Vb(),r=n.j.presentationTimeline.Db();1<r-i?aw(n.g.aa,i,r):uf(n.g.aa)}else uf(n.g.aa),n.s&&n.s.stop();else n.s&&n.s.stop()}),this.G=null,this.H=new ve(function(){var i=n.g.video;!i.ended&&n.G&&(i.currentTime=n.G,n.G=null)})}d=Rm.prototype,d.destroy=function(){return this.m.destroy()};function kw(e){var t,n,i,r,o,s,u;return k(function(a){if(a.g==1){for(e.s&&e.s.stop(),e.s=null,e.H&&e.H.stop(),e.H=null,t=[],n=g(e.i.values()),i=n.next();!i.done;i=n.next())r=i.value,go(r),t.push(Is(r)),r.ba&&(Gn(r.ba),r.ba=null);for(o=g(e.o.values()),s=o.next();!s.done;s=o.next())u=s.value,Gn(u);return T(a,Promise.all(t),2)}e.i.clear(),e.o.clear(),e.g=null,e.j=null,e.h=null,e.G=null,K(a)})}d.configure=function(e){if(this.h=e,this.S=new rg({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor},!0),e.disableAudioPrefetch){var t=this.i.get("audio");t&&t.ba&&(Gn(t.ba),t.ba=null),t=g(this.o.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,Gn(this.o.get(n)),this.o.delete(n)}for(e.disableTextPrefetch&&(t=this.i.get(he))&&t.ba&&(Gn(t.ba),t.ba=null),e.disableVideoPrefetch&&(t=this.i.get("video"))&&t.ba&&(Gn(t.ba),t.ba=null),t=g(this.i.keys()),n=t.next();!n.done;n=t.next())n=this.i.get(n.value),n.ba?(km(n.ba,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||(Gn(n.ba),n.ba=null)):0<e.segmentPrefetchLimit&&(n.ba=xf(this,n.stream));e.disableAudioPrefetch||Uw(this)};function Dw(e,t,n){e.j.presentationTimeline.V()||(e.W=t,e.U=n)}d.start=function(e){var t=this;return k(function(n){if(n.g==1)return T(n,jw(t,e||new Map),2);be(t.m),t.I=!0,K(n)})};function Rw(e,t){var n,i,r,o,s,u;k(function(a){switch(a.g){case 1:return n=lt,e.P++,i=e.P,ue(a,2),T(a,nm(e.g.aa,n.Oa),4);case 4:pe(a,3);break;case 2:r=ae(a),e.g&&e.g.onError(r);case 3:o=it(t.mimeType,t.codecs),aa(e.g.aa,o,e.j.sequenceMode,t.external),s=e.g.aa.ia,(s.isTextVisible()||e.h.alwaysStreamText)&&e.P==i&&(u=va(e,t),e.i.set(n.Oa,u),Ut(e,u,0)),K(a)}})}function Pw(e){var t=e.i.get(he);t&&(go(t),Is(t).catch(function(){}),e.F=e.i.get(he),e.i.delete(he)),e.A=null}function Pm(e,t){for(var n=0>e.g.sb(),i=g(e.i.values()),r=i.next();!r.done;r=i.next())r=r.value,r.sa&&r.sa.yd(n),r.ba&&r.ba.yd(n);for(i=g(e.o.values()),r=i.next();!r.done;r=i.next())r.value.yd(n);(n=e.i.get("video"))&&(i=n.stream)&&(t?(t=i.trickModeVideo)&&!n.Bc&&(ho(e,t,!1,0,!1),n.Bc=i):(t=n.Bc)&&(n.Bc=null,ho(e,t,!0,0,!1)))}function Lm(e,t,n,i,r,o){n=n===void 0?!1:n,i=i===void 0?0:i,r=r===void 0?!1:r,o=o===void 0?!1:o,e.l=t,e.I&&(t.video&&ho(e,t.video,n,i,r,o),t.audio&&ho(e,t.audio,n,i,r,o))}function ga(e,t){k(function(n){if(n.g==1)return e.F=null,e.A=t,e.I?t.segmentIndex?n.u(2):T(n,t.createSegmentIndex(),2):n.return();ho(e,t,!0,0,!1),K(n)})}function Lw(e,t){for(var n=g(e.K.entries()),i=n.next();!i.done;i=n.next()){var r=g(i.value);i=r.next().value,r=r.next().value,i.includes(t.type)&&(r(),e.K.delete(i))}}function ho(e,t,n,i,r,o){var s=e.i.get(t.type);s||t.type!=he?s&&(s.Bc&&(t.trickModeVideo?(s.Bc=t,t=t.trickModeVideo):s.Bc=null),s.stream!=t||r)&&(e.o.has(t)?s.ba=e.o.get(t):s.ba&&Ew(s.ba,t),t.type==he&&(r=it(t.mimeType,t.codecs),aa(e.g.aa,r,e.j.sequenceMode,t.external)),!e.o.has(s.stream)&&s.stream.closeSegmentIndex&&(s.Qa?(r="("+s.type+":"+s.stream.id+")",e.K.has(r)||e.K.set(r,s.stream.closeSegmentIndex)):s.stream.closeSegmentIndex()),r=s.stream.isAudioMuxedInVideo!=t.isAudioMuxedInVideo,s.stream=t,s.sa=null,s.Vf=!!o,t.dependencyStream?s.Kd=va(e,t.dependencyStream):s.Kd=null,r?Ta(e,!0,!1):(n?s.Gc?s.Mf=!0:s.Qa?(s.Ec=!0,s.Me=i,s.Mf=!0):(go(s),Ef(e,s,!0,i).catch(function(u){e.g&&e.g.onError(u)})):s.Qa||s.yb||Ut(e,s,0),Nw(e,s).catch(function(u){e.g&&e.g.onError(u)}))):Rw(e,t)}function Nw(e,t){var n,i;return k(function(r){if(r.g==1)return t.Fb?(n=t.stream,i=t.Fb,n.segmentIndex?r.u(2):T(r,n.createSegmentIndex(),2)):r.return();if(t.Fb!=i||t.stream!=n)return r.return();var o=e.g.Mc(),s=Er(e.g.aa,t.type),u=t.stream.segmentIndex.find(t.Ia?t.Ia.endTime:o),a=u==null?null:t.stream.segmentIndex.get(u);u=a&&a.endByte?a.endByte-a.startByte:null,a&&!u&&(u=(a.endTime-a.getStartTime())*(t.stream.bandwidth||0)/8),u?((a=a.Z)&&(u+=(a.endByte?a.endByte-a.startByte:null)||0),a=e.g.getBandwidthEstimate(),o=8*u/a<(s||0)-o-e.h.rebufferingGoal||t.Fb.h.g>u):o=!1,o&&t.Fb.abort(),K(r)})}d.Wc=function(){if(this.g){for(var e=this.g.Mc(),t=g(this.i.keys()),n=t.next();!n.done;n=t.next()){var i=n.value;n=this.i.get(i);var r=this.g.aa;if(i==he?(r=r.h,r=r.g==null||r.h==null?!1:e>=r.g&&e<r.h):(r=lo(r,i),r=qc(r,e)),!r){if(this.M=0,n.ba&&(n.ba.g=null),n.type==="audio"){r=g(this.o.values());for(var o=r.next();!o.done;o=r.next())o.value.g=null}n.sa=null,(Er(this.g.aa,i)!=null||n.Qa)&&ma(this,n),n.Fb&&(n.Fb.abort(),n.Fb=null),i===he&&(i=this.g.aa,i.I&&i.I.Bd()),n.Wc=!0}}this.h.crossBoundaryStrategy!=="keep"&&Mf(this)}};function ma(e,t){t.Gc||t.Ec||(t.Qa?(t.Ec=!0,t.Me=0):sf(e.g.aa,t.type)==null?t.yb==null&&Ut(e,t,0):(go(t),Ef(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function jw(e,t){var n,i,r,o,s,u,a,l,c;return k(function(f){if(f.g==1){if(n=lt,!e.l)throw new C(2,5,5006);return i=new Map,e.l.audio&&i.set(n.Y,e.l.audio),e.l.video&&i.set(n.xa,e.l.video),e.A&&i.set(n.Oa,e.A),r=e.g.aa,T(f,r.init(i,e.j.sequenceMode,e.j.type,e.j.ignoreManifestTimestampsInSegmentsMode),2)}for(be(e.m),e.updateDuration(),o=g(i.keys()),s=o.next();!s.done;s=o.next())u=s.value,a=i.get(u),e.i.has(u)||(l=va(e,a),t.has(a.id)&&(c=t.get(a.id),Aw(c,function(p,h,m){return ya(p,h,m||null,e.h.retryParameters,e.g.lc)}),l.ba=c),e.i.set(u,l),Ut(e,l,0));K(f)})}function va(e,t){var n={stream:t,type:t.type,sa:null,ba:xf(e,t),Ia:null,Ob:null,cf:null,Rc:null,Qc:null,$e:null,bf:null,Bc:null,endOfStream:!1,Qa:!1,yb:null,Ec:!1,Me:0,Mf:!1,Gc:!1,Wc:!0,Vf:!1,Ug:!1,Pd:!1,Fb:null,Kd:null};return t.dependencyStream&&(n.Kd=va(e,t.dependencyStream)),n}function xf(e,t){if(t.type==="video"&&e.h.disableVideoPrefetch||t.type==="audio"&&e.h.disableAudioPrefetch||t.type===he&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===he&&e.h.disableTextPrefetch)return null;if(e.o.has(t))return e.o.get(t);var n=e.i.get(t.type);return(n=n&&n.ba)&&t===n.i?n:0<e.h.segmentPrefetchLimit?new ha(e.h.segmentPrefetchLimit,t,function(i,r,o){return ya(i,r,o||null,e.h.retryParameters,e.g.lc)},0>e.g.sb()):null}function Uw(e){for(var t=e.h.segmentPrefetchLimit,n=e.h.prefetchAudioLanguages,i=g(e.j.variants),r=i.next(),o={};!r.done;o={Jb:void 0},r=i.next())if(o.Jb=r.value,o.Jb.audio)if(e.o.has(o.Jb.audio)){if(r=e.o.get(o.Jb.audio),km(r,t),!(0<t&&n.some(function(u){return function(a){return zr(u.Jb.audio.language,a)}}(o)))){var s=e.i.get(o.Jb.audio.type);r!==(s&&s.ba)&&Gn(r),e.o.delete(o.Jb.audio)}}else 0>=t||!n.some(function(u){return function(a){return zr(u.Jb.audio.language,a)}}(o))||!(r=xf(e,o.Jb.audio))||(o.Jb.audio.segmentIndex||o.Jb.audio.createSegmentIndex(),e.o.set(o.Jb.audio,r))}d.updateDuration=function(){var e=Th(),t=this.j.presentationTimeline.getDuration();1/0>t?(e&&(this.s&&this.s.stop(),uf(this.g.aa)),this.g.aa.ob(t)):e?(this.s&&this.s.Ga(.5),this.g.aa.ob(1/0)):this.g.aa.ob(Math.pow(2,32))};function Ow(e,t){var n,i,r,o,s,u;return k(function(a){switch(a.g){case 1:if(be(e.m),t.Qa||t.yb==null||t.Gc)return a.return();if(t.yb=null,!t.Ec){a.u(2);break}return T(a,Ef(e,t,t.Mf,t.Me),3);case 3:return a.return();case 2:if(Lw(e,t),t.stream.segmentIndex){a.u(4);break}return n=t.stream,ue(a,5),T(a,t.stream.createSegmentIndex(),7);case 7:pe(a,6);break;case 5:return i=ae(a),T(a,If(e,t,i),8);case 8:return a.return();case 6:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.Qa||t.yb||Ut(e,t,0),a.return();case 4:ue(a,9),r=_w(e,t),r!=null&&(Ut(e,t,r),t.Pd=!1),pe(a,10);break;case 9:return o=ae(a),T(a,If(e,t,o),11);case 11:return a.return();case 10:if(s=Array.from(e.i.values()),!e.I||!s.every(function(l){return l.endOfStream})){a.u(0);break}return T(a,e.g.aa.endOfStream(),13);case 13:be(e.m),u=e.g.aa.getDuration(),u!=0&&u<e.j.presentationTimeline.getDuration()&&e.j.presentationTimeline.ob(u),K(a)}})}function _w(e,t){if(Af(t))return rw(e.g.aa,t.stream.originalId||""),null;if(t.type==he&&ow(e.g.aa),t.stream.isAudioMuxedInVideo)return null;var n=e.h.updateIntervalSeconds/Math.max(1,Math.abs(e.g.sb()));if(!tm(e.g.aa)&&t.type!=he)return n/2;var i=e.g.Mc();if(t.type==="audio")for(var r=g(e.o.keys()),o=r.next();!o.done;o=r.next())o=e.o.get(o.value),o.$a(i,!0),Ss(o,i);r=t.Ia?t.Ia.endTime:i;var s=nw(e.g.aa,t.type,i);o=Math.max(1,Math.max(e.h.rebufferingGoal,e.h.bufferingGoal)*e.C);var u=e.j.presentationTimeline.getDuration()-r,a=Er(e.g.aa,t.type);if(1e-6>u&&a)return t.endOfStream=!0,t.type=="video"&&(e=e.i.get(he))&&Af(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,s>=o)return n/2;if(u=!t.sa,a=bw(e,t,i,a),!a)return n;s=!1,u&&t.Vf&&(s=!0,t.Vf=!1),u=1/0;var l=Array.from(e.i.values());l=g(l);for(var c=l.next();!c.done;c=l.next())c=c.value,Af(c)||c.sa&&!c.sa.current()||(u=Math.min(u,c.Ia?c.Ia.endTime:i));return r>=u+e.j.presentationTimeline.h?n:(e.h.crossBoundaryStrategy!=="keep"&&Kw(e,t,a)||(t.ba&&t.sa&&!e.o.has(t.stream)&&(t.ba.$a(a.startTime+.001),Ss(t.ba,a.startTime).catch(function(){})),Bw(e,t,i,a,s).catch(function(){}),t.Kd&&Nm(e,t.Kd,i,o)),null)}function bw(e,t,n,i){if(t.sa)return(n=t.sa.current())&&t.Ia&&.001>Math.abs(t.Ia.startTime-n.startTime)&&(n=t.sa.next().value),n;if(t.Ia||i)return n=t.Ia?t.Ia.endTime:i,e=0>e.g.sb(),t.stream.segmentIndex&&(t.sa=t.stream.segmentIndex.Ub(n,!1,e)),t.sa&&t.sa.next().value;i=e.j.sequenceMode?0:e.h.inaccurateManifestTolerance;var r=Math.max(n-i,0);e=0>e.g.sb();var o=null;return i&&(t.stream.segmentIndex&&(t.sa=t.stream.segmentIndex.Ub(r,!1,e)),o=t.sa&&t.sa.next().value),o||(t.stream.segmentIndex&&(t.sa=t.stream.segmentIndex.Ub(n,!1,e)),o=t.sa&&t.sa.next().value),o}function Bw(e,t,n,i,r){var o,s,u,a,l,c,f,p,h,m,y,v,x,S,w,A,D;return k(function(I){switch(I.g){case 1:if(o=lt,s=t.stream,u=t.sa,t.Qa=!0,ue(I,2),i.xc()==2)throw new C(1,1,1011);return T(I,Hw(e,t,i,r),4);case 4:return be(e.m),e.B?I.return():(a=s.mimeType=="video/mp4"||s.mimeType=="audio/mp4",l=B.ReadableStream,e.h.lowLatencyMode&&e.j.isLowLatency&&l&&a&&(e.j.type!="HLS"||i.m)?(p=new Uint8Array(0),m=h=!1,v=function(E){var M,P,N;return k(function(L){switch(L.g){case 1:if(h||(m=!0,be(e.m),e.B))return L.return();if(ue(L,2),p=Fw(p,E),M=!1,P=0,new Ue().box("mdat",function(R){P=R.size+R.start,M=!0}).parse(p,!1,!0),!M){L.u(4);break}return N=p.subarray(0,P),p=p.subarray(P),T(L,Sf(e,t,n,s,i,N,!0,r),5);case 5:t.ba&&t.sa&&Ss(t.ba,i.startTime,!0);case 4:pe(L,0);break;case 2:y=ae(L),K(L)}})},T(I,Es(e,t,i,v),9)):(c=Es(e,t,i),T(I,c,7)));case 7:return f=I.h,be(e.m),e.B?I.return():(be(e.m),t.Ec?(t.Qa=!1,Ut(e,t,0),I.return()):T(I,Sf(e,t,n,s,i,f,!1,r),6));case 9:if(x=I.h,y)throw y;if(m){I.u(10);break}return h=!0,be(e.m),e.B?I.return():t.Ec?(t.Qa=!1,Ut(e,t,0),I.return()):T(I,Sf(e,t,n,s,i,x,!1,r),10);case 10:t.ba&&t.sa&&Ss(t.ba,i.startTime,!0);case 6:if(be(e.m),e.B)return I.return();t.Ia=i,u.next(),t.Qa=!1,t.Ug=!1,S=e.g.aa.Kb(),w=S[t.type],JSON.stringify(w),t.Ec||(A=null,t.type===o.xa?A=e.i.get(o.Y):t.type===o.Y&&(A=e.i.get(o.xa)),A&&A.type==o.Y?e.g.nf(i,t.stream,A.stream.isAudioMuxedInVideo):e.g.nf(i,t.stream,t.stream.codecs.includes(","))),Ut(e,t,0),pe(I,0);break;case 2:if(D=ae(I),be(e.m,D),e.B)return I.return();if(t.Qa=!1,D.code==7001)t.Qa=!1,go(t),Ut(e,t,0),I.u(0);else if(t.type==o.Oa&&e.h.ignoreTextStreamFailures)e.i.delete(o.Oa),I.u(0);else return D.code==3017?T(I,Vw(e,t,D),0):(t.Pd=!0,D.category==1&&t.ba&&ws(t.ba,i),D.severity=2,T(I,If(e,t,D),0))}})}function Nm(e,t,n,i){var r,o,s,u,a,l,c,f,p,h,m;return k(function(y){switch(y.g){case 1:for(r=t.stream,u=(s=(o=r.segmentIndex)&&o.Ub(n))&&s.next().value;u&&e.L.includes(u.startTime);)u=s&&s.next().value;if(!u){y.u(0);break}if(a=u.Z,!a||ra(a,t.Ob)){y.u(3);break}return t.Ob=a,ue(y,4),T(y,Es(e,t,a),6);case 6:l=y.h;var v=e.g.aa;v.M&&pc(v.M,l,0,r),e.L=[],pe(y,3);break;case 4:throw c=ae(y),t.Ob=null,c;case 3:if(t.Ia&&t.Ia==u){y.u(0);break}return t.Ia=u,ue(y,8),T(y,Es(e,t,u),10);case 10:f=y.h,v=e.g.aa,v.M&&pc(v.M,f,0,r),e.L.push(u.startTime),pe(y,9);break;case 8:throw p=ae(y),t.Ia=null,p;case 9:if(h=Math.max.apply(Math,[0].concat(H(e.L))),m=e.g.Mc(),m+i>h)return T(y,Nm(e,t,u.startTime,i),0);y.u(0)}})}function Fw(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function Vw(e,t,n){var i,r,o,s;return k(function(u){if(u.g==1){if(i=Array.from(e.i.values()),i.some(function(a){return a!=t&&a.Ug}))return u.u(2);if(r=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,e.g.disableStream(t.stream,r))return u.return();if(e.h.avoidEvictionOnQuotaExceededError)return Ut(e,t,4),u.return();if(o=Math.round(100*e.C),20<o)e.C-=.2;else if(4<o)e.C-=.04;else return t.Pd=!0,e.B=!0,e.g.onError(n),u.return();return t.Ug=!0,s=e.g.Mc(),T(u,wf(e,t,s),2)}Ut(e,t,4),K(u)})}function Hw(e,t,n,i){var r,o,s,u,a,l,c,f,p,h,m,y,v,x,S,w;return k(function(A){switch(A.g){case 1:if(r=lt,o=t.Ia==null,s=[],u=Math.max(0,Math.max(n.appendWindowStart,e.W)-.1),a=Math.min(n.appendWindowEnd,e.U)+.1,l=n.codecs||t.stream.codecs,c=ji(l),f=Qt(n.mimeType||t.stream.mimeType),p=n.timestampOffset,p==t.cf&&u==t.Rc&&a==t.Qc&&c==t.$e&&f==t.bf){A.u(2);break}if(h=t.$e&&t.bf&&pw(e.g.aa,t.type,f,l),!h){A.u(3);break}if(m=null,t.type===r.xa?m=e.i.get(r.Y):t.type===r.Y&&(m=e.i.get(r.xa)),!m){A.u(3);break}return T(A,Is(m).catch(function(){}),5);case 5:m.Ob=null,m.Rc=null,m.Qc=null,ma(e,m);case 3:return T(A,jm(e,t,p,u,a,n,c,f),2);case 2:return ra(n.Z,t.Ob)||(t.Ob=n.Z,n.l&&n.Z&&(y=Es(e,t,n.Z),v=function(){var D,I,E,M,P,N,L,R,O;return k(function(U){switch(U.g){case 1:return ue(U,2),T(U,y,4);case 4:return D=U.h,be(e.m),I=null,E=new Map,M={projection:null,hfov:null},P=new Ue,P.box("moov",de).box("trak",de).box("mdia",de).R("mdhd",function(j){I=ea(j.reader,j.version).timescale}).box("hdlr",function(j){switch(j=j.reader,j.skip(8),j.Tc()){case"soun":E.set(r.Y,I);break;case"vide":E.set(r.xa,I)}I=null}).box("minf",de).box("stbl",de).R("stsd",gi).box("encv",Zt).box("avc1",Zt).box("avc3",Zt).box("hev1",Zt).box("hvc1",Zt).box("dvav",Zt).box("dva1",Zt).box("dvh1",Zt).box("dvhe",Zt).box("dvc1",Zt).box("dvi1",Zt).box("vexu",de).box("proj",de).R("prji",function(j){j=j.reader.Tc(),M.projection=j}).box("hfov",function(j){j=j.reader.T()/1e3,M.hfov=j}).parse(D),t.type===r.xa&&Gw(e,M),E.has(t.type)?n.Z.timescale=E.get(t.type):I!=null&&(n.Z.timescale=I),N=t.stream.segmentIndex,N instanceof Je&&(L=yw(N,n.startTime)),R=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,T(U,e.g.Gh(t.type,D),5);case 5:return T(U,la(e.g.aa,t.type,D,null,t.stream,R,t.Wc,i,!1,!1,L),6);case 6:pe(U,0);break;case 2:throw O=ae(U),t.Ob=null,O}})},x=n.startTime,o&&(S=Er(e.g.aa,t.type),S!=null&&(x=S)),e.g.tk(x,n.Z),s.push(v()))),w=t.Ia?t.Ia.i:-1,n.i!=w&&s.push(uw(e.g.aa,t.type,n.startTime)),T(A,Promise.all(s),0)}})}function jm(e,t,n,i,r,o,s,u){var a,l,c,f;return k(function(p){if(p.g==1)return a=lt,l=new Map,e.l.audio&&l.set(a.Y,e.l.audio),e.l.video&&l.set(a.xa,e.l.video),ue(p,2),t.Rc=i,t.Qc=r,s&&(t.$e=s),u&&(t.bf=u),t.cf=n,c=e.j.sequenceMode||e.j.type=="HLS",T(p,sw(e.g.aa,t.type,n,i,r,c,o.mimeType||t.stream.mimeType,o.codecs||t.stream.codecs,l),4);if(p.g!=2)return pe(p,0);throw f=ae(p),t.Rc=null,t.Qc=null,t.$e=null,t.bf=null,t.cf=null,f})}function Sf(e,t,n,i,r,o,s,u){s=s===void 0?!1:s,u=u===void 0?!1:u;var a,l,c,f;return k(function(p){switch(p.g){case 1:return a=i.closedCaptions&&0<i.closedCaptions.size,e.h.shouldFixTimestampOffset&&(l=i.mimeType=="video/mp4"||i.mimeType=="audio/mp4",c=null,r.Z&&(c=r.Z.timescale),l&&c&&i.type==="video"&&e.j.type=="DASH"&&new Ue().box("moof",de).box("traf",de).R("tfdt",function(h){var m,y,v,x,S,w;return k(function(A){return m=Zu(h.reader,h.version),y=m.baseMediaDecodeTime,y?(v=-y/c,x=Number(t.cf)||0,x<v?(S=t.Rc,w=t.Qc,T(A,jm(e,t,v,S,w,r),0)):A.u(0)):A.return()})}).parse(o,!1,s)),T(p,wf(e,t,n),2);case 2:return be(e.m),f=t.Wc,t.Wc=!1,T(p,e.g.Gh(t.type,o),3);case 3:return T(p,la(e.g.aa,t.type,o,r,i,a,f,u,s),4);case 4:be(e.m),K(p)}})}function wf(e,t,n){var i,r,o,s,u,a,l,c,f;return k(function(p){if(p.g==1)return i=t.stream.segmentIndex,i instanceof Je&&(i.$a(e.j.presentationTimeline.Eb()),r=[],vw(i,function(h){r.push(h.Ne())})),o=Math.max(e.h.bufferBehind*e.C,e.j.presentationTimeline.h),s=sf(e.g.aa,t.type),s==null?(e.F==t&&(e.F=null),p.return()):(u=n-s,a=e.h.evictionGoal,l=e.j.presentationTimeline.Vb(),c=e.j.presentationTimeline.Db(),f=u-o,c-l>a&&(f=Math.max(u-o,l-a-s)),f<=a?p.return():T(p,e.g.aa.remove(t.type,s,s+f,r),2));if(p.g!=4)return be(e.m),e.F?T(p,wf(e,e.F,n),4):p.u(0);be(e.m),K(p)})}function Af(e){return e&&e.type==he&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function Es(e,t,n,i){var r,o,s,u,a;return k(function(l){switch(l.g){case 1:if(r=n.Wb())return l.return(r);if(o=null,t.ba){var c=t.ba,f=c.h;n instanceof Xt&&(f=c.j),f.has(n)?(c=f.get(n),i&&(c.mh=i),o=c.Yd):o=null}return o||(o=ya(n,t.stream,i||null,e.h.retryParameters,e.g.lc)),s=0,t.sa&&(s=t.sa.h),t.Fb=o,T(l,o.promise,2);case 2:if(u=l.h,t.Fb=null,a=u.data,!n.aesKey){l.u(3);break}return T(l,Tf(a,n.aesKey,s),4);case 4:a=l.h;case 3:return l.return(a)}})}function ya(e,t,n,i,r,o){o=o===void 0?!1:o;var s=e instanceof Z?e:void 0,u=s?1:0;return e=As(e.O(),e.startByte,e.endByte,i,n),e.contentType=t.type,r.request(Pn,e,{type:u,stream:t,segment:s,isPreload:o})}function Ef(e,t,n,i){var r,o;return k(function(s){if(s.g==1)return t.Ec=!1,t.Mf=!1,t.Me=0,t.Gc=!0,t.Ia=null,t.sa=null,t.ba&&!e.o.has(t.stream)&&Gn(t.ba),i?(r=e.g.Mc(),o=e.g.aa.getDuration(),T(s,e.g.aa.remove(t.type,r+i,o),3)):T(s,nm(e.g.aa,t.type),4);if(s.g!=3)return be(e.m),n?T(s,e.g.aa.flush(t.type),3):s.u(3);be(e.m),t.Gc=!1,t.endOfStream=!1,t.Qa||t.yb||Ut(e,t,0),K(s)})}function Ut(e,t,n){var i=t.type;(i!=he||e.i.has(i))&&(t.yb=new is(function(){var r;return k(function(o){if(o.g==1)return ue(o,2),T(o,Ow(e,t),4);if(o.g!=2)return pe(o,0);r=ae(o),e.g&&e.g.onError(r),K(o)})}).ha(n))}function go(e){e.yb!=null&&(e.yb.stop(),e.yb=null)}function Is(e){return k(function(t){return e.Fb?T(t,e.Fb.abort(),0):t.u(0)})}function If(e,t,n){var i;return k(function(r){if(r.g==1)return n.code==3024?(t.Qa=!1,go(t),Ut(e,t,0),r.return()):T(r,og(e.S),2);if(be(e.m),n.category===1&&n.code!=1003){if(t.Bc)return Pm(e,!1),r.return();i=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,n.handled=e.g.disableStream(t.stream,i),n.handled&&(n.severity=1)}(!n.handled||n.code!=1011)&&e.g.onError(n),n.handled||e.h.failureCallback(n),K(r)})}function Ta(e,t,n){t=t===void 0?!1:t,n=n===void 0?!0:n;var i,r,o,s,u,a;return k(function(l){if(l.g==1){if(i=Date.now()/1e3,r=e.h.minTimeBetweenRecoveries,!t){if(!e.h.allowMediaSourceRecoveries||i-e.M<r)return l.return(!1);e.M=i}return o=lt,(s=e.i.get(o.Y))&&(s.Ob=null,s.Rc=null,s.Qc=null,n&&ma(e,s),Is(s).catch(function(){}),s.sa&&s.sa.Xg()),(u=e.i.get(o.xa))&&(u.Ob=null,u.Rc=null,u.Qc=null,n&&ma(e,u),Is(u).catch(function(){}),u.sa&&u.sa.Xg()),a=new Map,e.l.audio&&a.set(o.Y,e.l.audio),e.l.video&&a.set(o.xa,e.l.video),T(l,om(e.g.aa,a),2)}return!u||u.Gc||u.Qa||u.yb||Ut(e,u,0),!s||s.Gc||s.Qa||s.yb||Ut(e,s,0),l.return(!0)})}function Gw(e,t){if(e.N.projection!=t.projection||e.N.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new G("spatialvideoinfo",n)}else n=new G("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.N=t}}function Mf(e){if(e.h.crossBoundaryStrategy!=="keep"){e.H.stop();var t=e.g.Mc(),n=e.i.get("video")||e.i.get("audio");n&&(n=n.Ob)&&n.g!==null&&(t=n.g-t,0>t||1<t||(e.G=n.g+.1,e.H.ha(t)))}}function Kw(e,t,n){if(t.type===he)return!1;var i=t.Ob;if(!i)return!1;var r=n.Z;if(n=i.g!==r.g,e.h.crossBoundaryStrategy==="reset_to_encrypted"&&(i.encrypted||r.encrypted||(n=!1),i.encrypted&&(e.h.crossBoundaryStrategy="keep")),e.h.crossBoundaryStrategy==="RESET_ON_ENCRYPTION_CHANGE"&&i.encrypted==r.encrypted&&(n=!1),n&&t.Wc){var o=e.g.video,s=o.paused;Ta(e,!0).then(function(){var u=new Map().set("oldEncrypted",i.encrypted).set("newEncrypted",r.encrypted);e.g.onEvent(new G("boundarycrossed",u)),s||o.play()})}return n}function xa(){}function Cf(e,t,n,i,r){var o=r in i,s=o?n.constructor==Object&&Object.keys(i).length==0:n.constructor==Object&&Object.keys(n).length==0,u=o||s,a=!0,l;for(l in t){var c=r+"."+l,f=o?i[r]:n[l];u||l in n?t[l]===void 0?f===void 0||u?delete e[l]:e[l]=Bn(f):s?e[l]=t[l]:f.constructor==Object&&t[l]&&t[l].constructor==Object?(e[l]||(e[l]=Bn(f)),c=Cf(e[l],t[l],f,i,c),a=a&&c):typeof t[l]!=typeof f||t[l]==null||typeof t[l]!="function"&&t[l].constructor!=f.constructor?(zn("Invalid config, wrong type for "+c),a=!1):typeof n[l]=="function"&&n[l].length!=t[l].length?(we("Unexpected number of arguments for "+c),e[l]=t[l]):e[l]=Array.isArray(e[l])?t[l].slice():t[l]:(zn("Invalid config, unrecognized key "+c),a=!1)}return a}function Sa(e,t){for(var n={},i=n,r=0,o=0;r=e.indexOf(".",r),!(0>r);)(r==0||e[r-1]!="\\")&&(o=e.substring(o,r).replace(/\\\./g,"."),i[o]={},i=i[o],o=r+1),r+=1;return i[e.substring(o).replace(/\\\./g,".")]=t,n}function mo(e,t){return e&&t}function Um(e,t){function n(o){for(var s=g(Object.keys(o)),u=s.next();!u.done;u=s.next())if(u=u.value,!(o[u]instanceof HTMLElement))if(r(o[u])&&Object.keys(o[u]).length===0)delete o[u];else{var a=o[u];Array.isArray(a)&&a.length===0||typeof o[u]=="function"?delete o[u]:r(o[u])&&(n(o[u]),Object.keys(o[u]).length===0&&delete o[u])}}function i(o,s){return Object.keys(o).reduce(function(u,a){var l=o[a];return s.hasOwnProperty(a)?l instanceof HTMLElement&&s[a]instanceof HTMLElement?l.isEqualNode(s[a])||(u[a]=l):r(l)&&r(s[a])?(l=i(l,s[a]),(0<Object.keys(l).length||!r(l))&&(u[a]=l)):Array.isArray(l)&&Array.isArray(s[a])?yc(l,s[a])||(u[a]=l):Number.isNaN(l)&&Number.isNaN(s[a])||l!==s[a]&&(u[a]=l):u[a]=l,u},{})}function r(o){return o&&typeof o=="object"&&!Array.isArray(o)}return e=i(e,t),n(e),e}W("shaka.util.ConfigUtils",xa),xa.getDifferenceFromConfigObjects=Um,xa.convertToConfigObject=Sa,xa.mergeConfigObjects=Cf,W("shaka.config.RepeatMode",{OFF:0,ALL:1,SINGLE:2});function zt(){}function Om(e){return e=Yn(e),new tt(e).Bb}function Ms(e,t,n){function i(u){Ht(o).setUint32(s,u.byteLength,!0),s+=4,o.set(le(u),s),s+=u.byteLength}if(!n||!n.byteLength)throw new C(2,6,6015);var r;typeof t=="string"?r=cc(t,!0):r=t,e=Yn(e),e=cc(e,!0);var o=new Uint8Array(12+e.byteLength+r.byteLength+n.byteLength),s=0;return i(e),i(r),i(n),o}function kf(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Yn(e).split("skd://").pop(),Ms(e,n,t))}function wa(e,t){e===2&&(e=t.drmInfo)&&Fu(e.keySystem)&&(t.headers["Content-Type"]="application/octet-stream")}W("shaka.drm.FairPlay",zt),zt.commonFairPlayResponse=function(e,t){if(e===2&&(e=t.originalRequest.drmInfo)&&Fu(e.keySystem)){try{var n=ze(t.data)}catch{return}if(e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0),!e)try{var i=JSON.parse(n);i.ckc&&(n=i.ckc,e=!0),i.CkcMessage&&(n=i.CkcMessage,e=!0),i.License&&(n=i.License,e=!0)}catch{}e&&(t.data=gn(mn(n)))}},zt.muxFairPlayRequest=function(e,t){wa(e,t)},zt.expressplayFairPlayRequest=function(e,t){if(e===2){var n=t.drmInfo;n&&Fu(n.keySystem)&&wa(e,t)}},zt.conaxFairPlayRequest=function(e,t){wa(e,t)},zt.ezdrmFairPlayRequest=function(e,t){wa(e,t)},zt.verimatrixFairPlayRequest=function(e,t){e===2&&(e=t.drmInfo)&&Fu(e.keySystem)&&(e=le(t.body),e=oi(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=Cn("spc="+e))},zt.muxInitDataTransform=function(e,t,n){return kf(e,t,n)},zt.expressplayInitDataTransform=function(e,t,n){return kf(e,t,n)},zt.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=Yn(e).split("skd://").pop().split("?").shift(),n=B.atob(n);var i=new ArrayBuffer(2*n.length);i=dh(i);for(var r=0,o=n.length;r<o;r++)i[r]=n.charCodeAt(r);return Ms(e,i,t)},zt.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Yn(e).split(";").pop(),Ms(e,n,t))},zt.verimatrixInitDataTransform=function(e,t,n){return kf(e,t,n)},zt.initDataTransform=Ms,zt.defaultGetContentId=Om,zt.isFairPlaySupported=function(){var e;return k(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},ue(t,2),T(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(ae(t),t.return(!1))})};function Aa(){this.g=null}Aa.prototype.configure=function(e){this.g=e},Aa.prototype.getConfiguration=function(){return this.g},Aa.prototype.create=function(e){var t;if(this.g.language){var n=Xw(e,this.g.language);n.length&&(t=n)}t||(t=e.filter(function(o){return o.primary}),t=t.length?t:e),e=Ww(t,this.g.role),e.length&&(t=e),this.g.videoLayout&&(e=Qw(t,this.g.videoLayout),e.length&&(t=e)),this.g.zc&&(e=$w(t,this.g.zc),e.length&&(t=e));var i=[this.g.channelCount,this.g.preferredAudioChannelCount];if(e=i.filter(function(o,s){return o&&i.indexOf(o)===s}),e.length){for(e=g(e),n=e.next();!n.done;n=e.next())if(n=qw(t,n.value),n.length){t=n;break}}this.g.Fc&&(e=zw(t,this.g.Fc),e.length&&(t=e)),this.g.zd&&(e=Yw(t,this.g.zd),e.length&&(t=e)),e=Jw(t,this.g.spatialAudio),e.length&&(t=e);var r=[this.g.audioCodec,this.g.Cd].concat(H(this.g.preferredAudioCodecs));if(e=r.filter(function(o,s){return o&&r.indexOf(o)===s}),e.length){for(e=g(e),n=e.next();!n.done;n=e.next())if(n=Zw(t,n.value),n.length){t=n;break}}return new $u(t[0],t,!(this.g.codecSwitchingStrategy=="smooth"&&ir()))};function Xw(e,t){t=Ne(t);var n=Lu(t,e.map(function(i){return jc(i)}));return n?e.filter(function(i){return n==jc(i)}):[]}function Ww(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function zw(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function Yw(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function qw(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount>t)}).sort(function(n,i){return n.audio||i.audio?n.audio?i.audio?(i.audio.channelsCount||0)-(n.audio.channelsCount||0):1:-1:0})}function $w(e,t){if(t=="AUTO"){var n=e.some(function(i){return!!(i.video&&i.video.hdr&&i.video.hdr=="HLG")});t=f0(n)}return e.filter(function(i){return!(i.video&&i.video.hdr&&i.video.hdr!=t)})}function Qw(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function Jw(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function Zw(e,t){return e.filter(function(n){return!(n.audio&&n.audio.codecs!=t)})}function Ea(){}function vo(){var e=1/0,t=ye();navigator.connection&&navigator.connection.saveData&&(e=360);var n={retryParameters:Vn(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(u,a,l){return B.shakaMediaKeysPolyfill==="apple"&&a=="skd"&&(a=l.serverCertificate,l=Om(u),u=Ms(u,l,a)),u},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:!1,minHdcpVersion:"",ignoreDuplicateInitData:!0,defaultAudioRobustnessForWidevine:"SW_SECURE_CRYPTO",defaultVideoRobustnessForWidevine:"SW_SECURE_DECODE"},i="reload",r=!1;ir()&&t.Zc()&&(i="smooth",r=!0),r={retryParameters:Vn(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,disableIFrames:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,ignoreSupplementalCodecs:!1,updatePeriod:-1,ignoreDrmInfo:!1,dash:{clockSyncUri:"",disableXlinkProcessing:!0,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2":"com.apple.fps","urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c":"com.huawei.wiseplay"},manifestPreprocessor:Ia,manifestPreprocessorTXml:Ma,sequenceMode:!1,multiTypeVariantsAllowed:r,useStreamOnceInPeriodFlattening:!1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',liveSegmentsDelay:3,sequenceMode:t.Yc(),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0,allowRangeRequestsToGuessMimeType:!1},mss:{manifestPreprocessor:Ia,manifestPreprocessorTXml:Ma,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var o={trackSelectionCallback:function(u){return k(function(a){return a.return(u)})},downloadSizeCallback:function(u){var a;return k(function(l){return l.g==1?navigator.storage&&navigator.storage.estimate?T(l,navigator.storage.estimate(),3):l.return(!0):(a=l.h,l.return(a.usage+u<.95*a.quota))})},progressCallback:function(u,a){return mo([u,a])},usePersistentLicense:!0,numberOfParallelDownloads:5},s={drm:n,manifest:r,streaming:{retryParameters:Vn(),failureCallback:function(u){return mo([u])},rebufferingGoal:0,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapPadding:0,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,safeSeekEndOffset:0,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,preferNativeDash:!1,preferNativeHls:!1,updateIntervalSeconds:1,observeQualityChanges:!1,maxDisabledTime:30,segmentPrefetchLimit:1,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:!1,dontChooseCodecs:!1,shouldFixTimestampOffset:!1,avoidEvictionOnQuotaExceededError:!1,crossBoundaryStrategy:"keep",returnToEndOfLiveWindowWhenOutside:!1},networking:{forceHTTP:!1,forceHTTPS:!1,minBytesForProgressEvents:16e3},mediaSource:{codecSwitchingStrategy:i,addExtraFeaturesToSourceBuffer:function(u){return mo([u],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,correctEc3Enca:!1,modifyCueCallback:function(u,a){return mo([u,a])},dispatchAllEmsgBoxes:!1,useSourceElements:!0,durationReductionEmitsUpdateEnd:!0},offline:o,abrFactory:function(){return new Qe},adaptationSetCriteriaFactory:function(){return new(Function.prototype.bind.apply(Aa,[null].concat(H(ht.apply(0,arguments)))))},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:20,minTimeToSwitch:0,preferNetworkInformationBandwidth:!1,removeLatencyFromFirstPacketTime:!0},autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferredTextFormats:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25,fontScaleFactor:1},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[],version:1},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1,poster:!0},ads:{customPlayheadTracker:!1,skipPlayDetection:!1,supportsMultipleMediaElements:!0,disableHLSInterstitial:!1,disableDASHInterstitial:!1,allowPreloadOnDomElements:!0,allowStartInMiddleOfInterstitial:!0},ignoreHardwareResolution:!1,queue:{preloadNextUrlWindow:30,repeatMode:0}};return o.trackSelectionCallback=function(u){return k(function(a){return a.return(eA(u,s.preferredAudioLanguage,s.preferredVideoHdrLevel))})},t.Ta(s)}function _m(){return{streaming:{inaccurateManifestTolerance:0,segmentPrefetchLimit:2,updateIntervalSeconds:.1,maxDisabledTime:1,retryParameters:{baseDelay:100}},manifest:{dash:{autoCorrectDrift:!1},retryParameters:{baseDelay:100}},drm:{retryParameters:{baseDelay:100}}}}function Ti(e,t,n){var i={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:[],audioRobustness:[],sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return Cf(e,t,n||vo(),i,"")}function eA(e,t,n){var i=n;i=="AUTO"&&(n=e.some(function(u){return!!(u.hdr&&u.hdr=="HLG")}),i=f0(n));var r=e.filter(function(u){return!(u.type!="variant"||u.hdr&&u.hdr!=i)});n=[];var o=Lu(t,r.map(function(u){return u.language}));o&&(n=r.filter(function(u){return Ne(u.language)==o})),n.length==0&&(n=r.filter(function(u){return u.primary})),n.length==0&&(r.map(function(u){return u.language}),n=r);var s=n.filter(function(u){return u.height&&480>=u.height});for(s.length&&(s.sort(function(u,a){return a.height-u.height}),n=s.filter(function(u){return u.height==s[0].height})),t=[],n.length&&(r=Math.floor(n.length/2),n.sort(function(u,a){return u.bandwidth-a.bandwidth}),t.push(n[r])),e=g(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=he&&n.type!="image"||t.push(n);return t}function Ia(e){return mo([e],e)}function Ma(e){return mo([e],e)}W("shaka.util.PlayerConfiguration",Ea),Ea.mergeConfigObjects=Ti,Ea.createDefaultForLL=_m,Ea.createDefault=vo;function tA(){this.g=null,this.h=[]}function Df(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=g(e.h);for(var i=e.next();!i.done;i=e.next())i=i.value,n+=i.state==t?i.duration:0;return n}function nA(e){function t(o){return{timestamp:o.timestamp,state:o.state,duration:o.duration}}for(var n=[],i=g(e.h),r=i.next();!r.done;r=i.next())n.push(t(r.value));return e.g&&n.push(t(e.g)),n}function iA(){this.i=this.h=null,this.g=[]}function Rf(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Ca(){this.B=this.W=NaN,this.l="",this.j=this.ci=this.s=this.A=this.K=this.C=this.o=this.m=this.I=this.F=this.i=this.S=this.U=this.M=this.N=this.P=NaN,this.L=0,this.G=this.H=NaN,this.g=new tA,this.h=new iA}function rA(e,t,n){e.P=t,e.N=n}function bm(e,t,n){e.W=t,e.B=n}function oA(e,t){e.i=isNaN(e.i)?t:Math.max(e.i,t)}function Bm(e,t){e.j=isNaN(e.j)?t:e.j+t}function sA(e){var t=e.W,n=e.B,i=e.l,r=e.A,o=e.N,s=e.P,u=e.M,a=e.U,l=e.S,c=e.s,f=e.i,p=e.F,h=e.I,m=e.m,y=Df(e.g,"playing"),v=Df(e.g,"paused"),x=Df(e.g,"buffering"),S=e.o,w=e.C,A=e.K,D=e.ci,I=e.j,E=e.L,M=e.H,P=e.G,N=nA(e.g),L=[];e=g(e.h.g);for(var R=e.next();!R.done;R=e.next())R=R.value,L.push({timestamp:R.timestamp,id:R.id,type:R.type,fromAdaptation:R.fromAdaptation,bandwidth:R.bandwidth});return{width:t,height:n,currentCodecs:i,streamBandwidth:r,decodedFrames:o,droppedFrames:s,corruptedFrames:u,stallsDetected:a,gapsJumped:l,estimatedBandwidth:c,completionPercent:f,loadLatency:p,manifestTimeSeconds:h,drmTimeSeconds:m,playTime:y,pauseTime:v,bufferingTime:x,licenseTime:S,liveLatency:w,maxSegmentDuration:A,manifestSizeBytes:D,bytesDownloaded:I,nonFatalErrorCount:E,manifestPeriodCount:M,manifestGapCount:P,stateHistory:N,switchHistory:L}}function yn(e,t,n,i){ke.call(this),this.N=e,this.W=t,this.Pa=i.networkingEngine,this.m=n,this.A=null,this.Ka=0,this.ab=i.dd,this.F=i.jk,this.eb=i.kk,this.g=i.config,this.l=this.G=this.h=null,this.wa=!1,this.H=i.zk,this.ya=!1,this.i=null,this.oa=!1,this.j=this.C=null,this.ia=!1,this.M=new Map,this.Ba=!1,this.Ua=i.yk,this.$=new Ca,this.va=new je,this.s=new je,this.P=null,this.o=!1,this.ka=i.bj,this.U=this.K=null,this.Za=i.aj,this.S=!1,this.L=[],this.I=[],this.B=!0}et(yn,ke);function Cs(e,t,n){(e=t?e.I:e.L)?e.push(n):n()}function uA(e){if(e.I)for(var t=g(e.I),n=t.next();!n.done;n=t.next())n=n.value,n();e.I=null}function Fm(e,t){if(e.P=t,e.S=!0,e.L){t=g(e.L);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.L=null}d=yn.prototype,d.getStartTime=function(){return this.m},d.jd=function(){return this.N},d.zg=function(){return this.h};function aA(e){return e.ia=!0,e.j}function lA(e){return e.ya=!0,e.H}d.getStats=function(){return this.$};function cA(e){return e.oa=!0,e.i}d.Jj=function(){return this.K?hr(this.K):null},d.Ij=function(){return this.U?gr(this.U):null};function fA(e){return e.Ba=!0,e.M}d.start=function(){var e=this;(function(){var t;return k(function(n){switch(n.g){case 1:return T(n,Promise.resolve(),2);case 2:return ue(n,3),T(n,dA(e),5);case 5:if(Ir(e),B.shakaMediaKeysPolyfill==="webkit"){n.u(6);break}return T(n,Vm(e),7);case 7:Ir(e);case 6:return T(n,pA(e),8);case 8:if(Ir(e),!e.ka||!e.i){n.u(9);break}return T(n,mS(e.i),10);case 10:Ir(e);case 9:e.s.resolve(),pe(n,0);break;case 3:t=ae(n),t instanceof C&&(t.code==7001||t.code==7003)||e.s.reject(t),K(n)}})})()},d.dispatchEvent=function(e){return this.P?this.P.dispatchEvent(e):ke.prototype.dispatchEvent.call(this,e)},d.onError=function(e){e.severity===2&&(this.s.reject(e),this.destroy());var t=new Map().set("detail",e);t=new G("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function Ir(e){if(e.o)throw new C(2,7,7003)}function Pf(e,t){e.dispatchEvent(new G("onstatechange",new Map().set("state",t)))}function dA(e){var t,n,i,r,o,s,u,a,l;return k(function(c){switch(c.g){case 1:if(Pf(e,"manifest-parser"),e.l||(e.G=_g(e.N,e.W),e.l=e.G(),e.l.configure(e.g.manifest,function(){return e.B})),t=Date.now()/1e3,Pf(e,"manifest"),e.h){c.u(2);break}return T(c,e.l.start(e.N,e.eb),3);case 3:if(e.h=c.h,e.h.variants.length!=1){c.u(2);break}for(n=[],i=e.h.variants[0],r=g([i.video,i.audio]),o=r.next();!o.done;o=r.next())(s=o.value)&&!s.segmentIndex&&n.push(s.createSegmentIndex());if(!(0<n.length)){c.u(2);break}return T(c,Promise.all(n),2);case 2:return e.va.resolve(),u=new G("manifestparsed",void 0),T(c,Promise.resolve(),7);case 7:if(e.dispatchEvent(u),e.h.variants.length==0)throw new C(2,4,4036);hA(e.h),a=Date.now()/1e3,l=a-t,e.$.I=l,K(c)}})}function Vm(e,t){var n,i,r,o,s,u;return k(function(a){switch(a.g){case 1:if(!e.h||e.i)return a.return();if(Pf(e,"drm-engine"),e.Ka=Date.now()/1e3,e.i=e.ab(),e.F.h=e.i,e.i.configure(e.g.drm,function(){return e.B}),n=Ng(e.F,e.h),!n){a.u(2);break}return i=new G("trackschanged",void 0),T(a,Promise.resolve(),3);case 3:Ir(e),e.dispatchEvent(i);case 2:return r=_u(e.h.variants),o=!0,e.h&&e.h.presentationTimeline&&e.h.type!="HLS"&&(o=e.h.presentationTimeline.V()),T(a,vg(e.i,r,e.h.offlineSessionIds,o),4);case 4:if(Ir(e),!t){a.u(5);break}return T(a,e.i.cc(t),6);case 6:Ir(e);case 5:return T(a,Lg(e.F,e.h),7);case 7:if(s=a.h,!s){a.u(0);break}return u=new G("trackschanged",void 0),T(a,Promise.resolve(),9);case 9:e.dispatchEvent(u),K(a)}})}d.configure=function(e,t){e=Sa(e,t),Ti(this.g,e)},d.getConfiguration=function(){return Bn(this.g)};function pA(e){var t,n,i,r,o,s,u;return k(function(a){return e.A||(e.A=e.g.adaptationSetCriteriaFactory(),e.A.configure({language:e.g.preferredAudioLanguage,role:e.g.preferredVariantRole,channelCount:e.g.preferredAudioChannelCount,zc:e.g.preferredVideoHdrLevel,spatialAudio:e.g.preferSpatialAudio,videoLayout:e.g.preferredVideoLayout,Fc:e.g.preferredAudioLabel,zd:e.g.preferredVideoLabel,codecSwitchingStrategy:e.g.mediaSource.codecSwitchingStrategy,audioCodec:"",Cd:"",De:0,preferredAudioCodecs:e.g.preferredAudioCodecs,preferredAudioChannelCount:e.g.preferredAudioChannelCount})),e.Za&&(t=e.g.abrFactory,e.C=t,e.j=t(),e.j.configure(e.g.abr)),!e.ka||(n=e.h.presentationTimeline.V(),i=_u(e.h.variants),r=e.A.create(i),e.j.configure(e.g.abr),e.j.setVariants(Array.from(r.values())),o=e.j.chooseVariant(),!o)?a.u(0):(s=[],e.K=o,o.video&&s.push(Lf(e,o.video,n)),o.audio&&s.push(Lf(e,o.audio,n)),(u=Yr(e.h.textStreams,e.g.preferredTextLanguage,e.g.preferredTextRole,e.g.preferForcedSubs)[0]||null)&&eg(o.audio,u,e.g)&&(s.push(Lf(e,u,n)),e.U=u),T(a,Promise.all(s),0))})}function Lf(e,t,n){var i,r,o,s,u;return k(function(a){return a.g==1?(i=e.g.streaming.segmentPrefetchLimit||2,r=new ha(i,t,function(l,c,f){return ya(l,c,f||null,e.g.streaming.retryParameters,e.Pa,e.B)},!1),e.M.set(t.id,r),t.segmentIndex?a.u(2):T(a,t.createSegmentIndex(),2)):(o=typeof e.m=="number"?e.m:0,s=t.segmentIndex.Ub(o),u=null,s&&(u=s.current(),u||(u=s.next().value)),u||(u=Hn(t.segmentIndex)),u?n?u.Z?T(a,Mm(r,u.Z),0):a.u(0):T(a,Ss(r,u.startTime),0):a.u(0))})}d.$k=function(){return this.s},d.destroy=function(){var e=this,t,n,i;return k(function(r){switch(r.g){case 1:if(e.o=!0,!e.l||e.wa){r.u(2);break}return T(r,e.l.stop(),2);case 2:if(!e.j||e.ia){r.u(4);break}return T(r,e.j.stop(),4);case 4:if(e.H&&!e.ya&&e.H.release(),!e.i||e.oa){r.u(6);break}return T(r,e.i.destroy(),6);case 6:if(0<e.M.size&&!e.Ba)for(t=g(e.M.values()),n=t.next();!n.done;n=t.next())i=n.value,Gn(i);K(r)}})};function hA(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}W("shaka.media.PreloadManager",yn),yn.prototype.destroy=yn.prototype.destroy,yn.prototype.waitForFinish=yn.prototype.$k,yn.prototype.getPrefetchedTextTrack=yn.prototype.Ij,yn.prototype.getPrefetchedVariantTrack=yn.prototype.Jj;function Mr(e,t){ke.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{cd:null,bd:yo,Oc:function(i,r){return xi(n,"enter",i,r)}},{cd:ks,bd:yo,Oc:function(i,r){return xi(n,"enter",i,r)}},{cd:Ds,bd:yo,Oc:function(i,r){return xi(n,"enter",i,r)}},{cd:yo,bd:ks,Oc:function(i,r){return xi(n,"exit",i,r)}},{cd:yo,bd:Ds,Oc:function(i,r){return xi(n,"exit",i,r)}},{cd:ks,bd:Ds,Oc:function(i,r){r?xi(n,"skip",i,r):(xi(n,"enter",i,r),xi(n,"exit",i,r))}},{cd:Ds,bd:ks,Oc:function(i,r){return xi(n,"skip",i,r)}}],this.h=new Ce,this.h.D(this.i,"regionremove",function(i){n.g.delete(i.region)})}et(Mr,ke),Mr.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,ke.prototype.release.call(this)},Mr.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=g(this.i.h.values()),i=n.next();!i.done;i=n.next()){i=i.value;var r=this.g.get(i),o=e<i.startTime?ks:e>i.endTime?Ds:yo;this.g.set(i,o);for(var s=g(this.m),u=s.next();!u.done;u=s.next())u=u.value,u.cd==r&&u.bd==o&&u.Oc(i,t)}}};function xi(e,t,n,i){t=new G(t,new Map([["region",n],["seeking",i]])),e.dispatchEvent(t)}var ks=1,yo=2,Ds=3;function Cr(e,t,n){var i,r,o,s,u,a,l;return k(function(c){switch(c.g){case 1:var f=new tt(e).mb.split("/").pop().split(".");return i=f.length==1?"":f.pop().toLowerCase(),(r=gA.get(i))?c.return(r):(o=0,s=ct([e],n),ue(c,2),s.method="HEAD",T(c,t.request(o,s).promise,4));case 4:u=c.h,r=u.headers["content-type"],pe(c,3);break;case 2:if(a=ae(c),!a||a.code!=1002&&a.code!=1001){c.u(3);break}return s.method="GET",T(c,t.request(o,s).promise,6);case 6:l=c.h,r=l.headers["content-type"];case 3:return c.return(r?r.toLowerCase().split(";").shift():"")}})}var gA=new Map().set("mp4","video/mp4").set("m4v","video/mp4").set("m4a","audio/mp4").set("webm","video/webm").set("weba","audio/webm").set("mkv","video/webm").set("ts","video/mp2t").set("ogv","video/ogg").set("ogg","audio/ogg").set("mpg","video/mpeg").set("mpeg","video/mpeg").set("mov","video/quicktime").set("m3u8","application/x-mpegurl").set("mpd","application/dash+xml").set("ism","application/vnd.ms-sstr+xml").set("mp3","audio/mpeg").set("aac","audio/aac").set("flac","audio/flac").set("wav","audio/wav").set("sbv","text/x-subviewer").set("srt","text/srt").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml").set("lrc","application/x-subtitle-lrc").set("ssa","text/x-ssa").set("ass","text/x-ssa").set("jpeg","image/jpeg").set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif").set("html","text/html").set("htm","text/html");/*
		 @license
		 Copyright 2013 Ali Al Dallal

		 Licensed under the MIT license.

		 Permission is hereby granted, free of charge, to any person obtaining a copy
		 of this software and associated documentation files (the "Software"), to deal
		 in the Software without restriction, including without limitation the rights
		 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
		 copies of the Software, and to permit persons to whom the Software is
		 furnished to do so, subject to the following conditions:

		 The above copyright notice and this permission notice shall be included in
		 all copies or substantial portions of the Software.

		 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
		 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
		 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
		 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
		 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
		 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
		 SOFTWARE.
		*/for(var Fi={ach:"Lwo",ady:"Адыгэбзэ",af:"Afrikaans","af-NA":"Afrikaans (Namibia)","af-ZA":"Afrikaans (South Africa)",ak:"Tɕɥi",ar:"العربية","ar-AR":"العربية","ar-MA":"العربية","ar-SA":"العربية (السعودية)","ay-BO":"Aymar aru",az:"Azərbaycan dili","az-AZ":"Azərbaycan dili","be-BY":"Беларуская",bg:"Български","bg-BG":"Български",bn:"বাংলা","bn-IN":"বাংলা (ভারত)","bn-BD":"বাংলা(বাংলাদেশ)","bs-BA":"Bosanski",ca:"Català","ca-ES":"Català",cak:"Maya Kaqchikel","ck-US":"ᏣᎳᎩ (tsalagi)",cs:"Čeština","cs-CZ":"Čeština",cy:"Cymraeg","cy-GB":"Cymraeg",da:"Dansk","da-DK":"Dansk",de:"Deutsch","de-AT":"Deutsch (Österreich)","de-DE":"Deutsch (Deutschland)","de-CH":"Deutsch (Schweiz)",dsb:"Dolnoserbšćina",el:"Ελληνικά","el-GR":"Ελληνικά",en:"English","en-GB":"English (UK)","en-AU":"English (Australia)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-IN":"English (India)","en-PI":"English (Pirate)","en-UD":"English (Upside Down)","en-US":"English (US)","en-ZA":"English (South Africa)","en@pirate":"English (Pirate)",eo:"Esperanto","eo-EO":"Esperanto",es:"Español","es-AR":"Español (Argentine)","es-419":"Español (Latinoamérica)","es-CL":"Español (Chile)","es-CO":"Español (Colombia)","es-EC":"Español (Ecuador)","es-ES":"Español (España)","es-LA":"Español (Latinoamérica)","es-NI":"Español (Nicaragua)","es-MX":"Español (México)","es-US":"Español (Estados Unidos)","es-VE":"Español (Venezuela)",et:"eesti keel","et-EE":"Eesti (Estonia)",eu:"Euskara","eu-ES":"Euskara",fa:"فارسی","fa-IR":"فارسی","fb-LT":"Leet Speak",ff:"Fulah",fi:"Suomi","fi-FI":"Suomi","fo-FO":"Føroyskt",fr:"Français","fr-CA":"Français (Canada)","fr-FR":"Français (France)","fr-BE":"Français (Belgique)","fr-CH":"Français (Suisse)","fy-NL":"Frysk",ga:"Gaeilge","ga-IE":"Gaeilge (Gaelic)",gl:"Galego","gl-ES":"Galego","gn-PY":"Avañe'ẽ","gu-IN":"ગુજરાતી","gx-GR":"Ἑλληνική ἀρχαία",he:"עברית‏","he-IL":"עברית‏",hi:"हिन्दी","hi-IN":"हिन्दी",hr:"Hrvatski","hr-HR":"Hrvatski",hsb:"Hornjoserbšćina",ht:"Kreyòl",hu:"Magyar","hu-HU":"Magyar","hy-AM":"Հայերեն",id:"Bahasa Indonesia","id-ID":"Bahasa Indonesia",is:"Íslenska","is-IS":"Íslenska (Iceland)",it:"Italiano","it-IT":"Italiano",ja:"日本語","ja-JP":"日本語","jv-ID":"Basa Jawa","ka-GE":"ქართული","kk-KZ":"Қазақша",km:"ភាសាខ្មែរ","km-KH":"ភាសាខ្មែរ",kab:"Taqbaylit",kn:"ಕನ್ನಡ","kn-IN":"ಕನ್ನಡ (India)",ko:"한국어","ko-KR":"한국어 (韩国)",ku:"Kurdî","ku-TR":"Kurdî",la:"Latin","la-VA":"Latin",lb:"Lëtzebuergesch","li-NL":"Lèmbörgs",lt:"Lietuvių","lt-LT":"Lietuvių",lv:"Latviešu","lv-LV":"Latviešu",mai:"मैथिली, মৈথিলী","mg-MG":"Malagasy",mk:"Македонски","mk-MK":"Македонски (Македонски)",ml:"മലയാളം","ml-IN":"മലയാളം","mn-MN":"Монгол",mr:"मराठी","mr-IN":"मराठी",ms:"Bahasa Melayu","ms-MY":"Bahasa Melayu",mt:"Malti","mt-MT":"Malti",my:"ဗမာစကာ",nb:"Norsk (bokmål)","nb-NO":"Norsk (bokmål)",ne:"नेपाली","ne-NP":"नेपाली",nl:"Nederlands","nl-BE":"Nederlands (België)","nl-NL":"Nederlands (Nederland)","nn-NO":"Norsk (nynorsk)",no:"Norsk",oc:"Occitan","or-IN":"ଓଡ଼ିଆ",pa:"ਪੰਜਾਬੀ","pa-IN":"ਪੰਜਾਬੀ (ਭਾਰਤ ਨੂੰ)",pl:"Polski","pl-PL":"Polski","ps-AF":"پښتو",pt:"Português","pt-BR":"Português (Brasil)","pt-PT":"Português (Portugal)","qu-PE":"Qhichwa","rm-CH":"Rumantsch",ro:"Română","ro-RO":"Română",ru:"Русский","ru-RU":"Русский","sa-IN":"संस्कृतम्","se-NO":"Davvisámegiella","si-LK":"පළාත",sk:"Slovenčina","sk-SK":"Slovenčina (Slovakia)",sl:"Slovenščina","sl-SI":"Slovenščina","so-SO":"Soomaaliga",sq:"Shqip","sq-AL":"Shqip",sr:"Српски","sr-RS":"Српски (Serbia)",su:"Basa Sunda",sv:"Svenska","sv-SE":"Svenska",sw:"Kiswahili","sw-KE":"Kiswahili",ta:"தமிழ்","ta-IN":"தமிழ்",te:"తెలుగు","te-IN":"తెలుగు",tg:"забо́ни тоҷикӣ́","tg-TJ":"тоҷикӣ",th:"ภาษาไทย","th-TH":"ภาษาไทย (ประเทศไทย)",tl:"Filipino","tl-PH":"Filipino",tlh:"tlhIngan-Hol",tr:"Türkçe","tr-TR":"Türkçe","tt-RU":"татарча",uk:"Українська","uk-UA":"Українська",ur:"اردو","ur-PK":"اردو",uz:"O'zbek","uz-UZ":"O'zbek",vi:"Tiếng Việt","vi-VN":"Tiếng Việt","xh-ZA":"isiXhosa",yi:"ייִדיש","yi-DE":"ייִדיש (German)",zh:"中文","zh-HANS":"中文简体","zh-HANT":"中文繁體","zh-CN":"中文（中国）","zh-HK":"中文（香港）","zh-SG":"中文（新加坡）","zh-TW":"中文（台灣）","zu-ZA":"isiZulu"},Hm=g(Object.keys(Fi)),Nf=Hm.next();!Nf.done;Nf=Hm.next()){var Gm=Nf.value;Fi[Gm.toLowerCase()]=Fi[Gm]}function Km(e,t){if(e.lineBreak)return`
`;if(e.nestedCues.length)return e.nestedCues.map(function(s){return Km(s,e)}).join("");if(!e.payload)return e.payload;var n=[],i=e.fontWeight>=Xr,r=e.fontStyle==Wr,o=e.textDecoration.includes(ci);return i&&n.push(["b"]),r&&n.push(["i"]),o&&n.push(["u"]),r=e.color,r==""&&t&&(r=t.color),i="",(r=Xm(r))&&(i+="."+r),r=e.backgroundColor,r==""&&t&&(r=t.backgroundColor),(t=Xm(r))&&(i+=".bg_"+t),i&&n.push(["c",i]),n.reduceRight(function(s,u){var a=g(u);return u=a.next().value,a=a.next().value,"<"+u+(a===void 0?"":a)+">"+s+"</"+u+">"},e.payload)}function Xm(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function jf(e,t){var n=[];e=g(Wm(e));for(var i=e.next();!i.done;i=e.next())if(i=i.value,i.isContainer)n.push.apply(n,H(jf(i.nestedCues,i)));else{var r=i.clone();r.nestedCues=[],r.payload=Km(i,t),n.push(r)}return n}function Wm(e){var t=[];e=g(e);for(var n=e.next(),i={};!n.done;i={cg:void 0},n=e.next())i.cg=n.value,t.some(function(r){return function(o){return Cu(r.cg,o)}}(i))||t.push(i.cg);return t}function mA(e){function t(i){for(var r=5381,o=i.length;o;)r=33*r^i.charCodeAt(--o);return(r>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch{}return e.textAlign=="center"&&n.align!="center"&&(n.align="middle"),e.writingMode=="vertical-lr"?n.vertical="lr":e.writingMode=="vertical-rl"&&(n.vertical="rl"),e.lineInterpretation==1&&(n.snapToLines=!1),e.line!=null&&(n.line=e.line),e.position!=null&&(n.position=e.position),n}function zm(e,t){var n=jf(t),i=[];t=e.cues?Array.from(e.cues):[],n=g(n);for(var r=n.next(),o={};!r.done;o={ld:void 0},r=n.next())o.ld=r.value,!t.some(function(s){return function(u){return u.startTime==s.ld.startTime&&u.endTime==s.ld.endTime&&u.text==s.ld.payload}}(o))&&o.ld.payload&&(r=mA(o.ld))&&i.push(r);for(t=i.slice().sort(function(s,u){return s.startTime!=u.startTime?s.startTime-u.startTime:s.endTime!=u.endTime?s.endTime-u.startTime:"line"in VTTCue.prototype?i.indexOf(u)-i.indexOf(s):i.indexOf(s)-i.indexOf(u)}),t=g(t),n=t.next();!n.done;n=t.next())e.addCue(n.value)}function Uf(e,t){var n=!1;e.mode==="disabled"&&(n=!0,e.mode="hidden");for(var i=0;i<e.cues.length;){var r=e.cues[i];t(r)?e.removeCue(r):i++}n&&(e.mode="disabled")}function ft(e){var t=this;this.i=e,this.l=new Ce,this.j=null,this.h=new Map,this.g=-1,this.s=!1,this.o=null,this.B=function(){t.l.Ja(t.i,"textchanged",t.m),t.l.Ja(t.j.textTracks,"change",t.A);for(var n=g(t.h.values()),i=n.next();!i.done;i=n.next())i.value.remove();t.h.clear(),t.g=-1,t.j=null},this.m=function(){var n=new Map,i=t.i.yc();i=g(i);for(var r=i.next();!r.done;r=i.next()){if(r=r.value,t.h.has(r.id)){var o=t.h.get(r.id);r.active||o.track.mode==="disabled"||(o.track.mode="disabled"),t.h.delete(r.id)}else{o=t.j.ownerDocument.createElement("track"),o.kind=vA(r);var s=o,u=void 0;if(r.label)u=r.label;else if(r.language)if(r.language in Fi)u=Fi[r.language];else{var a=Pu(r.language);a in Fi&&(u=Fi[a]+" ("+r.language+")")}u||(u=r.originalTextId,r.language&&r.language!==r.originalTextId&&(u+=" ("+r.language+")")),s.label=u,r.language in Fi&&(o.srclang=r.language),ye().Ea()==="CHROMIUM"&&(o.src="data:,WEBVTT"),o.track.mode="disabled",t.j.appendChild(o)}n.set(r.id,o),r.active&&(t.g=r.id)}for(i=g(t.h.values()),r=i.next();!r.done;r=i.next())r.value.remove();-1<t.g&&(n.has(t.g)?(i=n.get(t.g).track,i.mode==="disabled"&&(i.mode=t.s?"showing":"hidden")):t.g=-1),t.h=n},this.A=function(){if(!t.o){var n=t.j;t.o=new ve(function(){if(t.o=null,t.j===n){var i=-1,r=!1;if(t.h.has(t.g)){var o=t.h.get(t.g);o.track.mode==="showing"?(i=t.g,r=!0):o.track.mode==="hidden"&&(i=t.g)}if(!r)for(r=g(t.h),o=r.next();!o.done;o=r.next()){var s=g(o.value);if(o=s.next().value,s=s.next().value,s.track.mode==="showing"){i=o;break}else 0>i&&s.track.mode==="hidden"&&(i=o)}for(r=g(t.h),o=r.next();!o.done;o=r.next())s=g(o.value),o=s.next().value,s=s.next().value,o!==i&&s.track.mode!=="disabled"&&(s.track.mode="disabled");t.g!==i&&(t.g=i,-1<i&&t.i.dh({id:i})),t.i.ih(-1<i&&t.h.get(i).track.mode==="showing")}}).ha(0)}},this.l.D(e,"loaded",function(){return t.enableTextDisplayer()})}d=ft.prototype,d.configure=function(){},d.remove=function(e,t){if(this.i)this.h.has(this.g)&&Uf(this.h.get(this.g).track,function(n){return n.startTime<t&&n.endTime>e});else return!1;return!0},d.append=function(e){this.h.has(this.g)&&zm(this.h.get(this.g).track,e)},d.destroy=function(){return this.i&&(this.j&&this.B(),this.i=null),this.l&&(this.l.release(),this.l=null),Promise.resolve()},d.isTextVisible=function(){return this.s},d.setTextVisibility=function(e){if(this.s=e,this.h.has(this.g)){var t=this.h.get(this.g).track;t.mode!=="disabled"&&(e=e?"showing":"hidden",t.mode!==e&&(t.mode=e))}else if(this.i&&this.i.m===3)if(t=Array.from(this.i.h.textTracks).filter(function(i){return["captions","subtitles","forced"].includes(i.kind)}),e){e=null,t=g(t);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n.mode==="showing"){e=null;break}else e||n.mode!=="hidden"||(e=n);e&&(e.mode="showing")}else for(e=g(t),t=e.next();!t.done;t=e.next())t=t.value,t.mode==="showing"&&(t.mode="hidden")},d.setTextLanguage=function(){},d.enableTextDisplayer=function(){!this.j&&this.i&&this.i.m===2&&(this.j=this.i.h,this.l.za(this.i,"unloading",this.B),this.l.D(this.i,"textchanged",this.m),this.l.D(this.j.textTracks,"change",this.A),this.m())};function vA(e){var t=ye();return e.forced&&t.Ea()==="WEBKIT"?"forced":e.kind==="caption"||e.roles&&e.roles.some(function(n){return n.includes("transcribes-spoken-dialog")})&&e.roles.some(function(n){return n.includes("describes-music-and-sound")})?"captions":"subtitles"}W("shaka.text.NativeTextDisplayer",ft),ft.prototype.enableTextDisplayer=ft.prototype.enableTextDisplayer,ft.prototype.setTextLanguage=ft.prototype.setTextLanguage,ft.prototype.setTextVisibility=ft.prototype.setTextVisibility,ft.prototype.isTextVisible=ft.prototype.isTextVisible,ft.prototype.destroy=ft.prototype.destroy,ft.prototype.append=ft.prototype.append,ft.prototype.remove=ft.prototype.remove,ft.prototype.configure=ft.prototype.configure;function Ct(e,t){for(Ae("SimpleTextDisplayer","Please migrate to NativeTextDisplayer"),this.h=e,this.i=t,this.g=null,e=g(Array.from(this.h.textTracks)),t=e.next();!t.done;t=e.next())t=t.value,t.kind!=="metadata"&&t.kind!=="chapters"&&(t.mode="disabled",t.label==this.i&&(this.g=t));this.g&&(this.g.mode="hidden")}d=Ct.prototype,d.configure=function(){},d.remove=function(e,t){return this.g?(Uf(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},d.append=function(e){this.g&&zm(this.g,e)},d.destroy=function(){return this.g&&(Uf(this.g,function(){return!0}),this.g.mode="disabled"),this.g=this.h=null,Promise.resolve()},d.isTextVisible=function(){return this.g?this.g.mode=="showing":!1},d.setTextVisibility=function(e){e&&!this.g&&Ym(this),this.g&&(this.g.mode=e?"showing":"hidden")},d.setTextLanguage=function(){},d.enableTextDisplayer=function(){Ym(this)};function Ym(e){e.h&&!e.g&&(e.g=e.h.addTextTrack("subtitles",e.i),e.g.mode="hidden")}W("shaka.text.SimpleTextDisplayer",Ct),Ct.prototype.enableTextDisplayer=Ct.prototype.enableTextDisplayer,Ct.prototype.setTextLanguage=Ct.prototype.setTextLanguage,Ct.prototype.setTextVisibility=Ct.prototype.setTextVisibility,Ct.prototype.isTextVisible=Ct.prototype.isTextVisible,Ct.prototype.destroy=Ct.prototype.destroy,Ct.prototype.append=Ct.prototype.append,Ct.prototype.remove=Ct.prototype.remove,Ct.prototype.configure=Ct.prototype.configure;function kt(){}d=kt.prototype,d.configure=function(){},d.remove=function(){},d.append=function(){},d.destroy=function(){},d.isTextVisible=function(){return!1},d.setTextVisibility=function(){},d.setTextLanguage=function(){},d.enableTextDisplayer=function(){},W("shaka.text.StubTextDisplayer",kt),kt.prototype.enableTextDisplayer=kt.prototype.enableTextDisplayer,kt.prototype.setTextLanguage=kt.prototype.setTextLanguage,kt.prototype.setTextVisibility=kt.prototype.setTextVisibility,kt.prototype.isTextVisible=kt.prototype.isTextVisible,kt.prototype.destroy=kt.prototype.destroy,kt.prototype.append=kt.prototype.append,kt.prototype.remove=kt.prototype.remove,kt.prototype.configure=kt.prototype.configure;function Dt(e,t){var n=this;this.m=!1,this.h=[],this.j=e,this.o=t,this.B=this.s=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.A=new ve(function(){n.j.paused||Vi(n)}),Rs(this),this.l=new Map,this.i=new Ce,this.i.D(document,"fullscreenchange",function(){Vi(n,!0)}),this.i.D(this.j,"seeking",function(){Vi(n,!0)}),this.i.D(this.j,"ratechange",function(){Rs(n)}),this.i.D(this.j,"resize",function(){var i=n.j,r=i.videoWidth;i=i.videoHeight,r&&i?n.s=r/i:n.s=null}),this.C=null,"ResizeObserver"in B&&(this.C=new ResizeObserver(function(){Vi(n,!0)}),this.C.observe(this.g)),this.F=new Map}d=Dt.prototype,d.configure=function(e){this.B=e,Rs(this),Vi(this,!0)},d.append=function(e){var t=[].concat(H(this.h));e=g(Wm(e));for(var n=e.next(),i={};!n.done;i={dg:void 0},n=e.next())i.dg=n.value,t.some(function(r){return function(o){return Cu(o,r.dg)}}(i))||this.h.push(i.dg);this.h.length&&Rs(this),Vi(this)},d.destroy=function(){return this.g&&(this.g.parentElement&&this.o.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.A&&(this.A.stop(),this.A=null),this.l.clear(),this.i&&(this.i.release(),this.i=null),this.C&&(this.C.disconnect(),this.C=null)),Promise.resolve()},d.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(i){return i.startTime<e||i.endTime>=t}),Vi(this,n>this.h.length),this.h.length||Rs(this),!0},d.isTextVisible=function(){return this.m},d.setTextVisibility=function(e){(this.m=e)?(this.g.parentElement||this.o.appendChild(this.g),Vi(this,!0)):this.g.parentElement&&this.o.removeChild(this.g)},d.setTextLanguage=function(e){e&&e!="und"?this.g.setAttribute("lang",e):this.g.setAttribute("lang","")},d.enableTextDisplayer=function(){};function Rs(e){e.A&&(e.h.length?e.A.Ga((e.B?e.B.captionsUpdatePeriod:.25)/Math.max(1,Math.abs(e.j.playbackRate))):e.A.stop())}function yA(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function qm(e,t,n,i,r){var o=!1,s=[],u=[];t=g(t);for(var a=t.next();!a.done;a=t.next()){a=a.value,r.push(a);var l=e.l.get(a),c=a.startTime<=i&&a.endTime>i,f=l?l.Yi:null;l&&(s.push(l.eg),l.Vc&&s.push(l.Vc),c||(o=!0,e.l.delete(a),l=null)),c&&(u.push(a),l?yA(e,f)||(o=!0):(TA(e,a,r),l=e.l.get(a),f=l.Yi,o=!0)),0<a.nestedCues.length&&f&&qm(e,a.nestedCues,f,i,r),r.pop()}if(o){for(i=g(s),r=i.next();!r.done;r=i.next())r=r.value,r.parentElement&&r.parentElement.removeChild(r);for(u.sort(function(p,h){return p.startTime!=h.startTime?p.startTime-h.startTime:p.endTime-h.endTime}),u=g(u),i=u.next();!i.done;i=u.next())i=e.l.get(i.value),i.Vc?(i.Vc.contains(n)&&i.Vc.removeChild(n),n.appendChild(i.Vc),i.Vc.appendChild(i.eg)):n.appendChild(i.eg)}}function Vi(e,t){if(e.g){var n=e.j.currentTime;if(!e.m||t!==void 0&&t){t=g(e.F.values());for(var i=t.next();!i.done;i=t.next())ms(i.value);ms(e.g),e.l.clear(),e.F.clear()}e.m&&qm(e,e.h,e.g,n,[])}}function TA(e,t,n){var i=1<n.length,r=i?"span":"div";t.lineBreak&&(r="br"),t.rubyTag&&(r=t.rubyTag),i=!i&&0<t.nestedCues.length;var o=document.createElement(r);if(r!="br"&&SA(e,o,t,n,i),n=null,t.region&&t.region.id){var s=t.region,u=e.s===4/3?2.5:1.9;if(n=s.id+"_"+s.width+"x"+s.height+(s.heightUnits==qt?"%":"px")+"-"+s.viewportAnchorX+"x"+s.viewportAnchorY+(s.viewportAnchorUnits==qt?"%":"px"),e.F.has(n))n=e.F.get(n);else{r=document.createElement("span");var a=s.heightUnits==qt?"%":"px",l=s.widthUnits==qt?"%":"px",c=s.viewportAnchorUnits==qt?"%":"px";r.id="shaka-text-region---"+n,r.classList.add("shaka-text-region"),r.style.position="absolute";var f=s.height,p=s.width;s.heightUnits===2&&(f=5.33*s.height,a="%"),s.widthUnits===2&&(p=s.width*u,l="%"),r.style.height=f+a,r.style.width=p+l,s.viewportAnchorUnits===2?(u=s.viewportAnchorY/75*100,a=s.viewportAnchorX/(e.s===4/3?160:210)*100,u-=s.regionAnchorY*f/100,a-=s.regionAnchorX*p/100,r.style.top=u+"%",r.style.left=a+"%"):(r.style.top=s.viewportAnchorY-s.regionAnchorY*f/100+c,r.style.left=s.viewportAnchorX-s.regionAnchorX*p/100+c),s.heightUnits!==0&&s.widthUnits!==0&&s.viewportAnchorUnits!==0&&(s=Math.max(0,Math.min(100-(parseInt(r.style.width.slice(0,-1),10)||0),parseInt(r.style.left.slice(0,-1),10)||0)),r.style.top=Math.max(0,Math.min(100-(parseInt(r.style.height.slice(0,-1),10)||0),parseInt(r.style.top.slice(0,-1),10)||0))+"%",r.style.left=s+"%"),r.style.display="flex",r.style.flexDirection="column",r.style.alignItems="center",r.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.F.set(n,r),n=r}}r=o,i&&(r=document.createElement("span"),r.classList.add("shaka-text-wrapper"),r.style.backgroundColor=t.backgroundColor,r.style.lineHeight="normal",o.appendChild(r)),e.l.set(t,{eg:o,Yi:r,Vc:n})}function xA(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==Du?n:e==="left"||e==="start"&&t===Qo||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===Qo?"line-right":"center"}function SA(e,t,n,i,r){var o=t.style,s=n.nestedCues.length==0,u=1<i.length;o.whiteSpace="pre-wrap";var a=n.payload.replace(/\s+$/g,function(c){return" ".repeat(c.length)});if(o.webkitTextStrokeColor=n.textStrokeColor,o.webkitTextStrokeWidth=n.textStrokeWidth,o.color=n.color,o.direction=n.direction,o.opacity=n.opacity,o.paddingLeft=Of(n.linePadding,n,e.o),o.paddingRight=Of(n.linePadding,n,e.o),o.textCombineUpright=n.textCombineUpright,o.textShadow=n.textShadow,n.backgroundImage)o.backgroundImage="url('"+n.backgroundImage+"')",o.backgroundRepeat="no-repeat",o.backgroundSize="contain",o.backgroundPosition="center",n.backgroundColor&&(o.backgroundColor=n.backgroundColor),o.width="100%",o.height="100%";else{if(n.nestedCues.length)var l=t;else l=document.createElement("span"),t.appendChild(l);n.border&&(l.style.border=n.border),r||((t=wA(i,function(c){return c.backgroundColor}))?l.style.backgroundColor=t:a&&(l.style.backgroundColor="rgba(0, 0, 0, 0.8)")),a&&(l.setAttribute("translate","no"),l.textContent=a)}u&&!i[i.length-1].isContainer?o.display="inline":(o.display="flex",o.flexDirection="column",o.alignItems="center",n.textAlign=="left"||n.textAlign=="start"?(o.width="100%",o.alignItems="start"):(n.textAlign=="right"||n.textAlign=="end")&&(o.width="100%",o.alignItems="end"),o.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),s||(o.margin="0"),o.fontFamily=n.fontFamily,o.fontWeight=n.fontWeight.toString(),o.fontStyle=n.fontStyle,o.letterSpacing=n.letterSpacing,o.fontSize=Of(n.fontSize,n,e.o,e.B?e.B.fontScaleFactor:1),i=n.line,i!=null&&(s=n.lineInterpretation,s==Jo&&(s=1,u=16,e.s&&1>e.s&&(u=32),i=0>i?100+i/u*100:i/u*100),s==1&&(o.position="absolute",n.writingMode==cr?(o.width="100%",n.lineAlign==fr?o.top=i+"%":n.lineAlign=="end"&&(o.bottom=100-i+"%")):n.writingMode=="vertical-lr"?(o.height="100%",n.lineAlign==fr?o.left=i+"%":n.lineAlign=="end"&&(o.right=100-i+"%")):(o.height="100%",n.lineAlign==fr?o.right=i+"%":n.lineAlign=="end"&&(o.left=100-i+"%")))),o.lineHeight=n.lineHeight,e=xA(n),e=="line-left"?(o.cssFloat="left",n.position!==null&&(o.position="absolute",n.writingMode==cr?(o.left=n.position+"%",o.width="auto"):o.top=n.position+"%")):e=="line-right"?(o.cssFloat="right",n.position!==null&&(o.position="absolute",n.writingMode==cr?(o.right=100-n.position+"%",o.width="auto"):o.bottom=n.position+"%")):n.position!==null&&n.position!=50&&(o.position="absolute",n.writingMode==cr?(o.left=n.position+"%",o.width="auto"):o.top=n.position+"%"),o.textAlign=n.textAlign,o.textDecoration=n.textDecoration.join(" "),o.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&o.writingMode==n.writingMode||(o.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==cr?o.width=n.size+"%":o.height=n.size+"%")}function Of(e,t,n,i){i=i===void 0?1:i;var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;switch(e=r.unit,i*=r.value,e){case"%":return i/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*i/t.cellResolution.rows+"px";default:return i+e}}function wA(e,t){for(var n=e.length-1;0<=n;n--){var i=t(e[n]);if(i||i===0)return i}return null}W("shaka.text.UITextDisplayer",Dt),Dt.prototype.enableTextDisplayer=Dt.prototype.enableTextDisplayer,Dt.prototype.setTextLanguage=Dt.prototype.setTextLanguage,Dt.prototype.setTextVisibility=Dt.prototype.setTextVisibility,Dt.prototype.isTextVisible=Dt.prototype.isTextVisible,Dt.prototype.remove=Dt.prototype.remove,Dt.prototype.destroy=Dt.prototype.destroy,Dt.prototype.append=Dt.prototype.append,Dt.prototype.configure=Dt.prototype.configure;function AA(e,t){function n(o){for(var s=o,u=g(t),a=u.next();!a.done;a=u.next())a=a.value,a.end&&a.start<o&&(s+=a.end-a.start);return o=Math.floor(s/3600),u=Math.floor(s/60%60),a=Math.floor(s%60),s=Math.floor(1e3*s%1e3),(10>o?"0":"")+o+":"+(10>u?"0":"")+u+":"+(10>a?"0":"")+a+"."+(100>s?10>s?"00":"0":"")+s}var i=jf(e);e=`WEBVTT

`,i=g(i);for(var r=i.next();!r.done;r=i.next())r=r.value,e+=n(r.startTime)+" --> "+n(r.endTime)+function(o){var s=[];switch(o.textAlign){case"left":s.push("align:left");break;case"right":s.push("align:right");break;case Qn:s.push("align:middle");break;case"start":s.push("align:start");break;case"end":s.push("align:end")}switch(o.writingMode){case"vertical-lr":s.push("vertical:lr");break;case"vertical-rl":s.push("vertical:rl")}return s.length?" "+s.join(" "):""}(r)+`
`,e+=r.payload+`

`;return e}W("shaka.text.WebVttGenerator",function(){});function _f(e,t){this.h=e,this.g=t,this.i=void 0,this.s=!1,this.F=!0,this.l=this.B=!1,this.o=this.m=void 0,this.A=0,this.G=!1,this.C=new Ce,this.j=null}_f.prototype.setMediaElement=function(e){this.j=e,kA(this)},_f.prototype.configure=function(e){this.g=e};function EA(e){e.s=!1,e.F=!0,e.B=!1,e.l=!1,e.m=0,e.o=0,e.A=0,e.G=!1,e.j=null,e.C.Ra()}function IA(e,t){e.l=t,e.l?e.i==Na?e.i=ja:e.i==Ua&&(e.i=Oa):e.i==ja?e.i=Na:e.i==Oa&&(e.i=Ua)}function MA(e,t){if(e.g&&e.g.enabled&&e.g.version==Jm&&e.j&&e.j.autoplay){var n=e.j.play();n&&n.then(function(){e.A=t}).catch(function(){e.A=0})}}function CA(e,t,n){try{if(!e.g.enabled)return t;var i=bf(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var r=Da;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":r=Pa;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":r=Qm;break e}r=void 0}i.ot=r,i.su=!0;var o=ka(i);return Bf(t,o)}catch(s){return Zi("CMCD_SRC_ERROR","Could not generate src CMCD data.",s),t}}function kA(e){e.C.za(e.j,"play",function(){e.m||(e.m=Date.now())}),e.C.za(e.j,"playing",function(){e.o||(e.o=Date.now())})}function bf(e){return e.g.sessionId||(e.g.sessionId=B.crypto.randomUUID()),{v:e.g.version,sf:e.i,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function To(e,t,n){n=n===void 0?{}:n;var i=i===void 0?e.g.useHeaders:i;if(e.g.enabled)if(e=NA(e,n),i)i=jA(e),Object.keys(i).length&&Object.assign(t.headers,i);else{var r=ka(e);r&&(t.uris=t.uris.map(function(o){return Bf(o,r)}))}}function DA(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(i,r){return n.includes(r)&&(i[r]=t[r]),i},{}):t}function RA(e){if(e.type===0)return UA;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?Pa:Ra;if(t=="audio")return Da;if(t=="text")return e.mimeType==="application/mp4"?La:Ff}}function PA(e,t){if(t=e.h.Kb()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(i){return i.start<=n&&i.end>=n}))?1e3*(e.end-n):NaN}function $m(e,t){if(t=e.h.Kb()[t],!t.length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(i){return i.start<=n&&i.end>=n}))?1e3*(e.end-n):0}function LA(e,t){var n=e.h.Nb();if(!n.length)return NaN;e=n[0],n=g(n);for(var i=n.next();!i.done;i=n.next())i=i.value,i.type==="variant"&&i.bandwidth>e.bandwidth&&(e=i);switch(t){case Ra:return e.videoBandwidth||NaN;case Da:return e.audioBandwidth||NaN;default:return e.bandwidth}}function NA(e,t){t=t===void 0?{}:t,Object.assign(t,bf(e)),t.pr=e.h.sb();var n=t.ot===Ra||t.ot===Pa;return e.B&&n&&(t.bs=!0,t.su=!0,e.B=!1),t.su==null&&(t.su=e.F),t.v===Jm&&(e.h.V()&&(t.ltc=e.h.Se()),n=!e.G&&e.o&&e.m?e.o-(e.A||e.m):void 0,n!=null&&(t.msd=n,e.G=!0)),DA(e,t)}function ka(e){function t(f){return 100*n(f/100)}function n(f){return Math.round(f)}function i(f){return!Number.isNaN(f)&&f!=null&&f!==""&&f!==!1}var r=[],o={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(f){return encodeURIComponent(f)},rtp:t,tb:n},s=Object.keys(e||{}).sort();s=g(s);for(var u=s.next();!u.done;u=s.next()){u=u.value;var a=e[u];if(i(a)&&(u!=="v"||a!==1)&&(u!="pr"||a!==1)){var l=o[u];l&&(a=l(a)),l=typeof a;var c=void 0;c=l==="string"&&u!=="ot"&&u!=="sf"&&u!=="st"?u+"="+JSON.stringify(a):l==="boolean"?u:l==="symbol"?u+"="+a.description:u+"="+a,r.push(c)}}return r.join(",")}function jA(e){var t=Object.keys(e),n={},i=["Object","Request","Session","Status"],r=[{},{},{},{}],o={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,ltc:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,msd:2,bs:3,rtp:3};t=g(t);for(var s=t.next();!s.done;s=t.next())s=s.value,r[o[s]!=null?o[s]:1][s]=e[s];for(e=0;e<r.length;e++)(o=ka(r[e]))&&(n["CMCD-"+i[e]]=o);return n}function Bf(e,t){return!t||e.includes("offline:")?e:(e=new tt(e),e.g.set("CMCD",t),e.toString())}var Qm="m",Da="a",Ra="v",Pa="av",UA="i",Ff="c",La="tt",Jm=2,Na="d",ja="ld",Ua="h",Oa="lh";W("shaka.util.CmcdManager.StreamingFormat",{DASH:Na,Jl:ja,HLS:Ua,Kl:Oa,Yl:"s",OTHER:"o"});function Tn(e){this.h=e,this.g=null}d=Tn.prototype,d.configure=function(e){this.h=e},d.Uh=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(tv)?1e3*this.g.get(tv):null},d.Sh=function(){return this.h.enabled&&this.g&&this.g.has(ev)?1e3*this.g.get(ev):null},d.Lj=function(){return this.h.enabled&&this.g&&this.g.has(nv)?this.g.get(nv):null},d.Mj=function(){return this.h.enabled&&this.g&&this.g.has(iv)?this.g.get(iv):null},d.getBandwidthEstimate=function(e){var t=this.Sh();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e};function Zm(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}W("shaka.util.CmsdManager",Tn),Tn.prototype.getBandwidthEstimate=Tn.prototype.getBandwidthEstimate,Tn.prototype.getRoundTripTime=Tn.prototype.Mj,Tn.prototype.getResponseDelay=Tn.prototype.Lj,Tn.prototype.getEstimatedThroughput=Tn.prototype.Sh,Tn.prototype.getMaxBitrate=Tn.prototype.Uh;var ev="etp",tv="mb",nv="rd",iv="rtt";function rv(){this.g=null,this.h=[]}function Vf(e,t){return k(function(n){if(n.g==1)return e.g?T(n,new Promise(function(i){return e.h.push(i)}),2):n.u(2);e.g=t,K(n)})}rv.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null};function b(e,t,n){t=t===void 0?null:t,ke.call(this);var i=this;this.m=Ha,this.h=null,this.se=t,this.oa=!1,this.ye=new Ce,this.le=new Ce,this.j=new Ce,this.Yb=new Ce,this.sd=new Ce,this.F=this.I=this.C=this.H=null,this.Be=0,this.$=new rv,this.N=this.kc=this.W=this.i=this.mc=this.G=this.l=this.ie=this.S=this.Ch=this.ka=this.L=this.Za=this.wa=this.je=this.P=this.Ba=this.K=this.eb=null,this.Ka=!1,this.Ua=this.s=null,this.re=1e9,this.xe=[],this.ab=[],this.Qf=-1,this.g=Kn(this),this.Sf=_m(),this.U=null,this.Ce=-1,this.Xb=null,this.va={width:1/0,height:1/0},this.qe=new Kc(this.g,this.va,null),this.ve=[],this.A=null,this.M=this.g.adaptationSetCriteriaFactory(),this.M.configure({language:this.g.preferredAudioLanguage,role:this.g.preferredVariantRole,channelCount:0,zc:this.g.preferredVideoHdrLevel,spatialAudio:this.g.preferSpatialAudio,videoLayout:this.g.preferredVideoLayout,Fc:this.g.preferredAudioLabel,zd:this.g.preferredVideoLabel,codecSwitchingStrategy:this.g.mediaSource.codecSwitchingStrategy,audioCodec:"",Cd:"",De:0,preferredAudioCodecs:this.g.preferredAudioCodecs,preferredAudioChannelCount:this.g.preferredAudioChannelCount}),this.td=this.g.preferredTextLanguage,this.pe=this.g.preferredTextRole,this.oe=this.g.preferForcedSubs,this.me=[],n&&n(this),this.L=$A(this),this.ka=new Tn(this.g.cmsd),this.H=dv(this),this.vd=this.ia=this.ya=this.B=null,this.Uf=!1,this.Rf=[],this.Tf=new ve(function(){return k(function(r){if(r.g==1)return i.ia?T(r,i.cc(i.vd,!0),3):r.u(0);if(r.g!=4)return T(r,i.load(i.ia),4);i.Uf?i.vd.pause():i.vd.play(),i.ia=null,i.Uf=!1,K(r)})}),Ga&&(this.B=Ga(),this.B.configure(this.g.ads),this.sd.D(this.B,"ad-content-pause-requested",function(r){var o;return k(function(s){if(s.g==1)return i.Tf.stop(),i.ia?s.u(0):(i.vd=i.h,i.Uf=i.Td(),o=r.saveLivePosition||!1,T(s,i.Mh(!0,o),3));i.ia=s.h,K(s)})}),this.sd.D(this.B,"ad-content-resume-requested",function(r){if(r=r.offset||0,i.ia){var o=i.ia;o.m&&r&&(typeof o.m=="number"?o.m+=r:o.m.setTime(o.m.getTime()+1e3*r))}i.Tf.ha(.1)}),this.sd.D(this.B,"ad-content-attach-requested",function(){return k(function(r){return i.h||!i.vd?r.u(0):T(r,i.cc(i.vd,!0),0)})})),Ka&&(this.ya=Ka(this),this.ya.configure(this.g.queue)),this.ye.D(B,"online",function(){qf(i),i.Yg()}),this.ue=new ve(function(){for(var r=Date.now()/1e3,o=!1,s=!0,u=g(i.i.variants),a=u.next();!a.done;a=u.next())a=a.value,0<a.disabledUntilTime&&a.disabledUntilTime<=r&&(a.disabledUntilTime=0,o=!0),0<a.disabledUntilTime&&(s=!1);s&&i.ue.stop(),o&&kr(i,!1,void 0,!1,!1)}),this.Pa=null,e&&(Ae("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.cc(e,!0)),this.o=null}et(b,ke);function _a(e){e.S!=null&&(vh(e.S),e.S.release(),e.S=null)}function OA(e,t,n){n||t.lcevc.enabled?(_a(e),e.S==null&&(e.S=new Ko(e.h,e.Ch,t.lcevc,n),e.I&&(e.I.M=e.S))):_a(e)}function _e(e,t){return new G(e,t)}d=b.prototype,d.destroy=function(){var e=this,t;return k(function(n){switch(n.g){case 1:return e.m==Ln?n.return():(_a(e),t=e.detach(),e.m=Ln,T(n,t,2));case 2:return T(n,e.hg(),3);case 3:if(e.ye&&(e.ye.release(),e.ye=null),e.le&&(e.le.release(),e.le=null),e.j&&(e.j.release(),e.j=null),e.Yb&&(e.Yb.release(),e.Yb=null),e.sd&&(e.sd.release(),e.sd=null),e.Ua=null,e.g=null,e.A=null,e.se=null,e.L=null,e.ka=null,!e.H){n.u(4);break}return T(n,e.H.destroy(),5);case 5:e.H=null;case 4:e.s&&(e.s.release(),e.s=null),e.ya&&(e.ya.destroy(),e.ya=null),ke.prototype.release.call(e),K(n)}})};function ov(e,t){Nv.set(e,t)}function xo(e,t){e.dispatchEvent(_e("onstatechange",new Map().set("state",t)))}d.cc=function(e,t){t=t===void 0?!0:t;var n=this,i,r,o;return k(function(s){switch(s.g){case 1:if(n.m==Ln)throw new C(2,7,7e3);if(i=n.h&&n.h==e,!n.h||n.h==e){s.u(2);break}return T(s,n.detach(),2);case 2:return T(s,Hf(n,"attach"),4);case 4:if(s.h)return s.return();if(ue(s,5,6),i||(xo(n,"attach"),r=function(){var u=$f(n,!1);u&&So(n,u)},n.le.D(e,"error",r),n.h=e,n.L&&n.L.setMediaElement(e)),ye(),!t||!Zn()||n.I){s.u(6);break}return T(s,Gf(n),6);case 6:sn(s),n.$.release(),un(s,0);break;case 5:return o=ae(s),T(s,n.detach(),10);case 10:throw o}})},d.cj=function(e){this.Ch=e},d.detach=function(e){e=e===void 0?!1:e;var t=this;return k(function(n){if(n.g==1){if(t.m==Ln)throw new C(2,7,7e3);return T(n,t.rc(!1,e),2)}if(n.g!=3)return T(n,Hf(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.le.Ra(),t.h=null),xo(t,"detach"),t.B&&!e&&t.B.release()}finally{t.$.release()}K(n)})};function Hf(e,t){var n;return k(function(i){return i.g==1?(n=++e.Be,T(i,Vf(e.$,t),2)):n!=e.Be?(e.$.release(),i.return(!0)):i.return(!1)})}d.rc=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,i,r,o,s,u,a,l,c,f,p,h,m,y;return k(function(v){switch(v.g){case 1:return n.m!=Ln&&(n.m=Ha),T(v,Hf(n,"unload"),2);case 2:return v.h?v.return():(ii(v,3),n.Ka=!1,xo(n,"unload"),_a(n),i=n.me.map(function(x){return x()}),n.me=[],T(v,Promise.all(i),5));case 5:if(n.dispatchEvent(_e("unloading")),n.je&&(n.je.release(),n.je=null),n.wa&&(n.wa.release(),n.wa=null),n.Za&&(n.Za.release(),n.Za=null),n.h&&(n.j.Ra(),n.Yb.Ra()),n.ue.stop(),n.eb&&(n.eb.release(),n.eb=null),n.Ba&&(n.Ba.stop(),n.Ba=null),!n.G){v.u(6);break}return T(v,n.G.stop(),7);case 7:n.G=null,n.mc=null;case 6:if(!n.s){v.u(8);break}return T(v,n.s.stop(),8);case 8:if(!n.l){v.u(10);break}return T(v,n.l.destroy(),11);case 11:n.l=null;case 10:if(n.K&&(n.K.release(),n.K=null),n.F&&(n.F.release(),n.F=null),B.shakaMediaKeysPolyfill!=="webkit"||!n.C){v.u(12);break}return T(v,n.C.destroy(),13);case 13:n.C=null;case 12:if(!n.I){v.u(14);break}return T(v,n.I.destroy(),15);case 15:n.I=null;case 14:if(n.B&&!t&&n.B.onAssetUnload(),n.ia&&!t&&(n.ia.destroy(),n.ia=null),t||n.Tf.stop(),n.L&&EA(n.L),n.ka&&(n.ka.g=null),!n.o){v.u(16);break}return T(v,n.o.destroy(),17);case 17:n.o=null;case 16:if(n.h){for(r=g(n.Rf),o=r.next();!o.done;o=r.next())s=o.value,s.src.startsWith("blob:")&&URL.revokeObjectURL(s.src),s.remove();n.Rf=[],oa(n.h)&&n.h.load()}if(!n.C){v.u(18);break}return T(v,n.C.destroy(),19);case 19:n.C=null;case 18:if(n.Pa&&n.W!=n.Pa.jd()&&(n.Pa.o||n.Pa.destroy(),n.Pa=null),n.W=null,n.kc=null,n.P=null,n.i){for(u=g(n.i.variants),a=u.next();!a.done;a=u.next())for(l=a.value,c=g([l.audio,l.video]),f=c.next();!f.done;f=c.next())(p=f.value)&&p.segmentIndex&&p.segmentIndex.release();for(h=g(n.i.textStreams),m=h.next();!m.done;m=h.next())y=m.value,y.segmentIndex&&y.segmentIndex.release()}n.g&&n.g.streaming.clearDecodingCache&&(bu.clear(),qr.clear()),n.i=null,n.A=new Ca,n.ze=null,n.Xb=null,n.U=null,n.Ce=-1,n.xe=[],n.ab=[],n.Qf=-1,n.H&&n.H.Ih(),Fa(n);case 3:sn(v),n.$.release(),un(v,4);break;case 4:if(ye(),e&&Zn()&&!n.I&&n.h)return T(v,Gf(n),0);v.u(0)}})},d.Zk=function(e){this.N=e},d.load=function(e,t,n){t=t===void 0?null:t;var i=this,r,o,s,u,a,l,c,f,p,h,m,y,v,x;return k(function(S){switch(S.g){case 1:if(i.m==Ln)throw new C(2,7,7e3);if(r=null,o="",e instanceof yn){if(e.o)throw new C(2,7,7006);r=e,o=r.jd()||""}else o=e||"";return T(S,Vf(i.$,"load"),2);case 2:if(i.$.release(),!i.h)throw new C(2,7,7002);if(!i.W){S.u(3);break}return i.W=o,T(S,i.rc(!1),3);case 3:if(s=++i.Be,u=function(){return k(function(w){if(w.g==1)return i.Be==s?w.u(0):r?T(w,r.destroy(),3):w.u(3);throw new C(2,7,7e3)})},a=function(w,A){return k(function(D){switch(D.g){case 1:return ii(D,2),T(D,Vf(i.$,A),4);case 4:return T(D,u(),5);case 5:return T(D,w(),6);case 6:return T(D,u(),7);case 7:r&&i.g&&(r.g=i.g);case 2:sn(D),i.$.release(),un(D,0)}})},ue(S,5,6),t==null&&r&&(t=r.getStartTime()),i.N=t,i.Ka=!1,i.dispatchEvent(_e("loading")),r){n=r.W,S.u(8);break}if(n){S.u(8);break}return T(S,a(function(){return k(function(w){if(w.g==1)return T(w,lv(i,o),2);n=w.h,K(w)})},"guessMimeType_"),8);case 8:if(l=!!r,r){Fm(r,i),i.A=r.getStats(),S.u(11);break}return T(S,uv(i,o,t,n,!0,i.g),12);case 12:(r=S.h)?(r.B=!1,Fm(r,i),i.A=r.getStats(),r.start(),r.s.catch(function(){})):i.A=new Ca;case 11:return c=!r,f=Date.now()/1e3,i.A=r?r.getStats():new Ca,i.W=o,i.kc=n||null,Fa(i),p=function(){var w=i.Kb(),A={start:0,end:0};if(w.total.length){A.start=1/0,w=g(w.total);for(var D=w.next();!D.done;D=w.next())D=D.value,D.start<A.start&&(A.start=D.start),D.end>A.end&&(A.end=D.end)}return A},i.wa=new xs(p),i.wa.addEventListener("regionadd",function(w){Kf(i,w.region,"metadataadded")}),c?T(S,a(function(){return k(function(w){return T(w,FA(i,n),0)})},"initializeSrcEqualsDrmInner_"),23):(i.Za=new xs(p),T(S,a(function(){return k(function(w){if(w.g==1)return T(w,Promise.race([r.va,r.s]),2);i.mc=r.G;var A=r;A.wa=!0,i.G=A.l,i.i=r.zg(),K(w)})},"waitForFinish"),15));case 15:if(i.I){S.u(16);break}return T(S,a(function(){return k(function(w){return T(w,Gf(i),0)})},"initializeMediaSourceEngineInner_"),16);case 16:return i.i&&i.i.textStreams.length&&(i.o.enableTextDisplayer?i.o.enableTextDisplayer():Ae("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method!')),T(S,a(function(){return k(function(w){return T(w,r.s,0)})},"waitForFinish"),18);case 18:if(i.g=r.getConfiguration(),i.qe=r.F,i.G&&i.G.setMediaElement&&i.h&&i.G.setMediaElement(i.h),i.je=lA(r),i.ie=r.Ua,(h=r.A)&&(i.M=h),l&&i.h&&i.h.nodeName==="AUDIO"&&(_A(i),i.configure("manifest.disableVideo",!0)),r.i){S.u(19);break}return T(S,a(function(){return k(function(w){return T(w,Vm(r,i.h),0)})},"drmEngine_.init"),19);case 19:return i.C=cA(r),T(S,a(function(){return k(function(w){return T(w,i.C.cc(i.h),0)})},"drmEngine_.attach"),21);case 21:return!(m=r.C)||i.Ua&&i.Ua==m||(i.s=aA(r),i.Ua=r.C,typeof i.s.setMediaElement!="function"&&(Ae("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),i.s.setMediaElement=function(){}),typeof i.s.setCmsdManager!="function"&&(Ae("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),i.s.setCmsdManager=function(){}),typeof i.s.trySuggestStreams!="function"&&(Ae("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),i.s.trySuggestStreams=function(){})),y=fA(r),v=r.K,T(S,a(function(){return k(function(w){return T(w,BA(i,f,v,y),0)})},"loadInner_"),22);case 22:uA(r),i.kc&&ye().Ti()&&Lc(i.kc)&&ZS(i.I,i.W,i.kc),S.u(14);break;case 23:return T(S,a(function(){return k(function(w){return T(w,VA(i,f,n),0)})},"srcEqualsInner_"),14);case 14:i.dispatchEvent(_e("loaded"));case 6:if(sn(S),!r){S.u(25);break}return T(S,r.destroy(),25);case 25:i.Pa=null,un(S,0);break;case 5:if(x=ae(S),!x||x.code==7e3){S.u(27);break}return T(S,i.rc(!1),27);case 27:throw x}})};function _A(e){for(var t=g(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(i){return i.audio})}d.Vk=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,i;return k(function(r){return r.g==1?T(r,sv(n),2):r.g!=3?(i=r.h,T(r,n.rc(e,t),3)):r.return(i)})},d.Mh=function(e,t){e=e===void 0?!1:e,t=t===void 0?!1:t;var n=this,i;return k(function(r){return r.g==1?T(r,sv(n,t),2):r.g!=3?(i=r.h,T(r,n.detach(e),3)):r.return(i)})};function sv(e,t){t=t===void 0?!1:t;var n,i;return k(function(r){if(r.g==1)return n=null,e.i&&e.G&&e.mc&&e.W&&e.g?(i=e.h.currentTime,e.V()&&!t&&(i=null),T(r,av(e,e.W,i,e.kc,e.g,!0,!1,!1),3)):r.u(2);if(r.g!=2){n=r.h,e.ve.push(n),e.G&&e.G.setMediaElement&&e.G.setMediaElement(null);var o=n,s=e.G,u=e.mc;o.h=e.i,o.l=s,o.G=u,o=n,s=e.Ua,o.j=e.s,o.C=s,n.A=e.M,n.start(),e.i=null,e.G=null,e.mc=null,e.s=null,e.Ua=null}return r.return(n)})}d.preload=function(e,t,n,i){t=t===void 0?null:t;var r=this,o,s;return k(function(u){return u.g==1?(o=Kn(r),Ti(o,i||r.g,Kn(r)),T(u,uv(r,e,t,n,!1,o),2)):((s=u.h)?s.start():So(r,new C(2,7,7005)),u.return(s))})},d.hg=function(){var e=this,t,n,i,r;return k(function(o){for(t=[],n=g(e.ve),i=n.next();!i.done;i=n.next())r=i.value,r.o||t.push(r.destroy());return e.ve=[],T(o,Promise.all(t),0)})};function uv(e,t,n,i,r,o){r=r===void 0?!1:r;var s,u,a,l;return k(function(c){return c.g==1?i?c.u(2):T(c,lv(e,t),3):(c.g!=2&&(i=c.h),bA(e,i)?c.return(null):(s=o||e.g,u=!1,a=!0,r&&(e.s&&e.Ua==s.abrFactory&&(a=!1),e.h&&e.h.nodeName==="AUDIO"&&(u=!0)),l=av(e,t,n,i||null,s,!r,u,a),l=r?l.then(function(f){return f.B=!1,f}):l.then(function(f){return e.ve.push(f),f}),c.return(l)))})}function av(e,t,n,i,r,o,s,u){o=o===void 0?!0:o,s=s===void 0?!1:s,u=u===void 0?!0:u;var a,l,c,f,p,h,m,y,v,x,S,w,A,D,I;return k(function(E){return E.g==1?(a=null,l=Bn(r),s&&(l.manifest.disableVideo=!0),c=function(){return a.S&&a.o?null:a},f=function(){return c()?c().getConfiguration():e.g},e.va.width!=1/0||e.va.height!=1/0||e.g.ignoreHardwareResolution?E.u(2):(p=ye(),T(E,p.ec(),3))):(E.g!=2&&(h=E.h,e.va.width=h.width,e.va.height=h.height),m=new Kc(l,e.va,null),y={networkingEngine:e.H,filter:function(M){var P,N;return k(function(L){if(L.g==1)return T(L,Lg(m,M),2);if(L.g!=4)return P=L.h,P?(N=_e("trackschanged"),T(L,Promise.resolve(),4)):L.u(0);a.dispatchEvent(N),K(L)})},makeTextStreamsForClosedCaptions:function(M){return tE(e,M)},onTimelineRegionAdded:function(M){hf(a.H,M)},onEvent:function(M){return a.dispatchEvent(M)},onError:function(M){return a.onError(M)},isLowLatencyMode:function(){return f().streaming.lowLatencyMode},updateDuration:function(){e.l&&a.S&&e.l.updateDuration()},newDrmInfo:function(M){var P=a.i,N=P?P.h:null;N&&P.A&&Ug(m,N.keySystem,M)},onManifestUpdated:function(){var M=new Map().set("isLive",e.V());a.dispatchEvent(_e("manifestupdated",M)),Cs(a,!1,function(){e.B&&e.B.onManifestUpdated(e.V())})},getBandwidthEstimate:function(){return e.s.getBandwidthEstimate()},onMetadata:function(M,P,N,L){var R=M;M=="com.apple.hls.interstitial"&&(R="com.apple.quicktime.HLS",M={startTime:P,endTime:N,values:L},e.B)&&e.B.onHLSInterstitialMetadata(e,e.h,M),L=g(L),M=L.next();for(var O={};!M.done;O={Rg:void 0},M=L.next())O.Rg=M.value,O.Rg.name!="ID"&&Cs(a,!1,function(U){return function(){Xf(e,P,N,R,U.Rg)}}(O))},disableStream:function(M){return e.disableStream(M,e.g.streaming.maxDisabledTime)},addFont:function(M,P){return e.addFont(M,P)}},v=new xs(function(){return e.Sa()}),v.addEventListener("regionadd",function(M){var P=M.region;Ns(e,"timelineregionadded",P,a),Cs(a,!1,function(){e.B&&(e.B.onDashTimedMetadata(P),e.B.onDASHInterstitialMetadata(e,e.h,P))})}),x=null,l.streaming.observeQualityChanges&&(x=new da(function(){return e.Kb()}),x.addEventListener("qualitychange",function(M){Dv(e,M.quality,M.position)}),x.addEventListener("audiotrackchange",function(M){Dv(e,M.quality,M.position,!0)})),S=!0,w={lc:e.H,onError:function(M){return a.onError(M)},mf:function(M){Cs(a,!0,function(){if(e.C)e:{var P=M,N=_e("keystatuschanged");e.dispatchEvent(N);var L=Object.keys(P);L.length==1&&L[0]==""&&(L=["00"],P={"00":P[""]}),N=L.length==1&&L[0]=="00";var R=!1;if(L.length){L=e.keySystem();for(var O=yr(e.g.drm.clearKeys),U=g(e.i.variants),j=U.next();!j.done;j=U.next()){j=j.value;var _=[];j.audio&&_.push(j.audio),j.video&&_.push(j.video),_=g(_);for(var F=_.next();!F.done;F=_.next()){var V=F.value;if(F=j.allowedByKeySystem,V.keyIds.size)if(V.drmInfos.length&&!O.size){V=g(V.drmInfos);for(var q=V.next();!q.done;q=V.next())if(q=q.value,q.keyIds.size&&q.keySystem==L){j.allowedByKeySystem=!0,q=g(q.keyIds);for(var X=q.next();!X.done;X=q.next())X=X.value,((X=P[N?"00":X])||e.C.F)&&(j.allowedByKeySystem=j.allowedByKeySystem&&!!X&&!Xc.includes(X))}}else for(j.allowedByKeySystem=!0,V=g(V.keyIds),q=V.next();!q.done;q=V.next())q=q.value,((q=P[N?"00":q])||e.C.F)&&(j.allowedByKeySystem=j.allowedByKeySystem&&!!q&&!Xc.includes(q));F!=j.allowedByKeySystem&&(R=!0)}}}if(R&&(Ot(e),!Si(e)))break e;(P=e.l.l)&&!P.allowedByKeySystem&&kr(e)}})},onExpirationUpdated:function(M,P){var N=_e("expirationupdated");a.dispatchEvent(N),(N=a.l)&&N.onExpirationUpdated&&N.onExpirationUpdated(M,P)},onEvent:function(M){a.dispatchEvent(M),M.type=="drmsessionupdate"&&S&&(S=!1,M=Date.now()/1e3-a.Ka,(e.A||a.getStats()).m=M,e.S&&vh(e.S))}},A=dv(e,c),lg(e.H,A),D=function(){return e.dd(w)},I={config:l,kk:y,zk:v,yk:x,dd:D,jk:m,networkingEngine:A,bj:o,aj:u},a=new yn(t,i,n,I),E.return(a))})}function lv(e,t){var n,i,r;return k(function(o){return o.g==1?(n=e.g.manifest.retryParameters,T(o,Cr(t,e.H,n),2)):(i=o.h,i=="application/x-mpegurl"&&(r=ye(),r.Ea()==="WEBKIT"&&(i="application/vnd.apple.mpegurl")),o.return(i))})}function bA(e,t){if(!Zn(ye()))return!0;if(t){if((e.h||wr()).canPlayType(t)=="")return!1;if(!Zn(ye())||!to.has(t))return!0;if(Lc(t))return ye().Ea()==="WEBKIT"&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls;if(t==="application/dash+xml"||t==="video/vnd.mpeg.dash.mpd")return e.g.streaming.preferNativeDash}return!1}function cv(e){var t=e.g.textDisplayFactory;t!==e.ze&&(e.o=t(),e.o.configure?e.o.configure(e.g.textDisplayer):Ae("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.ze=t,e.o.setTextVisibility(e.oa))}function Gf(e){var t,n,i;return k(function(r){if(r.g==1)return ye(),xo(e,"media-source"),e.g.mediaSource.useSourceElements&&oa(e.h),cv(e),t=qA(e.h,e.o,{Bj:function(){return e.keySystem()},onMetadata:function(o,s,u){o=g(o);for(var a=o.next();!a.done;a=o.next())if(a=a.value,a.data&&typeof a.cueTime=="number"&&a.frames){var l=a.cueTime+s,c=u;c&&l>c&&(c=l);for(var f=g(a.frames),p=f.next();!p.done;p=f.next())Xf(e,l,c,"org.id3",p.value);e.B&&e.B.onHlsTimedMetadata(a,l)}},rk:function(o){e.Za&&hf(e.Za,{schemeIdUri:o.schemeIdUri,startTime:o.startTime,endTime:o.endTime,id:String(o.id),emsg:o})},onEvent:function(o){return e.dispatchEvent(o)},vk:function(){e.G&&e.G.update&&e.G.update()}},e.S,e.g.mediaSource),n=e.g.manifest,i=n.segmentRelativeVttTiming,t.Ka=i,T(r,t.K,2);e.I=t,K(r)})}function fv(e,t,n){function i(){return zf(e)}if(e.j.D(t,"playing",i),e.j.D(t,"pause",i),e.j.D(t,"ended",i),e.j.D(t,"ratechange",function(){var o=e.h.playbackRate;o!=0&&(e.K&&(e.K.set(o),e.m==Nt&&e.s.playbackRateChanged(o),Sv(e,o)),o=_e("ratechange"),e.dispatchEvent(o))}),t.remote&&(e.j.D(t.remote,"connect",function(){e.l&&t.remote.state=="connected"&&Dr(e),Ot(e)}),e.j.D(t.remote,"connecting",function(){return Ot(e)}),e.j.D(t.remote,"disconnect",function(){return k(function(o){if(o.g==1)return e.l&&t.remote.state=="disconnected"?T(o,Ta(e.l),3):o.u(2);o.g!=2&&Dr(e),Ot(e),K(o)})})),t.audioTracks&&(e.j.D(t.audioTracks,"addtrack",function(){return Ot(e)}),e.j.D(t.audioTracks,"removetrack",function(){return Ot(e)}),e.j.D(t.audioTracks,"change",function(){return Ot(e)})),t.videoTracks&&(e.j.D(t.videoTracks,"addtrack",function(){return Ot(e)}),e.j.D(t.videoTracks,"removetrack",function(){return Ot(e)}),e.j.D(t.videoTracks,"change",function(){return Ot(e)})),t.textTracks){var r=function(){e.m===nn&&e.o instanceof ft&&Dr(e),Ot(e)};e.j.D(t.textTracks,"addtrack",function(o){if(o.track)switch(o=o.track,o.kind){case"metadata":KA(e,o);break;case"chapters":XA(e,o);break;default:r()}}),e.j.D(t.textTracks,"removetrack",r),e.j.D(t.textTracks,"change",r),e.g.streaming.crossBoundaryStrategy!=="keep"&&(e.j.D(t,"waiting",function(){e.l&&Mf(e.l)}),e.j.D(t,"timeupdate",function(){e.l&&Mf(e.l)}))}t.preload!="none"&&e.j.za(t,"loadedmetadata",function(){e.A.F=Date.now()/1e3-n})}function BA(e,t,n,i){var r,o,s,u,a,l,c,f,p,h,m,y,v,x,S,w,A,D,I,E,M,P,N,L,R,O,U,j;return k(function(_){switch(_.g){case 1:for(xo(e,"load"),r=e.h,e.K=new Ts({Te:function(){return r.playbackRate},Lc:function(){return r.defaultPlaybackRate},hh:function(F){r.playbackRate=F},ki:function(F){r.currentTime+=F}}),fv(e,r,t),("onchange"in B.screen)&&e.j.D(B.screen,"change",function(){if(e.M.getConfiguration){var F=e.M.getConfiguration();F.zc=="AUTO"?Si(e):e.g.preferredVideoHdrLevel=="AUTO"&&e.g.abr.enabled&&(F.zc="AUTO",e.M.configure(F),Si(e))}}),o=!1,s=g(e.i.variants),u=s.next();!u.done;u=s.next())a=u.value,(l=a.video&&a.video.dependencyStream)&&(o=yh(l));OA(e,e.g,o),e.td=e.g.preferredTextLanguage,e.pe=e.g.preferredTextRole,e.oe=e.g.preferForcedSubs,Qf(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.s.init(function(F,V,q){e.i&&e.l&&F!=e.l.l&&Ps(e,F,!0,V===void 0?!1:V,q===void 0?0:q)}),e.s.setMediaElement(r),e.s.setCmsdManager(e.ka),e.l=QA(e),e.l.configure(e.g.streaming),e.m=Nt,e.dispatchEvent(_e("streaming")),c=n;case 2:for((p=e.l.l)||c||(c=Si(e)?e.s.chooseVariant():null),h=[],f=p||c,m=g([f.video,f.audio]),y=m.next();!y.done;y=m.next())(v=y.value)&&!v.segmentIndex&&(h.push(v.createSegmentIndex()),v.dependencyStream&&h.push(v.dependencyStream.createSegmentIndex()));if(!(0<h.length)){_.u(4);break}return T(_,Promise.all(h),4);case 4:if(!f||f.disabledUntilTime!=0){_.u(2);break}if(e.G&&e.G.onInitialVariantChosen&&e.G.onInitialVariantChosen(f),e.i.isLowLatency&&(e.g.streaming.lowLatencyMode?e.configure(e.Sf):we("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.")),e.L&&(IA(e.L,e.i.isLowLatency&&e.g.streaming.lowLatencyMode),MA(e.L,1e3*t)),Qf(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),Dw(e.l,e.g.playRangeStart,e.g.playRangeEnd),e.Ka=!0,e.dispatchEvent(_e("canupdatestarttime")),x=function(F){e.F=WA(e,F),e.eb=zA(e,F),pv(e,r,!1)},e.g.streaming.startAtSegmentBoundary||(S=e.N,S==null&&e.i.startTime&&(S=e.i.startTime),x(S)),p){_.u(7);break}if(!e.g.streaming.startAtSegmentBoundary){_.u(8);break}return w=e.i.presentationTimeline,e.N instanceof Date&&(D=w.m||w.i,I=e.N.getTime()/1e3-D,I!=null&&(A=I)),A==null&&(A=typeof e.N=="number"?e.N:e.h.currentTime),e.N==null&&e.i.startTime&&(A=e.i.startTime),E=w.Vb(),M=w.Db(),A<E?A=E:A>M&&(A=M),T(_,nE(c,A),9);case 9:P=_.h,x(P);case 8:Ps(e,c,!0,!1,0);case 7:return e.F.ready(),N=e.yc().find(function(F){return F.active}),N||((L=Yr(e.i.textStreams,e.td,e.pe,e.oe)[0]||null)&&Rf(e.A.h,L,!0),c&&(L?(eg(c.audio,L,e.g)&&(e.oa=!0),e.oa&&e.o.setTextVisibility(!0)):(e.oa=!1,e.o.setTextVisibility(!1)),Cv(e)),L&&(e.g.streaming.alwaysStreamText||e.Hg())&&(ga(e.l,L),Ls(e))),T(_,e.l.start(i),10);case 10:e.g.abr.enabled&&(e.s.enable(),kv(e)),Ot(e),Si(e),e.i.variants.some(function(F){return F.primary}),((R=e.V())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.i.serviceDescription||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(O=function(){return wv(e)},e.j.D(r,"timeupdate",O)),R||(U=function(){return Va(e)},e.j.D(r,"timeupdate",U),Va(e),e.i.nextUrl&&(0<e.g.streaming.preloadNextUrlWindow&&(j=function(){var F;return k(function(V){if(V.g==1)return F=e.Sa().end-e.h.currentTime,isNaN(F)||!(F<=e.g.streaming.preloadNextUrlWindow)?V.u(0):(e.j.Ja(r,"timeupdate",j),T(V,e.preload(e.i.nextUrl),4));e.Pa=V.h,K(V)})},e.j.D(r,"timeupdate",j)),e.j.D(r,"ended",function(){e.load(e.Pa||e.i.nextUrl)}))),e.B&&e.B.onManifestUpdated(R),K(_)}})}function FA(e,t){var n,i,r,o,s;return k(function(u){return u.g==1?(n=lt,i=Date.now()/1e3,r=!0,e.C=e.dd({lc:e.H,onError:function(a){So(e,a)},mf:function(){},onExpirationUpdated:function(){var a=_e("expirationupdated");e.dispatchEvent(a)},onEvent:function(a){e.dispatchEvent(a),a.type=="drmsessionupdate"&&r&&(r=!1,e.A.m=Date.now()/1e3-i)}}),e.C.configure(e.g.drm),o={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},s={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?Qt(t):"",codecs:t?Jt(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.xa,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null},s.fullMimeTypes.add(it(s.mimeType,s.codecs)),t.startsWith("audio/")?(s.type=n.Y,o.audio=s):o.video=s,e.C.$=!0,T(u,vg(e.C,[o],[]),2)):T(u,e.C.cc(e.h),0)})}function VA(e,t,n){var i,r,o,s,u,a,l,c,f,p,h,m;return k(function(y){switch(y.g){case 1:if(xo(e,"src-equals"),i=e.h,e.F=new mm(i),r=!1,e.me.push(function(){r=!0}),e.dispatchEvent(_e("canupdatestarttime")),e.N!=null&&e.F.Pf(e.N),e.eb=YA(e,e.N||0),e.K=new Ts({Te:function(){return i.playbackRate},Lc:function(){return i.defaultPlaybackRate},hh:function(v){i.playbackRate=v},ki:function(v){i.currentTime+=v}}),pv(e,i,!0),i.textTracks&&(cv(e),o=function(v){if(!(e.o instanceof ft)){var x=ba(e).find(function(S){return S.mode!=="disabled"});x&&(x.mode=v?"showing":"hidden"),e.o instanceof Ct&&(x=JA(e))&&(x.mode=!v&&e.o.isTextVisible()?"showing":"hidden")}},e.j.D(i,"enterpictureinpicture",function(){return o(!0)}),e.j.D(i,"leavepictureinpicture",function(){return o(!1)}),i.remote?(e.j.D(i.remote,"connect",function(){return o(!1)}),e.j.D(i.remote,"connecting",function(){return o(!1)}),e.j.D(i.remote,"disconnect",function(){return o(!1)})):"webkitCurrentPlaybackTargetIsWireless"in i&&e.j.D(i,"webkitcurrentplaybacktargetiswirelesschanged",function(){return o(!1)}),s=i,s.webkitSupportsFullscreen&&e.j.D(s,"webkitpresentationmodechanged",function(){return o(s.webkitPresentationMode!=="inline")})),fv(e,i,t),u=CA(e.L,e.W,n),!u.includes("#t=")&&(0<e.g.playRangeStart||isFinite(e.g.playRangeEnd))&&(u+="#t=",0<e.g.playRangeStart&&(u+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(u+=","+e.g.playRangeEnd)),!e.I){y.u(2);break}return T(y,e.I.destroy(),3);case 3:e.I=null;case 2:return oa(i),i.src=u,a=ye(),a.La()=="TV"&&i.load(),i.preload!="none"&&!i.autoplay&&Lc(n)&&a.Ea()==="WEBKIT"&&i.load(),e.m=nn,e.dispatchEvent(_e("streaming")),l=new je,po(i,HTMLMediaElement.HAVE_METADATA,e.j,function(){e.F.ready(),l.resolve()}),c=function(){return new Promise(function(v){var x=new ve(v);e.j.D(i.textTracks,"change",function(){return x.ha(.5)}),x.ha(.5)})},po(i,HTMLMediaElement.HAVE_CURRENT_DATA,e.j,function(){var v,x,S,w,A;return k(function(D){if(D.g==1)return T(D,c(),2);if(r)return D.return();if(HA(e),v=ba(e),v.some(function(I){return I.mode==="showing"})&&(e.oa=!0,e.o.setTextVisibility(!0)),!(e.o instanceof ft))for(v.length&&(e.o.enableTextDisplayer?e.o.enableTextDisplayer():Ae("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method')),x=!1,S=g(v),w=S.next();!w.done;w=S.next())A=w.value,A.mode!=="disabled"&&(x?(A.mode="disabled",we("Found more than one enabled text track, disabling it",A)):(Tv(e,A),x=!0));GA(e),K(D)})}),i.error?l.reject($f(e)):i.preload=="none"&&(we('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),l.resolve()),e.j.za(i,"error",function(){l.reject($f(e))}),T(y,rs(e.g.streaming.loadTimeout,l),4);case 4:((f=e.V())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(p=function(){return wv(e)},e.j.D(i,"timeupdate",p)),f||(h=function(){return Va(e)},e.j.D(i,"timeupdate",h),Va(e)),e.B&&(e.B.onManifestUpdated(f),f&&(m=e.Sa().end,e.j.D(i,"progress",function(){var v=e.Sa().end;m!=v&&(e.B.onManifestUpdated(e.V()),m=v)}))),e.Ka=!0,K(y)}})}function HA(e){var t=e.g.preferredAudioLanguage;t!=""&&e.Ei(t,e.g.preferredVariantRole)}function GA(e){var t=e.g.preferredTextLanguage;t!=""&&e.bh(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function KA(e,t){if(t.kind=="metadata"){t.mode="hidden",e.j.D(t,"cuechange",function(){if(t.activeCues)for(var i=g(t.activeCues),r=i.next();!r.done;r=i.next())r=r.value,Xf(e,r.startTime,r.endTime,r.type,r.value),e.B&&e.B.onCueMetadataChange(r.value);if(t.cues){i=[],r=g(t.cues);for(var o=r.next(),s={};!o.done;s={tc:void 0},o=r.next())s.tc=o.value,s.tc.type=="com.apple.quicktime.HLS"&&s.tc.startTime!=null&&(o=i.find(function(u){return function(a){return a.startTime==u.tc.startTime&&a.endTime==u.tc.endTime}}(s)),o||(o={startTime:s.tc.startTime,endTime:s.tc.endTime,values:[]},i.push(o)),o.values.push(s.tc.value));for(i=g(i),r=i.next();!r.done;r=i.next())r=r.value,r.values.some(function(u){return u.key=="X-ASSET-URI"||u.key=="X-ASSET-LIST"})&&e.B&&(r.values.push({key:"CUE",description:"",data:r.startTime!=0||e.V()?"ONCE":"ONCE,PRE",mimeType:null,pictureType:null}),e.B.onHLSInterstitialMetadata(e,e.h,r))}});var n=new ve(function(){var i=ZA(e);i=g(i);for(var r=i.next();!r.done;r=i.next())r.value.mode="hidden"}).Gb().ha(.5);e.me.push(function(){n.stop()})}}function Kf(e,t,n){t=new Map().set("startTime",t.startTime).set("endTime",t.endTime).set("metadataType",t.schemeIdUri).set("payload",t.payload),e.dispatchEvent(_e(n,t))}function Xf(e,t,n,i,r){e.wa&&(t={schemeIdUri:i,startTime:t,endTime:n||1/0,id:"",payload:r},t.id=JSON.stringify(t),hf(e.wa,t))}function XA(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new ve(function(){t.mode="hidden"}).Gb().ha(.5);e.me.push(function(){n.stop()})}}d.Dk=function(){for(var e=this.$;e.g;)e.release()},d.dd=function(e){return new qu(e)};function dv(e,t){function n(o){t()?t().dispatchEvent(o):e.dispatchEvent(o)}function i(o){t()?Cs(t(),!0,o):o()}t||(t=function(){return null});var r=new He(function(o,s,u,a,l){var c=t()?t().j:e.s;c&&c.segmentDownloaded(o,s,u,a,l)},function(o,s,u){s=new Map().set("headers",o).set("request",s).set("requestType",u),n(_e("downloadheadersreceived",s)),i(function(){if(e.ka){var a=e.ka;if(a.h.enabled){var l=o["cmsd-static"];if(l)try{var c=new Map,f=l.split(",");for(l=0;l<f.length;l++){var p=f[l].split("=");c.set(p[0],Zm(p[1]))}}catch{}if(c=o["cmsd-dynamic"]){try{var h=new Map,m=c.split(";");for(c=1;c<m.length;c++){var y=m[c].split("=");h.set(y[0],Zm(y[1]))}var v=h}catch{v=null}v&&(a.g=v)}}}})},function(o,s){o=new Map().set("request",o).set("response",s),n(_e("downloadcompleted",o))},function(o,s,u,a){o=new Map().set("request",o).set("error",s).set("httpResponseCode",u).set("aborted",a),n(_e("downloadfailed",o))},function(o,s,u){i(function(){var a=e.L,l=u;if(l=l===void 0?{}:l,a.g.enabled)if(s.method==="HEAD")To(a,s);else switch(o){case 0:try{if(a.g.enabled){if(l.type){e:{switch(l.type){case 4:var c=a.l?ja:Na;break e;case 3:case 2:c=a.l?Oa:Ua;break e;case 5:c="s";break e}c=void 0}a.i=c}To(a,s,{ot:Qm,su:!a.s})}}catch(j){Zi("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",j)}break;case Pn:try{if(a.g.enabled){var f=s.uris[0],p=l.segment;c=0,p&&(c=p.endTime-p.startTime);var h={d:1e3*c,st:a.h.V()?"l":"v"};h.ot=RA(l);var m=h.ot===Ra||h.ot===Da||h.ot===Pa||h.ot===La,y=l.stream;if(y){var v=a.h.sb();if(m&&(h.bl=PA(a,y.type),h.ot!==La)){var x=$m(a,y.type);h.dl=v?x/Math.abs(v):x}if(y.bandwidth&&(h.br=y.bandwidth/1e3),y.segmentIndex&&p){var S=y.segmentIndex.Ub(p.endTime,!0,0>v);if(S){var w=S.next().value;if(w&&w!=p){if(f&&!Wo(p.O(),w.O())){var A=w.O()[0],D=new URL(A),I=new URL(f);if(D.origin!==I.origin)var E=A;else{for(var M=D.pathname.split("/").slice(1),P=I.pathname.split("/").slice(1,-1);M[0]===P[0];)M.shift(),P.shift();for(;P.length;)P.shift(),M.unshift("..");E=M.join("/")}h.nor=E}if((w.startByte||w.endByte)&&(p.startByte!=w.startByte||p.endByte!=w.endByte)){var N=w.startByte+"-";w.endByte&&(N+=w.endByte),h.nrr=N}}}var L=a.h.sb()||1,R=$m(a,y.type)||500,O=y.bandwidth,U=O?O*(p.endTime-p.startTime)/1e3/(R/L/1e3)*a.g.rtpSafetyFactor:NaN;isNaN(U)||(h.rtp=U)}}m&&h.ot!==La&&(h.tb=LA(a,h.ot)/1e3),To(a,s,h)}}catch(j){Zi("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",j)}break;case 2:case 5:case 6:To(a,s,{ot:"k"});break;case 4:To(a,s,{ot:"o"})}})},function(o,s,u,a){(o=t()?t().l:e.G)&&o.banLocation&&o.banLocation(a)},function(o,s){if(s.data){s=s.data.byteLength;var u=t()?t().getStats():e.A;u&&(Bm(u,s),o===0&&(u.ci=s))}});return r.configure(e.g.networking),r}function WA(e,t){return new Tm(e.h,e.i,e.g.streaming,t,function(){e.eb&&Em(e.eb,!0),e.l&&e.l.Wc(),e.P&&Jn(e)},function(n){return e.dispatchEvent(n)})}function zA(e,t){var n=e.V()||typeof t=="number"&&0<t;t=new Mr(e.je,n),t.addEventListener("enter",function(o){Ns(e,"timelineregionenter",o.region)}),t.addEventListener("exit",function(o){Ns(e,"timelineregionexit",o.region)}),t.addEventListener("skip",function(o){var s=o.region;o.seeking||(Ns(e,"timelineregionenter",s),Ns(e,"timelineregionexit",s))});var i=new Mr(e.wa,n);i.addEventListener("enter",function(o){Kf(e,o.region,"metadata")}),n=new Mr(e.Za,n),n.addEventListener("enter",function(o){o=new Map().set("detail",o.region.emsg),e.dispatchEvent(_e("emsg",o))});var r=new pf(e.h);return r.g.add(t),r.g.add(i),r.g.add(n),e.ie&&r.g.add(e.ie),r}function YA(e,t){t=new Mr(e.wa,t instanceof Date||0<t),t.addEventListener("enter",function(i){Kf(e,i.region,"metadata")});var n=new pf(e.h);return n.g.add(t),n}function pv(e,t,n){e.P=new MS,e.P.g=eo,hv(e),Fa(e),e.Ba=new ve(function(){Jn(e)}),e.g.streaming.rebufferingGoal&&e.Ba.Ga(.25),e.j.D(t,"waiting",function(){return Jn(e)}),e.j.D(t,"canplaythrough",function(){return Jn(e)}),e.j.D(t,"playing",function(){return Jn(e)}),e.j.D(t,"seeked",function(){return Jn(e)}),n&&(e.j.D(t,"stalled",function(){return Jn(e)}),e.j.D(t,"progress",function(){return Jn(e)}),e.j.D(t,"timeupdate",function(){return Jn(e)}))}function hv(e){var t=e.g.streaming.rebufferingGoal;e.P.i.set(cs,Math.min(.5,t/2)).set(eo,t)}function Jn(e){var t=e.Td()||e.F.Zh(),n=zg(e.h.buffered,e.h.currentTime),i=e.P,r=i.i.get(i.g),o=i.g;t=t||n>=r&&0<n?cs:eo,i.g=t,(o=o!=t)&&t===cs&&(i.h=Date.now()),o&&Fa(e)}function qA(e,t,n,i,r){return new em(e,t,n,r,i)}function $A(e){return new _f({getBandwidthEstimate:function(){return e.s?e.s.getBandwidthEstimate():NaN},Kb:function(){return e.Kb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},sb:function(){return e.sb()},Mb:function(){return e.Mb()},Nb:function(){return e.Nb()},V:function(){return e.V()},Se:function(){return e.Se()}},e.g.cmcd)}function QA(e){return new Rm(e.i,{Mc:function(){return e.F?e.F.Ae():0},getBandwidthEstimate:function(){return e.s.getBandwidthEstimate()},sb:function(){return e.sb()},video:e.h,aa:e.I,lc:e.H,onError:function(t){return So(e,t)},onEvent:function(t){return e.dispatchEvent(t)},nf:function(t,n,i){var r=t.startTime;if(t=t.endTime,n=n.type,n!=he){if(e.F){e.F.mi();var o=sf(e.I,n);!e.V()&&e.h.paused&&!e.h.seeking&&o!=null&&0<o&&e.F.Ae()<o&&e.F.Pf(o)}Jn(e)}i=new Map().set("start",r).set("end",t).set("contentType",n).set("isMuxed",i),e.dispatchEvent(_e("segmentappended",i))},tk:function(t,n){(n=n.nd)&&e.ie&&xw(e.ie,n,t)},Gh:function(t,n){var i=e.C;if(i.g.parseInbandPsshEnabled&&!i.F&&["audio","video"].includes(t)){t=new Vc(le(n)),n=0;for(var r=g(t.data),o=r.next();!o.done;o=r.next())n+=o.value.length;if(n==0)i=Promise.resolve();else{for(n=new Uint8Array(n),r=0,t=g(t.data),o=t.next();!o.done;o=t.next())o=o.value,n.set(o,r),r+=o.length;us(i,"cenc",n),i=i.m}}else i=Promise.resolve();return i},disableStream:function(t,n){return e.disableStream(t,n)}})}d.configure=function(e,t){if(arguments.length==2&&typeof e=="string"&&(e=Sa(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(Ae("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(Ae("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming){Ae("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead.");var n=ye();e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&n.Ea()==="WEBKIT",delete e.streaming.useNativeHlsOnSafari}if(e.streaming&&typeof e.streaming.liveSync=="boolean"&&(Ae("streaming.liveSync","Please Use streaming.liveSync.enabled instead."),n=e.streaming.liveSync,e.streaming.liveSync={},e.streaming.liveSync.enabled=n),e.streaming&&!(e.streaming.liveSync&&"targetLatency"in e.streaming.liveSync)&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){n=e.streaming.liveSyncMinLatency||0;var i=Math.abs((e.streaming.liveSyncMaxLatency||1)-n)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=n+i,e.streaming.liveSync.targetLatencyTolerance=i}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(Ae("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(Ae("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(Ae("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(Ae("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(Ae("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(Ae("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(Ae("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(Ae("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){Ae("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var r=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return r},delete e.mediaSource.sourceBufferExtraFeatures}if(e.manifest&&e.manifest.hls&&"useSafariBehaviorForLive"in e.manifest.hls&&(Ae("manifest.hls.useSafariBehaviorForLive configuration","Please Use liveSync config to keep on live Edge instead."),delete e.manifest.hls.useSafariBehaviorForLive),e.streaming&&"parsePrftBox"in e.streaming&&(Ae("streaming.parsePrftBox configuration","Now fired without needing a configuration."),delete e.streaming.parsePrftBox),e.manifest&&e.manifest.dash&&"enableAudioGroups"in e.manifest.dash&&(Ae("manifest.dash.enableAudioGroups configuration","It is now enabled by default and cannot be disabled."),delete e.manifest.dash.enableAudioGroups),e.streaming&&"dispatchAllEmsgBoxes"in e.streaming&&(Ae("streaming.dispatchAllEmsgBoxes configuration","Please Use mediaSource.dispatchAllEmsgBoxes instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.dispatchAllEmsgBoxes=e.streaming.dispatchAllEmsgBoxes,delete e.streaming.dispatchAllEmsgBoxes),e.streaming&&"autoLowLatencyMode"in e.streaming&&(Ae("streaming.autoLowLatencyMode configuration","Please Use streaming.lowLatencyMode instead."),e.streaming.lowLatencyMode=e.streaming.autoLowLatencyMode,delete e.streaming.autoLowLatencyMode),e.manifest&&e.manifest.dash&&"ignoreSupplementalCodecs"in e.manifest.dash&&(Ae("manifest.dash.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.dash.ignoreSupplementalCodecs,delete e.manifest.dash.ignoreSupplementalCodecs),e.manifest&&e.manifest.hls&&"ignoreSupplementalCodecs"in e.manifest.hls&&(Ae("manifest.hls.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.hls.ignoreSupplementalCodecs,delete e.manifest.hls.ignoreSupplementalCodecs),e.manifest&&e.manifest.dash&&"updatePeriod"in e.manifest.dash&&(Ae("manifest.dash.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.dash.updatePeriod,delete e.manifest.dash.updatePeriod),e.manifest&&e.manifest.hls&&"updatePeriod"in e.manifest.hls&&(Ae("manifest.hls.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.hls.updatePeriod,delete e.manifest.hls.updatePeriod),e.manifest&&e.manifest.dash&&"ignoreDrmInfo"in e.manifest.dash&&(Ae("manifest.dash.ignoreDrmInfo configuration","Please Use manifest.ignoreDrmInfo instead."),e.manifest.ignoreDrmInfo=e.manifest.dash.ignoreDrmInfo,delete e.manifest.dash.ignoreDrmInfo),e.drm&&e.drm.advanced){n=!1;for(var o in e.drm.advanced){var s=e.drm.advanced[o];i=s.videoRobustness,s=s.audioRobustness,"videoRobustness"in e.drm.advanced[o]&&!Array.isArray(e.drm.advanced[o].videoRobustness)&&(e.drm.advanced[o].videoRobustness=[i],n=!0),"audioRobustness"in e.drm.advanced[o]&&!Array.isArray(e.drm.advanced[o].audioRobustness)&&(e.drm.advanced[o].audioRobustness=[s],n=!0)}n&&Ae("AdvancedDrmConfiguration's videoRobustness and audioRobustness","These properties are no longer strings but array of strings, please update your usage of these properties.")}return e.streaming&&"forceHTTP"in e.streaming&&(Ae("streaming.forceHTTP configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTP=e.streaming.forceHTTP,delete e.streaming.forceHTTP),e.streaming&&"forceHTTPS"in e.streaming&&(Ae("streaming.forceHTTPS configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTPS=e.streaming.forceHTTPS,delete e.streaming.forceHTTPS),e.streaming&&"minBytesForProgressEvents"in e.streaming&&(Ae("streaming.minBytesForProgressEvents configuration","Please Use networking.minBytesForProgressEvents instead."),e.networking=e.networking||{},e.networking.minBytesForProgressEvents=e.streaming.minBytesForProgressEvents,delete e.streaming.minBytesForProgressEvents),e.streaming&&"crossBoundaryStrategy"in e.streaming&&e.streaming.crossBoundaryStrategy!="keep"&&(e.streaming.inaccurateManifestTolerance=0),o=Ti(this.g,e,Kn(this)),gv(this),o},d.kj=function(e){this.Sf=e};function gv(e){if(e.qe=new Kc(e.g,e.va,e.C),e.G){var t=Bn(e.g.manifest);e.h&&e.h.nodeName==="AUDIO"&&(t.disableVideo=!0),e.G.configure(t)}if(e.C&&e.C.configure(e.g.drm),e.l){e.l.configure(e.g.streaming);try{e.m!=Ln&&jg(e.qe,e.i)&&Ot(e)}catch(r){So(e,r)}e.s&&Si(e),t=e.l.l,!t||t.allowedByApplication&&t.allowedByKeySystem||kr(e)}if(e.H&&e.H.configure(e.g.networking),e.I&&(e.I.configure(e.g.mediaSource),e.I.Ka=e.g.manifest.segmentRelativeVttTiming),e.o)if(t=e.g.textDisplayFactory,e.ze!=t){var n=e.o;if(e.o=t(),e.o.configure?e.o.configure(e.g.textDisplayer):Ae("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.o.setTextLanguage||Ae("Text displayer w/ setTextLanguage",'Text displayer should have a "setTextLanguage" method!'),e.o.setTextVisibility(n.isTextVisible()),n.destroy(),e.I){n=e.I;var i=e.o;n.ia=i,n.h&&(n.h.j=i)}e.ze=t,e.l&&(t=e.l,(n=t.i.get(he))&&ho(t,n.stream,!0,0,!0))}else e.o.configure&&e.o.configure(e.g.textDisplayer);e.s&&(e.s.configure(e.g.abr),e.g.abr.enabled?e.s.enable():e.s.disable(),kv(e)),e.P&&hv(e),e.Ba&&(e.g.streaming.rebufferingGoal?e.Ba.Ga(.25):e.Ba.stop()),e.i&&Qf(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.B&&e.B.configure(e.g.ads),e.L&&e.L.configure(e.g.cmcd),e.ka&&e.ka.configure(e.g.cmsd),e.ya&&e.ya.configure(e.g.queue)}d.getConfiguration=function(){var e=Kn(this);return Ti(e,this.g,Kn(this)),e},d.uj=function(){return this.Sf},d.Vh=function(){var e=Kn(this);return Ti(e,this.g,Kn(this)),Um(this.g,Kn(this))},d.Rh=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.h.currentTime+t,this.Sa().end),e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},d.zi=function(){for(var e in this.g)delete this.g[e];Ti(this.g,Kn(this),Kn(this)),gv(this)},d.Cj=function(){return this.m},d.Th=function(){return this.i?this.i.type:null},d.Gj=function(){return this.h},d.Mb=function(){return this.H},d.jd=function(){return this.W},d.Qh=function(){return this.B?this.B:null},d.Wh=function(){return this.ya?this.ya:null},d.V=function(){return this.i&&!this.ua()?this.i.presentationTimeline.V():this.h&&(this.h.src||this.ua())?this.h.duration==1/0:!1},d.Pc=function(){return this.i?this.i.presentationTimeline.Pc():!1},d.Zj=function(){if(this.i&&!this.ua()){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&(this.h.src||this.ua())?this.h.videoTracks?this.h.videoTracks.length==0:this.h.videoHeight==0:!1},d.gk=function(){if(this.i&&!this.ua()){var e=this.i.variants;return e.length?(e=e[0],e.audio||!e.video?!1:!e.video.codecs.includes(",")):!1}return this.h&&(this.h.src||this.ua())&&this.h.audioTracks?this.h.audioTracks.length==0:!1},d.Sa=function(){if(this.i&&!this.ua()){if(!this.Ka&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.Vb(),end:e.Db()}}if(this.h&&(this.h.src||this.ua())&&(e=this.h.seekable)&&e.length){var t=this.g?this.g.playRangeStart:0;t=Math.max(e.start(0),t);var n=this.g?this.g.playRangeEnd:1/0;return e=Math.min(e.end(e.length-1),n),{start:t,end:e}}return{start:0,end:0}},d.Wj=function(){this.V()&&(this.h.currentTime=this.Sa().end)},d.$j=function(){return this.Ka},d.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},d.drmInfo=function(){return this.C?this.C.h:null},d.Md=function(){return this.C?this.C.Md():1/0},d.yg=function(){return this.C?this.C.yg():[]},d.Re=function(){return this.C?this.C.Re():{}},d.Gg=function(){return this.P?this.P.g==eo:!!this.W},d.sb=function(){return this.h?this.K?this.K.i:1:0},d.yh=function(e){this.m==Nt&&this.l&&Pm(this.l,e)},d.ge=function(e,t){t=t===void 0?!0:t,e==0?we("A trick play rate of 0 is unsupported!"):(this.K.set(e),this.m==Nt&&(this.s.playbackRateChanged(e),this.yh(t&&e!=1)),Sv(this,e))},d.Ed=function(){var e=this.K.Lc();this.m==nn&&this.K.set(e),this.m==Nt&&(this.K.set(e),this.s.playbackRateChanged(e),this.yh(!1)),this.Yb.Ra()},d.Nb=function(){if(this.i&&!this.ua()){for(var e=this.l?this.l.l:null,t=[],n=0,i=g(this.i.variants),r=i.next();!r.done;r=i.next())if(r=r.value,ss(r)){var o=hr(r);o.active=r==e,o.active||n==1||e==null||r.video!=e.video||r.audio!=e.audio||(o.active=!0),o.active&&n++,t.push(o)}return t}if(this.h&&this.h.audioTracks){var s=Av(this);return e=Array.from(this.h.audioTracks),e.length?e.map(function(u){return Ou(u,s)}):s?[Ou(null,s)]:[]}return[]},d.yc=function(){if(this.i){if(this.ua())return[];for(var e=this.l?this.l.A:null,t=[],n=g(this.i.textStreams),i=n.next();!i.done;i=n.next()){i=i.value;var r=gr(i);r.active=i==e,t.push(r)}return t}return this.h&&this.h.src&&this.h.textTracks?ba(this).map(function(o){return $h(o)}):[]},d.zj=function(){var e=this.xe;return this.i&&(e=this.i.imageStreams),e.map(function(t){return Uc(t)})},d.nj=function(e){var t=this,n,i;return k(function(r){return r.g==1?T(r,vv(t,e),2):(n=r.h,n?(i=[],n.segmentIndex.Cb(function(o){var s=mv(o.tilesLayout||n.tilesLayout);if(s)for(var u=s.rows*s.Hc,a=o.j-o.startTime,l=0;l<u;l++){var c=yv(o,n,o.startTime+a*l/u,s);i.push(c)}}),n.closeSegmentIndex&&n.closeSegmentIndex(),r.return(i)):r.return(null))})};function mv(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{Hc:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}d.Qj=function(e,t){var n=this,i,r,o,s;return k(function(u){return u.g==1?T(u,vv(n,e),2):(i=u.h,!i||(r=i.segmentIndex.find(t),r==null)?u.return(null):(o=i.segmentIndex.get(r),(s=mv(o.tilesLayout||i.tilesLayout))?u.return(yv(o,i,t,s)):u.return(null)))})};function vv(e,t){var n,i;return k(function(r){return r.g==1?e.m!=Nt&&e.m!=nn||(n=e.xe,e.i&&(n=e.i.imageStreams),i=n[0],!i)?r.return(null):(t!=null&&(i=n.find(function(o){return o.id==t})),i?i.segmentIndex?r.u(2):T(r,i.createSegmentIndex(),2):r.return(null)):r.return(i)})}function yv(e,t,n,i){var r=t.width||0,o=t.height||0,s=r/i.Hc,u=o/i.rows,a=i.Hc*i.rows,l=e.j-e.startTime;l=e.B||l/a;var c=e.startTime,f=0,p=0;return 1<a&&(p=Math.floor((n-e.startTime)/l),c=e.startTime+p*l,f=p%i.Hc*s,p=Math.floor(p/i.Hc)*u),i=!1,(n=e.thumbnailSprite)&&(i=!0,u=n.height,f=n.positionX,p=n.positionY,s=n.width),{segment:e,imageHeight:o,imageWidth:r,height:u,positionX:f,positionY:p,startTime:c,duration:l,uris:e.O(),startByte:e.wc(),endByte:e.uc(),width:s,sprite:i,mimeType:e.mimeType||t.mimeType,codecs:e.codecs||t.codecs}}d.dh=function(e){function t(){var i=n.i.textStreams.find(function(r){return r.id==e.id});i&&i!=n.l.A&&(Rf(n.A.h,i,!1),ga(n.l,i),Dr(n),Ls(n),n.td=i.language)}var n=this;this.i&&this.F&&(t(),!this.ua())||function(){if(n.h&&n.h.textTracks){var i=ba(n),r=i.find(function(u){return Uu(u)===e.id});if(r){if(n.o instanceof ft){i=g(i);for(var o=i.next();!o.done;o=i.next()){o=o.value;var s=o===r?n.oa?"showing":"hidden":"disabled";o.mode!==s&&(o.mode=s)}}else i=i.find(function(u){return u.mode!=="disabled"}),i!==r&&(i&&(i.mode="disabled",n.j.Ja(i,"cuechange"),n.o.remove(0,1/0)),r&&Tv(n,r));Dr(n),Ls(n)}}}()};function Tv(e,t){e.j.D(t,"cuechange",function(){e.o.remove(0,Math.max(0,e.h.currentTime-e.g.streaming.bufferBehind));var n={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},i=[],r=Array.from(t.activeCues||[]);r=g(r);for(var o=r.next();!o.done;o=r.next()){if(o=o.value,o.endTime===1/0||o.endTime<o.startTime)o=null;else{var s=new Be(o.startTime,o.endTime,o.text);s.line=typeof o.line=="number"?o.line:null,o.lineAlign&&(s.lineAlign=o.lineAlign),s.lineInterpretation=o.snapToLines?Jo:1,s.position=typeof o.position=="number"?o.position:null,o.positionAlign&&(s.positionAlign=o.positionAlign),s.size=o.size,s.textAlign=o.align,o.vertical==="lr"?s.writingMode="vertical-lr":o.vertical==="rl"&&(s.writingMode="vertical-rl"),o.region&&(s.region.id=o.region.id,s.region.height=o.region.lines,s.region.heightUnits=2,s.region.regionAnchorX=o.region.regionAnchorX,s.region.regionAnchorY=o.region.regionAnchorY,s.region.scroll=o.region.scroll,s.region.viewportAnchorX=o.region.viewportAnchorX,s.region.viewportAnchorY=o.region.viewportAnchorY,s.region.viewportAnchorUnits=qt,s.region.width=o.region.width,s.region.widthUnits=qt),ku(s),o=s}o&&((s=e.g.mediaSource.modifyCueCallback)&&s(o,null,n),i.push(o))}e.o.append(i)}),t.mode=document.pictureInPictureElement?"showing":"hidden"}d.Af=function(e,t,n){function i(){var o=r.i.variants.find(function(u){return u.id==e.id});if(o&&ss(o)){var s=r.l.l;r.g.abr.enabled&&(s.video!=o.video||s.audio&&o.audio&&s.audio.language==o.audio.language&&s.audio.channelsCount==o.audio.channelsCount&&s.audio.label==o.audio.label)&&we("Changing tracks while abr manager is enabled will likely result in the selected track being overridden. Consider disabling abr before calling selectVariantTrack()."),r.ua()?Ps(r,o,!1,!1,0):Ps(r,o,!1,t||!1,n||0),r.M.configure({language:o.language,role:o.audio&&o.audio.roles&&o.audio.roles[0]||"",channelCount:o.audio&&o.audio.channelsCount?o.audio.channelsCount:0,zc:o.video&&o.video.hdr?o.video.hdr:"",spatialAudio:o.audio&&o.audio.spatialAudio?o.audio.spatialAudio:!1,videoLayout:o.video&&o.video.videoLayout?o.video.videoLayout:"",Fc:o.audio&&o.audio.label?o.audio.label:"",zd:"",codecSwitchingStrategy:r.g.mediaSource.codecSwitchingStrategy,audioCodec:o.audio&&o.audio.codecs?o.audio.codecs:"",Cd:s.audio&&s.audio.codecs?s.audio.codecs:"",De:s.audio&&s.audio.channelsCount?s.audio.channelsCount:0,preferredAudioCodecs:r.g.preferredAudioCodecs,preferredAudioChannelCount:r.g.preferredAudioChannelCount}),Si(r)}}var r=this;t=t===void 0?!1:t,n=n===void 0?0:n,!(this.i&&this.F&&(i(),!this.ua()))&&function(){if(e.originalAudioId&&r.h&&r.h.audioTracks){var o=Array.from(r.h.audioTracks);o=g(o);for(var s=o.next();!s.done;s=o.next())if(s=s.value,Uu(s)==e.id){Yf(r,s);break}}}()},d.Lk=function(e,t){function n(){var r=i.M.getConfiguration();r.audioCodec=e.codecs||"",r.Fc=e.label||"",r.channelCount=e.channelsCount||0,r.language=e.language,r.role=e.roles[0]||"",r.spatialAudio=e.spatialAudio,i.M.configure(r),kr(i,!0,t,!1,!1)}var i=this;t=t===void 0?0:t,!(this.i&&this.F&&(n(),!this.ua()))&&function(){if(i.h&&i.h.audioTracks){var r=Array.from(i.h.audioTracks),o=null;r=g(r);for(var s=r.next();!s.done;s=r.next())if(s=s.value,s.label==e.label&&s.language==e.language&&s.kind==e.roles[0]){o=s;break}o&&Yf(i,o)}}()},d.getAudioTracks=function(){if(this.i&&!this.ua()){var e=this.Nb();if(!e.length)return[];var t=e.find(function(o){return o.active});if(!t)return[];var n=e;if(this.m!=Nt||this.ua()||(n=e.filter(function(o){return o.originalVideoId===t.originalVideoId&&o.audioCodec})),!n.length)return[];e=new Map,n=g(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;var r=i.originalAudioId;r||i.audioId==null||(r=String(i.audioId)),r&&e.set(r,{active:i.active,language:i.language,label:i.label,mimeType:i.audioMimeType,codecs:i.audioCodec,primary:i.primary,roles:i.audioRoles||[],accessibilityPurpose:i.accessibilityPurpose,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,originalLanguage:i.originalLanguage})}return Array.from(e.values())}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(o){var s=o.language;return s={active:o.enabled,language:Ne(s||"und"),label:o.label,mimeType:null,codecs:null,primary:o.kind=="main",roles:[],accessibilityPurpose:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,originalLanguage:s},o.kind&&s.roles.push(o.kind),o.configuration&&(o.configuration.codec&&(s.codecs=o.configuration.codec),o.configuration.sampleRate&&(s.audioSamplingRate=o.configuration.sampleRate),o.configuration.numberOfChannels&&(s.channelsCount=o.configuration.numberOfChannels)),s}):[]},d.Nk=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?0:n;var i=this.Nb();if(i.length){var r=i.find(function(o){return o.active});r&&(i=i.find(function(o){return o.audioId===r.audioId&&(o.videoBandwidth||o.bandwidth)==e.bandwidth&&o.width==e.width&&o.height==e.height&&o.frameRate==e.frameRate&&o.pixelAspectRatio==e.pixelAspectRatio&&o.hdr==e.hdr&&o.colorGamut==e.colorGamut&&o.videoLayout==e.videoLayout&&o.videoMimeType==e.mimeType&&o.videoCodec==e.codecs}))&&!i.active&&this.Af(i,t,n)}},d.getVideoTracks=function(){if(this.m==nn||this.ua())return[];var e=this.Nb();if(!e.length)return[];var t=e.find(function(o){return o.active});if(!t)return[];var n=e.filter(function(o){return o.originalAudioId===t.originalAudioId&&o.audioId===t.audioId&&o.audioGroupId===t.audioGroupId&&o.videoCodec});if(!n.length)return[];e=new Map,n=g(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;var r=i.originalVideoId;r||i.videoId==null||(r=String(i.videoId)),r&&e.set(r,{active:i.active,bandwidth:i.videoBandwidth||i.bandwidth,width:i.width,height:i.height,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,colorGamut:i.colorGamut,videoLayout:i.videoLayout,mimeType:i.videoMimeType,codecs:i.videoCodec})}return Array.from(e.values())},d.pj=function(){return Pv(this.Nb())},d.Oj=function(){return Pv(this.yc())},d.oj=function(){return Array.from(Rv(this.Nb()))},d.Nj=function(){return Array.from(Rv(this.yc()))},d.Ei=function(e,t,n,i,r,o,s){function u(){function l(m,y){return m.video||y.video?m.video&&y.video?Math.abs((m.video.height||0)-(y.video.height||0))+Math.abs((m.video.width||0)-(y.video.width||0)):1/0:0}var c=a.l.l;a.M=a.g.adaptationSetCriteriaFactory(),a.M.configure({language:e,role:t||"",channelCount:n||0,zc:"",spatialAudio:o||!1,videoLayout:"",Fc:s||"",zd:"",codecSwitchingStrategy:a.g.mediaSource.codecSwitchingStrategy,audioCodec:r||"",Cd:c.audio&&c.audio.codecs?c.audio.codecs:"",De:c.audio&&c.audio.channelsCount?c.audio.channelsCount:0,preferredAudioCodecs:a.g.preferredAudioCodecs,preferredAudioChannelCount:a.g.preferredAudioChannelCount});var f=a.M.create(a.i.variants),p=null;f=g(f.values());for(var h=f.next();!h.done;h=f.next())h=h.value,ss(h)&&(!p||l(p,c)>l(h,c))&&(p=h);p!=c&&(p?(c=hr(p),a.Af(c,!0,i||0)):kr(a))}var a=this;n=n===void 0?0:n,i=i===void 0?0:i,r=r===void 0?"":r,o=o===void 0?!1:o,s=s===void 0?"":s,!(this.i&&this.F&&(u(),!this.ua()))&&function(){if(a.h&&a.h.audioTracks){var l=Yr(a.Nb(),e,t||"",!1)[0];l&&a.Af(l)}}()},d.bh=function(e,t,n){function i(){r.td=e,r.pe=t||"",r.oe=n||!1;var o=Yr(r.i.textStreams,r.td,r.pe,r.oe)[0]||null;o&&o!=r.l.A&&(Rf(r.A.h,o,!1),r.g.streaming.alwaysStreamText||r.Hg())&&(ga(r.l,o),Dr(r),Ls(r))}var r=this;n=n===void 0?!1:n,!(this.i&&this.F&&(i(),!this.ua()))&&function(){var o=Yr(r.yc(),e,t||"",n||!1)[0];o&&r.dh(o)}()},d.Mk=function(e,t,n){function i(){for(var o=null,s=g(r.i.variants),u=s.next();!u.done;u=s.next())if(u=u.value,u.audio.label==e){o=u;break}o!=null&&(r.M=r.g.adaptationSetCriteriaFactory(),r.M.configure({language:o.language,role:"",channelCount:0,zc:"",spatialAudio:!1,videoLayout:"",zd:"",Fc:e,codecSwitchingStrategy:r.g.mediaSource.codecSwitchingStrategy,audioCodec:"",Cd:"",De:0,preferredAudioCodecs:r.g.preferredAudioCodecs,preferredAudioChannelCount:r.g.preferredAudioChannelCount}),kr(r,t,n))}var r=this;t=t===void 0?!0:t,n=n===void 0?0:n,!(this.i&&this.F&&(i(),!this.ua()))&&function(){if(r.h&&r.h.audioTracks){var o=Array.from(r.h.audioTracks),s=null;o=g(o);for(var u=o.next();!u.done;u=o.next())u=u.value,u.label==e&&(s=u);s&&Yf(r,s)}}()},d.Hg=function(){var e=this.oa;return this.o?this.o.isTextVisible():e},d.tj=function(){return this.ab.map(function(e){return gr(e)})},d.rj=function(e){if(Ae("getChapters","Please use an getChaptersAsync."),!this.ab.length)return[];var t=Ne(e);if(e=this.ab.filter(function(o){return Ne(o.language)==t}),!e.length)return[];var n=[],i=new Set;e=g(e);for(var r=e.next();!r.done;r=e.next())r=r.value,r.segmentIndex&&r.segmentIndex.Cb(function(o){var s=o.O()[0],u=o.startTime+"-"+o.endTime+"-"+s;o={id:u,title:s,startTime:o.startTime,endTime:o.endTime},i.has(u)||(n.push(o),i.add(u))});return n},d.sj=function(e){var t=this,n,i,r,o,s,u,a;return k(function(l){switch(l.g){case 1:if(!t.ab.length)return l.return([]);if(n=Ne(e),i=t.ab.filter(function(c){return Ne(c.language)==n}),!i.length)return l.return([]);r=[],o=new Set,s=g(i),u=s.next();case 2:if(u.done){l.u(4);break}if(a=u.value,a.segmentIndex){l.u(5);break}return T(l,a.createSegmentIndex(),5);case 5:a.segmentIndex.Cb(function(c){var f=c.O()[0],p=c.startTime+"-"+c.endTime+"-"+f;c={id:p,title:f,startTime:c.startTime,endTime:c.endTime},o.has(p)||(r.push(c),o.add(p))}),u=s.next(),l.u(2);break;case 4:return l.return(r)}})};function ba(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function JA(e){return Array.from(e.h.textTracks).find(function(t){return t.label=="Shaka Player TextTrack"})}function ZA(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="metadata"})}d.ih=function(e){e=!!e,this.oa!=e&&(this.oa=e,this.m==Nt?(this.o.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.l.A||(e=Yr(this.i.textStreams,this.td,this.pe,this.oe),0<e.length&&(ga(this.l,e[0]),Dr(this),Ls(this))):Pw(this.l))):this.h&&this.h.src&&this.h.textTracks&&this.o.setTextVisibility(e),Cv(this))},d.Hj=function(){if(this.F)var e=this.F.Ae();else{if(this.N==null)return new Date;if(this.N instanceof Date)return this.N;e=this.N}if(this.i&&!this.ua()){var t=this.i.presentationTimeline;return new Date(1e3*((t.m||t.i)+e))}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},d.Ag=function(){if(this.i&&!this.ua()){var e=this.i.presentationTimeline;return new Date(1e3*(e.m||e.i))}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},d.Ue=function(){return this.V()&&this.i?this.i.presentationTimeline.Ue():null},d.Kb=function(){if(this.m==Nt)return this.I.Kb();var e={total:[],audio:[],video:[],text:[]};return this.m==nn&&(e.total=vi(this.h.buffered)),e},d.Se=function(){if(!this.h||!this.h.currentTime)return null;var e=this.Ag().getTime()+1e3*this.h.currentTime;return Math.floor(Date.now()-e)},d.getStats=function(){if(this.m!=Nt&&this.m!=nn)return{width:NaN,height:NaN,currentCodecs:"",streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};zf(this);var e=this.h,t=e.currentTime/e.duration;if(isNaN(t)||this.V()||oA(this.A,Math.round(100*t)),this.F&&(this.A.S=this.F.Ah(),this.A.U=this.F.Bh()),e.getVideoPlaybackQuality&&(t=e.getVideoPlaybackQuality(),rA(this.A,Number(t.droppedVideoFrames),Number(t.totalVideoFrames)),this.A.M=Number(t.corruptedVideoFrames)),this.A.o=this.C?dS(this.C):NaN,bm(this.A,e.videoWidth||NaN,e.videoHeight||NaN),this.A.l="",this.V()&&this.Ag()!=null&&(e=this.Se()||0,this.A.C=e/1e3),t=this.Nb().find(function(r){return r.active}),e=this.yc().find(function(r){return r.active}),t){if(t.bandwidth){var n=this.K?this.K.i:1,i=n*t.bandwidth;e&&e.bandwidth&&(i+=n*e.bandwidth),this.A.A=i}t.width&&t.height&&bm(this.A,t.width||NaN,t.height||NaN),t=t.codecs,e&&(t+=","+(e.codecs||e.mimeType)),t&&(this.A.l=t)}return this.m!=Nt||this.ua()||(this.i&&(this.A.H=this.i.periodCount,this.A.G=this.i.gapCount,this.i.presentationTimeline&&(this.A.K=this.i.presentationTimeline.h)),e=this.s.getBandwidthEstimate(),this.A.s=e),this.m==nn&&Bm(this.A,NaN),sA(this.A)},d.Dd=function(e,t,n,i,r,o,s){s=s===void 0?!1:s;var u=this,a,l,c,f,p,h,m,y,v,x,S,w;return k(function(A){switch(A.g){case 1:if(u.m!=Nt&&u.m!=nn)throw new C(1,7,7004);if(n!="subtitles"&&n!="captions"&&we("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),i){A.u(2);break}return T(A,Wf(u,e),3);case 3:i=A.h;case 2:if(a=[],u.B&&(a=u.B.getCuePoints()),u.m!=nn){A.u(4);break}return l=ye(),s&&l.Ea()==="WEBKIT"&&(n="forced"),T(A,eE(u,e,t,n,i,o||"",a),5);case 5:if(c=A.h,c.track)return Ot(u),A.return($h(c.track));throw new C(1,2,2012);case 4:if(f=lt,p=u.Sa(),h=p.end-p.start,u.i&&(h=u.i.presentationTimeline.getDuration()),h==1/0)throw new C(1,4,4033);if(!a.length){A.u(6);break}return T(A,Ba(u,e,u.H,u.g.streaming.retryParameters),7);case 7:m=A.h,y=xv(u,m,i,a),v=new Blob([y],{type:"text/vtt"}),e=lf(v),i="text/vtt";case 6:if(x={id:u.re++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:fa(0,h,[e]),mimeType:i||"",codecs:r||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:o||null,type:f.Oa,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!!s,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([it(i||"",r||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},S=it(x.mimeType,x.codecs),w=ts(S),!w)throw new C(2,2,2014,i);return u.i.textStreams.push(x),Ot(u),A.return(gr(x))}})},d.Fe=function(e,t){var n=this,i,r,o,s,u,a,l,c,f,p,h,m,y,v,x,S,w,A;return k(function(D){switch(D.g){case 1:if(n.m!=Nt&&n.m!=nn)throw new C(1,7,7004);if(t){D.u(2);break}return T(D,Wf(n,e),3);case 3:t=D.h;case 2:if(t!="text/vtt")throw new C(1,2,2017,e);if(i=lt,r=n.Sa(),o=r.end-r.start,n.i&&(o=n.i.presentationTimeline.getDuration()),o==1/0)throw new C(1,4,4045);return T(D,Ba(n,e,n.H,n.g.streaming.retryParameters),4);case 4:if(s=D.h,u=es(t),!u)throw new C(2,2,2014,t);for(a=u(),l={periodStart:0,segmentStart:0,segmentEnd:o,vttOffset:0},c=le(s),f=a.parseMedia(c,l,e,[]),p=[],h=g(f),m=h.next(),y={};!m.done;y={Kf:void 0,ed:void 0},m=h.next())y.ed=m.value,y.Kf=null,v=function(I){return function(){return I.Kf==null&&(I.Kf=gt([e],[I.ed.payload])),I.Kf||[]}}(y),x=new Z(y.ed.startTime,y.ed.endTime,v,0,null,null,0,0,1/0),y.ed.payload.includes("#xywh")&&(S=y.ed.payload.split("#xywh=")[1].split(","),S.length===4&&x.Cf({height:parseInt(S[3],10),positionX:parseInt(S[0],10),positionY:parseInt(S[1],10),width:parseInt(S[2],10)})),p.push(x);if(w=t,!p.length){D.u(5);break}return T(D,Cr(p[0].O()[0],n.H,n.g.manifest.retryParameters),6);case 6:w=D.h;case 5:return A={id:n.re++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ie(p),mimeType:w||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:i.Nf,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([it(w||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},n.m==nn?n.xe.push(A):n.i.imageStreams.push(A),Ot(n),D.return(Uc(A))}})},d.Ee=function(e,t,n){var i=this,r,o,s,u,a,l,c,f,p,h,m,y,v,x,S;return k(function(w){switch(w.g){case 1:if(i.m!=Nt&&i.m!=nn)throw new C(1,7,7004);if(n){w.u(2);break}return T(w,Wf(i,e),3);case 3:n=w.h;case 2:if(r=lt,o=i.Sa(),s=o.end-o.start,i.i&&(s=i.i.presentationTimeline.getDuration()),s==1/0)throw new C(1,4,4054);return T(w,Ba(i,e,i.H,i.g.streaming.retryParameters),4);case 4:if(u=w.h,a=es(n),!a)throw new C(2,2,2014,n);for(l=a(),c={periodStart:0,segmentStart:0,segmentEnd:s,vttOffset:0},f=le(u),p=l.parseMedia(f,c,e,[]),h=[],m=g(p),y=m.next(),v={};!y.done;v={Oe:void 0},y=m.next())v.Oe=y.value,x=new Z(v.Oe.startTime,v.Oe.endTime,function(A){return function(){return[A.Oe.payload]}}(v),0,null,null,0,0,1/0),h.push(x);return S={id:i.re++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ie(h),mimeType:"text/plain",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:null,type:r.Oa,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([it("text/plain","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},i.ab.push(S),Ot(i),w.return(gr(S))}})};function Wf(e,t){var n;return k(function(i){switch(i.g){case 1:return ue(i,2),T(i,Cr(t,e.H,e.g.streaming.retryParameters),4);case 4:n=i.h,pe(i,3);break;case 2:ae(i);case 3:if(n)return i.return(n);throw new C(1,2,2011,t)}})}function eE(e,t,n,i,r,o,s){var u,a,l,c;return k(function(f){if(f.g==1)return r!="text/vtt"||s.length?T(f,Ba(e,t,e.H,e.g.streaming.retryParameters),3):f.u(2);f.g!=2&&(u=f.h,a=xv(e,u,r,s),l=new Blob([a],{type:"text/vtt"}),t=lf(l),r="text/vtt"),c=document.createElement("track");var p=e.L,h=t;try{if(p.g.enabled){var m=bf(p);m.ot=Ff,m.su=!0;var y=ka(m),v=Bf(h,y)}else v=h}catch(x){Zi("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",x),v=h}return c.src=v,c.label=o,c.kind=i,c.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(c),e.Rf.push(c),f.return(c)})}function Ba(e,t,n,i){var r,o,s;return k(function(u){if(u.g==1){r=Pn,o=ct([t],i),o.method="GET";var a=e.L;try{a.g.enabled&&To(a,o,{ot:Ff,su:!0})}catch(l){Zi("CMCD_TEXT_ERROR","Could not generate text CMCD data.",l)}return T(u,n.request(r,o).promise,2)}return s=u.h,u.return(s.data)})}function xv(e,t,n,i){var r=es(n);if(r)return n=r(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=le(t),t=n.parseMedia(t,e,null,[]),AA(t,i);throw new C(2,2,2014,n)}d.Sk=function(e,t){this.va.width=e,this.va.height=t},d.Yg=function(e){if(this.m==Nt){var t=this.l;if(e=e===void 0?.1:e,t.m.g)t=!1;else if(t.B)t=!1;else{for(var n=g(t.i.values()),i=n.next();!i.done;i=n.next())i=i.value,!i.Pd||i.Qa||i.yb||(i.Pd=!1,Ut(t,i,e));t=!0}}else t=!1;return t},d.zg=function(){return we("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},d.Dj=function(){return this.mc},d.xj=function(){var e={video:null,audio:null,text:null};if(this.m!=Nt)return e;var t=this.l.l,n=this.h.currentTime;t=g([t.video,t.audio,this.l.A]);for(var i=t.next();!i.done;i=t.next())if((i=i.value)&&i.segmentIndex){var r=i.segmentIndex.find(n);r=i.segmentIndex.get(r),r={codecs:r.codecs||i.codecs,mimeType:r.mimeType||i.mimeType,bandwidth:r.bandwidth||i.bandwidth},i.type=="video"?(r.width=i.width,r.height=i.height,e.video=r):i.type=="audio"?e.audio=r:i.type==he&&(e.text=r)}return e};function Kn(e){var t=vo();return t.streaming.failureCallback=function(n){if(e.V()){var i=null;n.code==1001||n.code==1002?(i=1,e.g.streaming.lowLatencyMode&&(i=.1)):n.code==1003&&(i=.1),i!=null&&(n.severity=1,e.Yg(i))}},t.textDisplayFactory=function(){var n=ye();return e.se&&(document.fullscreenEnabled||n.Ea()!=="WEBKIT")?new Dt(e.h,e.se):"track"in document.createElement("track")?new ft(e):new kt},t}d.Li=function(e){this.se=e};function tE(e,t){for(var n=new Set,i=g(t.textStreams),r=i.next();!r.done;r=i.next())r=r.value,r.mimeType!="application/cea-608"&&r.mimeType!="application/cea-708"||n.add(r.originalId);for(i=g(t.variants),r=i.next();!r.done;r=i.next())if((r=r.value.video)&&r.closedCaptions){for(var o=g(r.closedCaptions.keys()),s=o.next();!s.done;s=o.next())if(s=s.value,!n.has(s)){var u=s.startsWith("CC")?"application/cea-608":"application/cea-708",a=new Je,l=r.closedCaptions.get(s);u={id:e.re++,originalId:s,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:a,mimeType:u,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:l,originalLanguage:l,label:null,type:he,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:r.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([it(u,"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},t.textStreams.push(u),n.add(s)}}}function nE(e,t){var n,i,r,o,s;return k(function(u){return u.g==1?(n=e.audio,i=e.video,r=function(a,l){var c,f,p;return k(function(h){return h.g==1?a?a.segmentIndex?h.u(2):T(h,a.createSegmentIndex(),2):h.return(null):(f=(c=a.segmentIndex.Ub(l))?c.next().value:null,f?(p=f.startTime,h.return(p)):h.return(null))})},T(u,r(n,t),2)):u.g!=3?(o=u.h,T(u,r(i,t),3)):(s=u.h,s!=null&&o!=null?u.return(Math.max(s,o)):s!=null?u.return(s):o!=null?u.return(o):u.return(t))})}function Fa(e){var t=e.Gg();if(e.A&&e.P&&e.F){if(e.g.streaming.rebufferingGoal==0){var n=e.K;n.j=!1,df(n)}else n=e.K,n.j=t,df(n);if(e.L&&(n=e.L,t||n.s||(n.s=!0),n.s&&t&&(n.B=!0),n.F=t),zf(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.Ce<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var i=e.g.streaming.liveSync.targetLatencyTolerance,r=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.U&&(e.U=Math.min(e.U+ ++e.Ce*r,n-i))}}t=new Map().set("buffering",t),e.dispatchEvent(_e("buffering",t))}function Sv(e,t){e.Yb.Ra(),e.Yb.D(e.h,"timeupdate",function(){var n=e.h.currentTime,i=e.Sa(),r=e.V()?e.g.streaming.safeSeekOffset:0;0<t?Math.floor(n)>=Math.floor(i.end)&&e.Ed():Math.floor(n)<=Math.floor(i.start+r)&&e.Ed()})}function zf(e){if(e.A&&e.P){var t=e.A.g,n="playing";e.P.g==eo?n="buffering":e.Td()?n="ended":e.h.paused&&(n="paused");var i=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:i,duration:0},t=!0;else{var r=Date.now()/1e3;t.g.duration=r-t.g.timestamp,t.g.state==i?t=!1:(t.h.push(t.g),t.g={timestamp:r,state:i,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(_e("statechanged",n)))}}function wv(e){var t=e.h.playbackRate,n=e.V();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var i=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,r=e.Rh();r<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=i&&e.ge(i,!1):r==1&&t!==e.K.Lc()&&e.Ed()}if(n&&(n=e.Sa(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start||e.h.paused))){i=e.g.streaming.liveSync.targetLatencyTolerance,r=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var o=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var s=e.g.streaming.liveSync.targetLatency,u=s+i,a=Math.max(0,s-i),l=e.g.streaming.liveSync.maxPlaybackRate,c=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(s=e.i.serviceDescription.targetLatency,e.i.serviceDescription.targetLatency!=null?u=e.i.serviceDescription.targetLatency+i:e.i.serviceDescription.maxLatency!=null&&(u=e.i.serviceDescription.maxLatency),e.i.serviceDescription.targetLatency!=null?a=Math.max(0,e.i.serviceDescription.targetLatency-i):e.i.serviceDescription.minLatency!=null&&(a=e.i.serviceDescription.minLatency),l=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,c=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.U||typeof s!="number"||(e.U=s);var f=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;r&&e.Xb&&e.U!==null&&typeof s=="number"&&e.Ce<f&&Date.now()-e.Xb>1e3*o&&(o=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.U=Math.max(e.U-(s-o)/2,o+i),e.Xb=Date.now()),r&&e.U!==null&&(u=e.U+i,a=e.U-i),s=n.end-e.h.currentTime,i=0,e.m==nn&&(r=e.h.buffered,0<r.length&&(i=r.end(r.length-1),i=Math.max(l,i-n.end))),n=e.g.streaming.liveSync.panicMode,r=1e3*e.g.streaming.liveSync.panicThreshold,o=Date.now()-e.P.h,n&&!c&&(c=e.g.streaming.liveSync.minPlaybackRate),n&&c&&o<=r?t!=c&&e.ge(c,!1):u!=null&&l&&s-i>u?(t!=l&&e.ge(l,!1),e.Xb=null):a!=null&&c&&s-i<a?(t!=c&&e.ge(c,!1),e.Xb=null):t!==e.K.Lc()&&(e.Ed(),e.Xb=Date.now())}}function Va(e){if(e.h){var t=function(r,o){var s=s===void 0?Number.EPSILON:s;if(r===o)s=!0;else{var u=Math.abs(r-o);s=u<=s?!0:s!==Number.EPSILON?Math.abs(u-s)<=Number.EPSILON:!1}return(s||o>r)&&e.Qf<r?(e.Qf=r,!0):!1},n=e.Sa();if(n=n.end-n.start,n=0<n?e.h.currentTime/n:0,!isNaN(n)){if(n*=100,t(0,n))var i=_e("started");else t(25,n)?i=_e("firstquartile"):t(50,n)?i=_e("midpoint"):t(75,n)?i=_e("thirdquartile"):((t(100,n)||100<n)&&(i=_e("complete")),e.g&&e.g.playRangeEnd!=1/0&&e.Td()&&e.h.pause());i&&e.dispatchEvent(i)}}}function Si(e){try{Og(e.qe,e.i)}catch(n){return So(e,n),!1}var t=_u(e.i.variants);return t=e.M.create(t),e.s.setVariants(Array.from(t.values())),!0}function kr(e,t,n,i,r){t=t===void 0?!0:t,n=n===void 0?0:n,i=i===void 0?!1:i,r=r===void 0?!0:r;var o;(o=Si(e)?e.s.chooseVariant():null)&&Ps(e,o,r,t,n,i)}function Ps(e,t,n,i,r,o){o=o===void 0?!1:o;var s=e.l.l;if(t==s)i&&Lm(e.l,t,i,r,!0);else{var u=e.A.h;if(u.h!=t&&(u.h=t,u.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),Lm(e.l,t,i,r,o,n),i=null,s&&(i=hr(s)),s=hr(t),s.active=!0,e.S&&(r=e.S,t=t.video)){switch(t.dependencyStream&&(t=t.dependencyStream),o=0,u=-1,t.mimeType){case"video/webm":o=1;break;case"video/mp4":o=2}switch(e.Th()){case"DASH":u=1;break;case"HLS":u=0}r.g&&(r.g.setLevelSwitching(t.id,!0),r.g.setContainerFormat(o),r.j||r.g.setStreamingFormat(u))}n?(n=new Map().set("oldTrack",i).set("newTrack",s),n=_e("adaptation",n),Rr(e,n)):Ev(e,i,s),Iv(e,i,s)}}function Yf(e,t){var n=Array.from(e.h.audioTracks).find(function(r){return r.enabled});if(t.enabled=!0,n){t.id!==n.id&&(n.enabled=!1);var i=Av(e);n=Ou(n,i),t=Ou(t,i),Ev(e,n,t),Iv(e,n,t)}}function Av(e){return e.h&&e.h.videoTracks?Array.from(e.h.videoTracks).find(function(t){return t.selected}):null}function Ot(e){var t=_e("trackschanged");Rr(e,t),Mv(e)}function Ev(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),t=_e("variantchanged",t),Rr(e,t)}function Iv(e,t,n){var i=!1;t&&t.audioId==n.audioId&&t.audioGroupId==n.audioGroupId||(i=!0),i&&Mv(e)}function Mv(e){var t=_e("audiotrackschanged");Rr(e,t)}function Dr(e){var t=_e("textchanged");Rr(e,t)}function Cv(e){var t=_e("texttrackvisibility");Rr(e,t)}function kv(e){e.g.abr.enabled||qf(e);var t=new Map().set("newStatus",e.g.abr.enabled);Rr(e,_e("abrstatuschanged",t))}function Ls(e){var t=e.yc().find(function(n){return n.active});t&&e.o&&e.o.setTextLanguage&&e.o.setTextLanguage(t.language)}function qf(e,t){if(t=t===void 0?!0:t,e.m==Nt){e.ue.stop();for(var n=g(e.i.variants),i=n.next();!i.done;i=n.next())i.value.disabledUntilTime=0;t&&Si(e)}}d.disableStream=function(e,t){if(!this.g.abr.enabled||this.m===Ln||!navigator.onLine||t==0||!this.i)return!1;if(this.i.variants.some(function(u){var a=u[e.type];return a&&a.id!==e.id&&!u.disabledUntilTime?e.type=="audio"?e.language===a.language:!0:!1})){for(var n=!1,i=!1,r=g(this.i.variants),o=r.next();!o.done;o=r.next()){o=o.value;var s=o[e.type];s&&(s.id===e.id?(o.disabledUntilTime=Date.now()/1e3+t,n=!0):s.trickModeVideo&&s.trickModeVideo.id==e.id&&(i=!0))}return!n&&i?!1:(this.ue.Ga(1),t=this.Kb().video.reduce(function(u,a){return u+a.end-a.start},0),kr(this,!1,t,!0,!1),!0)}return!1};function So(e,t){var n,i,r,o,s;return k(function(u){switch(u.g){case 1:if(e.m==Ln)return u.return();if(t.severity===1&&e.A.L++,n=!0,!(e.Ka&&e.i&&e.l)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3024&&t.code!=3018){u.u(2);break}return i=ye(),i.Ea()==="WEBKIT"&&t.code==3016?u.return():(ue(u,3),T(u,Ta(e.l),5));case 5:r=u.h,n=!r,r&&(o=_e("mediasourcerecovered"),e.dispatchEvent(o)),pe(u,2);break;case 3:ae(u),n=!0;case 2:if(!n)return u.return();t.severity===2&&qf(e,!1),s=_e("error",new Map().set("detail",t)),e.dispatchEvent(s),s.defaultPrevented&&(t.handled=!0),K(u)}})}d.addFont=function(e,t){return zS(e,t)};function Ns(e,t,n,i){i=i===void 0?e:i,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,timescale:n.timescale,eventElement:n.eventElement,eventNode:n.eventNode}),i.dispatchEvent(_e(t,e))}function Dv(e,t,n,i){i=i===void 0?!1:i,t=new Map().set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent(_e(i?"audiotrackchanged":"mediaqualitychanged",t))}function $f(e,t){if(t=t===void 0?!0:t,!e.h.error)return t?new C(2,3,3016):null;var n=e.h.error.code;return!t&&n==1?null:((t=e.h.error.msExtendedCode)&&(0>t&&(t+=Math.pow(2,32)),t=t.toString(16)),new C(2,3,3016,n,t,e.h.error.message))}function Qf(e,t,n){0<t&&(e.V()||e.Ki(t)),t=e.getDuration(),n<t&&(e.V()||e.ob(n))}function Rr(e,t){k(function(n){if(n.g==1)return T(n,Promise.resolve(),2);e.m!=Ln&&e.dispatchEvent(t),K(n)})}function Rv(e){var t=new Set;e=g(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(Ne(n.language)):t.add("und");return t}function Pv(e){for(var t=new Map,n=new Map,i=0;i<e.length;i++){var r=e[i],o="und",s=[];r.language&&(o=Ne(r.language)),r.type=="variant"?s=r.audioRoles:s=r.roles,s&&s.length||(s=[""]),t.has(o)||t.set(o,new Set),s=g(s);for(var u=s.next();!u.done;u=s.next())u=u.value,t.get(o).add(u),r.label&&(n.has(o)||n.set(o,new Map),n.get(o).set(u,r.label))}var a=[];return t.forEach(function(l,c){l=g(l);for(var f=l.next();!f.done;f=l.next()){f=f.value;var p=null;n.has(c)&&n.get(c).has(f)&&(p=n.get(c).get(f)),a.push({language:c,role:f,label:p})}}),a}d.ua=function(){return this.h&&this.h.remote?this.h.remote.state!="disconnected":!1},d.Td=function(){return!this.h||this.h.ended?!0:this.Ka&&!this.V()&&this.h.currentTime>=this.Sa().end},W("shaka.Player",b),b.prototype.isEnded=b.prototype.Td,b.prototype.isRemotePlayback=b.prototype.ua,b.prototype.addFont=b.prototype.addFont,b.prototype.setVideoContainer=b.prototype.Li,b.prototype.getFetchedPlaybackInfo=b.prototype.xj,b.prototype.getManifestParserFactory=b.prototype.Dj,b.prototype.getManifest=b.prototype.zg,b.prototype.retryStreaming=b.prototype.Yg,b.prototype.setMaxHardwareResolution=b.prototype.Sk,b.prototype.addChaptersTrack=b.prototype.Ee,b.prototype.addThumbnailsTrack=b.prototype.Fe,b.prototype.addTextTrackAsync=b.prototype.Dd,b.prototype.getStats=b.prototype.getStats,b.prototype.getBufferedInfo=b.prototype.Kb,b.prototype.getSegmentAvailabilityDuration=b.prototype.Ue,b.prototype.getPresentationStartTimeAsDate=b.prototype.Ag,b.prototype.getPlayheadTimeAsDate=b.prototype.Hj,b.prototype.setTextTrackVisibility=b.prototype.ih,b.prototype.getChaptersAsync=b.prototype.sj,b.prototype.getChapters=b.prototype.rj,b.prototype.getChaptersTracks=b.prototype.tj,b.prototype.isTextTrackVisible=b.prototype.Hg,b.prototype.selectVariantsByLabel=b.prototype.Mk,b.prototype.selectTextLanguage=b.prototype.bh,b.prototype.selectAudioLanguage=b.prototype.Ei,b.prototype.getTextLanguages=b.prototype.Nj,b.prototype.getAudioLanguages=b.prototype.oj,b.prototype.getTextLanguagesAndRoles=b.prototype.Oj,b.prototype.getAudioLanguagesAndRoles=b.prototype.pj,b.prototype.getVideoTracks=b.prototype.getVideoTracks,b.prototype.selectVideoTrack=b.prototype.Nk,b.prototype.getAudioTracks=b.prototype.getAudioTracks,b.prototype.selectAudioTrack=b.prototype.Lk,b.prototype.selectVariantTrack=b.prototype.Af,b.prototype.selectTextTrack=b.prototype.dh,b.prototype.getThumbnails=b.prototype.Qj,b.prototype.getAllThumbnails=b.prototype.nj,b.prototype.getImageTracks=b.prototype.zj,b.prototype.getTextTracks=b.prototype.yc,b.prototype.getVariantTracks=b.prototype.Nb,b.prototype.cancelTrickPlay=b.prototype.Ed,b.prototype.trickPlay=b.prototype.ge,b.prototype.useTrickPlayTrackIfAvailable=b.prototype.yh,b.prototype.getPlaybackRate=b.prototype.sb,b.prototype.isBuffering=b.prototype.Gg,b.prototype.getKeyStatuses=b.prototype.Re,b.prototype.getActiveSessionsMetadata=b.prototype.yg,b.prototype.getExpiration=b.prototype.Md,b.prototype.drmInfo=b.prototype.drmInfo,b.prototype.keySystem=b.prototype.keySystem,b.prototype.isFullyLoaded=b.prototype.$j,b.prototype.goToLive=b.prototype.Wj,b.prototype.seekRange=b.prototype.Sa,b.prototype.isVideoOnly=b.prototype.gk,b.prototype.isAudioOnly=b.prototype.Zj,b.prototype.isInProgress=b.prototype.Pc,b.prototype.isLive=b.prototype.V,b.prototype.getQueueManager=b.prototype.Wh,b.prototype.getAdManager=b.prototype.Qh,b.prototype.getAssetUri=b.prototype.jd,b.prototype.getNetworkingEngine=b.prototype.Mb,b.prototype.getMediaElement=b.prototype.Gj,b.prototype.getManifestType=b.prototype.Th,b.prototype.getLoadMode=b.prototype.Cj,b.prototype.resetConfiguration=b.prototype.zi,b.prototype.getBufferFullness=b.prototype.Rh,b.prototype.getNonDefaultConfiguration=b.prototype.Vh,b.prototype.getConfigurationForLowLatency=b.prototype.uj,b.prototype.getConfiguration=b.prototype.getConfiguration,b.prototype.configurationForLowLatency=b.prototype.kj,b.prototype.configure=b.prototype.configure,b.prototype.releaseAllMutexes=b.prototype.Dk,b.prototype.destroyAllPreloads=b.prototype.hg,b.prototype.preload=b.prototype.preload,b.prototype.detachAndSavePreload=b.prototype.Mh,b.prototype.unloadAndSavePreload=b.prototype.Vk,b.prototype.load=b.prototype.load,b.prototype.updateStartTime=b.prototype.Zk,b.prototype.unload=b.prototype.rc,b.prototype.detach=b.prototype.detach,b.prototype.attachCanvas=b.prototype.cj,b.prototype.attach=b.prototype.cc,b.probeSupport=function(e){e=e===void 0?!0:e;var t,n,i,r,o,s,u;return k(function(a){switch(a.g){case 1:if(t={},!e){a.u(2);break}return T(a,yS(),3);case 3:t=a.h;case 2:return n=CS(),i=ew(),r=ye(),T(a,r.ec(),4);case 4:return o=a.h,s={manifest:n,media:i,drm:t,hardwareResolution:o},u=Nv,u.forEach(function(l,c){s[c]=l()}),a.return(s)}})},b.isBrowserSupported=function(){return B.Promise||we("A Promise implementation or polyfill is required"),!(B.Promise&&B.Uint8Array&&Array.prototype.forEach)||(navigator.userAgent||"").includes("Trident/")?!1:(ye(),Zn()?!0:wr().canPlayType("application/x-mpegurl")!="")},b.setQueueManagerFactory=function(e){Ka=e},b.setAdManagerFactory=function(e){Ga=e},b.registerSupportPlugin=ov,b.prototype.destroy=b.prototype.destroy;var Ln=0,Ha=1,Nt=2,nn=3;b.LoadMode={DESTROYED:Ln,NOT_LOADED:Ha,MEDIA_SOURCE:Nt,SRC_EQUALS:nn},b.version="v4.15.2";var Lv=["4","15"];lh=new function(e){this.g=e,this.i=Ex,this.h=Ix}(new uc(Number(Lv[0]),Number(Lv[1])));var Nv=new Map,Ga=null,Ka=null;function jv(){this.g=[],this.i=this.m=this.l=this.j=this.h=0}function iE(e){return e.g.length?e.g.reduce(function(t,n){return t+n},0)/e.g.length:0}function ee(e,t,n){var i=this;this.g=e,this.h=t,this.m=n,this.i=!1,this.j=this.h.getVolume(),this.l=new Ce,this.l.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){i.i=!0}),this.l.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){i.i=!1})}d=ee.prototype,d.needsSkipUI=function(){return!1},d.isClientRendering=function(){return!0},d.hasCustomClick=function(){return!0},d.isUsingAnotherMediaElement=function(){return!0},d.getDuration=function(){return this.g.getDuration()},d.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},d.getRemainingTime=function(){return this.h.getRemainingTime()},d.isPaused=function(){return this.i},d.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},d.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},d.canSkipNow=function(){return this.h.getAdSkippableState()},d.skip=function(){return this.h.skip()},d.pause=function(){return this.h.pause()},d.play=function(){return this.h.resume()},d.getVolume=function(){return this.h.getVolume()},d.setVolume=function(e){return this.m.volume=e,this.h.setVolume(e)},d.isMuted=function(){return this.h.getVolume()==0},d.isLinear=function(){return this.g.isLinear()},d.resize=function(e,t){this.h.resize(e,t)},d.setMuted=function(e){(this.m.muted=e)?(this.j=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.j)},d.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},d.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},d.getTitle=function(){return this.g.getTitle()},d.getDescription=function(){return this.g.getDescription()},d.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},d.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},d.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},d.getVastAdId=function(){return""},d.getAdId=function(){return this.g.getAdId()},d.getCreativeAdId=function(){return this.g.getCreativeAdId()},d.getAdvertiserName=function(){return this.g.getAdvertiserName()},d.getMediaUrl=function(){return this.g.getMediaUrl()},d.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},d.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},d.release=function(){this.h=this.g=null},W("shaka.ads.ClientSideAd",ee),ee.prototype.release=ee.prototype.release,ee.prototype.getPodIndex=ee.prototype.getPodIndex,ee.prototype.getTimeOffset=ee.prototype.getTimeOffset,ee.prototype.getMediaUrl=ee.prototype.getMediaUrl,ee.prototype.getAdvertiserName=ee.prototype.getAdvertiserName,ee.prototype.getCreativeAdId=ee.prototype.getCreativeAdId,ee.prototype.getAdId=ee.prototype.getAdId,ee.prototype.getVastAdId=ee.prototype.getVastAdId,ee.prototype.getVastMediaWidth=ee.prototype.getVastMediaWidth,ee.prototype.getVastMediaHeight=ee.prototype.getVastMediaHeight,ee.prototype.getVastMediaBitrate=ee.prototype.getVastMediaBitrate,ee.prototype.getDescription=ee.prototype.getDescription,ee.prototype.getTitle=ee.prototype.getTitle,ee.prototype.getPositionInSequence=ee.prototype.getPositionInSequence,ee.prototype.getSequenceLength=ee.prototype.getSequenceLength,ee.prototype.setMuted=ee.prototype.setMuted,ee.prototype.resize=ee.prototype.resize,ee.prototype.isLinear=ee.prototype.isLinear,ee.prototype.isMuted=ee.prototype.isMuted,ee.prototype.setVolume=ee.prototype.setVolume,ee.prototype.getVolume=ee.prototype.getVolume,ee.prototype.play=ee.prototype.play,ee.prototype.pause=ee.prototype.pause,ee.prototype.skip=ee.prototype.skip,ee.prototype.canSkipNow=ee.prototype.canSkipNow,ee.prototype.getTimeUntilSkippable=ee.prototype.getTimeUntilSkippable,ee.prototype.isSkippable=ee.prototype.isSkippable,ee.prototype.isPaused=ee.prototype.isPaused,ee.prototype.getRemainingTime=ee.prototype.getRemainingTime,ee.prototype.getMinSuggestedDuration=ee.prototype.getMinSuggestedDuration,ee.prototype.getDuration=ee.prototype.getDuration,ee.prototype.isUsingAnotherMediaElement=ee.prototype.isUsingAnotherMediaElement,ee.prototype.hasCustomClick=ee.prototype.hasCustomClick,ee.prototype.isClientRendering=ee.prototype.isClientRendering,ee.prototype.needsSkipUI=ee.prototype.needsSkipUI;function Ke(){}function Uv(e,t){var n=[];e=g(Pe(e,"Ad"));for(var i=e.next();!i.done;i=e.next())if((i=Ye(i.value,"InLine"))&&(i=Ye(i,"Creatives"))){i=g(Pe(i,"Creative"));for(var r=i.next();!r.done;r=i.next()){r=r.value;var o=Ye(r,"Linear");if(o&&rE(n,t,o),r=Ye(r,"NonLinearAds")){r=Pe(r,"NonLinear"),r=g(r);for(var s=r.next();!s.done;s=r.next())e:{o=n;var u=t,a=s.value,l=Ye(a,"StaticResource");if(l)s=l.attributes.creativeType;else{if(l=Ye(a,"HTMLResource"),!l)break e;s="text/html"}if(l=$t(l)){s==="text/html"&&(l="data:text/html;charset=UTF-8,"+encodeURIComponent(l));var c=se(a,"width",yt)||se(a,"expandedWidth",yt),f=se(a,"height",yt)||se(a,"expandedHeight",yt);if(c||f){var p=null;(a=a.attributes.minSuggestedDuration)&&(p=Kr(a)),a=0,u!=null&&(a=u),o.push({id:null,groupId:null,startTime:a,endTime:null,uri:l,mimeType:s,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:p,once:!0,pre:u==null,post:u==1/0,timelineRange:!1,loop:!1,overlay:{viewport:{x:0,y:0},topLeft:{x:0,y:0},size:{x:c||0,y:f||0}},displayOnBackground:!1,currentVideo:null,background:null})}}}}}}return n}function rE(e,t,n){var i=0;t!=null&&(i=t);var r=null;if(n.attributes.skipoffset&&(r=Kr(n.attributes.skipoffset),isNaN(r)&&(r=null)),n=Ye(n,"MediaFiles")){var o=Pe(n,"MediaFile");for(n=o,o=o.filter(function(u){return u.attributes.delivery=="streaming"}),o.length&&(n=o),n=n.sort(function(u,a){return(parseInt(a.attributes.height,10)||0)-(parseInt(u.attributes.height,10)||0)}),n=g(n),o=n.next();!o.done;o=n.next())if(o=o.value,!o.attributes.apiFramework){var s=$t(o);if(s){e.push({id:null,groupId:null,startTime:i,endTime:null,uri:s,mimeType:o.attributes.type||null,isSkippable:r!=null,skipOffset:r,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:null,once:!0,pre:t==null,post:t==1/0,timelineRange:!1,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null});break}}}}W("shaka.ads.Utils",Ke),Ke.ADS_LOADED="ads-loaded",Ke.AD_STARTED="ad-started",Ke.AD_FIRST_QUARTILE="ad-first-quartile",Ke.AD_MIDPOINT="ad-midpoint",Ke.AD_THIRD_QUARTILE="ad-third-quartile",Ke.AD_COMPLETE="ad-complete",Ke.AD_STOPPED="ad-stopped",Ke.AD_SKIPPED="ad-skipped",Ke.AD_VOLUME_CHANGED="ad-volume-changed",Ke.AD_MUTED="ad-muted",Ke.AD_PAUSED="ad-paused",Ke.AD_RESUMED="ad-resumed",Ke.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Ke.CUEPOINTS_CHANGED="ad-cue-points-changed",Ke.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Ke.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Ke.AD_CLICKED="ad-clicked",Ke.AD_PROGRESS="ad-progress",Ke.AD_BUFFERING="ad-buffering",Ke.AD_IMPRESSION="ad-impression",Ke.AD_DURATION_CHANGED="ad-duration-changed",Ke.AD_CLOSED="ad-closed",Ke.AD_LOADED="ad-loaded",Ke.ALL_ADS_COMPLETED="all-ads-completed",Ke.AD_LINEAR_CHANGED="ad-linear-changed",Ke.AD_METADATA="ad-metadata",Ke.AD_RECOVERABLE_ERROR="ad-recoverable-error",Ke.AD_ERROR="ad-error",Ke.AD_BREAK_READY="ad-break-ready",Ke.AD_INTERACTION="ad-interaction",Ke.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",Ke.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",Ke.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested";function Xa(e,t,n,i,r){var o=this;this.s=e,this.i=t,this.F=!1,this.A=this.o=null,this.G=NaN,this.l=r,this.j=null,this.h=new Ce,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.C=new google.ima.AdDisplayContainer(this.s,this.i),this.C.initialize(),this.m=new google.ima.AdsLoader(this.C),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.15.2"),this.g=null,this.B=i||new google.ima.AdsRenderingSettings,this.h.D(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(s){oE(o,s)}),this.h.D(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(s){Ov(o,s)}),this.h.D(this.i,"ended",function(){o.m.contentComplete()}),this.h.za(this.i,"play",function(){o.F=!0})}Xa.prototype.configure=function(e){this.o=e},Xa.prototype.stop=function(){this.g&&this.g.stop(),this.s&&ms(this.s)},Xa.prototype.release=function(){this.stop(),this.A&&this.A.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.C.destroy()};function Ov(e,t){t.getError(),t=new Map().set("originalEvent",t),e.l(new G("ad-error",t)),Wa(e,null),e.l(new G("ad-cue-points-changed",new Map().set("cuepoints",[])))}function oE(e,t){if(e.l(new G("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.G))),e.o.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.B),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.B);e.l(new G("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var i=e.g.getCuePoints();if(i.length){t=[],i=g(i);for(var r=i.next();!r.done;r=i.next())t.push({start:r.value,end:null});e.l(new G("ad-cue-points-changed",new Map().set("cuepoints",t)))}sE(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight)}),"ResizeObserver"in B?(e.A=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight)}),e.A.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight)}),e.F||e.o.skipPlayDetection?e.g.start():e.h.za(e.i,"play",function(){e.F=!0,e.g.start()})}catch{Wa(e,null)}}function sE(e){function t(n,i){n=new Map().set("originalEvent",n),e.l(new G(i,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){Ov(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){_v(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){_v(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){Wa(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){Wa(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function _v(e,t){var n=t.getAd();n?(e.j=new ee(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.o.supportsMultipleMediaElements||e.l(new G("ad-content-pause-requested")),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new G("ad-started",t)),e.j.isLinear()&&(e.s.setAttribute("ad-active","true"),e.o.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.j=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):we("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function Wa(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.o.supportsMultipleMediaElements&&e.l(new G("ad-content-resume-requested")),e.l(new G("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.s.removeAttribute("ad-active"),e.o.customPlayheadTracker||e.i.ended||e.i.play())}function te(e,t,n,i,r,o){this.g=e,this.i=t,this.j=(this.h=t.isSkippable)?t.skipOffset||0:t.skipOffset,this.l=t.skipFor,this.A=n,this.o=i,this.m=r,this.s=o,this.B=t.overlay}d=te.prototype,d.needsSkipUI=function(){return!0},d.isClientRendering=function(){return!0},d.hasCustomClick=function(){return!1},d.isUsingAnotherMediaElement=function(){return this.s},d.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},d.getMinSuggestedDuration=function(){return this.getDuration()},d.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},d.isPaused=function(){return this.g.paused},d.isSkippable=function(){return this.h&&this.l!=null?this.getDuration()-this.getRemainingTime()<this.j+this.l:this.h},d.getTimeUntilSkippable=function(){if(this.isSkippable()){var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)}return Math.max(this.getRemainingTime(),0)},d.canSkipNow=function(){return this.h&&this.getTimeUntilSkippable()==0},d.skip=function(){this.canSkipNow()&&this.A()},d.pause=function(){return this.g.pause()},d.play=function(){return this.g.play()},d.getVolume=function(){return this.g.volume},d.setVolume=function(e){this.g.volume=e},d.isMuted=function(){return this.g.muted},d.isLinear=function(){return this.B==null},d.resize=function(){},d.setMuted=function(e){this.g.muted=e},d.getSequenceLength=function(){return this.o},d.getPositionInSequence=function(){return this.m},d.getTitle=function(){return""},d.getDescription=function(){return""},d.getVastMediaBitrate=function(){return 0},d.getVastMediaHeight=function(){return 0},d.getVastMediaWidth=function(){return 0},d.getVastAdId=function(){return""},d.getAdId=function(){return this.i.id||""},d.getCreativeAdId=function(){return""},d.getAdvertiserName=function(){return""},d.getMediaUrl=function(){return this.i.uri},d.getTimeOffset=function(){return 0},d.getPodIndex=function(){return 0},d.release=function(){this.g=null},W("shaka.ads.InterstitialAd",te),te.prototype.release=te.prototype.release,te.prototype.getPodIndex=te.prototype.getPodIndex,te.prototype.getTimeOffset=te.prototype.getTimeOffset,te.prototype.getMediaUrl=te.prototype.getMediaUrl,te.prototype.getAdvertiserName=te.prototype.getAdvertiserName,te.prototype.getCreativeAdId=te.prototype.getCreativeAdId,te.prototype.getAdId=te.prototype.getAdId,te.prototype.getVastAdId=te.prototype.getVastAdId,te.prototype.getVastMediaWidth=te.prototype.getVastMediaWidth,te.prototype.getVastMediaHeight=te.prototype.getVastMediaHeight,te.prototype.getVastMediaBitrate=te.prototype.getVastMediaBitrate,te.prototype.getDescription=te.prototype.getDescription,te.prototype.getTitle=te.prototype.getTitle,te.prototype.getPositionInSequence=te.prototype.getPositionInSequence,te.prototype.getSequenceLength=te.prototype.getSequenceLength,te.prototype.setMuted=te.prototype.setMuted,te.prototype.resize=te.prototype.resize,te.prototype.isLinear=te.prototype.isLinear,te.prototype.isMuted=te.prototype.isMuted,te.prototype.setVolume=te.prototype.setVolume,te.prototype.getVolume=te.prototype.getVolume,te.prototype.play=te.prototype.play,te.prototype.pause=te.prototype.pause,te.prototype.skip=te.prototype.skip,te.prototype.canSkipNow=te.prototype.canSkipNow,te.prototype.getTimeUntilSkippable=te.prototype.getTimeUntilSkippable,te.prototype.isSkippable=te.prototype.isSkippable,te.prototype.isPaused=te.prototype.isPaused,te.prototype.getRemainingTime=te.prototype.getRemainingTime,te.prototype.getMinSuggestedDuration=te.prototype.getMinSuggestedDuration,te.prototype.getDuration=te.prototype.getDuration,te.prototype.isUsingAnotherMediaElement=te.prototype.isUsingAnotherMediaElement,te.prototype.hasCustomClick=te.prototype.hasCustomClick,te.prototype.isClientRendering=te.prototype.isClientRendering,te.prototype.needsSkipUI=te.prototype.needsSkipUI;function ne(e,t,n){this.g=e,this.j=t,this.h=n,this.i=e.overlay==null}d=ne.prototype,d.needsSkipUI=function(){return!0},d.isClientRendering=function(){return!0},d.hasCustomClick=function(){return!1},d.isUsingAnotherMediaElement=function(){return!1},d.getDuration=function(){return-1},d.getMinSuggestedDuration=function(){return this.getDuration()},d.getRemainingTime=function(){return-1},d.isPaused=function(){return!1},d.isSkippable=function(){return!1},d.getTimeUntilSkippable=function(){return 0},d.canSkipNow=function(){return!1},d.skip=function(){},d.pause=function(){},d.play=function(){},d.getVolume=function(){return 1},d.setVolume=function(){},d.isMuted=function(){return!1},d.isLinear=function(){return this.i},d.resize=function(){},d.setMuted=function(){},d.getSequenceLength=function(){return this.j},d.getPositionInSequence=function(){return this.h},d.getTitle=function(){return""},d.getDescription=function(){return""},d.getVastMediaBitrate=function(){return 0},d.getVastMediaHeight=function(){return 0},d.getVastMediaWidth=function(){return 0},d.getVastAdId=function(){return""},d.getAdId=function(){return this.g.id||""},d.getCreativeAdId=function(){return""},d.getAdvertiserName=function(){return""},d.getMediaUrl=function(){return this.g.uri},d.getTimeOffset=function(){return 0},d.getPodIndex=function(){return 0},d.release=function(){},W("shaka.ads.InterstitialStaticAd",ne),ne.prototype.release=ne.prototype.release,ne.prototype.getPodIndex=ne.prototype.getPodIndex,ne.prototype.getTimeOffset=ne.prototype.getTimeOffset,ne.prototype.getMediaUrl=ne.prototype.getMediaUrl,ne.prototype.getAdvertiserName=ne.prototype.getAdvertiserName,ne.prototype.getCreativeAdId=ne.prototype.getCreativeAdId,ne.prototype.getAdId=ne.prototype.getAdId,ne.prototype.getVastAdId=ne.prototype.getVastAdId,ne.prototype.getVastMediaWidth=ne.prototype.getVastMediaWidth,ne.prototype.getVastMediaHeight=ne.prototype.getVastMediaHeight,ne.prototype.getVastMediaBitrate=ne.prototype.getVastMediaBitrate,ne.prototype.getDescription=ne.prototype.getDescription,ne.prototype.getTitle=ne.prototype.getTitle,ne.prototype.getPositionInSequence=ne.prototype.getPositionInSequence,ne.prototype.getSequenceLength=ne.prototype.getSequenceLength,ne.prototype.setMuted=ne.prototype.setMuted,ne.prototype.resize=ne.prototype.resize,ne.prototype.isLinear=ne.prototype.isLinear,ne.prototype.isMuted=ne.prototype.isMuted,ne.prototype.setVolume=ne.prototype.setVolume,ne.prototype.getVolume=ne.prototype.getVolume,ne.prototype.play=ne.prototype.play,ne.prototype.pause=ne.prototype.pause,ne.prototype.skip=ne.prototype.skip,ne.prototype.canSkipNow=ne.prototype.canSkipNow,ne.prototype.getTimeUntilSkippable=ne.prototype.getTimeUntilSkippable,ne.prototype.isSkippable=ne.prototype.isSkippable,ne.prototype.isPaused=ne.prototype.isPaused,ne.prototype.getRemainingTime=ne.prototype.getRemainingTime,ne.prototype.getMinSuggestedDuration=ne.prototype.getMinSuggestedDuration,ne.prototype.getDuration=ne.prototype.getDuration,ne.prototype.isUsingAnotherMediaElement=ne.prototype.isUsingAnotherMediaElement,ne.prototype.hasCustomClick=ne.prototype.hasCustomClick,ne.prototype.isClientRendering=ne.prototype.isClientRendering,ne.prototype.needsSkipUI=ne.prototype.needsSkipUI;function bv(e,t,n,i){var r=this;this.M=null,this.B=e,this.C=t,this.g=n,this.G=null,this.A=!0,this.h=this.g,this.i=i,this.U=new Set,this.H=new Set,this.F=new Map,this.L=new Map,this.j=new b,td(this),this.I=new Ce,this.l=new Ce,this.K=!1,this.ia=this.o=this.s=this.m=null,this.ka=!1,this.P=-1,this.$=function(){if(!r.K&&r.m&&!r.C.ua()){r.m=r.g.currentTime;var o=Us(r);o&&za(r,o,1,1,Date.now())}},this.W=function(){if(!(r.K||r.m||r.C.ua())){r.m=r.g.currentTime;var o=Us(r,!0);o&&za(r,o,1,1,Date.now())}},this.oa=function(){if(!r.K&&r.m&&!r.C.ua()){var o=r.g.currentTime;r.s&&!r.s.pre&&!r.s.post&&o<(r.s.endTime||r.s.startTime)&&(r.s=null)}},this.S=new ve(this.$),this.N=new ve(function(){var o,s,u,a,l,c,f,p,h,m,y;return k(function(v){switch(v.g){case 1:if(!r.H.size||r.m==null){v.u(0);break}if(o=r.C.m,o==Ln||o==Ha)return v.return();s=!1,u=Array.from(r.H),a=r.C.Sa(),l=g(u),c=l.next();case 3:if(c.done){v.u(5);break}if(f=c.value,f==r.s){v.u(4);break}if(p=f.endTime||f.startTime,!(1<=a.start-p)){h=f.startTime-r.m,0<h&&10>=h&&(!r.F.has(f)&&Fv(f)&&r.F.set(f,r.j.preload(f.uri,null,f.mimeType||void 0)),Hv(r,f)),v.u(4);break}if(!r.F.has(f)){v.u(7);break}return T(v,r.F.get(f),8);case 8:(m=v.h)&&m.destroy(),r.F.delete(f);case 7:Gv(r,f),y=JSON.stringify(f),r.U.has(y)&&r.U.delete(y),r.H.delete(f),Jf(r),f.overlay||(s=!0);case 4:c=l.next(),v.u(3);break;case 5:s&&Ya(r),K(v)}})}),this.configure(this.C.getConfiguration().ads)}d=bv.prototype,d.configure=function(e){this.M=e,Zf(this)};function uE(e){if(!e.ka&&e.H.size){if(e.I.D(e.g,"playing",e.W),e.I.D(e.g,"timeupdate",e.W),e.I.D(e.g,"seeked",e.oa),e.I.D(e.g,"ended",e.$),"requestVideoFrameCallback"in e.g&&!Vv()){var t=e.g,n=function(){e.P!=-1&&(e.$(),e.P!=-1&&(e.P=t.requestVideoFrameCallback(n)))};e.P=t.requestVideoFrameCallback(n)}else e.S.Ga(.025);e.N&&e.N.Ga(1),e.ka=!0}}function Jf(e){e.ka&&!e.H.size&&(e.I.Ja(e.g,"playing",e.W),e.I.Ja(e.g,"timeupdate",e.W),e.I.Ja(e.g,"seeked",e.oa),e.I.Ja(e.g,"ended",e.$),e.P!=-1&&(e.g.cancelVideoFrameCallback(e.P),e.P=-1),e.S&&e.S.stop(),e.N&&e.N.stop(),e.ka=!1)}function Zf(e){if(e.B&&e.M&&!e.K){var t=e.M.supportsMultipleMediaElements,n=e.g;n.webkitSupportsFullscreen&&n.webkitDisplayingFullscreen&&(t=!1),e.A==t&&(e.A=!t,e.A?(e.h=e.g,e.G&&(e.G.parentElement&&e.B.removeChild(e.G),e.G=null)):(e.G||(t=document.createElement(e.g.tagName),t.autoplay=!0,t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.display="none",t.setAttribute("playsinline",""),e.G=t),e.h=e.G))}else e.A=!0}d.stop=function(){if(this.l&&this.l.Ra(),this.U.clear(),this.H.clear(),this.j.hg(),this.F.size){var e=Array.from(this.F.values());e=g(e);for(var t=e.next();!t.done;t=e.next())(t=t.value)&&t.then(function(n){n&&n.destroy()})}if(this.F.clear(),this.L.size)for(e=Array.from(this.L.keys()),e=g(e),t=e.next();!t.done;t=e.next())Gv(this,t.value);this.L.clear(),this.j.detach(),this.K=!1,this.s=this.m=null,this.A=!0,this.h=this.g,this.G=null,ed(this),Jf(this),this.B&&ms(this.B),this.o&&(this.o.stop(),this.o=null)},d.release=function(){this.stop(),this.I&&this.I.release(),this.l&&this.l.release(),this.S&&(this.S.stop(),this.S=null),this.N&&(this.N.stop(),this.N=null),this.j.destroy()},d.kd=function(){return this.j};function aE(e,t){var n;k(function(i){if(i.g==1)return td(e),T(i,dE(e,t),2);n=i.h,n.length?js(e,n):we("Unsupported HLS interstitial",t),K(i)})}function lE(e,t){var n=Ye(t.eventNode,"OverlayEvent"),i=n.attributes.uri,r=n.attributes.mimeType,o=n.attributes.loop=="true",s=se(n,"z",yt);if(i&&s!=0){var u=null,a=Ye(n,"Background");if(a){var l=a.attributes.uri;l?u="center / contain no-repeat url('"+l+"')":u=$t(a)}a=1920,l=1080;var c=Ye(n,"Viewport");if(c&&(a=se(c,"x",yt),a==null||(l=se(c,"y",yt),l==null)))return;var f={viewport:{x:a,y:l},topLeft:{x:0,y:0},size:{x:a,y:l}},p=Ye(n,"Overlay");if(c&&p){var h=Ye(p,"TopLeft"),m=Ye(p,"Size");if(h&&m){if(p=se(h,"x",yt),p==null||(h=se(h,"y",yt),h==null))return;var y=se(m,"x",yt);if(y==null||(m=se(m,"y",yt),m==null))return;f.topLeft.x=p,f.topLeft.y=h,f.size.x=y,f.size.y=m}}if(p=null,n=Ye(n,"Squeeze"),c&&n&&(m=Ye(n,"TopLeft"),n=Ye(n,"Size"),m&&n)){if(c=se(m,"x",yt),c==null||(p=se(m,"y",yt),p==null)||(m=se(n,"x",yt),m==null)||(n=se(n,"y",yt),n==null))return;p={viewport:{x:a,y:l},topLeft:{x:c,y:p},size:{x:m,y:n}}}js(e,[{id:t.id,groupId:null,startTime:t.startTime,endTime:t.endTime,uri:i,mimeType:r,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:!1,pre:!1,post:!1,timelineRange:!0,loop:o,overlay:f,displayOnBackground:s==-1,currentVideo:p,background:u}])}}d.addAdUrlInterstitial=function(e){var t=this,n,i,r,o,s,u,a,l,c;return k(function(f){switch(f.g){case 1:return n={type:12},T(f,nd(t,e,n),2);case 2:if(i=f.h,r=Yo(i,"VAST,vmap:VMAP"),!r)throw new C(2,10,10007);if(o=[],r.tagName=="VAST"){o=Uv(r,t.m),f.u(3);break}if(r.tagName!="vmap:VMAP"){f.u(3);break}for(var p=[],h=g(Pe(r,"vmap:AdBreak")),m=h.next();!m.done;m=h.next()){var y=m.value,v=y.attributes.timeOffset;v&&(m=null,v=="start"?m=0:v=="end"?m=1/0:m=Kr(v),(y=Ye(y,"vmap:AdSource"))&&(y=Ye(y,"vmap:AdTagURI"))&&(y=ot(y))&&p.push({time:m,uri:y}))}s=g(p),u=s.next();case 5:if(u.done){f.u(3);break}return a=u.value,T(f,nd(t,a.uri,n),8);case 8:if(l=f.h,c=Yo(l,"VAST"),!c)throw new C(2,10,10007);o.push.apply(o,H(Uv(c,a.time))),u=s.next(),f.u(5);break;case 3:js(t,o),K(f)}})};function js(e,t){var n,i,r,o,s,u,a,l;k(function(c){switch(c.g){case 1:n=!1,i=g(t),r=i.next();case 2:if(r.done){c.u(4);break}if(o=r.value,!o.uri){we("Missing URL in interstitial",o),c.u(3);break}if(o.mimeType){c.u(5);break}return ue(c,6),s=e.j.Mb(),T(c,Cr(o.uri,s,e.C.getConfiguration().streaming.retryParameters),8);case 8:o.mimeType=c.h,pe(c,5);break;case 6:ae(c);case 5:if(u=o.id||JSON.stringify(o),e.U.has(u)){c.u(3);break}o.loop&&!o.overlay&&we("Loop is only supported in overlay interstitials",o),o.overlay||(n=!0),e.U.add(u),e.H.add(o),a=!1,o.pre&&e.m==null?a=!0:o.startTime!=0||o.canJump?e.m!=null&&(l=o.startTime-e.m,0<l&&10>=l&&(a=!0)):a=!0,a&&(!e.F.has(o)&&Fv(o)&&e.F.set(o,e.j.preload(o.uri,null,o.mimeType||void 0)),Hv(e,o));case 3:r=i.next(),c.u(2);break;case 4:n&&Ya(e),uE(e),K(c)}})}function Us(e,t,n){t=t===void 0?!1:t,n=n===void 0?null:n;var i=0,r=null;if(e.H.size&&e.m!=null){var o=e.g.ended,s=Array.from(e.H).sort(function(f,p){return p.startTime-f.startTime}),u=s;for(u=t?s.filter(function(f){return f.pre}):o?s.filter(function(f){return f.post}):s.filter(function(f){return!f.pre&&!f.post}),s=g(u),u=s.next();!u.done;u=s.next()){u=u.value;var a=!1;if(t)a=u.pre;else if(o)a=u.post;else if(!u.pre&&!u.post){var l=e.m-Math.round(1e3*u.startTime)/1e3,c=1;e.M.allowStartInMiddleOfInterstitial&&u.endTime&&u.endTime!=1/0&&(c=u.endTime-u.startTime),0<l&&(l<=c||!u.canJump)&&(a=!(n==null&&e.s&&!e.s.pre&&!e.s.post&&e.s.startTime>=u.startTime))}a&&(!e.s||u.startTime>=e.s.startTime)&&(i==(n||0)?r=u:r&&!u.canJump&&.001<Math.round(1e3*u.startTime)/1e3-Math.round(1e3*r.startTime)/1e3&&(r=u,i=0),i++)}}return r}function za(e,t,n,i,r,o){o=o===void 0?0:o,e.s=t,Zf(e),e.A||!e.B||e.h.parentElement||e.B.appendChild(e.h),i==1&&n==1&&(n=Array.from(e.H).filter(function(s){return t.pre?s.pre==t.pre:t.post?s.post==t.post:.001>Math.abs(s.startTime-t.startTime)}).length),t.once&&(o++,e.H.delete(t),Jf(e),t.overlay||Ya(e)),t.mimeType&&(t.mimeType.startsWith("image/")||t.mimeType==="text/html")?t.overlay?cE(e,t,n,i,o):we("Unsupported interstitial",t):e.A&&t.overlay?we("Unsupported interstitial",t):fE(e,t,n,i,r,o)}function cE(e,t,n,i,r){function o(){e.o&&(e.o.stop(),e.o=null),e.B.removeChild(a),ed(e,t),e.i(new G("ad-stopped")),e.l.Ra();var p=Us(e,t.pre,i-r);p?za(e,p,n,++i,Date.now(),r):e.K=!1}e.K=!0;var s=t.overlay,u=t.mimeType=="text/html"?"iframe":"img",a=document.createElement(u);a.style.objectFit="contain",a.style.position="absolute",a.style.border="none",Bv(e,t),e.i(new G("ad-started",new Map().set("ad",new ne(t,n,i)))),u=="iframe"?a.src=t.uri:(a.src=t.uri,a.onerror=function(p){e.i(new G("ad-error",new Map().set("originalEvent",p))),o()});var l=s.viewport,c=s.topLeft;s=s.size,l.x==0&&l.y==0?(a.width=t.overlay.size.x,a.height=t.overlay.size.y,a.style.bottom="10%",a.style.left="0",a.style.right="0",a.style.width="100%",t.overlay.size.y||u!="iframe"||(a.style.height="auto")):(a.style.height=s.y/l.y*100+"%",a.style.left=c.x/l.x*100+"%",a.style.top=c.y/l.y*100+"%",a.style.width=s.x/l.x*100+"%"),e.B.appendChild(a);var f=Date.now();e.o&&e.o.stop(),e.o=new ve(function(){t.playoutLimit&&(Date.now()-f)/1e3>t.playoutLimit?(e.i(new G("ad-complete")),o()):t.endTime&&e.g.currentTime>t.endTime?(e.i(new G("ad-complete")),o()):e.g.currentTime<t.startTime&&(e.i(new G("ad-skipped")),o())}),t.playoutLimit&&!t.endTime?e.o.ha(t.playoutLimit):t.endTime&&e.o.Ga(.025),e.l.D(e.g,"seeked",function(){var p=e.g.currentTime;(p<t.startTime||t.endTime&&p>t.endTime)&&(e.o&&e.o.stop(),e.i(new G("ad-skipped")),o())})}function fE(e,t,n,i,r,o){var s,u,a,l,c,f,p,h,m,y,v,x,S,w,A,D,I,E,M,P;k(function(N){switch(N.g){case 1:if(s=Date.now(),e.K=!0,!e.A||i!=1){N.u(2);break}return e.i(new G("ad-content-pause-requested",new Map().set("saveLivePosition",!0))),u=new je,a=function(L){return k(function(R){if(R.g==1)return L.state!="detach"?R.u(0):Vv()?T(R,new Promise(function(O){return new ve(O).ha(.1)}),3):R.u(3);u.resolve(),e.l.Ja(e.C,"onstatechange",a),K(R)})},e.l.D(e.C,"onstatechange",a),T(N,u,2);case 2:return Bv(e,t),e.A||(e.h.style.display="",t.overlay?(e.h.loop=t.loop,l=t.overlay.viewport,c=t.overlay.topLeft,f=t.overlay.size,e.h.style.height=f.y/l.y*100+"%",e.h.style.left=c.x/l.x*100+"%",e.h.style.top=c.y/l.y*100+"%",e.h.style.width=f.x/l.x*100+"%"):(e.g.pause(),t.resumeOffset!=null&&t.resumeOffset!=0&&(e.g.currentTime+=t.resumeOffset),e.h.loop=!1,e.h.style.height="100%",e.h.style.left="0",e.h.style.top="0",e.h.style.width="100%")),p=!1,h=function(){if(!e.A&&!t.overlay&&t.resumeOffset==null)if(t.timelineRange&&t.endTime&&t.endTime!=1/0)e.g.currentTime!=t.endTime&&(e.g.currentTime=t.endTime);else{var L=Date.now();e.g.currentTime+=(L-r)/1e3,r=L}},m=function(L){var R,O;return k(function(U){if(U.g==1){if(h(),R=Us(e,t.pre,i-o),L&&t.groupId)for(;R&&R.groupId==t.groupId;)i++,R=Us(e,t.pre,i-o);return e.o&&(!t.groupId||R&&R.groupId!=t.groupId)&&(e.o.stop(),e.o=null),ed(e,t),R&&!R.overlay?U.u(2):(t.post&&(e.m=null,e.s=null),e.A?T(U,e.j.detach(),4):T(U,e.j.rc(),4))}U.g!=2&&(e.A&&(O=t.resumeOffset,O==null&&(O=t.timelineRange&&t.endTime&&t.endTime!=1/0?t.endTime-(e.m||0):(Date.now()-r)/1e3),e.i(new G("ad-content-resume-requested",new Map().set("offset",O)))),e.i(new G("ad-stopped")),e.l.Ra(),e.K=!1,e.A?Ya(e):(e.h.style.display="none",h(),e.g.ended||e.g.play())),Zf(e),R&&(e.i(new G("ad-stopped")),e.l.Ra(),za(e,R,n,++i,r,o)),K(U)})},y=function(L){return k(function(R){return p?R.return():(p=!0,e.i(new G("ad-error",new Map().set("originalEvent",L))),T(R,m(!1),0))})},v=function(){return k(function(L){if(L.g==1)return p?L.return():(p=!0,T(L,m(!1),2));e.i(new G("ad-complete")),K(L)})},e.ia=function(){return k(function(L){return p?L.return():(p=!0,e.i(new G("ad-skipped")),T(L,m(!0),0))})},x=new te(e.h,t,e.ia,n,i,!e.A),e.A||(x.setMuted(e.g.muted),x.setVolume(e.g.volume)),e.i(new G("ad-started",new Map().set("ad",x))),(S=x.canSkipNow())&&e.i(new G("ad-skip-state-changed")),e.l.za(e.j,"error",y),e.l.D(e.h,"timeupdate",function(){if(e.h.duration){var L=x.canSkipNow();S!=L&&0<x.getRemainingTime()&&0<x.getDuration()&&e.i(new G("ad-skip-state-changed")),S=L}}),e.l.za(e.j,"firstquartile",function(){h(),e.i(new G("ad-first-quartile"))}),e.l.za(e.j,"midpoint",function(){h(),e.i(new G("ad-midpoint"))}),e.l.za(e.j,"thirdquartile",function(){h(),e.i(new G("ad-third-quartile"))}),e.l.za(e.j,"complete",v),e.l.D(e.h,"play",function(){e.i(new G("ad-resumed"))}),e.l.D(e.h,"pause",function(){var L=e.j.getConfiguration();e.h.currentTime>=L.playRangeEnd?v():e.i(new G("ad-paused"))}),e.l.D(e.h,"volumechange",function(){e.h.muted?e.i(new G("ad-muted")):e.i(new G("ad-volume-changed"))}),ue(N,4),td(e),t.startTime&&t.endTime&&t.endTime!=1/0&&t.startTime!=t.endTime&&(w=t.endTime-t.startTime,0<w&&e.j.configure("playRangeEnd",w)),t.playoutLimit&&!e.o&&(e.o=new ve(function(){e.ia()}).ha(t.playoutLimit),e.j.configure("playRangeEnd",t.playoutLimit)),T(N,e.j.cc(e.h),6);case 6:return A=null,e.M.allowStartInMiddleOfInterstitial&&e.m!=null&&(D=e.m-t.startTime,.25<Math.abs(D)&&(A=D)),e.F.has(t)?T(N,e.F.get(t),10):T(N,e.j.load(t.uri,A,t.mimeType||void 0),8);case 10:return I=N.h,e.F.delete(t),I?T(N,e.j.load(I),8):T(N,e.j.load(t.uri,A,t.mimeType||void 0),8);case 8:e.h.play(),E=(Date.now()-s)/1e3,e.i(new G("ads-loaded",new Map().set("loadTime",E))),e.A&&e.g.play(),t.overlay&&(M=function(){var L=e.g.currentTime-t.startTime;.1<Math.abs(L-e.h.currentTime)&&(e.h.currentTime=L)},e.l.za(e.h,"playing",M),e.l.D(e.g,"seeking",M),e.l.D(e.g,"seeked",function(){var L=e.g.currentTime;(L<t.startTime||t.endTime&&L>t.endTime)&&e.ia()})),pe(N,0);break;case 4:if(P=ae(N),!e.K)return N.return();y(P),K(N)}})}function Bv(e,t){if(t.displayOnBackground&&(e.g.style.zIndex="1"),t.currentVideo!=null){var n=t.currentVideo;e.g.style.transformOrigin="top left";var i=!0,r=[],o=n.topLeft.x/n.viewport.x*100;0<o&&100>=o&&(r.push("translateX("+o+"%)"),i=!1),o=n.topLeft.y/n.viewport.y*100,0<o&&100>=o&&(r.push("translateY("+o+"%)"),i=!1),o=n.size.x/n.viewport.x,1>o&&r.push("scaleX("+o+")"),n=n.size.y/n.viewport.y,1>o&&r.push("scaleY("+n+")"),r.length&&(e.g.style.transform=r.join(" ")),i&&(e.g.style.transition="transform 250ms")}e.B&&(e.B.style.pointerEvents="none",t.background&&(e.B.style.background=t.background)),e.G&&(e.G.style.background=t.overlay?"":"rgb(0, 0, 0)")}function ed(e,t){(!t||t.displayOnBackground)&&(e.g.style.zIndex=""),t&&t.currentVideo==null||(e.g.style.transformOrigin="",e.g.style.transition="",e.g.style.transform=""),e.B&&(e.B.style.pointerEvents="",!t||t.background)&&(e.B.style.background=""),e.G&&(e.G.style.background="")}function dE(e,t){var n,i,r,o,s,u,a,l,c,f,p,h,m,y,v,x,S,w,A,D,I,E,M,P,N,L,R,O,U,j,_,F,V,q,X,Me,ge,xe,me,Ee,Le,fe;return k(function(re){switch(re.g){case 1:if(n=[],!t||(i=t.values.find(function(ce){return ce.key=="X-ASSET-URI"}),r=t.values.find(function(ce){return ce.key=="X-ASSET-LIST"}),!i&&!r))return re.return(n);if(o=null,(s=t.values.find(function(ce){return ce.key=="ID"}))&&(o=s.data),u=o==null?Math.floor(10*t.startTime)/10:t.startTime,(a=t.endTime)&&t.endTime!=1/0&&typeof t.endTime=="number"&&(a=o==null?Math.floor(10*t.endTime)/10:t.endTime),l=t.values.find(function(ce){return ce.key=="X-RESTRICT"}),f=c=!0,l&&l.data&&(p=l.data,c=!p.includes("SKIP"),f=!p.includes("JUMP")),h=c?0:null,(m=t.values.find(function(ce){return ce.key=="X-ENABLE-SKIP-AFTER"}))&&(y=m.data,h=parseFloat(y),isNaN(h)&&(h=c?0:null)),v=null,(x=t.values.find(function(ce){return ce.key=="X-ENABLE-SKIP-FOR"}))&&(S=x.data,v=parseFloat(S),isNaN(h)&&(v=null)),w=null,(A=t.values.find(function(ce){return ce.key=="X-RESUME-OFFSET"}))&&(D=A.data,w=parseFloat(D),isNaN(w)&&(w=null)),I=null,(E=t.values.find(function(ce){return ce.key=="X-PLAYOUT-LIMIT"}))&&(M=E.data,I=parseFloat(M),isNaN(I)&&(I=null)),L=N=P=!1,(R=t.values.find(function(ce){return ce.key=="CUE"}))&&(O=R.data,P=O.includes("ONCE"),N=O.includes("PRE"),L=O.includes("POST")),U=!1,(j=t.values.find(function(ce){return ce.key=="X-TIMELINE-OCCUPIES"}))?(_=j.data,U=_.includes("RANGE")):!A&&e.C.V()&&(U=!N&&!L),i){if(F=i.data,!F)return re.return(n);n.push({id:o,groupId:null,startTime:u,endTime:a,uri:F,mimeType:null,isSkippable:c,skipOffset:h,skipFor:v,canJump:f,resumeOffset:w,playoutLimit:I,once:P,pre:N,post:L,timelineRange:U,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null}),re.u(2);break}if(!r){re.u(2);break}return V=r.data,V?(ue(re,4),q={type:11},T(re,nd(e,V,q),6)):re.return(n);case 6:for(X=re.h,Me=ze(X),ge=JSON.parse(Me),(xe=ge["SKIP-CONTROL"])&&(me=xe["ENABLE-SKIP-AFTER"],typeof me=="number"&&(h=parseFloat(me),isNaN(me)&&(h=c?0:null)),Ee=xe["ENABLE-SKIP-FOR"],typeof Ee=="number"&&(v=parseFloat(Ee),isNaN(Ee)&&(v=null))),Le=0;Le<ge.ASSETS.length;Le++)fe=ge.ASSETS[Le],fe.URI&&n.push({id:o+"_shaka_asset_"+Le,groupId:o,startTime:u,endTime:a,uri:fe.URI,mimeType:null,isSkippable:c,skipOffset:h,skipFor:v,canJump:f,resumeOffset:w,playoutLimit:I,once:P,pre:N,post:L,timelineRange:U,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null});pe(re,2);break;case 4:ae(re);case 2:return re.return(n)}})}function Ya(e){for(var t=[],n=g(e.H),i=n.next(),r={};!i.done;r={qc:void 0},i=n.next())i=i.value,i.overlay||(r.qc={start:i.startTime,end:null},i.pre?(r.qc.start=0,r.qc.end=null):i.post?(r.qc.start=-1,r.qc.end=null):i.timelineRange&&(r.qc.end=i.endTime),t.find(function(o){return function(s){return o.qc.start==s.start&&o.qc.end==s.end}}(r))||t.push(r.qc));e.i(new G("ad-cue-points-changed",new Map().set("cuepoints",t)))}function td(e){e.j.configure(e.C.Vh()),e.j.configure("ads.disableHLSInterstitial",!0),e.j.configure("ads.disableDASHInterstitial",!0),e.j.configure("playRangeEnd",1/0),lg(e.C.Mb(),e.j.Mb())}function nd(e,t,n){var i,r,o;return k(function(s){return s.g==1?(i=ct([t],Vn()),r=e.C.Mb().request(7,i,n),T(s,r.promise,2)):(o=s.h,s.return(o.data))})}function Fv(e){return(e=e.mimeType)?!e.startsWith("image/")&&e!=="text/html":!0}function Vv(){var e=ye().La();return e=="TV"||e=="CONSOLE"||e=="CAST"}function Hv(e,t){if(!(e.L.has(t)||e.M&&!e.M.allowPreloadOnDomElements)){var n=function(o){var s=document.createElement("link");return s.rel="preload",s.href=o,s.as="image",document.head.appendChild(s),s},i=[];if(t.background){var r=t.background.match(/url\(('|")?([^'"()]+)('|")\)?/);r&&i.push(n(r[2]))}t.mimeType.startsWith("image/")&&i.push(n(t.uri)),e.L.set(t,i)}}function Gv(e,t){if(e.L.has(t)){var n=e.L.get(t);n=g(n);for(var i=n.next();!i.done;i=n.next())i=i.value,i.parentNode.removeChild(i);e.L.delete(t)}}function J(e,t,n,i,r){this.h=e,this.j=Kr(this.h.skipOffset),this.g=r,this.i=t,this.l=n,this.o=i,this.m=!1}d=J.prototype,d.needsSkipUI=function(){return!0},d.isClientRendering=function(){return!1},d.hasCustomClick=function(){return!1},d.isUsingAnotherMediaElement=function(){return!1},d.getDuration=function(){return this.h.durationInSeconds},d.getMinSuggestedDuration=function(){return this.getDuration()},d.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},d.isPaused=function(){return this.g.paused},d.isSkippable=function(){return typeof this.j=="number"},d.getTimeUntilSkippable=function(){if(typeof this.j!="number")return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},d.canSkipNow=function(){return this.getTimeUntilSkippable()==0},d.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},d.pause=function(){return this.g.pause()},d.play=function(){return this.g.play()},d.getVolume=function(){return this.g.volume},d.setVolume=function(e){this.g.volume=e},d.isMuted=function(){return this.g.muted},d.isLinear=function(){return this.o},d.resize=function(){},d.setMuted=function(e){this.g.muted=e},d.getSequenceLength=function(){return this.l?this.l:1},d.getPositionInSequence=function(){return this.i?this.i:1},d.getTitle=function(){return this.h.adTitle},d.getDescription=function(){return""},d.getVastMediaBitrate=function(){return 0},d.getVastMediaHeight=function(){return 0},d.getVastMediaWidth=function(){return 0},d.getVastAdId=function(){return this.h.vastAdId||""},d.getAdId=function(){return this.h.adId},d.getCreativeAdId=function(){return this.h.creativeId},d.getAdvertiserName=function(){return""},d.getMediaUrl=function(){return null},d.getTimeOffset=function(){return 0},d.getPodIndex=function(){return 0},d.release=function(){this.l=this.i=this.g=this.h=null},W("shaka.ads.MediaTailorAd",J),J.prototype.release=J.prototype.release,J.prototype.getPodIndex=J.prototype.getPodIndex,J.prototype.getTimeOffset=J.prototype.getTimeOffset,J.prototype.getMediaUrl=J.prototype.getMediaUrl,J.prototype.getAdvertiserName=J.prototype.getAdvertiserName,J.prototype.getCreativeAdId=J.prototype.getCreativeAdId,J.prototype.getAdId=J.prototype.getAdId,J.prototype.getVastAdId=J.prototype.getVastAdId,J.prototype.getVastMediaWidth=J.prototype.getVastMediaWidth,J.prototype.getVastMediaHeight=J.prototype.getVastMediaHeight,J.prototype.getVastMediaBitrate=J.prototype.getVastMediaBitrate,J.prototype.getDescription=J.prototype.getDescription,J.prototype.getTitle=J.prototype.getTitle,J.prototype.getPositionInSequence=J.prototype.getPositionInSequence,J.prototype.getSequenceLength=J.prototype.getSequenceLength,J.prototype.setMuted=J.prototype.setMuted,J.prototype.resize=J.prototype.resize,J.prototype.isLinear=J.prototype.isLinear,J.prototype.isMuted=J.prototype.isMuted,J.prototype.setVolume=J.prototype.setVolume,J.prototype.getVolume=J.prototype.getVolume,J.prototype.play=J.prototype.play,J.prototype.pause=J.prototype.pause,J.prototype.skip=J.prototype.skip,J.prototype.canSkipNow=J.prototype.canSkipNow,J.prototype.getTimeUntilSkippable=J.prototype.getTimeUntilSkippable,J.prototype.isSkippable=J.prototype.isSkippable,J.prototype.isPaused=J.prototype.isPaused,J.prototype.getRemainingTime=J.prototype.getRemainingTime,J.prototype.getMinSuggestedDuration=J.prototype.getMinSuggestedDuration,J.prototype.getDuration=J.prototype.getDuration,J.prototype.isUsingAnotherMediaElement=J.prototype.isUsingAnotherMediaElement,J.prototype.hasCustomClick=J.prototype.hasCustomClick,J.prototype.isClientRendering=J.prototype.isClientRendering,J.prototype.needsSkipUI=J.prototype.needsSkipUI;function Os(e,t,n,i){this.B=e,this.K=t,this.h=n,this.l=null,this.P=NaN,this.i=i,this.I=!1,this.A=null,this.j=[],this.M=[],this.L=this.C=this.g=null,this.F=new Map,this.m=[],this.s=[],this.G="",this.N=!0,this.H="",this.o=new Ce}Os.prototype.stop=function(){for(var e=g(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.Ja(t.target,t.type,t.listener);wo(this),this.m=[],this.s=[],this.G="",this.N=!0,this.H="",this.A=null,this.j=[],this.M=[],this.F.clear()},Os.prototype.release=function(){this.stop(),this.o&&this.o.release()},Os.prototype.onManifestUpdated=function(e){this.I=e,this.G!=""&&(hE(this,this.G,this.N),this.N=!1)},Os.prototype.getCuePoints=function(){for(var e=[],t=g(this.j),n=t.next();!n.done;n=t.next()){n=g(n.value.ads);for(var i=n.next();!i.done;i=n.next())i=i.value,e.push({start:i.startTimeInSeconds,end:i.startTimeInSeconds+i.durationInSeconds})}return e};function pE(e,t,n){var i,r,o,s,u,a,l,c,f,p,h,m;k(function(y){if(y.g==1)return i={type:7},r=ct([t],Vn()),r.method="POST",n&&(o=JSON.stringify(n),r.body=Cn(o)),s=e.K.request(7,r,i),ue(y,2),T(y,s.promise,4);if(y.g!=2){if(u=y.h,a=ze(u.data),l=JSON.parse(a),l.manifestUrl&&l.trackingUrl)c=new tt(t),f=new tt(l.trackingUrl),e.G=c.resolve(f).toString(),p=Date.now()/1e3,h=p-e.P,e.i(new G("ads-loaded",new Map().set("loadTime",h))),m=new tt(l.manifestUrl),e.l.resolve(c.resolve(m).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return pe(y,0)}if(ae(y),!e.H.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,y.return();e.l.resolve(e.H),e.l=null,K(y)})}function hE(e,t,n){var i,r,o,s,u,a,l,c,f,p,h,m,y,v,x,S;k(function(w){if(w.g==1)return i={type:8},r=ct([t],Vn()),o=e.K.request(7,r,i),ue(w,2),T(w,o.promise,4);if(w.g!=2){if(s=w.h,u=[],a=ze(s.data),l=JSON.parse(a),0<l.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(l.avails)){for(e.j=l.avails,c=g(e.j),f=c.next();!f.done;f=c.next())for(p=f.value,h=g(p.nonLinearAdsList),m=h.next();!m.done;m=h.next())for(y=m.value,v=g(y.nonLinearAdList),x=v.next();!x.done;x=v.next())S=x.value,gE(e,S);u=e.getCuePoints(),e.i(new G("ad-cue-points-changed",new Map().set("cuepoints",u)))}}else e.j.length&&e.i(new G("ad-cue-points-changed",new Map().set("cuepoints",u))),wo(e),e.j=[];return n&&(e.I||0<u.length)&&mE(e),pe(w,0)}ae(w),K(w)})}function gE(e,t){var n,i,r,o,s,u,a,l;k(function(c){if(c.g==1)return!t.staticResource||(n=Kv(t),e.F.get(n))?c.return():(i={type:9},r=ct([t.staticResource],Vn()),o=e.K.request(7,r,i),ue(c,2),e.F.set(n,[]),T(c,o.promise,4));if(c.g!=2)return s=c.h,u=ze(s.data),a=JSON.parse(u),l=a.apps,e.F.set(n,l),pe(c,0);ae(c),e.F.delete(n),K(c)})}function Kv(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function mE(e){Wv(e),e.I||(Xv(e),e.o.D(e.h,"seeked",function(){Xv(e)}),e.o.D(e.h,"ended",function(){wo(e)})),e.o.D(e.h,"timeupdate",function(){Wv(e)})}function Xv(e){var t=e.h.currentTime;if(t!=0&&e.A==null){for(var n,i,r=g(e.j),o=r.next();!o.done;o=r.next()){o=o.value;for(var s=g(o.ads),u=s.next();!u.done;u=s.next())if(u=u.value,!i)u.startTimeInSeconds<t&&(i=u,n=o);else if(u.startTimeInSeconds<t&&u.startTimeInSeconds>i.startTimeInSeconds+i.durationInSeconds){i=u,n=o;break}}n&&i&&!e.M.includes(i.adId)&&(e.A=t,e.h.currentTime=n.startTimeInSeconds)}}function Wv(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var i=e.C,r=i.startTimeInSeconds+.5*i.durationInSeconds,o=i.startTimeInSeconds+.75*i.durationInSeconds;t>=i.startTimeInSeconds+.25*i.durationInSeconds&&!e.s.includes("firstQuartile")?(e.s.push("firstQuartile"),_t(e,"firstQuartile")):t>=r&&!e.s.includes("midpoint")?(e.s.push("midpoint"),_t(e,"midpoint")):t>=o&&!e.s.includes("thirdQuartile")&&(e.s.push("thirdQuartile"),_t(e,"thirdQuartile")),i=e.g.getRemainingTime(),r=e.g.getDuration(),e.g.canSkipNow()&&0<i&&0<r&&_t(e,"skipStateChanged"),0<r&&(0>=i||i>r)&&wo(e)}if(!e.g||!e.g.isLinear()){e:for(i=g(e.j),r=i.next();!r.done&&(r=r.value,!(e.g&&e.g.isLinear()));r=i.next())for(o=0;o<r.ads.length;o++){var s=r.ads[o],u=s.startTimeInSeconds+s.durationInSeconds;if(s.startTimeInSeconds<=t&&u>t){if(e.M.includes(s.adId)){if(e.h.ended)continue;e.h.currentTime=u;break e}wo(e),e.L=r,e.g=new J(s,o+1,r.ads.length,!0,e.h),e.C=s,o===0&&_t(e,"breakStart"),zv(e);break}}if(!e.g){for(i=g(e.j),r=i.next();!r.done&&(r=r.value,!e.g);r=i.next())for(o=0;o<r.nonLinearAdsList.length;o++)if(s=r.nonLinearAdsList[o],s.nonLinearAdList.length){u=r.startTimeInSeconds;var a=e.F.get(Kv(s.nonLinearAdList[0]));if(u<=t&&a&&a.length){wo(e),u=e,a=g(a);for(var l=a.next();!l.done;l=a.next())if(l=l.value,l.data.source.length){var c=document.createElement("img");c.src=l.data.source[0].url,c.style.top=(l.placeholder.top||0)+"%",c.style.height=100-(l.placeholder.top||0)+"%",c.style.left=(l.placeholder.left||0)+"%",c.style.maxWidth=100-(l.placeholder.left||0)+"%",c.style.objectFit="contain",c.style.position="absolute",u.B.appendChild(c)}e.L=r,e.g=new J(s,o+1,r.ads.length,!1,e.h),e.C=s,o===0&&_t(e,"breakStart"),zv(e);break}}}n&&!e.g&&(t=e.h.currentTime,e.A&&e.A>t&&(e.h.currentTime=e.A),e.A=null)}}}function wo(e){if(e.g){for(;e.B.lastChild;)e.B.removeChild(e.B.firstChild);e.I||e.M.push(e.C.adId);var t=e.g.m;t!==void 0&&t?_t(e,"skip"):_t(e,"complete"),t=g(e.m);for(var n=t.next();!n.done;n=t.next())n=n.value,e.o.Ja(n.target,n.type,n.listener);e.m=[],e.s=[],t=e.g.getPositionInSequence(),n=e.g.getSequenceLength(),t===n&&_t(e,"breakEnd"),e.g=null,e.C=null,e.L=null}}function zv(e){var t=!1;e.h.paused?t=!0:(_t(e,"impression"),_t(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&_t(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||_t(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(_t(e,"impression"),_t(e,"start"),t=!1):_t(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){_t(e,"pause")}});for(var n=g(e.m),i=n.next();!i.done;i=n.next())i=i.value,e.o.D(i.target,i.type,i.listener)}function _t(e,t){var n=e.C.trackingEvents.find(function(o){return o.eventType==t});if(n||(n=e.L.adBreakTrackingEvents.find(function(o){return o.eventType==t})),n){var i={type:10};n=g(n.beaconUrls);for(var r=n.next();!r.done;r=n.next())(r=r.value)&&r!=""&&(r=ct([r],Vn()),r.method="POST",e.K.request(7,r,i))}switch(t){case"impression":e.i(new G("ad-impression"));break;case"start":e.i(new G("ad-started",new Map().set("ad",e.g)));break;case"mute":e.i(new G("ad-muted"));break;case"unmute":e.i(new G("ad-volume-changed"));break;case"resume":e.i(new G("ad-resumed"));break;case"pause":e.i(new G("ad-paused"));break;case"firstQuartile":e.i(new G("ad-first-quartile"));break;case"midpoint":e.i(new G("ad-midpoint"));break;case"thirdQuartile":e.i(new G("ad-third-quartile"));break;case"complete":e.i(new G("ad-complete")),e.i(new G("ad-stopped"));break;case"skip":e.i(new G("ad-skipped")),e.i(new G("ad-stopped"));break;case"breakStart":e.B.setAttribute("ad-active","true");break;case"breakEnd":e.B.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new G("ad-skip-state-changed"))}}function ie(e,t){this.g=e,this.i=null,this.h=t}d=ie.prototype,d.needsSkipUI=function(){return!0},d.isClientRendering=function(){return!1},d.hasCustomClick=function(){return!0},d.isUsingAnotherMediaElement=function(){return!1},d.getDuration=function(){return this.i?this.i.duration:-1},d.getMinSuggestedDuration=function(){return this.getDuration()},d.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},d.isPaused=function(){return this.h.paused},d.isSkippable=function(){return this.g.isSkippable()},d.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},d.canSkipNow=function(){return this.getTimeUntilSkippable()==0},d.skip=function(){this.h.currentTime+=this.getRemainingTime()},d.pause=function(){return this.h.pause()},d.play=function(){return this.h.play()},d.getVolume=function(){return this.h.volume},d.setVolume=function(e){this.h.volume=e},d.isMuted=function(){return this.h.muted},d.isLinear=function(){return!0},d.resize=function(){},d.setMuted=function(e){this.h.muted=e},d.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},d.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},d.getTitle=function(){return this.g.getTitle()},d.getDescription=function(){return this.g.getDescription()},d.getVastMediaBitrate=function(){return 0},d.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},d.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},d.getVastAdId=function(){return""},d.getAdId=function(){return this.g.getAdId()},d.getCreativeAdId=function(){return this.g.getCreativeAdId()},d.getAdvertiserName=function(){return this.g.getAdvertiserName()},d.getMediaUrl=function(){return null},d.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},d.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},d.release=function(){this.h=this.i=this.g=null},W("shaka.ads.ServerSideAd",ie),ie.prototype.release=ie.prototype.release,ie.prototype.getPodIndex=ie.prototype.getPodIndex,ie.prototype.getTimeOffset=ie.prototype.getTimeOffset,ie.prototype.getMediaUrl=ie.prototype.getMediaUrl,ie.prototype.getAdvertiserName=ie.prototype.getAdvertiserName,ie.prototype.getCreativeAdId=ie.prototype.getCreativeAdId,ie.prototype.getAdId=ie.prototype.getAdId,ie.prototype.getVastAdId=ie.prototype.getVastAdId,ie.prototype.getVastMediaWidth=ie.prototype.getVastMediaWidth,ie.prototype.getVastMediaHeight=ie.prototype.getVastMediaHeight,ie.prototype.getVastMediaBitrate=ie.prototype.getVastMediaBitrate,ie.prototype.getDescription=ie.prototype.getDescription,ie.prototype.getTitle=ie.prototype.getTitle,ie.prototype.getPositionInSequence=ie.prototype.getPositionInSequence,ie.prototype.getSequenceLength=ie.prototype.getSequenceLength,ie.prototype.setMuted=ie.prototype.setMuted,ie.prototype.resize=ie.prototype.resize,ie.prototype.isLinear=ie.prototype.isLinear,ie.prototype.isMuted=ie.prototype.isMuted,ie.prototype.setVolume=ie.prototype.setVolume,ie.prototype.getVolume=ie.prototype.getVolume,ie.prototype.play=ie.prototype.play,ie.prototype.pause=ie.prototype.pause,ie.prototype.skip=ie.prototype.skip,ie.prototype.canSkipNow=ie.prototype.canSkipNow,ie.prototype.getTimeUntilSkippable=ie.prototype.getTimeUntilSkippable,ie.prototype.isSkippable=ie.prototype.isSkippable,ie.prototype.isPaused=ie.prototype.isPaused,ie.prototype.getRemainingTime=ie.prototype.getRemainingTime,ie.prototype.getMinSuggestedDuration=ie.prototype.getMinSuggestedDuration,ie.prototype.getDuration=ie.prototype.getDuration,ie.prototype.isUsingAnotherMediaElement=ie.prototype.isUsingAnotherMediaElement,ie.prototype.hasCustomClick=ie.prototype.hasCustomClick,ie.prototype.isClientRendering=ie.prototype.isClientRendering,ie.prototype.needsSkipUI=ie.prototype.needsSkipUI;function Yv(e,t,n,i){var r=this;this.s=e,this.l=t,this.j=null,this.F=NaN,this.i=i,this.G=!1,this.A=this.m=this.o=null,this.B="",this.C=[],this.h=new Ce,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new G("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(o){vE(r,o)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){r.B.length?r.j.resolve(r.B):r.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),r.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(o){o=o.getAd(),r.m=new ie(o,r.l),r.A&&(r.m.i=r.A),r.i(new G("ad-started",new Map().set("ad",r.m))),r.s.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){r.s.removeAttribute("ad-active");var o=r.l.currentTime;r.o&&r.o>o&&(r.l.currentTime=r.o,r.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(o){r.A=o.getStreamData().adProgressData,r.m&&(r.m.i=r.A)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){r.i(new G("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){r.i(new G("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){r.i(new G("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){r.i(new G("ad-complete")),r.i(new G("ad-stopped")),r.s.removeAttribute("ad-active"),r.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){r.i(new G("ad-skipped")),r.i(new G("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(o){var s=o.getStreamData();o=[],s=g(s.cuepoints);for(var u=s.next();!u.done;u=s.next())u=u.value,o.push({start:u.start,end:u.end});r.C=o,r.i(new G("ad-cue-points-changed",new Map().set("cuepoints",o)))})}d=Yv.prototype,d.configure=function(){},d.stop=function(){this.B="",this.o=null,this.C=[]},d.release=function(){this.stop(),this.h&&this.h.release()},d.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},d.getCuePoints=function(){return this.C};function vE(e,t){e.i(new G("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var i=e.g.previousCuePointForStreamTime(n);i&&!i.played&&(e.o=n,e.l.currentTime=i.start)}})}function Y(){ke.call(this),this.h=this.i=this.j=this.g=null,this.m=new jv,this.o=navigator.language,this.l=null}et(Y,ke),d=Y.prototype,d.setLocale=function(e){this.o=e},d.configure=function(e){this.l=e,this.g&&this.g.configure(this.l),this.j&&this.j.configure(this.l),this.h&&this.h.configure(this.l)},d.initInterstitial=function(e,t,n){var i=this;this.g&&this.g.release(),this.g=new bv(e,t,n,function(r){return qa(i,r)}),this.g.configure(this.l)},d.initClientSide=function(e,t,n){var i=this;if(!B.google||!google.ima||!google.ima.AdsLoader)throw new C(2,10,1e4);this.j&&this.j.release(),this.j=new Xa(e,t,this.o,n,function(r){return qa(i,r)}),this.j.configure(this.l)},d.release=function(){this.g&&(this.g.release(),this.g=null),this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),ke.prototype.release.call(this)},d.onAssetUnload=function(){this.g&&this.g.stop(),this.j&&this.j.stop(),this.i&&this.i.stop(),this.h&&this.h.stop(),this.dispatchEvent(new G("ad-stopped")),this.dispatchEvent(new G("ad-content-attach-requested")),this.m=new jv},d.requestClientSideAds=function(e){if(!this.j)throw new C(1,10,10001);var t=this.j;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.G=Date.now()/1e3,t.m.requestAds(e)},d.updateClientSideAdsRenderingSettings=function(e){if(!this.j)throw new C(1,10,10001);var t=this.j;t.B=e,t.g&&t.g.updateAdsRenderingSettings(t.B)},d.initMediaTailor=function(e,t,n){var i=this;this.i&&this.i.release(),this.i=new Os(e,t,n,function(r){return qa(i,r)})},d.requestMediaTailorStream=function(e,t,n){if(!this.i)throw new C(1,10,10005);var i=this.i;return n=n===void 0?"":n,i.l?e=Promise.reject(new C(1,10,10004)):(i.l=new je,pE(i,e,t),i.H=n||"",i.P=Date.now()/1e3,e=i.l),e},d.addMediaTailorTrackingUrl=function(e){if(!this.i)throw new C(1,10,10005);var t=this.i;t.G=e,t.i(new G("ads-loaded",new Map().set("loadTime",0)))},d.initServerSide=function(e,t){var n=this;if(!B.google||!google.ima||!google.ima.dai)throw new C(2,10,10002);this.h&&this.h.release(),this.h=new Yv(e,t,this.o,function(i){return qa(n,i)}),this.h.configure(this.l)},d.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.h)throw new C(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&we('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.15.2",n=this.h,n.j?e=Promise.reject(new C(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new je,n.g.requestStream(e),n.B=t||"",n.F=Date.now()/1e3,e=n.j),e},d.replaceServerSideAdTagParameters=function(e){if(!this.h)throw new C(1,10,10003);(e.mpt||e.mpv)&&we('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.mpt="Shaka Player",e.mpv="v4.15.2",this.h.g.replaceAdTagParameters(e)},d.getServerSideCuePoints=function(){return Ae("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},d.getCuePoints=function(){var e=[];return this.h&&(e=e.concat(this.h.getCuePoints())),this.i&&(e=e.concat(this.i.getCuePoints())),e},d.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:iE(e),started:e.h,overlayAds:e.j,playedCompletely:e.l,skipped:e.m,errors:e.i}},d.onManifestUpdated=function(e){this.i&&this.i.onManifestUpdated(e)},d.onDashTimedMetadata=function(e){this.h&&e.schemeIdUri=="urn:google:dai:2018"&&this.h.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},d.onHlsTimedMetadata=function(e,t){this.h&&this.h.g.processMetadata("ID3",e.data,t)},d.onCueMetadataChange=function(e){this.h&&this.h.onCueMetadataChange(e)},d.onHLSInterstitialMetadata=function(e,t,n){this.l&&this.l.disableHLSInterstitial||(this.g||this.initInterstitial(null,e,t),this.g&&aE(this.g,n))},d.onDASHInterstitialMetadata=function(e,t,n){if(!this.l||!this.l.disableDASHInterstitial){var i=n.schemeIdUri;if(i=="urn:mpeg:dash:event:alternativeMPD:insert:2025"||i=="urn:mpeg:dash:event:alternativeMPD:replace:2025"){if(this.g||this.initInterstitial(null,e,t),this.g&&(e=this.g,t=n.schemeIdUri=="urn:mpeg:dash:event:alternativeMPD:replace:2025",i=n.schemeIdUri=="urn:mpeg:dash:event:alternativeMPD:insert:2025",t||i)){for(var r=n.startTime,o=n.endTime,s=null,u=0,a,l=g(n.eventNode.children),c=l.next();!c.done;c=l.next())if(c=c.value,c.tagName=="AlternativeMPD"){if(c=c.attributes.uri){a=c;break}}else if(c.tagName=="InsertPresentation"||c.tagName=="ReplacePresentation"){var f=c.attributes.url;if(f){a=f,(l=se(c,"maxDuration",yt))&&(s=l/n.timescale),(l=se(c,"returnOffset",yt))&&(u=l/n.timescale),t&&u&&(o=r+u);break}}a&&js(e,[{id:n.id,groupId:null,startTime:r,endTime:o,uri:a,mimeType:null,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:i?u:null,playoutLimit:s,once:!1,pre:!1,post:!1,timelineRange:t&&!i,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null}])}}else(i=="urn:mpeg:dash:event:2012"||i=="urn:scte:dash:scte214-events")&&n.eventNode&&Ye(n.eventNode,"OverlayEvent")&&(this.g||this.initInterstitial(null,e,t),this.g&&lE(this.g,n))}},d.addCustomInterstitial=function(e){if(!this.g)throw new C(1,10,10006);js(this.g,[e])},d.addAdUrlInterstitial=function(e){if(!this.g)throw new C(1,10,10006);return this.g.addAdUrlInterstitial(e)},d.getInterstitialPlayer=function(){if(!this.g)throw new C(1,10,10006);return this.g.kd()};function qa(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;var n=t.ad;n&&!n.isLinear()&&e.m.j++;break;case"ad-complete":e.m.l++;break;case"ad-skipped":e.m.m++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}W("shaka.ads.AdManager",Y),Y.prototype.getInterstitialPlayer=Y.prototype.getInterstitialPlayer,Y.prototype.addAdUrlInterstitial=Y.prototype.addAdUrlInterstitial,Y.prototype.addCustomInterstitial=Y.prototype.addCustomInterstitial,Y.prototype.onDASHInterstitialMetadata=Y.prototype.onDASHInterstitialMetadata,Y.prototype.onHLSInterstitialMetadata=Y.prototype.onHLSInterstitialMetadata,Y.prototype.onCueMetadataChange=Y.prototype.onCueMetadataChange,Y.prototype.onHlsTimedMetadata=Y.prototype.onHlsTimedMetadata,Y.prototype.onDashTimedMetadata=Y.prototype.onDashTimedMetadata,Y.prototype.onManifestUpdated=Y.prototype.onManifestUpdated,Y.prototype.getStats=Y.prototype.getStats,Y.prototype.getCuePoints=Y.prototype.getCuePoints,Y.prototype.getServerSideCuePoints=Y.prototype.getServerSideCuePoints,Y.prototype.replaceServerSideAdTagParameters=Y.prototype.replaceServerSideAdTagParameters,Y.prototype.requestServerSideStream=Y.prototype.requestServerSideStream,Y.prototype.initServerSide=Y.prototype.initServerSide,Y.prototype.addMediaTailorTrackingUrl=Y.prototype.addMediaTailorTrackingUrl,Y.prototype.requestMediaTailorStream=Y.prototype.requestMediaTailorStream,Y.prototype.initMediaTailor=Y.prototype.initMediaTailor,Y.prototype.updateClientSideAdsRenderingSettings=Y.prototype.updateClientSideAdsRenderingSettings,Y.prototype.requestClientSideAds=Y.prototype.requestClientSideAds,Y.prototype.onAssetUnload=Y.prototype.onAssetUnload,Y.prototype.release=Y.prototype.release,Y.prototype.initClientSide=Y.prototype.initClientSide,Y.prototype.initInterstitial=Y.prototype.initInterstitial,Y.prototype.configure=Y.prototype.configure,Y.prototype.setLocale=Y.prototype.setLocale,Y.ADS_LOADED="ads-loaded",Y.AD_STARTED="ad-started",Y.AD_FIRST_QUARTILE="ad-first-quartile",Y.AD_MIDPOINT="ad-midpoint",Y.AD_THIRD_QUARTILE="ad-third-quartile",Y.AD_COMPLETE="ad-complete",Y.AD_STOPPED="ad-stopped",Y.AD_SKIPPED="ad-skipped",Y.AD_VOLUME_CHANGED="ad-volume-changed",Y.AD_MUTED="ad-muted",Y.AD_PAUSED="ad-paused",Y.AD_RESUMED="ad-resumed",Y.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Y.CUEPOINTS_CHANGED="ad-cue-points-changed",Y.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Y.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Y.AD_CLICKED="ad-clicked",Y.AD_PROGRESS="ad-progress",Y.AD_BUFFERING="ad-buffering",Y.AD_IMPRESSION="ad-impression",Y.AD_DURATION_CHANGED="ad-duration-changed",Y.AD_CLOSED="ad-closed",Y.AD_LOADED="ad-loaded",Y.ALL_ADS_COMPLETED="all-ads-completed",Y.AD_LINEAR_CHANGED="ad-linear-changed",Y.AD_METADATA="ad-metadata",Y.AD_RECOVERABLE_ERROR="ad-recoverable-error",Y.AD_ERROR="ad-error",Y.AD_BREAK_READY="ad-break-ready",Y.AD_INTERACTION="ad-interaction",Y.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",Y.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",Y.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",Ga=function(){return new Y};function qv(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(n instanceof Event||n instanceof G){var i={};for(r in n)(t=n[r])&&typeof t=="object"?r=="detail"&&(i[r]=t):r in Event||(i[r]=t);return i}if(n instanceof Error){var r=new Set(["name","message","stack"]);for(i in n)r.add(i);for(i=g(Object.getOwnPropertyNames(n)),t=i.next();!t.done;t=i.next())r.add(t.value);for(i={},r=g(r),t=r.next();!t.done;t=r.next())t=t.value,i[t]=n[t];n={__type__:"Error",contents:i}}else if(n instanceof TimeRanges){for(r={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=g(vi(n)),i=n.next();!i.done;i=n.next())i=i.value,t=i.end,r.start.push(i.start),r.end.push(t);n=r}else n=ArrayBuffer.isView(n)&&n.BYTES_PER_ELEMENT===1?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return n}})}function id(e){return JSON.parse(e,function(t,n){if(n=="NaN")var i=NaN;else if(n=="-Infinity")i=-1/0;else if(n=="Infinity")i=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")i=yE(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")i=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(i in t)n[i]=t[i];i=n}else i=n;return i})}function yE(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var $v="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),TE="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),rd=["loop","playbackRate"],xE=["pause","play"],od=new Map().set("getAssetUri",2).set("getAudioLanguages",4).set("getAudioLanguagesAndRoles",4).set("getBufferFullness",1).set("getBufferedInfo",2).set("getExpiration",2).set("getKeyStatuses",2).set("getPlaybackRate",2).set("getTextLanguages",4).set("getTextLanguagesAndRoles",4).set("isAudioOnly",10).set("isBuffering",1).set("isInProgress",1).set("isLive",10).set("isTextTrackVisible",1).set("isVideoOnly",10).set("keySystem",10).set("seekRange",1).set("getLoadMode",10).set("getManifestType",10).set("isFullyLoaded",1).set("isEnded",1),sd=new Map().set("getConfiguration",4).set("getConfigurationForLowLatency",4).set("getStats",5).set("getAudioTracks",2).set("getChaptersTracks",2).set("getImageTracks",2).set("getVideoTracks",2).set("getTextTracks",2).set("getVariantTracks",2),Qv=new Map().set("getPlayheadTimeAsDate",1).set("getPresentationStartTimeAsDate",20).set("getSegmentAvailabilityDuration",20),Jv=[["getConfiguration","configure","getConfigurationForLowLatency","configurationForLowLatency"]],Zv=[["isTextTrackVisible","setTextTrackVisibility"]],SE="cancelTrickPlay configure configurationForLowLatency getChapters resetConfiguration retryStreaming selectAudioLanguage selectAudioTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel selectVideoTrack setTextTrackVisibility trickPlay updateStartTime goToLive useTrickPlayTrackIfAvailable".split(" "),wE="addChaptersTrack addTextTrackAsync addThumbnailsTrack getAllThumbnails getChaptersAsync getThumbnails attach attachCanvas detach load unload".split(" ");function ud(e,t,n,i,r,o,s){var u=this;this.G=e,this.K=s,this.l=new ve(t),this.L=n,this.s=!1,this.A=i,this.F=r,this.M=o,this.i=this.m=!1,this.I="",this.o=null,this.B=function(){return ad(u)},this.C=function(a,l){switch(a=id(l),a.type){case"event":var c=a.targetName,f=ag(a.event);u.A(c,f);break;case"update":c=a.update;for(f in c){a=u.g[f]||{};for(var p in c[f])a[p]=c[f][p]}u.s&&(u.L(),u.s=!1);break;case"asyncComplete":if(p=a.id,f=a.error,l=a.res,a=u.h.get(p),u.h.delete(p),a)if(f){p=new C(f.severity,f.category,f.code);for(c in f)p[c]=f[c];a.reject(p)}else a.resolve(l)}},this.g={video:{},player:{}},this.H=0,this.h=new Map,this.j=null,bs.add(this)}d=ud.prototype,d.destroy=function(){return bs.delete(this),ld(this),Nn&&ty(this),this.l&&(this.l.stop(),this.l=null),this.F=this.A=null,this.i=this.m=!1,this.C=this.B=this.j=this.h=this.g=this.o=null,Promise.resolve()},d.ub=function(){return this.i},d.Tg=function(){return this.I},d.init=function(){if(this.G.length)if(B.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.Gb();var e=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=g(bs),i=n.next();!i.done;i=n.next()){i=i.value;var r=t;i.j=new je,i.s=!0,$a(i,r)}},function(t){for(var n=g(bs),i=n.next();!i.done;i=n.next())i=i.value,Qa=t=="available",i.l.Gb()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),Qa&&this.l.ha(EE),(e=Nn)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new je,this.s=!0,$a(this,e)):Nn=null}else B.__onGCastApiAvailable!==ny&&(Ja=B.__onGCastApiAvailable||null,B.__onGCastApiAvailable=ny)},d.eh=function(e){this.o=e,this.i&&_s(this,{type:"appData",appData:this.o})},d.cast=function(){var e=this;return k(function(t){if(!e.m)throw new C(1,8,8e3);if(!Qa)throw new C(1,8,8001);if(e.i)throw new C(1,8,8002);return e.j=new je,chrome.cast.requestSession(function(n){return $a(e,n)},function(n){return ey(e,n)}),T(t,e.j,0)})};function AE(e){e.i&&chrome.cast.requestSession(function(t){return $a(e,t)},function(t){return ey(e,t)})}d.hd=function(){if(this.i){if(ld(this),Nn){ty(this);try{Nn.stop(function(){},function(){})}catch{}Nn=null}ad(this)}},d.get=function(e,t){var n=this;if(e=="video"){if(xE.includes(t))return function(){return n.ui.apply(n,[e,t].concat(H(ht.apply(0,arguments))))}}else if(e=="player"){if(Qv.has(t)&&!this.get("player","isLive")())return function(){};if(SE.includes(t))return function(){return n.ui.apply(n,[e,t].concat(H(ht.apply(0,arguments))))};if(wE.includes(t))return function(){return n.Ek.apply(n,[e,t].concat(H(ht.apply(0,arguments))))};if(od.has(t)||sd.has(t))return function(){return n.g[e][t]}}return this.g[e][t]},d.set=function(e,t,n){this.g[e][t]=n,_s(this,{type:"set",targetName:e,property:t,value:n})};function $a(e,t){var n=e.M();Nn=t,t.addUpdateListener(e.B),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),ad(e),_s(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function ey(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new C(2,8,n,t))}d.ui=function(e,t){_s(this,{type:"call",targetName:e,methodName:t,args:ht.apply(2,arguments)})},d.Ek=function(e,t){var n=ht.apply(2,arguments),i=new je,r=this.H.toString();this.H++,this.h.set(r,i);try{_s(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:r})}catch(o){i.reject(o)}return i};function ty(e){var t=Nn;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function ad(e){var t=Nn?Nn.status=="connected":!1;if(e.i&&!t){e.F();for(var n in e.g)e.g[n]={};ld(e)}e.i=t,e.I=t?Nn.receiver.friendlyName:"",e.l.Gb()}function ld(e){if(e.h)for(var t=g(e.h.keys()),n=t.next();!n.done;n=t.next()){n=n.value;var i=e.h.get(n);e.h.delete(n),i.reject(new C(1,7,7e3))}}function _s(e,t){t=qv(t);var n=Nn;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},xx)}catch(i){throw t=new C(2,8,8005,i),n=new G("error",new Map().set("detail",t)),e.A("player",n),e.hd(),t}}var EE=.02,Qa=!1,Nn=null,Ja=null,bs=new Set;function ny(e){if(Ja?B.__onGCastApiAvailable=Ja:delete B.__onGCastApiAvailable,Ja=null,e)for(var t=g(bs),n=t.next();!n.done;n=t.next())n.value.init();typeof B.__onGCastApiAvailable=="function"&&B.__onGCastApiAvailable(e)}function st(e,t,n,i){i=i===void 0?!1:i,ke.call(this);var r=this;this.i=e,this.h=t,this.l=this.o=this.m=this.s=this.j=null,this.H=n,this.G=i,this.C=[],this.B=[],this.A=[],this.F=new Map,this.g=null,B.chrome?(this.g=new ud(n,function(){return oy(r)},function(){return sy(r)},function(o,s){return ay(r,o,s)},function(){return uy(r)},function(){return ry(r)},i),IE(this)):(this.j=this.i,this.s=this.h)}et(st,ke),d=st.prototype,d.destroy=function(e){return this.g&&(e!==void 0&&e)&&this.g.hd(),this.l&&(this.l.release(),this.l=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.j=this.i=null,ke.prototype.release.call(this),Promise.all(e)},d.Uj=function(){return this.j},d.kd=function(){return this.s},d.ej=function(){return this.g?this.g.m&&Qa:!1},d.ub=function(){return this.g?this.g.ub():!1},d.Tg=function(){return this.g?this.g.Tg():""},d.cast=function(){var e=this;return k(function(t){return t.g==1?e.g?T(t,e.g.cast(),2):t.return():e.h?T(t,e.h.rc(),0):t.return()})},d.eh=function(e){this.g&&this.g.eh(e)},d.Tk=function(){this.g&&AE(this.g)},d.hd=function(){this.g&&this.g.hd()},d.fj=function(e,t){t=t===void 0?!1:t;var n=this;return k(function(i){if(i.g==1)return e==n.H&&t==n.G||(n.H=e,n.G=t,!n.g)?i.return():(n.g.hd(),T(i,n.g.destroy(),2));n.g=null,n.g=new ud(e,function(){return oy(n)},function(){return sy(n)},function(r,o){return ay(n,r,o)},function(){return uy(n)},function(){return ry(n)},t),n.g.init(),K(i)})};function IE(e){e.g.init(),e.l=new Ce;for(var t=g($v),n=t.next();!n.done;n=t.next())e.l.D(e.i,n.value,function(o){e.g.ub()||(o=ag(o),e.m.dispatchEvent(o))});for(var i in Gu)e.l.D(e.h,Gu[i],function(o){e.g.ub()||e.o.dispatchEvent(o)});e.j={},t={};for(var r in e.i)t={Ud:t.Ud},t.Ud=r,Object.defineProperty(e.j,t.Ud,{configurable:!1,enumerable:!0,get:function(o){return function(){return CE(e,o.Ud)}}(t),set:function(o){return function(s){var u=o.Ud;e.g.ub()?e.g.set("video",u,s):e.i[u]=s}}(t)});e.s={},iy(e,function(o){Object.defineProperty(e.s,o,{configurable:!1,enumerable:!0,get:function(){return Za(e,o)}})}),ME(e),e.m=new ke,e.m.we=e.j,e.o=new ke,e.o.we=e.s,e.l.D(e.h,"unloading",function(){e.g&&e.g.ub()||cd(e)})}function ME(e){var t=new Map;iy(e,function(n,i){t.has(i)?(i=t.get(i),n.length<i.length?e.F.set(n,i):e.F.set(i,n)):t.set(i,n)})}function iy(e,t){function n(a){return a=="constructor"||typeof i[a]!="function"?!1:!r.has(a)}var i=e.h,r=new Set,o;for(o in i)n(o)&&(r.add(o),t(o,i[o]));for(e=Object.getPrototypeOf(i),o=Object.getPrototypeOf({});e&&e!=o;){for(var s=g(Object.getOwnPropertyNames(e)),u=s.next();!u.done;u=s.next())u=u.value,n(u)&&(r.add(u),t(u,i[u]));e=Object.getPrototypeOf(e)}}function ry(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.jd(),startTime:null,addThumbnailsTrackCalls:e.C,addTextTrackAsyncCalls:e.B,addChaptersTrackCalls:e.A};e.i.pause();for(var n=g(rd),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.i[i];for(e.i.ended||(t.startTime=e.i.currentTime),n=g(Jv),i=n.next();!i.done;i=n.next()){var r=i.value;i=r[1],r=e.h[r[0]](),t.player[i]=r}for(n=g(Zv),i=n.next();!i.done;i=n.next())r=i.value,i=r[1],r=e.h[r[0]](),t.playerAfterLoad[i]=r;return t}function oy(e){var t=new G("caststatuschanged");e.dispatchEvent(t)}function sy(e){var t=new G(e.j.paused?"pause":"play");e.m.dispatchEvent(t)}function uy(e){for(var t=g(Jv),n=t.next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.g.get("player",i[0])(),e.h[n](i)}var r=e.C,o=e.B,s=e.A;cd(e);var u=e.g.get("player","getAssetUri")();i=e.g.get("video","ended"),t=Promise.resolve();var a=e.i.autoplay;n=null,i||(n=e.g.get("video","currentTime"));var l;(i=e.g.get("player","getTextTracks")())&&i.length&&(l=i.find(function(p){return p.active}));var c=e.g.get("player","isTextTrackVisible")();u&&(e.i.autoplay=!1,t=e.h.load(u,n));var f={};for(n=g(rd),i=n.next();!i.done;i=n.next())i=i.value,f[i]=e.g.get("video",i);t.then(function(){if(e.i){for(var p=g(r),h=p.next();!h.done;h=p.next()){h=h.value;var m;(m=e.kd()).Fe.apply(m,H(h))}for(p=g(o),m=p.next();!m.done;m=p.next()){m=m.value;var y;(y=e.kd()).Dd.apply(y,H(m))}for(y=g(s),p=y.next();!p.done;p=y.next()){p=p.value;var v;(v=e.kd()).Ee.apply(v,H(p))}for(v=g(rd),y=v.next();!y.done;y=v.next())y=y.value,e.i[y]=f[y];for(v=g(Zv),y=v.next();!y.done;y=v.next())p=y.value,y=p[1],p=e.g.get("player",p[0])(),e.h[y](p);e.h.ih(c),l&&e.h.bh(l.language,l.roles,l.forced),e.i.autoplay=a,u&&e.i.play()}},function(p){p=new Map().set("detail",p),p=new G("error",p),e.h.dispatchEvent(p)})}function CE(e,t){if(t=="addEventListener")return function(i,r,o){return e.m.addEventListener(i,r,o)};if(t=="removeEventListener")return function(i,r,o){return e.m.removeEventListener(i,r,o)};if(e.g.ub()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.ub()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function Za(e,t,n){if(n=n===void 0?!1:n,e.F.has(t)&&(t=e.F.get(t)),t=="addEventListener")return function(i,r,o){return e.o.addEventListener(i,r,o)};if(t=="removeEventListener")return function(i,r,o){return e.o.removeEventListener(i,r,o)};if(t=="getMediaElement")return function(){return e.j};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.Mb()};if(t=="getDrmEngine")return function(){return e.h.C};if(t=="getAdManager")return function(){return e.h.Qh()};if(t=="getQueueManager")return function(){return e.h.Wh()};if(t=="setVideoContainer")return function(i){return e.h.Li(i)};if(!n){if(t=="addThumbnailsTrack")return function(){var i=ht.apply(0,arguments);return e.C.push(i),Za(e,t,!0).apply(null,H(i))};if(t=="addTextTrackAsync")return function(){var i=ht.apply(0,arguments);return e.B.push(i),Za(e,t,!0).apply(null,H(i))};if(t=="addChaptersTrack")return function(){var i=ht.apply(0,arguments);return e.A.push(i),Za(e,t,!0).apply(null,H(i))}}if(e.g.ub()){if(t=="getManifest"||t=="drmInfo")return function(){return we(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return we(t+"() does not work while casting!"),Promise.resolve()};if(t=="getChapters")return function(){return we(t+"() does not work while casting!"),[]}}return e.g.ub()&&Object.keys(e.g.g.video).length==0&&(od.has(t)||sd.has(t))||!e.g.ub()?e.h[t].bind(e.h):e.g.get("player",t)}function ay(e,t,n){e.g.ub()&&(t=="video"?e.m.dispatchEvent(n):t=="player"&&(n.type=="unloading"&&cd(e),e.o.dispatchEvent(n)))}function cd(e){e.C=[],e.B=[],e.A=[]}W("shaka.cast.CastProxy",st),st.prototype.changeReceiverId=st.prototype.fj,st.prototype.forceDisconnect=st.prototype.hd,st.prototype.suggestDisconnect=st.prototype.Tk,st.prototype.setAppData=st.prototype.eh,st.prototype.cast=st.prototype.cast,st.prototype.receiverName=st.prototype.Tg,st.prototype.isCasting=st.prototype.ub,st.prototype.canCast=st.prototype.ej,st.prototype.getPlayer=st.prototype.kd,st.prototype.getVideo=st.prototype.Uj,st.prototype.destroy=st.prototype.destroy;function Rt(e,t,n,i){ke.call(this);var r=this;this.h=e,this.g=t,this.j=new Ce,this.H={video:e,player:t},this.F=n||function(){},this.I=i||function(o){return o},this.i=null,this.G=!1,this.o=!0,this.m=0,this.B=!1,this.A=!0,this.s=this.l=null,this.C=new ve(function(){fd(r)}),kE(this)}et(Rt,ke),d=Rt.prototype,d.isConnected=function(){return this.G},d.bk=function(){return this.o},d.Qk=function(e){this.i=e},d.jj=function(){this.i=null},d.Rk=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},d.Pk=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},d.Ok=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},d.destroy=function(){var e=this,t,n;return k(function(i){if(i.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.g&&(t.push(e.g.destroy()),e.g=null),e.C&&(e.C.stop(),e.C=null),e.h=null,e.H=null,e.F=null,e.G=!1,e.o=!0,e.l=null,e.s=null,ke.prototype.release.call(e),T(i,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),K(i)})};function kE(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return ly(e)},t.onSenderDisconnected=function(){return ly(e)},t.onSystemVolumeChanged=function(){var r=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();r&&wi(e,{type:"update",update:{video:{volume:r.level,muted:r.muted}}},e.l),wi(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(r){return PE(e,r)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(r){return RE(e,r)},t.start(),t=g($v);for(var n=t.next();!n.done;n=t.next())e.j.D(e.h,n.value,function(r){return cy(e,"video",r)});for(var i in Gu)e.j.D(e.g,Gu[i],function(r){return cy(e,"player",r)});e.j.D(e.h,"loadeddata",function(){e.B=!0}),e.j.D(e.g,"loading",function(){e.o=!1,Ao(e)}),e.j.D(e.h,"playing",function(){e.o=!1,Ao(e)}),e.j.D(e.h,"pause",function(){Ao(e)}),e.j.D(e.g,"unloading",function(){e.o=!0,Ao(e)}),e.j.D(e.h,"ended",function(){new ve(function(){e.h&&e.h.ended&&(e.o=!0,Ao(e))}).ha(NE)})}function ly(e){e.m=0,e.A=!0,e.G=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,Ao(e)}function Ao(e){var t;k(function(n){if(n.g==1)return T(n,Promise.resolve(),2);if(!e.g)return n.return();t=new G("caststatuschanged"),e.dispatchEvent(t),fy(e)||Ai(e),K(n)})}function DE(e,t,n){var i,r,o,s,u,a,l,c,f,p,h,m,y,v,x,S,w,A,D;k(function(I){switch(I.g){case 1:for(i in t.player)r=t.player[i],e.g[i](r);return e.F(n),o=e.h.autoplay,t.manifest?(e.h.autoplay=!1,ue(I,5),T(I,e.g.load(t.manifest,t.startTime),7)):T(I,Promise.resolve(),3);case 7:if(t.addThumbnailsTrackCalls)for(s=g(t.addThumbnailsTrackCalls),u=s.next();!u.done;u=s.next())a=u.value,e.g.Fe.apply(e.g,H(a));if(t.addTextTrackAsyncCalls)for(l=g(t.addTextTrackAsyncCalls),c=l.next();!c.done;c=l.next())f=c.value,e.g.Dd.apply(e.g,H(f));if(t.addChaptersTrackCalls)for(p=g(t.addChaptersTrackCalls),h=p.next();!h.done;h=p.next())m=h.value,e.g.Ee.apply(e.g,H(m));pe(I,3);break;case 5:return y=ae(I),v=new Map().set("detail",y),x=new G("error",v),e.g&&e.g.dispatchEvent(x),I.return();case 3:if(!e.g)return I.return();for(S in t.video)w=t.video[S],e.h[S]=w;for(A in t.playerAfterLoad)D=t.playerAfterLoad[A],e.g[A](D);e.h.autoplay=o,t.manifest&&(e.h.play(),Ai(e)),K(I)}})}function cy(e,t,n){e.g&&(fd(e),wi(e,{type:"event",targetName:t,event:n},e.l))}function fd(e){e.C.ha(LE);for(var t={video:{},player:{}},n=g(TE),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.h[i];e.g.V()&&Qv.forEach(function(r,o){e.m%r==0&&(t.player[o]=e.g[o]())}),od.forEach(function(r,o){e.m%r==0&&(t.player[o]=e.g[o]())}),(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),wi(e,{type:"update",update:t},e.l),sd.forEach(function(r,o){e.m%r==0&&(r={player:{}},r.player[o]=e.g[o](),wi(e,{type:"update",update:r},e.l))}),e.B&&(e.m+=1),fy(e)}function fy(e){return e.A&&(e.h.duration||e.g.V())?(dd(e),e.A=!1,!0):!1}function dd(e,t){var n={contentId:e.g.jd(),streamType:e.g.V()?"LIVE":"BUFFERED",contentType:""};e.g.V()||(n.duration=e.h.duration),e.i&&(n.metadata=e.i),Ai(e,t===void 0?0:t,n)}function RE(e,t){var n=id(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.A=!0,DE(e,n.initState,n.appData),fd(e);break;case"appData":e.F(n.appData);break;case"set":var i=n.targetName,r=n.property;if(n=n.value,i=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),r=="volume"){t.setSystemVolumeLevel(n);break}else if(r=="muted"){t.setSystemVolumeMuted(n);break}}e.H[i][r]=n;break;case"call":i=e.H[n.targetName],i[n.methodName].apply(i,n.args);break;case"asyncCall":i=n.targetName,r=n.methodName,i=="player"&&r=="load"&&(e.m=0,e.B=!1);var o=n.id,s=t.senderId;t=e.H[i],n=t[r].apply(t,n.args),i=="player"&&r=="load"&&(n=n.then(function(){e.A=!0})),n.then(function(u){return dy(e,s,o,null,u)},function(u){return dy(e,s,o,u,null)})}}function PE(e,t){var n=id(t.data);switch(n.type){case"PLAY":e.h.play(),Ai(e);break;case"PAUSE":e.h.pause(),Ai(e);break;case"SEEK":t=n.currentTime;var i=n.resumeState;t!=null&&(e.h.currentTime=Number(t)),i&&i=="PLAYBACK_START"?(e.h.play(),Ai(e)):i&&i=="PLAYBACK_PAUSE"&&(e.h.pause(),Ai(e));break;case"STOP":e.g.rc().then(function(){e.g&&Ai(e)});break;case"GET_STATUS":dd(e,Number(n.requestId));break;case"VOLUME":i=n.volume,t=i.level,i=i.muted;var r=e.h.volume,o=e.h.muted;t!=null&&(e.h.volume=Number(t)),i!=null&&(e.h.muted=i),r==e.h.volume&&o==e.h.muted||Ai(e);break;case"LOAD":e.m=0,e.B=!1,e.A=!1,t=n.media,i=n.currentTime,r=e.I(t.contentId),o=n.autoplay||!0,e.F(t.customData),o&&(e.h.autoplay=!0),e.g.load(r,i).then(function(){e.g&&dd(e)}).catch(function(s){var u="LOAD_FAILED";s.category==7&&s.code==7e3&&(u="LOAD_CANCELLED"),wi(e,{requestId:Number(n.requestId),type:u},e.s)});break;default:wi(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}function dy(e,t,n,i,r){e.g&&wi(e,{type:"asyncComplete",id:n,error:i,res:r},e.l,t)}function wi(e,t,n,i){e.G&&(e=qv(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function Ai(e,t,n){n=n===void 0?null:n;var i={mediaSessionId:0,playbackRate:e.h.playbackRate,playerState:e.o?jE:e.g.Gg()?OE:e.h.paused?_E:UE,currentTime:e.h.currentTime,supportedMediaCommands:63,volume:{level:e.h.volume,muted:e.h.muted}};n&&(i.media=n),wi(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[i]},e.s)}W("shaka.cast.CastReceiver",Rt),Rt.prototype.destroy=Rt.prototype.destroy,Rt.prototype.setContentArtist=Rt.prototype.Ok,Rt.prototype.setContentImage=Rt.prototype.Pk,Rt.prototype.setContentTitle=Rt.prototype.Rk,Rt.prototype.clearContentMetadata=Rt.prototype.jj,Rt.prototype.setContentMetadata=Rt.prototype.Qk,Rt.prototype.isIdle=Rt.prototype.bk,Rt.prototype.isConnected=Rt.prototype.isConnected;var LE=.5,NE=5,jE="IDLE",UE="PLAYING",OE="BUFFERING",_E="PAUSED";function py(e,t,n,i,r){if(i>=r)return null;for(var o=-1,s=-1,u=0;u<n.length;u++)if(n[u].some(function(A){return A!=null&&A.g.trim()!=""})){o=u;break}for(u=n.length-1;0<=u;u--)if(n[u].some(function(A){return A!=null&&A.g.trim()!=""})){s=u;break}if(o===-1||s===-1)return null;for(var a=u=!1,l="white",c="black",f=pd(i,r,u,a,l,c);o<=s;o++){for(var p=n[o],h=-1,m=-1,y=0;y<p.length;y++)if(p[y]!=null&&p[y].g.trim()!==""){h=y;break}for(y=p.length-1;0<=y;y--)if(p[y]!=null&&p[y].g.trim()!==""){m=y;break}if(h===-1||m===-1)p=hy(i,r),e.nestedCues.push(p);else{for(;h<=m;h++)if(y=p[h]){var v=y.l,x=y.i,S=y.j,w=y.h;(v!=u||x!=a||S!=l||w!=c)&&(f.payload&&e.nestedCues.push(f),f=pd(i,r,v,x,S,w),u=v,a=x,l=S,c=w),f.payload+=y.g}else f.payload+=" ";f.payload&&e.nestedCues.push(f),o!==s&&(f=hy(i,r),e.nestedCues.push(f)),f=pd(i,r,u,a,l,c)}}return e.nestedCues.length?{cue:e,stream:t}:null}function pd(e,t,n,i,r,o){return e=new Be(e,t,""),n&&e.textDecoration.push(ci),i&&(e.fontStyle=Wr),e.color=r,e.backgroundColor=o,e}function hy(e,t){return e=new Be(e,t,""),e.lineBreak=!0,e}function gy(e,t,n,i,r){this.g=e,this.l=t,this.i=n,this.h=i,this.j=r}function hd(e,t){this.i=[],this.g=1,this.h=0,this.C=e,this.B=t,this.j=this.m=!1,this.l="white",this.o="black",this.s=this.A=null,Bs(this)}function el(e,t,n){var i="CC"+((e.C<<1|e.B)+1),r=new Be(t,n,"");r.lineInterpretation=1;var o=yy.get(e.g);return o&&(r.line=o),e.s!=null&&e.A!=null&&(r.position=10+Math.min(70,10*e.s)+2.5*e.A),(t=py(r,i,e.i,t,n))&&15<e.g+t.cue.nestedCues.length-3&&(o=yy.get(e.g+3-t.cue.nestedCues.length))&&(r.line=o),t}function Bs(e){Ei(e,0,15),e.g=1}function Eo(e,t,n){if(!(32>n||127<n)){var i="";switch(t){case 0:i=vy.has(n)?vy.get(n):String.fromCharCode(n);break;case 1:i=bE.get(n);break;case 2:e.i[e.g].pop(),i=BE.get(n);break;case 3:e.i[e.g].pop(),i=FE.get(n)}i&&e.i[e.g].push(new gy(i,e.m,e.j,e.o,e.l))}}function my(e,t,n,i){if(!(0>n||0>t))if(t>=n)for(--i;0<=i;i--)e.i[t+i]=e.i[n+i].map(function(o){return o});else for(var r=0;r<i;r++)e.i[t+r]=e.i[n+r].map(function(o){return o})}function Ei(e,t,n){for(var i=0;i<=n;i++)e.i[t+i]=[]}var vy=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),bE=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),BE=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),FE=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),yy=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function tl(e,t){this.h=0,this.o=new hd(e,t),this.i=new hd(e,t),this.g=this.j=new hd(e,t),this.l=0,this.m=null}function gd(e,t,n){e.g=e.i;var i=e.g,r=null;return e.h!==3&&e.h!==4&&(r=el(i,e.l,n),n=e.i,n.g=0<n.h?n.h:0,Ei(n,0,15),n=e.j,n.g=0<n.h?n.h:0,Ei(n,0,15),i.g=15),e.h=3,i.h=t,r}function Ty(e){e.h=1,e.g=e.j,e.g.h=0}function xy(e){Zi("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=4}var VE="black green blue cyan red yellow magenta black".split(" "),Sy="white green blue cyan red yellow magenta white_italics".split(" ");function md(e,t){this.I=t,this.M=e,this.K=this.l=!1,this.m=this.o=this.G=this.L=this.H=0,this.F=2,this.i=[],this.g=this.h=this.j=0,this.C=this.A=!1,this.B="white",this.s="black",vd(this)}function vd(e){e.i=[];for(var t=0;16>t;t++)e.i.push(yd())}function yd(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function Hi(e,t){wy(e)&&(e.i[e.h][e.g]=new gy(t,e.C,e.A,e.s,e.B),e.g++)}function wy(e){var t=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&t}md.prototype.isVisible=function(){return this.l};function HE(e){for(var t=0,n=1;16>n;n++,t++)e.i[t]=e.i[n];for(n=0;1>n;n++,t++)e.i[t]=yd()}function Pr(e,t,n){var i=new Be(e.j,t,"");i.textAlign=e.F===0?"left":e.F===1?"right":Qn;var r=i.region;switch(e.I&&(r.id+="svc"+e.I),r.id+="win"+e.M,r.height=e.o,r.width=e.m,r.heightUnits=2,r.widthUnits=2,r.viewportAnchorX=e.H,r.viewportAnchorY=e.L,r.viewportAnchorUnits=e.K?qt:2,e.G){case 0:r.regionAnchorX=0,r.regionAnchorY=0;break;case 1:r.regionAnchorX=50,r.regionAnchorY=0;break;case 2:r.regionAnchorX=100,r.regionAnchorY=0;break;case 3:r.regionAnchorX=0,r.regionAnchorY=50;break;case 4:r.regionAnchorX=50,r.regionAnchorY=50;break;case 5:r.regionAnchorX=100,r.regionAnchorY=50;break;case 6:r.regionAnchorX=0,r.regionAnchorY=100;break;case 7:r.regionAnchorX=50,r.regionAnchorY=100;break;case 8:r.regionAnchorX=100,r.regionAnchorY=100}return(n=py(i,"svc"+n,e.i,e.j,t))&&(e.j=t),n}md.prototype.display=function(){this.l=!0};function GE(){this.i=[],this.h=null,this.g=0}function KE(e,t){t.type===3?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new Fs(e.h)),e.h=null,e.g=0))}function Fs(e){this.g=0,this.h=e}Fs.prototype.Fa=function(){return this.g<this.h.length},Fs.prototype.Ma=function(){return this.g};function dt(e){if(!e.Fa())throw new C(2,2,3e3);return e.h[e.g++]}Fs.prototype.skip=function(e){if(this.g+e>this.h.length)throw new C(2,2,3e3);this.g+=e},Fs.prototype.Bi=function(e){if(0>this.g-e)throw new C(2,2,3e3);this.g-=e};function XE(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function WE(e,t,n,i){if(!e.g)return[];if(n==24)return n=dt(t).value,i=dt(t).value,n=function(o){return o.map(function(s){return("0"+(s&255).toString(16)).slice(-2)}).join("")}([n,i]),Hi(e.g,String.fromCharCode(parseInt(n,16))),[];t=e.g;var r=null;switch(n){case 8:!wy(t)||0>=t.g&&0>=t.h||(0>=t.g?(t.g=t.m-1,t.h--):t.g--,t.i[t.h][t.g]=null);break;case 13:t.isVisible()&&(r=Pr(t,i,e.i)),t.h+1>=t.o?HE(t):t.h++,t.g=0;break;case 14:t.isVisible()&&(r=Pr(t,i,e.i)),t.i[t.h]=yd(),t.g=0;break;case 12:t.isVisible()&&(r=Pr(t,i,e.i)),vd(t),t.h=0,t.g=0}return r?[r]:[]}function zE(e,t,n,i){if(128<=n&&135>=n)i=n&7,e.h[i]&&(e.g=e.h[i]);else{if(n===136){n=dt(t).value,t=[],n=g(Vs(e,n));for(var r=n.next();!r.done;r=n.next()){if(r=e.h[r.value],r.isVisible()){var o=Pr(r,i,e.i);o&&t.push(o)}vd(r)}return t}if(n===137)for(t=dt(t).value,t=g(Vs(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=i),n.display();else{if(n===138){for(n=dt(t).value,t=null,n=g(Vs(e,n)),r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()&&(t=Pr(r,i,e.i)),r.l=!1;return t?[t]:[]}if(n===139){for(n=dt(t).value,t=null,n=g(Vs(e,n)),r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()?t=Pr(r,i,e.i):r.j=i,r.l=!r.l;return t?[t]:[]}if(n===140)return t=dt(t).value,Ay(e,t,i);if(n===143)return i=Ay(e,255,i),Ey(e),i;if(n===144)t.skip(1),i=dt(t).value,e.g&&(e.g.A=0<(i&128),e.g.C=0<(i&64));else if(n===145)i=dt(t).value,n=dt(t).value,t.skip(1),e.g&&(t=Iy((n&48)>>4,(n&12)>>2,n&3),e.g.B=Iy((i&48)>>4,(i&12)>>2,i&3),e.g.s=t);else if(n===146)i=dt(t).value,t=dt(t).value,e.g&&(e=e.g,e.h=i&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),i=dt(t).value,t.skip(1),e.g&&(e.g.F=i&3);else if(152<=n&&159>=n){n=(n&15)-8,r=e.h[n]!==null,r||(o=new md(n,e.i),o.j=i,e.h[n]=o),i=dt(t).value,o=dt(t).value;var s=dt(t).value,u=dt(t).value,a=dt(t).value;t=dt(t).value,r&&(t&7)===0||(t=e.h[n],t.h=0,t.g=0,t.C=!1,t.A=!1,t.B="white",t.s="black"),t=e.h[n],t.l=0<(i&32),t.L=o&127,t.H=s,t.G=(u&240)>>4,t.K=0<(o&128),t.o=(u&15)+1,t.m=(a&63)+1,e.g=e.h[n]}}}return[]}function Vs(e,t){for(var n=[],i=0;8>i;i++)(t&1)===1&&e.h[i]&&n.push(i),t>>=1;return n}function Ay(e,t,n){var i=[];t=g(Vs(e,t));for(var r=t.next();!r.done;r=t.next()){r=r.value;var o=e.h[r];o.isVisible()&&(o=Pr(o,n,e.i))&&i.push(o),e.h[r]=null}return i}function Ey(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function Iy(e,t,n){var i={0:0,1:0,2:1,3:1};return e=i[e],t=i[t],n=i[n],YE[e<<2|t<<1|n]}var My=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),YE="black blue green cyan red magenta yellow white".split(" ");function Io(){this.h=[],this.g=[],this.i=new GE,this.l=0,this.m=new Map([["CC1",new tl(0,0)],["CC2",new tl(0,1)],["CC3",new tl(1,0)],["CC4",new tl(1,1)]]),this.s=this.o=0,this.j=new Map,this.B=!0,this.A=new Set,Td(this)}Io.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,Td(this),e=g(this.j.values());for(var t=e.next();!t.done;t=e.next())Ey(t.value)};function Td(e){e.o=0,e.s=0;for(var t=g(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=0,n.g=n.j,n.m=null,Bs(n.i),Bs(n.j),Bs(n.o);e.B=!0}Io.prototype.extract=function(e,t){if(this.B){for(var n=g(this.m.values()),i=n.next();!i.done;i=n.next())i.value.l=t;this.B=!1}if(e=new Fe(e,0),!(8>e.getLength())&&e.X()===181&&e.Aa()===49&&e.T()===1195456820&&e.X()===3&&(n=e.X(),(n&64)!==0))for(n&=31,e.skip(1),i=0;i<n;i++){var r=e.X(),o=(r&4)>>2,s=e.X(),u=e.X();o&&(r&=3,r===0||r===1?this.h.push({pts:t,type:r,Ab:s,dc:u,order:this.h.length}):(this.g.push({pts:t,type:r,value:s,order:this.g.length}),this.g.push({pts:t,type:2,value:u,order:this.g.length})))}},Io.prototype.decode=function(){function e(r,o){return r.pts-o.pts||r.order-o.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=g(this.h),i=n.next();!i.done;i=n.next())(i=qE(this,i.value))&&t.push(i);for(n=g(this.g),i=n.next();!i.done;i=n.next())KE(this.i,i.value);for(n=g(this.i.i),i=n.next();!i.done;i=n.next())i=$E(this,i.value),t.push.apply(t,H(i));return this.i.i=[],this.h=[],this.g=[],t};function qE(e,t){var n=t.type;if((t.Ab&112)===16){var i=t.Ab>>3&1;n===0?e.o=i:e.s=i}if(i="CC"+((n<<1|(n?e.s:e.o))+1),n=e.m.get(i),t.Ab===255&&t.dc===255||!t.Ab&&!t.dc||!Cy(t.Ab)||!Cy(t.dc))return 45<=++e.l&&Td(e),null;e.l=0,t.Ab&=127,t.dc&=127;var r=t.Ab;if(1<=r&&15>=r||!t.Ab&&!t.dc)return null;if(r=null,(t.Ab&112)===16)e:{if(e.A.add(i),i=t.Ab,e=t.dc,n.m===(i<<8|e))n.m=null;else if(n.m=i<<8|e,(i&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(i&7)<<1|e>>5&1],i="white",r=!1;var o=null,s=95<e?e-96:e-64;13>=s?i=Sy[Math.floor(s/2)]:15>=s?r=!0:o=Math.floor((s-16)/2),e=(e&1)===1,n.h!==4&&(s=n.g,n.h===3&&t!==s.g&&(n=1+t-s.h,my(s,n,1+s.g-s.h,s.h),Ei(s,0,n-1),Ei(s,t+1,15-t)),s.g=t,s.m=e,s.j=r,s.l=i,s.s=o,s.o="black")}else if((i&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",Eo(n.g,0,32),i=!1,t=Sy[(e&14)>>1],t==="white_italics"&&(t="white",i=!0),n.g.m=(e&1)===1,n.g.j=i,n.g.l=t;else if((i&247)===16&&(e&240)===32||(i&247)===23&&(e&255)===45)t="black",(i&7)===0&&(t=VE[(e&14)>>1]),n.g.o=t;else if((i&247)===17&&(e&240)===48)Eo(n.g,1,e);else if((i&246)===18&&(e&224)===32)Eo(n.g,i&1?3:2,e);else{if((i&246)===20&&(e&240)===32){switch(e=t.pts,i=null,t.dc){case 32:Ty(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:i=gd(n,2,e);break;case 38:i=gd(n,3,e);break;case 39:i=gd(n,4,e);break;case 40:Eo(n.g,0,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Bs(n.o),xy(n);break;case 43:xy(n);break;case 44:t=n.i,i=null,n.h!==4&&(i=el(t,n.l,e)),Ei(t,0,15);break;case 45:t=n.g,n.h!==3?i=null:(i=el(t,n.l,e),r=t.g-t.h+1,my(t,r-1,r,t.h),Ei(t,0,r-1),Ei(t,t.g,15-t.g),n.l=e);break;case 46:Ei(n.j,0,15);break;case 47:t=null,n.h!==4&&(t=el(n.i,n.l,e)),i=n.j,n.j=n.i,n.i=i,Ty(n),n.l=e,i=t}r=i;break e}(i==23||i==31)&&33<=e&&35>=e&&(n.g.A=e-32)}r=null}else e=t.dc,Eo(n.g,0,t.Ab),Eo(n.g,0,e);return r}function $E(e,t){var n=[];try{for(;t.Fa();){var i=dt(t).value,r=(i&224)>>5,o=i&31;if(r===7&&o!=0&&(r=dt(t).value&63),r!=0){e.A.add("svc"+r),e.j.has(r)||e.j.set(r,new XE(r));for(var s=e.j.get(r),u=t.Ma();t.Ma()-u<o;){r=s;var a=t,l=dt(a),c=l.value,f=l.pts;if(c===16){var p=dt(a);c=c<<16|p.value}if(0<=c&&31>=c)var h=WE(r,a,c,f);else if(128<=c&&159>=c)h=zE(r,a,c,f);else{if(4096<=c&&4127>=c)r=a,a=c&255,8<=a&&15>=a?r.skip(1):16<=a&&23>=a?r.skip(2):24<=a&&31>=a&&r.skip(3);else if(4224<=c&&4255>=c)r=a,a=c&255,128<=a&&135>=a?r.skip(4):136<=a&&143>=a&&r.skip(5);else if(32<=c&&127>=c)a=c,r.g&&(a===127?Hi(r.g,"♪"):Hi(r.g,String.fromCharCode(a)));else if(160<=c&&255>=c)r.g&&Hi(r.g,String.fromCharCode(c));else if(4128<=c&&4223>=c){if(a=c&255,r.g)if(My.has(a)){var m=My.get(a);Hi(r.g,m)}else Hi(r.g,"_")}else 4256<=c&&4351>=c&&r.g&&((c&255)!=160?Hi(r.g,"_"):Hi(r.g,"[CC]"));h=[]}n.push.apply(n,H(h))}}}}catch(y){if(y instanceof C&&y.code===3e3)Zi("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw y}return n}function Cy(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}Io.prototype.getStreams=function(){return Array.from(this.A)},W("shaka.cea.CeaDecoder",Io),rr=function(){return new Io};function ky(e){for(var t=[],n=e,i=e=0;i<n.length;)e==2&&n[i]==3?(e=0,n=[].concat(H(n)),n.splice(i,1),n=new Uint8Array(n)):n[i]==0?e++:e=0,i++;for(e=n,i=0;i<e.length;){for(n=0;e[i]==255;)n+=255,i++;n+=e[i++];for(var r=0;e[i]==255;)r+=255,i++;r+=e[i++],n==4&&t.push(e.subarray(i,i+r)),i+=r}return t}function nl(){this.j=new Map,this.i=this.h=0,this.g=xd}nl.prototype.init=function(e){function t(o){o=o.name,il.has(o)&&(n.g=il.get(o))}var n=this,i=[],r=[];if(new Ue().box("moov",de).box("mvex",de).R("trex",function(o){var s=o.reader;s.skip(4),s.skip(4),o=s.T(),s=s.T(),n.h=o,n.i=s}).box("trak",de).R("tkhd",function(o){var s=o.reader;o=o.version,o==1?(s.skip(8),s.skip(8)):(s.skip(4),s.skip(4));var u=s.T();o==1?s.skip(8):s.skip(4),s.skip(4),s.skip(8),s.skip(2),s.skip(2),s.skip(2),s.skip(2),s.skip(36),s.Aa(),s.Aa(),s.Aa(),s.Aa(),i.push(u)}).box("mdia",de).R("mdhd",function(o){o=ea(o.reader,o.version),r.push(o.timescale)}).box("minf",de).box("stbl",de).R("stsd",gi).box("avc1",t).box("avc3",t).box("dvav",t).box("dva1",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("dvc1",t).box("dvi1",t).box("encv",Zt).box("sinf",de).box("frma",function(o){o=Wc(o.reader).codec,il.has(o)&&(n.g=il.get(o))}).parse(e,!0),!i.length||!r.length||i.length!=r.length)throw new C(2,2,2010);this.g==xd&&we("Unable to determine bitstream format for CEA parsing!"),i.forEach(function(o,s){n.j.set(o,r[s])})},nl.prototype.parse=function(e){var t=this;if(this.g==xd)return[];var n=[],i=0,r=[];return new Ue().box("moof",function(o){i=o.start,r=[],de(o)}).box("traf",function(o){r.push({baseMediaDecodeTime:null,Id:t.h,Jd:t.i,pi:[],timescale:9e4}),de(o)}).R("trun",function(o){var s=r[r.length-1];o=ta(o.reader,o.version,o.flags),s.pi.push(o)}).R("tfhd",function(o){var s=r[r.length-1];o=Ju(o.reader,o.flags),s.Id=o.Id||t.h,s.Jd=o.Jd||t.i,o=o.trackId,t.j.has(o)&&(s.timescale=t.j.get(o))}).R("tfdt",function(o){var s=r[r.length-1];o=Zu(o.reader,o.version),s.baseMediaDecodeTime=o.baseMediaDecodeTime}).box("mdat",function(o){for(var s=i-o.start-8,u=o.reader.Ma(),a=g(r),l=a.next();!l.done;l=a.next()){if(l=l.value,l.baseMediaDecodeTime===null)throw we("Unable to find base media decode time for CEA captions!"),new C(2,2,2010);o.reader.seek(u),QE(t,o.reader,l.baseMediaDecodeTime,l.timescale,l.Id,l.Jd,s,l.pi,n)}}).parse(e,!1),n};function QE(e,t,n,i,r,o,s,u,a){var l=0,c=o,f=u.map(function(m){return m.$g});for(f=[].concat.apply([],H(f)),f.length&&(c=f[0].sampleSize||o),t.skip(s+u[0].gg);t.Fa();){s=t.T();var p=t.X(),h=null;switch(h=!1,u=1,e.g){case Hs:h=p&31,h=h==6;break;case Gs:u=2,t.skip(1),h=p>>1&63,h=h==39||h==40;break;case Ks:u=2,t.skip(1),h=p>>1&63,h=h==23||h==24;break;default:return}if(h)for(p=0,l<f.length&&(p=f[l].xf||0),p=(n+p)/i,u=g(ky(t.Sb(s-u))),h=u.next();!h.done;h=u.next())a.push({packet:h.value,pts:p});else try{t.skip(s-u)}catch{break}c-=s+4,c==0&&(n=l<f.length?n+(f[l].ah||r):n+r,l++,l<f.length?c=f[l].sampleSize||o:c=o)}}W("shaka.cea.Mp4CeaParser",nl);var xd=0,Hs=1,Gs=2,Ks=3,il=new Map().set("avc1",Hs).set("avc3",Hs).set("dvav",Hs).set("dva1",Hs).set("hev1",Gs).set("hvc1",Gs).set("dvh1",Gs).set("dvhe",Gs).set("vvc1",Ks).set("vvi1",Ks).set("dvc1",Ks).set("dvi1",Ks);mc("video/mp4",function(){return new nl});function rl(){this.g=null}rl.prototype.init=function(){},rl.prototype.parse=function(e){this.g?this.g.clearData():this.g=new Ge;var t=[];if(e=le(e),!so(e))return t;e=this.g.parse(e);var n=e.Ld(),i=e.Ve();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=g(i),i=n.next();!i.done;i=n.next())if(i=i.value,e.includes(i.type)&&i.time!=null)for(var r=g(ky(i.data)),o=r.next();!o.done;o=r.next())t.push({packet:o.value,pts:i.time});return t},W("shaka.cea.TsCeaParser",rl),mc("video/mp2t",function(){return new rl});function JE(e){var t=0,n=Ht(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){i=n.getUint16(e,!0),e+=2;var r=n.getUint16(e,!0);if(e+=2,(r&1)!=0||r+e>n.byteLength){n=[];break e}var o=le(n,e,r);t.push({type:i,value:o}),e+=r}n=t}return n}function Dy(e){return e=mn(ot(e)),e=JE(e).filter(function(t){return t.type===ZE})[0],e?(e=Ri(e.value,!0),(e=lr(e,"WRMHEADER"))?e:null):null}function ol(e){try{var t=Dy(e);if(t)e:{for(var n=g(Fn(t,"DATA")),i=n.next();!i.done;i=n.next()){var r=i.value;if(r.children)for(var o=g(r.children),s=o.next();!s.done;s=o.next()){var u=s.value;if(u.tagName=="LA_URL"){var a=ot(u);break e}}}a=""}else a="";return a}catch{return""}}var ZE=1;function Ry(e,t,n){var i=n2(e),r=null;e=[];var o=[],s=null,u=new Set(i.map(function(l){return l.keyId}));u.delete(null);var a="cenc";if(1<u.size)throw new C(2,4,4010);if(!t){if(o=i.filter(function(l){return l.wd=="urn:mpeg:dash:sea:2012"}),1<o.length)throw new C(2,4,4050);o.length&&(s=r2(o[0])),(o=i.find(function(l){return l.wd=="urn:mpeg:dash:mp4protection:2011"}))&&o.encryptionScheme&&(a=o.encryptionScheme),o=i.filter(function(l){return l.wd=="urn:mpeg:dash:mp4protection:2011"?(r=l.init||r,!1):l.wd!="urn:mpeg:dash:sea:2012"}),o.length&&(e=t2(r,a,o,n,u),e.length==0&&(e=[Pi("",a,r)]))}if(i.length&&!s&&(t||!o.length))for(e=[],t=g(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,n!="org.w3.clearkey"&&e.push(Pi(n,a,r));if(u=Array.from(u)[0]||null)for(a=g(e),t=a.next();!t.done;t=a.next())for(t=g(t.value.initData),n=t.next();!n.done;n=t.next())n.value.keyId=u;return{Kh:u,sm:r,drmInfos:e,Wf:s,Ph:!0}}function e2(e,t,n,i){var r=Ry(e,n,i);if(t.Ph)e=t.drmInfos.length==1&&!t.drmInfos[0].keySystem,n=r.drmInfos.length==0,(t.drmInfos.length==0||e&&!n)&&(t.drmInfos=r.drmInfos),t.Ph=!1;else if(0<r.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(o){return r.drmInfos.some(function(s){return s.keySystem==o.keySystem})}),t.drmInfos.length==0))throw new C(2,4,4008);return r.Kh||t.Kh}function sl(e){var t=Dn(e.node,"https://dashif.org/CPS","Laurl");if(t&&(t=ot(t)))return t;if((t=Dn(e.node,"urn:microsoft:playready","pro"))&&ot(t))return ol(t);if((e=Dn(e.node,"urn:mpeg:cenc:2013","pssh"))&&(e=ot(e))){t=mn(e),e=8,t=Ht(t);var n=t.getUint8(e);return e+=20,0<n&&(e+=4+16*t.getUint32(e)),e=le(t,e+4),e=Su(e),e=lr("<pro>"+e+"</pro>"),ol(e)}return""}function t2(e,t,n,i,r){var o=[];n=g(n);for(var s=n.next();!s.done;s=n.next()){s=s.value;var u=i[s.wd];if(u){var a;if((a=Dn(s.node,"urn:microsoft:playready","pro"))&&ot(a)){a=ot(a),a=mn(a);var l=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);a=[{initData:Yu(a,l,new Set,0),initDataType:"cenc",keyId:s.keyId}]}else a=null;if(l=null,s.wd==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"){l=s;var c=r;if(c.size==0)l=null;else{var f=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),p=new Uint8Array([]);l=[{initData:Yu(p,f,c,1),initDataType:"cenc",keyId:l.keyId}]}}a=Pi(u,t,s.init||e||a||l),(u=o2.get(u))&&(a.licenseServerUri=u(s)),o.push(a)}}return o}function n2(e){var t=[];e=g(e);for(var n=e.next();!n.done;n=e.next())(n=i2(n.value))&&t.push(n);return t}function i2(e){var t=e.attributes.schemeIdUri,n=ui(e,"urn:mpeg:cenc:2013","default_KID"),i=Ih(e,"urn:mpeg:cenc:2013","pssh").map($t),r=e.attributes.value;if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new C(2,4,4009);var o=[];try{o=i.map(function(s){return{initDataType:"cenc",initData:mn(s),keyId:null}})}catch{throw new C(2,4,4007)}return{node:e,wd:t,keyId:n,init:0<o.length?o:null,encryptionScheme:r}}function r2(e){if(!B.crypto||!B.crypto.subtle)throw we("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new C(2,4,4042);var t=Dn(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new C(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new C(2,4,4051);if(t=Dn(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new C(2,4,4051);if(e=t.attributes.IV,t=Gt(t.attributes.keyUriTemplate),!e||!t)throw new C(2,4,4051);if(e=nr(e.substr(2)),e.byteLength!=16)throw new C(2,4,4048);return{hk:t,iv:e}}var o2=new Map().set("com.apple.fps",function(e){if(B.shakaMediaKeysPolyfill==="apple")throw new C(2,4,4054);return(e=Dn(e.node,"https://dashif.org/CPS","Laurl"))&&(e=ot(e))?e:""}).set("com.widevine.alpha",function(e){var t=Dn(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=ot(t))?t:(e=Dn(e.node,"urn:microsoft","laurl"))&&Gt(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",sl).set("com.microsoft.playready.recommendation",sl).set("com.microsoft.playready.software",sl).set("com.microsoft.playready.hardware",sl).set("org.w3.clearkey",function(e){var t=Dn(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=ot(t))?t:(e=Dn(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=ot(e))?e:""});function Xs(e,t,n,i,r,o){var s=new Map().set("RepresentationID",t).set("Number",n).set("SubNumber",i).set("Bandwidth",r).set("Time",o);return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(u,a,l,c){if(u=="$$")return"$";var f=s.get(a);if(f==null)return u;switch(a=="RepresentationID"&&l&&(l=void 0),a=="Time"&&typeof f!="bigint"&&(.2<=Math.abs(f-Math.round(f))&&we("Calculated $Time$ values must be close to integers"),f=Math.round(f)),c){case void 0:case"d":case"i":case"u":u=f.toString();break;case"o":u=f.toString(8);break;case"x":u=f.toString(16);break;case"X":u=f.toString(16).toUpperCase();break;default:u=f.toString()}return l=B.parseInt(l,10)||1,Array(Math.max(0,l-u.length)+1).join("0")+u})}function Py(e,t){var n=jn(e,t,"timescale"),i=1;n&&(i=li(n)||1),n=jn(e,t,"duration");var r=(n=li(n||""))?n/i:null,o=jn(e,t,"startNumber"),s=Number(jn(e,t,"presentationTimeOffset"))||0,u=wt(o||"");if((o==null||u==null)&&(u=1),o=null,t=Mo(e,t,"SegmentTimeline")){t=Pe(t,"S"),o=i,e=e.na.duration||1/0;for(var a=u,l=[],c=-s,f=0;f<t.length;++f){var p=t[f],h=t[f+1],m=se(p,"t",wt),y=se(p,"d",wt),v=se(p,"r",yt);if(p=se(p,"k",yt)||0,m!=null&&(m-=s),y){if(m=m??c,v=v||0,0>v)if(h){if(h=se(h,"t",wt),h==null)break;if(m>=h)break;v=Math.ceil((h-m)/y)-1}else{if(e==1/0)break;if(m/o>=e)break;v=Math.ceil((e*o-m)/y)-1}for(0<l.length&&m!=c&&(l[l.length-1].end=m/o),h=0;h<=v;++h)c=m+y,l.push({start:m/o,end:c/o,xh:m,Zb:p,Kk:l.length+a}),m=c}}o=l}return{timescale:i,Ef:n,gb:r,ee:u,$b:s/i||0,wh:s,timeline:o}}function Ly(e,t){return[t(e.J),t(e.ma),t(e.ra)].filter(Oi)}function jn(e,t,n){t=Ly(e,t),e=null,t=g(t);for(var i=t.next();!i.done&&!(e=i.value.attributes[n]);i=t.next());return e}function Mo(e,t,n){t=Ly(e,t),e=null,t=g(t);for(var i=t.next();!i.done&&!(e=Ye(i.value,n));i=t.next());return e}function s2(e,t,n,i,r,o){for(var s=ui(e,"http://www.w3.org/1999/xlink","href"),u=ui(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",a=g(Object.keys(e.attributes)),l=a.next();!l.done;l=a.next()){l=l.value;var c=l.split(":"),f=xc("http://www.w3.org/1999/xlink");c[0]==f&&delete e.attributes[l]}if(5<=o)return mr(new C(2,4,4028));if(u!="onLoad")return mr(new C(2,4,4027));var p=gt([i],[s]);return r.request(0,ct(p,t)).Va(function(h){if(h=Yo(h.data,e.tagName),!h)return mr(new C(2,4,4001,s));for(e.children=[];h.children.length;){var m=h.children.shift();e.children.push(m)}m=g(Object.keys(h.attributes));for(var y=m.next();!y.done;y=m.next())y=y.value,e.attributes[y]=h.attributes[y];return ul(e,t,n,p[0],r,o+1)})}function ul(e,t,n,i,r,o){if(o=o===void 0?0:o,ui(e,"http://www.w3.org/1999/xlink","href")){var s=s2(e,t,n,i,r,o);return n&&(s=s.Va(void 0,function(){return ul(e,t,n,i,r,o)})),s}s=[];for(var u=g(Eh(e)),a=u.next(),l={};!a.done;l={Fd:void 0},a=u.next())l.Fd=a.value,ui(l.Fd,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter(function(c){return function(f){return f!==c.Fd}}(l)):l.Fd.tagName!="SegmentTimeline"&&s.push(ul(l.Fd,t,n,i,r,o));return ug(s).Va(function(){return e})}function u2(e,t,n,i,r,o,s){var u,a=new Ue().R("sidx",function(l){u=a2(t,i,r,o,s,n,l)});if(e&&a.parse(e),u)return u;throw new C(2,3,3004)}function a2(e,t,n,i,r,o,s){var u=[];s.reader.skip(4);var a=s.reader.T();if(a==0)throw new C(2,3,3005);if(s.version==0)var l=s.reader.T(),c=s.reader.T();else l=s.reader.ud(),c=s.reader.ud();s.reader.skip(2);var f=s.reader.Aa();for(e=e+s.size+c,c=0;c<f;c++){var p=s.reader.T(),h=(p&2147483648)>>>31;p&=2147483647;var m=s.reader.T();if(s.reader.skip(4),h==1)throw new C(2,3,3006);u.push(new Z(l/a+n,(l+m)/a+n,function(){return o},e,e+p-1,t,n,i,r)),l+=m,e+=p}return s.parser.stop(),u}function Gi(e){this.h=Ht(e),this.g=new Fe(this.h,0)}Gi.prototype.Fa=function(){return this.g.Fa()};function Ii(e){var t=Ny(e);if(7<t.length)throw new C(2,3,3002);var n=0;t=g(t);for(var i=t.next();!i.done;i=t.next())n=256*n+i.value;t=Ny(e);e:{i=g(l2);for(var r=i.next();!r.done;r=i.next())if(ri(t,new Uint8Array(r.value))){i=!0;break e}i=!1}if(i)t=e.h.byteLength-e.g.Ma();else{if(t.length==8&&t[1]&224)throw new C(2,3,3001);for(r=i=0;r<t.length;r++){var o=t[r];i=r==0?o&(1<<8-t.length)-1:256*i+o}t=i}return t=e.g.Ma()+t<=e.h.byteLength?t:e.h.byteLength-e.g.Ma(),i=Ht(e.h,e.g.Ma(),t),e.g.skip(t),new c2(n,i)}function Ny(e){var t=e.g.Ma(),n=e.g.X();if(n==0)throw new C(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),le(e.h,t,n)}var l2=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function c2(e,t){this.id=e,this.g=t}function Sd(e){if(8<e.g.byteLength)throw new C(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new C(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var i=e.g.getUint8(n);t=256*t+i}return t}function f2(e,t,n,i,r,o,s,u,a){function l(){return r}var c=[];e=new Gi(e.g);for(var f=null,p=null;e.Fa();){var h=Ii(e);if(h.id==187){var m=d2(h);m&&(h=n*m.Yk,m=t+m.Ck,f!=null&&c.push(new Z(f+s,h+s,l,p,m-1,o,s,u,a)),f=h,p=m)}}return f!=null&&c.push(new Z(f+s,i+s,l,p,null,o,s,u,a)),c}function d2(e){var t=new Gi(e.g);if(e=Ii(t),e.id!=179)throw new C(2,3,3013);if(e=Sd(e),t=Ii(t),t.id!=183)throw new C(2,3,3012);t=new Gi(t.g);for(var n=0;t.Fa();){var i=Ii(t);if(i.id==241){n=Sd(i);break}}return{Yk:e,Ck:n}}function jy(e,t,n){if(t=Mo(e,t,"Initialization"),!t)return null;var i=e.J.cb(),r=t.attributes.sourceURL;r&&(i=gt(i,[Gt(r)],e.Ib())),r=0;var o=null;return(t=se(t,"range",Au))&&(r=t.start,o=t.end),n=new Xt(function(){return i},r,o,by(e),null,null,n,e.ma.encrypted),n.codecs=e.J.codecs,n.mimeType=e.J.mimeType,e.na&&(n.g=e.na.start+e.na.duration),n}function p2(e,t,n){var i=Number(jn(e,Co,"presentationTimeOffset"))||0,r=jn(e,Co,"timescale"),o=1;r&&(o=li(r)||1);var s=i/o||0,u=jy(e,Co,n);h2(e,u);var a=ar(e);return{endTime:-1,timeline:-1,Kc:function(){var l=Mo(a,Co,"RepresentationIndex"),c=a.J.cb();return l&&(l=Gt(l.attributes.sourceURL))&&(c=gt(c,[l],a.Ib())),l=Oy(a),Uy(a,t,u,c,l.start,l.end,s)},timescale:o}}function Uy(e,t,n,i,r,o,s){var u,a,l,c,f,p,h,m,y,v,x,S,w,A,D,I,E,M;return k(function(P){if(P.g==1)return u=e.presentationTimeline,a=!e.hc||!e.na.ai,l=e.na.start,c=e.na.duration,f=e.J.mimeType.split("/")[1],p=t,h=null,m=[p(i,r,o,!1),f=="webm"?p(n.O(),n.startByte,n.endByte,!0):null],p=null,T(P,Promise.all(m),2);if(y=P.h,v=y[0],x=y[1]||null,S=null,w=l-s,A=l,D=c?l+c:1/0,f=="mp4")var N=u2(v,r,i,n,w,A,D);else{N=v;var L=new Gi(x);if(Ii(L).id!=440786851)throw new C(2,3,3008);var R=Ii(L);if(R.id!=408125543)throw new C(2,3,3009);L=R.g.byteOffset,R=new Gi(R.g);for(var O=null;R.Fa();){var U=Ii(R);if(U.id==357149030){O=U;break}}if(!O)throw new C(2,3,3010);for(O=new Gi(O.g),U=1e6,R=null;O.Fa();){var j=Ii(O);if(j.id==2807729)U=Sd(j);else if(j.id==17545)if(j.g.byteLength==4)R=j.g.getFloat32(0);else if(j.g.byteLength==8)R=j.g.getFloat64(0);else throw new C(2,3,3003)}if(R==null)throw new C(2,3,3011);if(O=U/1e9,R*=O,N=Ii(new Gi(N)),N.id!=475249515)throw new C(2,3,3007);N=f2(N,L,O,R,i,n,w,A,D)}for(S=N,I=g(S),E=I.next();!E.done;E=I.next())M=E.value,M.codecs=e.J.codecs,M.mimeType=e.J.mimeType,M.bandwidth=e.bandwidth;return u.Xd(S),h=new Ie(S),a&&h.gd(A,D,!0),P.return(h)})}function Co(e){return e.xd}function Oy(e){var t=Mo(e,Co,"RepresentationIndex");return e=jn(e,Co,"indexRange"),e=Au(e||""),t&&(e=se(t,"range",Au,e)),e}function h2(e,t){if(_y(e,t),!Oy(e))throw new C(2,4,4002)}function _y(e,t){var n=e.J.mimeType.split("/")[1];if(e.J.contentType!=he&&n!="mp4"&&n!="webm")throw new C(2,4,4006);if(n=="webm"&&!t)throw new C(2,4,4005)}function by(e){var t=e.J;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.lf,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.ma.label||null,roles:e.roles||null,language:e.ma.language||null}}function g2(e,t,n){var i=jy(e,By,n),r=m2(e);if(!r.gb&&!r.timeline&&1<r.od.length)throw new C(2,4,4002);if(!r.gb&&!e.na.duration&&!r.timeline&&r.od.length==1)throw new C(2,4,4002);if(r.timeline&&r.timeline.length==0)throw new C(2,4,4002);var o=null,s=null;e.ra.id&&e.J.id&&(s=t.get(e.ra.id+","+e.J.id))&&(o=s.segmentIndex);var u=v2(e.na.start,e.na.duration,e.J.cb,r,i,n,e.J.mimeType,e.J.codecs,e.bandwidth,e.Ib);return t=!o,o?o.Vd(u,e.presentationTimeline.Eb()):o=new Ie(u),e.presentationTimeline.Xd(u),e.hc&&e.na.ai||o.gd(e.na.start,e.na.duration?e.na.start+e.na.duration:1/0,t),s&&(s.segmentIndex=o),{endTime:-1,timeline:-1,Kc:function(){return o&&o.getNumReferences()!=0||o.gf(u),Promise.resolve(o)},timescale:r.timescale}}function By(e){return e.pc}function m2(e){var t=y2(e);e=Py(e,By);var n=e.ee;n==0&&(n=1);var i=0;return e.gb?i=e.gb*(n-1):e.timeline&&0<e.timeline.length&&(i=e.timeline[0].start),{gb:e.gb,startTime:i,ee:n,$b:e.$b,timescale:e.timescale,timeline:e.timeline,od:t}}function v2(e,t,n,i,r,o,s,u,a,l){var c=i.od.length;i.timeline&&i.timeline.length!=i.od.length&&(c=Math.min(i.timeline.length,i.od.length));for(var f=e-i.$b,p=t?e+t:1/0,h=[],m=i.startTime,y={},v=0;v<c;y={Gf:void 0,yf:void 0},v++){y.yf=i.od[v];var x=m;m=void 0,m=i.gb!=null?x+i.gb:i.timeline?i.timeline[v].end:x+t,y.Gf=null,y=new Z(e+x,e+m,function(S){return function(){return S.Gf==null&&(S.Gf=gt(n(),[S.yf.pk],l())),S.Gf}}(y),y.yf.start,y.yf.end,r,f,e,p,[],"",null,null,mi,o),y.codecs=u,y.mimeType=s,y.bandwidth=a,h.push(y)}return h}function y2(e){return[e.J.pc,e.ma.pc,e.ra.pc].filter(Oi).map(function(t){return Pe(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){t.attributes.indexRange&&!e.Dg&&(e.Dg=!0);var n=Gt(t.attributes.media);return t=se(t,"mediaRange",Au,{start:0,end:null}),{pk:n,start:t.start,end:t.end}})}function Fy(e,t,n,i,r,o,s,u,a,l){a||e.J.Xe||(e.J.Xe=jn(e,Ki,"initialization"));var c=e.J.Xe?w2(e,s):null,f=T2(e);x2(f);var p=ar(e);if(f.Sd)return _y(e,c),{endTime:-1,timeline:-1,Kc:function(){var x=Xs(f.Sd,p.J.originalId,null,null,p.bandwidth||null,null);return x=gt(p.J.cb(),[x]),Uy(p,t,c,x,0,null,f.$b)},timescale:f.timescale};if(f.gb)return i||e.ma.contentType==="image"||e.ma.contentType==="text"||(i=e.na.start,l=e.ra.id,n=e.na.duration,l=(l=l!=null&&o.get(l)||n)?i+l:1/0,e.presentationTimeline.Lg(f.gb),e.presentationTimeline.ni(i,l)),{endTime:-1,timeline:-1,Kc:function(){return S2(p,f,r,c,o,s,u,e.J.zf)},timescale:f.timescale};var h=null;i=i=null,e.ra.id&&e.J.id&&(i=e.ra.id+","+e.J.id,i=n.get(i))&&(h=i.segmentIndex);var m=e.na.start,y=e.na.duration?m+e.na.duration:1/0;if(h)l=h,Vy(l,f,m,y,c),l.$a(e.presentationTimeline.Eb());else{if(n=0,a=-1,e.ra.id!=null&&e.J.id!=null){var v=l.get(e.ra.id);if(v)a=v.timeline;else for(l=g(l.values()),v=l.next();!v.done;v=l.next())if(v=v.value,Math.abs(f.$b-v.endTime)<=gh&&v.Vg.includes(e.J.id)){a=v.timeline;break}else v.timeline>=n&&(n=v.timeline+1)}a==-1&&(a=n),h=new Ws(f,e.J.originalId,e.bandwidth,e.J.cb,e.Ib,m,y,c,s,e.J.zf,a)}return f.timeline&&e.ma.contentType!=="image"&&e.ma.contentType!=="text"&&e.presentationTimeline.oi(h.h?h.h.timeline:[],m),i&&e.hc&&(i.segmentIndex=h),i=(i=(i=f.timeline)&&i[i.length-1])?i.end+f.$b:-1,l=-1,h instanceof Ws&&(l=h.Ne()),{endTime:i,timeline:l,Kc:function(){return h instanceof Ws&&h.getNumReferences()==0&&Vy(h,f,m,y,c),Promise.resolve(h)},timescale:f.timescale}}function Ki(e){return e.Cc}function T2(e){var t=Py(e,Ki),n=jn(e,Ki,"media"),i=jn(e,Ki,"index"),r=jn(e,Ki,"k"),o=0;return r&&(o=parseInt(r,10)),{Ef:t.Ef,gb:t.gb,timescale:t.timescale,ee:t.ee,$b:t.$b,wh:t.wh,timeline:t.timeline,Ac:n&&Gt(n),Sd:i,mimeType:e.J.mimeType,codecs:e.J.codecs,bandwidth:e.bandwidth,qk:o}}function x2(e){var t=e.Sd?1:0;if(t+=e.timeline?1:0,t+=e.gb?1:0,t==0)throw new C(2,4,4002);if(t!=1&&(e.Sd&&(e.timeline=null),e.Ef=null,e.gb=null),!e.Sd&&!e.Ac)throw new C(2,4,4002)}function S2(e,t,n,i,r,o,s,u){function a(R){var O=R-v,U=O*y,j=t.Ef,_=O*j;"BigInt"in B&&_>Number.MAX_SAFE_INTEGER&&(_=BigInt(O)*BigInt(j)),U+=p,O=U+y,j=Math.min(O,c());var F=[],V=t.qk;if(V)for(var q=(j-U)/V,X={},Me=0;Me<V;X={Oi:void 0},Me++){var ge=U+q*Me,xe=ge+q;X.Oi=Me+1,X=new Z(ge,xe,function(me){return function(){var Ee=Xs(x,w,R,me.Oi,S,_);return gt(A(),[Ee],D())}}(X),0,null,i,I,p,c(),[],"",null,null,mi,o),X.codecs=e.J.codecs,X.mimeType=e.J.mimeType,u==0?0<Me&&X.md():Me%u!=0&&X.md(),F.push(X)}return U=new Z(U,j,function(){if(V)return[];var me=Xs(x,w,R,null,S,_);return gt(A(),[me],D())},0,null,i,I,p,c(),F,"",null,null,mi,o,0<F.length),U.codecs=e.J.codecs,U.mimeType=e.J.mimeType,U.bandwidth=e.bandwidth,U.j=O,U}function l(){var R=[Math.max(f.Eb(),p),Math.min(f.vc(),c())].map(function(O){return O-p});return R=[Math.ceil(R[0]/y),Math.ceil(R[1]/y)-1],e.J.pb&&R[1]++,R.map(function(O){return O+v})}function c(){var R=h!=null&&r.get(h)||m;return R?p+R:1/0}var f=e.presentationTimeline,p=e.na.start,h=e.ra.id,m=e.na.duration,y=t.gb,v=t.ee,x=t.Ac,S=e.bandwidth||null,w=e.J.id,A=e.J.cb,D=e.Ib,I=p-t.$b,E=l();n=e.hc?Math.max(E[0],E[1]-n+1):E[0],s=s||E[1],E=[];for(var M=n;M<=s;++M){var P=a(M);E.push(P)}var N=new Ie(E);if(E=f.vc()<c(),M=f.V(),E||M){var L=Math.max(n,s+1);n=y,e.J.pb&&(n=.1),N.Ff(n,function(){var R=f.Eb();N.$a(R);var O=g(l());O.next(),O=O.next().value;for(var U=[];L<=O;){var j=a(L);U.push(j),L++}return R>c()&&!U.length?null:U})}return Promise.resolve(N)}function w2(e,t){var n=e.J.Xe;if(n||(n=jn(e,Ki,"initialization")),!n)return null;n=Gt(n);var i=e.J.originalId,r=e.bandwidth||null,o=e.J.cb,s=e.Ib;return t=new Xt(function(){var u=Xs(n,i,null,null,r,null);return gt(o(),[u],s())},0,null,by(e),null,null,t,e.ma.encrypted),t.codecs=e.J.codecs,t.mimeType=e.J.mimeType,e.na&&(t.g=e.na.start+e.na.duration),t}function Ws(e,t,n,i,r,o,s,u,a,l,c){Ie.call(this,[]),this.h=e,this.F=t,this.B=n,this.C=i,this.H=r,this.j=o,this.l=s,this.s=u,this.A=a,this.G=l,this.I=c,wd(this)}et(Ws,Ie),d=Ws.prototype,d.getNumReferences=function(){return this.h?this.h.timeline.length:0},d.release=function(){Ie.prototype.release.call(this),this.h=null},d.$a=function(e){if(this.h){for(var t=0,n=this.h.timeline,i=0;i<n.length&&n[i].end+this.j<=e;i+=1)t+=1;0<t&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.i+=t,this.getNumReferences()===0&&this.release())}};function Vy(e,t,n,i,r){if(A2(e,r),e.h){if(n=e.h.timeline,e.h.Ac!==t.Ac&&(e.h.Ac=t.Ac),n.length){var o=n[n.length-1];t=t.timeline.filter(function(s){return s.end>o.end})}else t=t.timeline.slice();0<t.length&&e.h.timeline.push.apply(e.h.timeline,H(t)),e.l!==i&&(e.l=i)}else e.h=t,e.j=n,e.l=i;wd(e)}function A2(e,t){if(e.s!==t){e.s=t,e=g(e.g);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&Xg(n,t)}}function wd(e){if(e.h&&!e.o){for(var t=[],n=g(e.h.timeline),i=n.next();!i.done;i=n.next())i=i.value,i.start>=e.l||0>=i.end||t.push(i);e.h.timeline=t,e.$a(e.j)}}d.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.j)return this.i;if(!this.h)return null;var t=this.h.timeline;if(e<this.j||e>=this.l)return null;for(var n=t.length-1,i=0;i<t.length;i++){var r=t[i],o=r.start+this.j;if(r=i<n?t[i+1].start+this.j:this.l===1/0?r.end+this.j:this.l,e>=o&&e<r)return i+this.i}return null},d.get=function(e){var t=this;if(e-=this.i,0>e||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){var i=this.h.timeline[e],r=i.Kk,o=i.xh+this.h.wh;n=this.j-this.h.$b;var s=this.j+i.end,u=s;e===this.getNumReferences()-1&&this.l!==1/0&&(u=.1<Math.abs(u-this.l)?Math.min(u,this.l):this.l);for(var a=this.h.codecs,l=this.h.mimeType,c=this.h.bandwidth,f=[],p=(i.end-i.start)/i.Zb,h={},m=0;m<i.Zb;h={Hf:void 0,Pi:void 0},m++){var y=i.start+p*m,v=y+p;h.Pi=m+1,h.Hf=null,h=new Z(this.j+y,this.j+v,function(x){return function(){return t.h?(x.Hf==null&&(x.Hf=Hy(t.h.Ac,t.F,r,t.B,o,x.Pi,t.C,t.H)),x.Hf):[]}}(h),0,null,this.s,n,this.j,this.l,[],"",null,null,mi,this.A),h.codecs=a,h.mimeType=l,h.bandwidth=c,this.G==0?0<m&&h.md():m%this.G!=0&&h.md(),f.push(h)}n=new Z(this.j+i.start,u,function(){return 0<i.Zb||!t.h?[]:Hy(t.h.Ac,t.F,r,t.B,o,null,t.C,t.H)},0,null,this.s,n,this.j,this.l,f,"",null,null,mi,this.A,0<i.Zb),n.codecs=a,n.mimeType=l,n.j=s,n.bandwidth=c,this.g[e]=n}return n},d.Cb=function(e){wd(this);for(var t=0;t<this.getNumReferences();t++){var n=this.get(t+this.i);n&&e(n)}};function Hy(e,t,n,i,r,o,s,u){return e=Xs(e,t,n,o,i||null,r),gt(s(),[e],u()).map(function(a){return a.toString()})}d.Ne=function(){return this.I};function ko(e){this.o=null,this.A=e,this.G=new Qr,this.i=[],this.h=null,this.m=[],this.B=null,this.F=[],this.C=300,this.l=new Map,this.j=new Map,this.g=null,this.s="UNKNOWN"}ko.prototype.configure=function(e){this.o=e},ko.prototype.destroy=function(){return this.A=this.o=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.G.destroy()},ko.prototype.setManifestType=function(e){this.s=e};function zs(e,t){var n,i,r,o,s,u,a;return k(function(l){if(l.g==1)return n=gt(e.i,[E2(e,t)]),i=ct(n,e.o.retryParameters),r=e.A.networkingEngine.request(8,i),vr(e.G,r),ue(l,2),T(l,r.promise,4);if(l.g!=2)return o=l.h,s=ze(o.data),u=JSON.parse(s),u.VERSION==1&&I2(e,u,o.uri),pe(l,0);if((a=ae(l))&&a.code==7001)return l.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new ve(function(){zs(e,t)}),e.g.ha(e.C),K(l)})}function E2(e,t){if(!e.m.length)return t;t=new tt(t);var n=e.B||e.m[0],i=Math.round(e.A.getBandwidthEstimate()),r=t.g;return e.s=="DASH"?(r.add("_DASH_pathway",n),r.add("_DASH_throughput",String(i))):e.s=="HLS"&&(r.add("_HLS_pathway",n),r.add("_HLS_throughput",String(i))),fh(r)&&er(t,r),t.toString()}function I2(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var i=t["RELOAD-URI"]||n;e.g=new ve(function(){zs(e,i)}),(n=t.TTL)&&(e.C=n),e.g.ha(e.C),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}function Do(e,t,n,i){var r=e.l.get(t);r||(r=new Map),r.set(n,i),e.l.set(t,r)}ko.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function Ys(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var i=[],r=g(e.m),o=r.next(),s={};!o.done;s={qd:void 0},o=r.next())if(s.qd=o.value,o=t.get(s.qd))i.push({Qg:s.qd,location:o});else if(o=e.F.find(function(a){return function(l){return l.El==a.qd}}(s))){var u=t.get(o["BASE-ID"]);u&&(o["URI-REPLACEMENT"].Zi?(u=new tt(u),Tu(u,o["URI-REPLACEMENT"].Zi),i.push({Qg:s.qd,location:u.toString()})):i.push({Qg:s.qd,location:u}))}for(r=Date.now(),s=g(e.j.keys()),o=s.next();!o.done;o=s.next())o=o.value,u=e.j.get(o),r>u&&e.j.delete(o);if(i=i.filter(function(a){for(var l=g(e.j.keys()),c=l.next();!c.done;c=l.next())if(c.value.includes(new tt(a.location).Bb))return!1;return!0}),i.length&&(e.B=i[0].Qg),i=i.map(function(a){return a.location}),!i.length&&e.h)for(r=g(e.h.split(",")),s=r.next();!s.done;s=r.next())(s=t.get(s.value))&&(e.B=e.h,i.push(s));if(!i.length)for(t=g(t.values()),r=t.next();!r.done;r=t.next())i.push(r.value);return n?i:gt(e.i,i)}function jt(){this.l=[],this.h=[],this.g=[],this.j=[],this.i=[],this.s=this.o=!1,this.m=new Set}d=jt.prototype,d.release=function(){for(var e=g(this.h.concat(this.g,this.j,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.j=[],this.i=[],this.l=[],this.s=this.o=!1,this.m.clear()},d.Tj=function(){return this.l},d.Bg=function(){return this.j.slice()},d.yj=function(){return this.i},d.Lh=function(e,t){if(e){if(e.type=="audio")for(var n=g(this.h),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(r){return r!==e});else if(e.type=="video")for(n=g(this.g),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(r){return r!==e}),i.trickModeVideo&&(i.trickModeVideo.matchedStreams=i.trickModeVideo.matchedStreams.filter(function(r){return r!==e})),i.dependencyStream&&(i.dependencyStream.matchedStreams=i.dependencyStream.matchedStreams.filter(function(r){return r!==e}));else if(e.type==he)for(n=g(this.j),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(r){return r!==e});else if(e.type=="image")for(n=g(this.i),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(r){return r!==e});e.segmentIndex&&e.closeSegmentIndex(),this.m.delete(t)}};function Gy(e,t){var n=[],i=[],r=[],o=[];e=g(e);for(var s=e.next();!s.done;s=e.next()){var u=s.value;s=new Map(u.audioStreams.map(function(f){return[Md(f),f]}));var a=new Map(u.videoStreams.map(function(f){return[Id(f),f]})),l=new Map(u.textStreams.map(function(f){return[Qs(f),f]}));if(u=new Map(u.imageStreams.map(function(f){return[Js(f),f]})),t){var c=qy(he);l.set(Qs(c),c),c=qy("image"),u.set(Js(c),c)}n.push(s),i.push(a),r.push(l),o.push(u)}return{Eh:n,Xi:i,Ui:r,Yh:o}}d.$f=function(e,t,n){n=n===void 0?!1:n;var i=this,r,o,s,u,a,l,c,f,p,h,m,y,v,x,S,w,A,D,I,E,M,P,N,L,R,O,U,j,_,F,V,q;return k(function(X){if(X.g==1){if(r=lt,!t&&e.length==1)return o=Gy(e,!1),s=o.Eh,u=o.Xi,a=o.Ui,l=o.Yh,i.h=Array.from(s[0].values()),i.g=Array.from(u[0].values()),i.j=Array.from(a[0].values()),i.i=Array.from(l[0].values()),X.u(2);for(c=n?i.m.size:0,f=-1,p=0;p<e.length;p++)h=e[p],i.m.has(h.id)||(i.m.add(h.id),f==-1&&(f=p));return f==-1?X.return():(m=Gy(e,!0),y=m.Eh,v=m.Xi,x=m.Ui,S=m.Yh,T(X,Promise.all([Xi(i,i.h,y,f,Ro,Wi,c),Xi(i,i.g,v,f,Ro,Wi,c),Xi(i,i.j,x,f,Ro,Wi,c),Xi(i,i.i,S,f,Ro,Wi,c)]),2))}if(w=0,A=[],i.g.length&&i.h.length)for(L=g(i.h),R=L.next();!R.done;R=L.next())for(O=R.value,U=g(i.g),j=U.next();!j.done;j=U.next())_=j.value,F=ig(O.drmInfos,_.drmInfos),O.drmInfos.length&&_.drmInfos.length&&!F.length||(V=(O.bandwidth||0)+(_.bandwidth||0),O.dependencyStream&&(V+=O.dependencyStream.bandwidth||0),_.dependencyStream&&(V+=_.dependencyStream.bandwidth||0),q=w++,A.push({id:q,language:O.language,disabledUntilTime:0,primary:O.primary,audio:O,video:_,bandwidth:V,drmInfos:F,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(D=i.g.length?i.g:i.h,I=g(D),E=I.next();!E.done;E=I.next())M=E.value,P=w++,N=M.bandwidth||0,M.dependencyStream&&(N+=M.dependencyStream.bandwidth||0),A.push({id:P,language:M.language,disabledUntilTime:0,primary:M.primary,audio:M.type==r.Y?M:null,video:M.type==r.xa?M:null,bandwidth:N,drmInfos:M.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});i.l=A,K(X)})};function Ky(e){var t,n,i,r,o,s,u,a,l,c,f,p,h,m,y,v,x,S,w,A,D,I,E,M,P,N,L,R,O,U;return k(function(j){switch(j.g){case 1:if(t=lt,e.length==1)return j.return(e[0]);for(n=e.map(function(_){return new Map(_.filter(function(F){return F.type===t.Y}).map(function(F){return[Md(F),F]}))}),i=e.map(function(_){return new Map(_.filter(function(F){return F.type===t.xa}).map(function(F){return[Id(F),F]}))}),r=e.map(function(_){return new Map(_.filter(function(F){return F.type===t.Oa}).map(function(F){return[Qs(F),F]}))}),o=e.map(function(_){return new Map(_.filter(function(F){return F.type===t.Nf}).map(function(F){return[Js(F),F]}))}),s=g(r),u=s.next();!u.done;u=s.next())a=u.value,l=Yy(t.Oa),a.set(Qs(l),l);for(c=g(o),f=c.next();!f.done;f=c.next())p=f.value,h=Yy(t.Nf),p.set(Js(h),h);return m=new jt,T(j,Xi(m,[],n,0,al,ll,0),2);case 2:return y=j.h,T(j,Xi(m,[],i,0,al,ll,0),3);case 3:return v=j.h,T(j,Xi(m,[],r,0,al,ll,0),4);case 4:return x=j.h,T(j,Xi(m,[],o,0,al,ll,0),5);case 5:if(S=j.h,w=0,v.length&&y.length)for(M=g(y),P=M.next();!P.done;P=M.next())for(N=P.value,L=g(v),R=L.next();!R.done;R=L.next())O=R.value,U=w++,O.variantIds.push(U),N.variantIds.push(U);else for(A=v.concat(y),D=g(A),I=D.next();!I.done;I=D.next())E=I.value,E.variantIds=[w++];return j.return(v.concat(y).concat(x).concat(S))}})}function Xi(e,t,n,i,r,o,s){var u,a,l,c,f,p,h,m,y,v,x,S,w,A,D,I,E,M,P;return k(function(N){switch(N.g){case 1:for(u=[],a=0;a<n.length;a++)a>=i?u.push(new Set(n[a].values())):u.push(new Set);l=g(t),c=l.next();case 2:if(c.done){N.u(4);break}return f=c.value,T(N,M2(e,f,n,i,o,u,s),5);case 5:if(p=N.h,!p)throw new C(2,4,4037);c=l.next(),N.u(2);break;case 4:for(h=g(u),m=h.next();!m.done;m=h.next())for(y=m.value,v=g(y),x=v.next();!x.done;x=v.next())S=x.value,(w=C2(e,S,n,r,o,u))&&t.push(w);for(A=g(u),D=A.next();!D.done;D=A.next())for(I=D.value,E=g(I),M=E.next(),P={};!M.done;P={kh:void 0},M=E.next())if(P.kh=M.value,!Ed(P.kh)&&t.some(function(L){return function(R){return Ad(e,L.kh,R)}}(P)))throw new C(2,4,4037);return N.return(t)}})}function M2(e,t,n,i,r,o,s){return k(function(u){return u.g==1?(zy(e,n,t,0<s),t.matchedStreams?t.segmentIndex?T(u,Xy(t,i+s),2):u.u(2):u.return(!1)):(Wy(t,i,r,o,s),u.return(!0))})}function Xy(e,t){var n,i,r,o,s,u;return k(function(a){if(a.g==1){for(n=[],i=e.matchedStreams,r=t;r<i.length;r++)o=i[r],n.push(o.createSegmentIndex()),o.trickModeVideo&&!o.trickModeVideo.segmentIndex&&n.push(o.trickModeVideo.createSegmentIndex()),o.dependencyStream&&!o.dependencyStream.segmentIndex&&n.push(o.dependencyStream.createSegmentIndex());return T(a,Promise.all(n),2)}if(e.segmentIndex instanceof Je)for(s=t;s<i.length;s++)u=i[s],u.segmentIndex&&e.segmentIndex.h.push(u.segmentIndex);K(a)})}function C2(e,t,n,i,r,o){if(Ed(t))return null;var s=i(t);return zy(e,n,s),s.createSegmentIndex&&(s.createSegmentIndex=function(){return k(function(u){return s.segmentIndex?u.u(0):(s.segmentIndex=new Je,T(u,Xy(s,0),0))})}),!s.matchedStreams||!s.matchedStreams.length?null:(Wy(s,0,r,o,0),s)}function Wy(e,t,n,i,r){var o=e.matchedStreams;for(t+=r;t<o.length;t++){var s=o[t];n(e,s);var u=!0;if(e.type=="audio"&&pr(e.language,s.language)==0&&(u=!1),u&&(i[t-r].delete(s),s.fullMimeTypes))for(s=g(s.fullMimeTypes.values()),u=s.next();!u.done;u=s.next())e.fullMimeTypes.add(u.value)}}function Ro(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=g(t.matchedStreams),i=n.next();!i.done;i=n.next())i=i.value,i.segmentIndex&&(i.segmentIndex.release(),i.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set(e.keyIds),t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t.trickModeVideo=null,t.dependencyStream=null,t}function al(e){var t=Object.assign({},e);return t.roles=t.roles.slice(),t.keyIds=new Set(e.keyIds),t.segments=[],t.variantIds=[],t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t}function Wi(e,t){function n(s,u){s||(s=[]),u=g(u);for(var a=u.next();!a.done;a=u.next())a=a.value,s.includes(a)||s.push(a);return s}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var i=g(t.keyIds),r=i.next();!r.done;r=i.next())e.keyIds.add(r.value);if(e.originalId==null?e.originalId=t.originalId:(i=t.originalId||"")&&!e.originalId.endsWith(i)&&(e.originalId+=","+i),i=ig(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!i.length)throw new C(2,4,4038);if(e.drmInfos=i,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),i=g(t.closedCaptions),r=i.next();!r.done;r=i.next()){var o=g(r.value);r=o.next().value,o=o.next().value,e.closedCaptions.set(r,o)}e.bandwidth&&t.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,t.bandwidth)),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Ro(t.trickModeVideo),e.trickModeVideo.matchedStreams=[],e.trickModeVideo.createSegmentIndex=function(){if(e.trickModeVideo.segmentIndex)return Promise.resolve();for(var s=new Je,u=g(e.trickModeVideo.matchedStreams),a=u.next();!a.done;a=u.next())s.h.push(a.value.segmentIndex);return e.trickModeVideo.segmentIndex=s,Promise.resolve()}),e.trickModeVideo.matchedStreams.push(t.trickModeVideo),Wi(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&(e.trickModeVideo.matchedStreams.push(t),Wi(e.trickModeVideo,t)),t.dependencyStream?(e.dependencyStream||(e.dependencyStream=Ro(t.dependencyStream),e.dependencyStream.matchedStreams=[],e.dependencyStream.createSegmentIndex=function(){if(e.dependencyStream.segmentIndex)return Promise.resolve();for(var s=new Je,u=g(e.dependencyStream.matchedStreams),a=u.next();!a.done;a=u.next())s.h.push(a.value.segmentIndex);return e.dependencyStream.segmentIndex=s,Promise.resolve()}),e.dependencyStream.matchedStreams.push(t.dependencyStream),Wi(e.dependencyStream,t.dependencyStream)):e.dependencyStream&&(e.dependencyStream.matchedStreams.push(t),Wi(e.dependencyStream,t))}function ll(e,t){var n=e.roles;n||(n=[]);for(var i=g(t.roles),r=i.next();!r.done;r=i.next())r=r.value,n.includes(r)||n.push(r);for(e.roles=n,n=g(t.keyIds),i=n.next();!i.done;i=n.next())e.keyIds.add(i.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,H(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=g(t.closedCaptions),n=t.next();!n.done;n=t.next())i=g(n.value),n=i.next().value,i=i.next().value,e.closedCaptions.set(n,i)}function zy(e,t,n,i){i=i!==void 0&&i?n.matchedStreams:[],t=g(t);for(var r=t.next();!r.done;r=t.next()){if(r=k2(e,r.value,n),!r)return;i.push(r)}n.matchedStreams=i}function k2(e,t,n){var i={audio:Md,video:Id,text:Qs,image:Js}[n.type],r=null,o=i(n);if(t.has(o))r=t.get(o);else{o={audio:function(l,c){return Ad(e,l,c)},video:function(l,c){return Ad(e,l,c)},text:D2,image:R2}[n.type];for(var s={audio:P2,video:L2,text:N2,image:j2}[n.type],u=g(t.values()),a=u.next();!a.done;a=u.next())a=a.value,!o(n,a)||n.fastSwitching!=a.fastSwitching||r&&!s(n,r,a)||(r=a)}return e.s&&!Ed(r)&&t.delete(i(r)),r}function qs(e,t){return e.mimeType!=t.mimeType?!1:cl(e.codecs)===cl(t.codecs)}d.Fi=function(e){this.o=e},d.Ji=function(e){this.s=e};function Ad(e,t,n){return!(!qs(t,n)&&!e.o||t.drmInfos&&!ng(t.drmInfos,n.drmInfos))}function D2(e,t){return t.language?!(e.forced!==t.forced||pr(e.language,t.language)==0||t.kind!=e.kind):!0}function R2(){return!0}function P2(e,t,n){var i=qs(e,t),r=qs(e,n);if(i&&!r)return!1;if(!i&&r||(i=pr(e.language,t.language),r=pr(e.language,n.language),r>i))return!0;if(r<i)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(i=t.roles.filter(function(o){return e.roles.includes(o)}),r=n.roles.filter(function(o){return e.roles.includes(o)}),r.length>i.length)return!0;if(r.length<i.length)return!1;if(n.roles.length!==t.roles.length)return n.roles.length<t.roles.length}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(i=$s(e.channelsCount,t.channelsCount,n.channelsCount),i==Xn?!0:i==Mi?!1:(i=$s(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),i==Xn?!0:i==Mi?!1:!!(e.bandwidth&&$y(e.bandwidth,t.bandwidth,n.bandwidth)==Xn)))}function L2(e,t,n){var i=qs(e,t),r=qs(e,n);if(i&&!r)return!1;if(!i&&r||(i=$s(e.width*e.height,t.width*t.height,n.width*n.height),i==Xn))return!0;if(i==Mi)return!1;if(e.frameRate){if(i=$s(e.frameRate,t.frameRate,n.frameRate),i==Xn)return!0;if(i==Mi)return!1}return!!(e.bandwidth&&$y(e.bandwidth,t.bandwidth,n.bandwidth)==Xn)}function N2(e,t,n){var i=pr(e.language,t.language),r=pr(e.language,n.language);if(r>i)return!0;if(r<i)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(i=t.roles.filter(function(o){return e.roles.includes(o)}),r=n.roles.filter(function(o){return e.roles.includes(o)}),r.length>i.length)return!0;if(r.length<i.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function j2(e,t,n){return $s(e.width*e.height,t.width*t.height,n.width*n.height)==Xn}function Yy(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1,baseOriginalId:null}}function qy(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ie([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null}}function $s(e,t,n){if(t==e&&e!=n)return Mi;if(n==e&&e!=t)return Xn;if(t>e){if(n<=e||n-e<t-e)return Xn;if(n-e>t-e)return Mi}else{if(n>e)return Mi;if(e-n<e-t)return Xn;if(e-n>e-t)return Mi}return Qy}function $y(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?Xn:t<e?Mi:Qy}function Ed(e){switch(e.type){case he:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function Id(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,cl(e.codecs),e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function Md(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,cl(e.codecs),e.mimeType,e.roles,e.audioSamplingRate,e.primary,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function Qs(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function Js(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}function cl(e){if(!Cd.has(e)){var t=Mt(e);Cd.set(e,t)}return Cd.get(e)}W("shaka.util.PeriodCombiner",jt),jt.prototype.setUseStreamOnce=jt.prototype.Ji,jt.prototype.setAllowMultiTypeVariants=jt.prototype.Fi,jt.prototype.combinePeriods=jt.prototype.$f,jt.prototype.deleteStream=jt.prototype.Lh,jt.prototype.getImageStreams=jt.prototype.yj,jt.prototype.getTextStreams=jt.prototype.Bg,jt.prototype.getVariants=jt.prototype.Tj;var Xn=1,Qy=0,Mi=-1,Cd=new Map;function U2(e,t){var n=new DOMParser,i=O2.value()(e);e=null;try{e=n.parseFromString(i,"text/xml")}catch{return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function Jy(e,t){try{var n=Yn(e);return U2(n,t)}catch{return null}}var O2=new St(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function fl(){var e=this;this.j=this.g=null,this.A=[],this.i=null,this.Ba=1,this.G=[],this.l={jf:"",type:"",profiles:[],jc:null,pb:0,cb:null,Zd:0},this.s=new Map,this.B=new Map,this.o=new Map,this.C=new Map,this.wa=new Map,this.m=new jt,this.K=0,this.ya=new _r(5),this.L=new ve(function(){if(e.I&&!e.g.continueLoadingWhenPaused&&(e.H.Ja(e.I,"timeupdate"),e.I.paused)){e.H.za(e.I,"timeupdate",function(){return o0(e)});return}o0(e)}),this.P=new Qr,this.N=null,this.F=[],this.ia=1/0,this.va=!1,this.h=null,this.M=0,this.S=!1,this.H=new Ce,this.I=null,this.U=!1,this.$="",this.oa=function(){return!1},this.W=[],this.ka=new Set}d=fl.prototype,d.configure=function(e,t){var n=this.j&&e.updatePeriod!=this.g.updatePeriod&&0<=e.updatePeriod;this.g=e,t&&(this.oa=t),n&&this.i&&this.i.presentationTimeline.V()&&this.L.Gb(),this.h&&this.h.configure(this.g),this.m&&(this.m.Fi(this.g.dash.multiTypeVariantsAllowed&&ir()),this.m.Ji(this.g.dash.useStreamOnceInPeriodFlattening))},d.start=function(e,t){var n=this,i;return k(function(r){if(r.g==1)return n.va=t.isLowLatencyMode(),n.A=[e],n.j=t,T(r,kd(n),2);if(i=r.h,n.j&&Dd(n,i),!n.j)throw new C(2,7,7001);return r.return(n.i)})},d.stop=function(){for(var e=g(this.o.values()),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.A=[],this.i=null,this.o.clear(),this.C.clear(),this.s.clear(),this.B.clear(),this.l={jf:"",type:"",profiles:[],jc:null,pb:0,cb:null,Zd:0},this.m=null,this.L!=null&&(this.L.stop(),this.L=null),this.h&&this.h.destroy(),this.H&&(this.H.release(),this.H=null),this.ka.clear(),this.P.destroy()},d.update=function(){var e=this,t;return k(function(n){if(n.g==1)return ue(n,2),T(n,kd(e),4);if(n.g!=2)return pe(n,0);if(t=ae(n),!e.j||!t)return n.return();e.j.onError(t),K(n)})},d.onExpirationUpdated=function(){},d.onInitialVariantChosen=function(e){if(this.i&&this.i.presentationTimeline.V()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.i.presentationTimeline.vc();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.K=t.endTime-e,Dd(this,0))}}},d.banLocation=function(e){this.h&&this.h.banLocation(e)},d.setMediaElement=function(e){this.I=e};function kd(e){var t,n,i,r,o,s,u,a,l,c,f;return k(function(p){return p.g==1?(t=4,n="MPD",i=eI(e),r=e.A,i.length?(r=i,n="Patch",t=6):1<e.A.length&&e.h&&(o=Ys(e.h,"Location",!0),o.length&&(r=o)),s=ct(r,e.g.retryParameters),u=Date.now(),T(p,Pd(e,s,0,{type:t}),2)):p.g!=3?(a=p.h,e.j?(a.uri&&a.uri!=a.originalUri&&!e.A.includes(a.uri)&&e.A.unshift(a.uri),l=new tt(a.uri),e.$=l.g.toString(),T(p,_2(e,a.data,a.uri,n),3)):p.return(0)):(c=Date.now(),f=(c-u)/1e3,e.ya.sample(1,f),e.ka.clear(),p.return(f))})}function _2(e,t,n,i){var r,o,s,u,a,l,c,f,p,h;return k(function(m){if(m.g==1){if(r=t,o=e.g.dash.manifestPreprocessor,s=Ia,o!=s){if(Ae("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),u=Jy(r,i),!u)throw new C(2,4,4001,n);o(u),r=Cn(u.outerHTML)}if(a=Yo(r,i),!a)throw new C(2,4,4001,n);return l=e.g.dash.manifestPreprocessorTXml,c=Ma,l!=c&&l(a),i==="Patch"?m.return(b2(e,a)):e.g.dash.disableXlinkProcessing?m.return(Zy(e,a,n)):(f=e.g.dash.xlinkFailGracefully,p=ul(a,e.g.retryParameters,f,n,e.j.networkingEngine),vr(e.P,p),T(m,p.promise,2))}return h=m.h,m.return(Zy(e,h,n))})}function Zy(e,t,n){var i,r,o,s,u,a,l,c,f,p,h,m,y,v,x,S,w,A,D,I,E,M,P,N,L,R,O,U,j,_,F,V,q,X,Me,ge,xe,me,Ee,Le,fe,re,ce,Xe,We,$e,at,ut,Re,Yi,Wn,qi;return k(function(Mn){switch(Mn.g){case 1:for(e.h&&e.h.l.clear(),i=[n],r=[],o=new Map,s=Pe(t,"Location"),u=g(s),a=u.next();!a.done;a=u.next())l=a.value,c=l.attributes.serviceLocation,(f=$t(l))&&(p=gt(i,[f])[0],c&&(e.h?Do(e.h,"Location",c,p):o.set(c,p)),r.push(p));if(e.h?(h=Ys(e.h,"Location",!0),0<h.length&&(i=e.A=h)):r.length&&(i=e.A=r),e.l.jf=t.attributes.id||"",e.l.Zd=se(t,"publishTime",ai)||0,e.G=Pe(t,"PatchLocation"),m=Promise.resolve(),(y=Ye(t,"ContentSteering"))&&e.j)for(v=y.attributes.defaultServiceLocation,e.h?(e.h.i=i,e.h.h=v):(e.h=new ko(e.j),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.i=i,e.h.h=v,(x=$t(y))&&(se(y,"queryBeforeStart",Iu,!1)?m=zs(e.h,x):zs(e.h,x))),S=g(o.keys()),w=S.next();!w.done;w=S.next())A=w.value,D=o.get(A),Do(e.h,"Location",A,D);if(I=Pe(t,"BaseURL"),E=!1,e.h)for(M=g(I),P=M.next();!P.done;P=M.next())N=P.value,L=N.attributes.serviceLocation,R=$t(N),L&&R&&(Do(e.h,"BaseURL",L,R),E=!0);if(e.W=null,E&&e.h||(O=I.map($t),e.W=gt(i,O)),U=function(){return e.h&&E?Ys(e.h,"BaseURL"):e.W?e.W:[]},e.l.cb=U,j=0,I&&I.length&&(j=se(I[0],"availabilityTimeOffset",Eu)||0),e.l.pb=j,e.K=se(t,"minimumUpdatePeriod",$n,-1),_=se(t,"availabilityStartTime",ai),F=se(t,"timeShiftBufferDepth",$n),V=e.g.dash.ignoreSuggestedPresentationDelay,q=null,V||(q=se(t,"suggestedPresentationDelay",$n)),X=e.g.dash.ignoreMaxSegmentDuration,Me=null,X||(Me=se(t,"maxSegmentDuration",$n)),ge=t.attributes.type||"static",e.i&&e.i.presentationTimeline&&(e.U=e.i.presentationTimeline.V()&&ge=="static"),e.l.type=ge,e.i)for(xe=e.i.presentationTimeline,me=xe.Eb(),Ee=g(e.o.values()),Le=Ee.next();!Le.done;Le=Ee.next())fe=Le.value,fe.segmentIndex&&fe.segmentIndex.$a(me);else re=e.g.dash.ignoreMinBufferTime,ce=0,re||(ce=se(t,"minBufferTime",$n)||0),Xe=0,Xe=q!=null?Math.min(q,F||1/0):0<e.g.defaultPresentationDelay?e.g.defaultPresentationDelay:Math.min(1.5*ce,F||1/0),xe=new oe(_,Xe,e.g.dash.autoCorrectDrift);return xe.Xc(ge=="static"),xe.V()&&!isNaN(e.g.availabilityWindowOverride)&&(F=e.g.availabilityWindowOverride),F==null&&(F=1/0),xe.Bf(F),We=t.attributes.profiles||"",e.l.profiles=We.split(","),$e={hc:ge!="static",presentationTimeline:xe,ra:null,na:null,ma:null,J:null,bandwidth:0,Dg:!1,pb:j,jc:null,profiles:We.split(","),roles:null,Ib:function(){return""}},T(Mn,m,2);case 2:return e.M=0,at=i0(e,$e,U,t,!1),ut=at.duration,Re=at.periods,(ge!="static"||e.U)&&at.Nh||xe.ob(ut||1/0),e.S&&e.va&&xe.Gi(e.ia),xe.Lg(Me||1),e.S&&e.va&&(Yi=q??e.g.defaultPresentationDelay,xe.fh(Yi)),e.i?(e.i.periodCount=Re.length,e.i.gapCount=e.M,T(Mn,e0(e,Re,!1),4)):T(Mn,e.m.$f(Re,$e.hc),6);case 6:if(e.i={presentationTimeline:xe,variants:e.m.l,textStreams:e.m.Bg(),imageStreams:e.m.i,offlineSessionIds:[],sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:V2(t),nextUrl:H2(t),periodCount:Re.length,gapCount:e.M,isLowLatency:e.S,startTime:null},!xe.Wi()){Mn.u(7);break}return Wn=Pe(t,"UTCTiming"),T(Mn,J2(e,U,Wn),8);case 8:if(qi=Mn.h,!e.j)return Mn.return();xe.Hi(qi);case 7:xe.df(),e.m&&!e.i.presentationTimeline.V()&&e.m.release();case 4:e.j.makeTextStreamsForClosedCaptions(e.i),G2(e),K2(e,Re),K(Mn)}})}function e0(e,t,n){var i;return k(function(r){if(r.g==1)return T(r,e.m.$f(t,!0,n),2);e.i.variants=e.m.l,i=e.m.Bg(),0<i.length&&(e.i.textStreams=i),e.i.imageStreams=e.m.i,e.j.filter(e.i),K(r)})}function b2(e,t){var n,i,r,o,s,u,a,l,c,f,p,h,m,y,v,x,S,w,A,D,I,E,M,P,N,L,R;return k(function(O){if(O.g==1){if(n=t.attributes.mpdId,i=se(t,"originalPublishTime",ai),!n||n!==e.l.jf||i!==e.l.Zd)throw e.G=[],new C(1,4,4052);for(r=[],o=[],s=new Set,u=g(Eh(t)),a=u.next();!a.done;a=u.next())if(l=a.value,c=Mu(l.attributes.sel||""),f=c[c.length-1],p=$t(l)||"",f.name==="MPD")if(f.sc==="mediaPresentationDuration"){h=$t(l)||"";var U=$n(h);if(U!=null){e.l.jc=U;for(var j=g(e.s.values()),_=j.next();!_.done;_=j.next())_.value.jc=U}}else if(f.sc==="type"){for(e.i.presentationTimeline.Xc(p=="static"),e.l.type=p,U=g(e.s.values()),j=U.next();!j.done;j=U.next())j.value.hc=p=="dynamic";p=="static"&&(e.K=-1)}else f.sc==="publishTime"?e.l.Zd=ai(p)||0:f.sc===null&&l.tagName==="add"&&o.push(l);else if(f.name==="PatchLocation")Mh(e.G,l);else if(f.name==="Period")l.tagName==="add"?o.push(l):l.tagName==="remove"&&f.id&&F2(e,f.id);else if(f.name==="SegmentTemplate"){if(j=Mu(l.attributes.sel||""),U=j[j.length-1],U.sc){j=t0(e,j),_=$t(l)||"";for(var F=g(j),V=F.next();!V.done;V=F.next())V=e.s.get(V.value),kh(V.J.Cc,l.tagName,U.sc,_);U=j}else U=[];for(m=U,y=g(m),v=y.next();!v.done;v=y.next())x=v.value,s.add(x)}else if(f.name==="SegmentTimeline"||f.name==="S"){for(U=Mu(l.attributes.sel||""),U=t0(e,U),j=g(U),_=j.next();!_.done;_=j.next())_=e.s.get(_.value),_=Mo(_,Ki,"SegmentTimeline"),F=Pe(_,"S"),Mh(F,l),_.children=F;for(S=U,w=g(S),A=w.next();!A.done;A=w.next())D=A.value,s.add(D)}for(I=g(s),E=I.next();!E.done;E=I.next())M=E.value,n0(e,M);for(P=g(o),N=P.next();!N.done;N=P.next())L=N.value,r.push.apply(r,H(B2(e,L)));return r.length?(e.i.periodCount+=r.length,e.i.gapCount=e.M,T(O,e0(e,r,!0),2)):O.u(2)}e.l.type=="static"&&(R=e.l.jc,e.i.presentationTimeline.ob(R||1/0)),K(O)})}function B2(e,t){return i0(e,{hc:e.l.type=="dynamic",presentationTimeline:e.i.presentationTimeline,ra:null,na:null,ma:null,J:null,bandwidth:0,Dg:!1,pb:e.l.pb,profiles:e.l.profiles,jc:e.l.jc,roles:null,Ib:function(){return""}},e.l.cb,t,!0).periods}function F2(e,t){e.i.periodCount--;for(var n=g(e.s.keys()),i=n.next();!i.done;i=n.next())if(i=i.value,i.startsWith(t)){var r=e.s.get(i);Mo(r,Ki,"SegmentTimeline").children=[],n0(e,i),e.s.delete(i)}e.F=e.F.filter(function(o){return o!==t})}function t0(e,t){var n="",i="",r=-1,o="";t=g(t);for(var s=t.next();!s.done;s=t.next())s=s.value,s.name==="Period"?n=s.id:s.name==="AdaptationSet"?(i=s.id,s.position!==null&&(r=s.position)):s.name==="Representation"&&(o=s.id);if(t=[],o)t.push(n+","+o);else if(i)for(r=g(e.s.values()),e=r.next();!e.done;e=r.next())e=e.value,e.ra.id===n&&e.ma.id===i&&e.J.id&&t.push(n+","+e.J.id);else if(-1<r)for(i=g(e.s.values()),e=i.next();!e.done;e=i.next())e=e.value,e.ra.id===n&&e.ma.position===r&&e.J.id&&t.push(n+","+e.J.id);return t}function n0(e,t){var n=e.s.get(t),i=e.o.get(t);i.segmentIndex&&i.segmentIndex.$a(e.i.presentationTimeline.Eb());try{var r=Fy(n,function(o,s,u,a){return u0(e,o,s,u,a)},e.o,!0,e.g.dash.initialSegmentLimit,e.wa,n.J.aesKey,null,!0,e.B);i.createSegmentIndex=function(){return k(function(o){if(o.g==1)return i.segmentIndex?o.u(0):T(o,r.Kc(),3);i.segmentIndex=o.h,K(o)})}}catch(o){if(t=n.J.contentType,t!=he&&t!="application"&&t!="image"||o.code!=4002)throw o}}function V2(e){var t=Ye(e,"ServiceDescription");if(!t||(e=Ye(t,"Latency"),t=Ye(t,"PlaybackRate"),!e&&!t))return null;var n={};return e&&("target"in e.attributes&&(n.targetLatency=parseInt(e.attributes.target,10)/1e3),"max"in e.attributes&&(n.maxLatency=parseInt(e.attributes.max,10)/1e3),"min"in e.attributes&&(n.minLatency=parseInt(e.attributes.min,10)/1e3)),t&&("max"in t.attributes&&(n.maxPlaybackRate=parseFloat(t.attributes.max)),"min"in t.attributes&&(n.minPlaybackRate=parseFloat(t.attributes.min))),n}function H2(e){if(e=Pe(e,"SupplementalProperty"),!e.length)return null;e=g(e);for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.attributes.schemeIdUri=="urn:mpeg:dash:chaining:2016")return t.attributes.value;return null}function i0(e,t,n,i,r){var o=t.jc;o||(o=se(i,"mediaPresentationDuration",$n),e.l.jc=o);var s=0;e.i&&e.i.presentationTimeline&&e.U&&(s=e.i.presentationTimeline.Vb());var u=[],a=s;i=Pe(i,"Period");for(var l=0;l<i.length;l++){var c=i[l],f=i[l+1],p=se(c,"start",$n,a),h=c.attributes.id,m=se(c,"duration",$n);p=l==0&&p==0&&e.U?s:p;var y=null;if(f){var v=se(f,"start",$n);v!=null&&(y=v-p+s)}else o!=null&&(y=o-p+s);if(v=gh,y&&m&&Math.abs(y-m)>v&&y>m&&e.M++,y==null&&(y=m),!(e.N!==null&&h!==null&&p!==null&&p<e.N)||e.F.includes(h)||l+1==i.length){if(p!==null&&(e.N===null||p>e.N)&&(e.N=p),a=X2(e,t,n,{start:p,duration:y,node:c,ai:y==null||!f}),u.push(a),t.ra.id&&y&&e.wa.set(t.ra.id,y),y==null){a=null;break}a=p+y}}if(r)for(t=g(u),n=t.next();!n.done;n=t.next())n=n.value.id,e.F.includes(n)||e.F.push(n);else e.F=u.map(function(x){return x.id});return o!=null?{periods:u,duration:o+s,Nh:!1}:{periods:u,duration:a,Nh:!0}}function G2(e){var t=Array.from(e.C.keys()).filter(function(u){return!e.F.includes(u)});t=g(t);for(var n=t.next();!n.done;n=t.next()){n=n.value;for(var i=!0,r=g(e.C.get(n)),o=r.next();!o.done;o=r.next()){o=o.value;var s=e.o.get(o);s&&(s.segmentIndex&&s.segmentIndex.getNumReferences()!=0?i=!1:(e.m&&e.m.Lh(s,n),e.o.delete(o)))}i&&e.C.delete(n)}}function K2(e,t){t=new Set(t.map(function(r){return r.id}));for(var n=g(e.B.keys()),i=n.next();!i.done;i=n.next())i=i.value,t.has(i)||e.B.delete(i)}function X2(e,t,n,i){t.ra=Rd(e,i.node,null,n),t.na=i,t.ra.pb=t.pb,t.ra.id||(t.ra.id="__shaka_period_"+i.start);var r=Pe(i.node,"EventStream");n=t.presentationTimeline.Eb(),r=g(r);for(var o=r.next();!o.done;o=r.next())Z2(e,i.start,i.duration,o.value,n);for(n=Pe(i.node,"SupplementalProperty"),n=g(n),r=n.next();!r.done;r=n.next())r=r.value,r.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"&&(r=Zs(e,r))&&(t.Ib=r);if(n=Pe(i.node,"AdaptationSet").map(function(h,m){return r0(e,t,m,h)}).filter(Oi),t.hc){r=[],o=g(n);for(var s=o.next();!s.done;s=o.next()){s=g(s.value.Gk);for(var u=s.next();!u.done;u=s.next())r.push(u.value)}if(r.length!=new Set(r).size)throw new C(2,4,4018)}for(r=new Map,o=g(n),s=o.next();!s.done;s=o.next())for(s=g(s.value.mj),u=s.next();!u.done;u=s.next()){var a=g(u.value);u=a.next().value,a=a.next().value,r.set(u,a)}if(r.size)for(o=null,s=g(n),u=s.next();!u.done;u=s.next()){u=u.value,a=[];for(var l=g(u.streams),c=l.next(),f={};!c.done;f={lh:void 0},c=l.next())if(f.lh=c.value,r.has(f.lh.originalId)){o||(o=Pe(i.node,"AdaptationSet").map(function(h,m){return r0(e,t,m,h)}).filter(Oi)),c=g(o);for(var p=c.next();!p.done;p=c.next())(p=p.value.streams.find(function(h){return function(m){return m.originalId==h.lh.originalId}}(f)))&&(p.dependencyStream=r.get(p.originalId),p.originalId+=p.dependencyStream.originalId,a.push(p))}a.length&&u.streams.push.apply(u.streams,H(a))}if(i=n.filter(function(h){return!h.vh}),n=n.filter(function(h){return h.vh}),!e.g.disableIFrames){for(n=g(n),r=n.next();!r.done;r=n.next())for(r=r.value,o=r.vh.split(" "),s=g(i),u=s.next();!u.done;u=s.next())if(u=u.value,o.includes(u.id))for(u=g(u.streams),a=u.next();!a.done;a=u.next())Jh(a.value,r.streams)}if(n=dl(e.g.disableAudio,i,"audio"),r=dl(e.g.disableVideo,i,"video"),o=dl(e.g.disableText,i,he),i=dl(e.g.disableThumbnails,i,"image"),r.length===0&&n.length===0)throw new C(2,4,4004);return{id:t.ra.id,audioStreams:n,videoStreams:r,textStreams:o,imageStreams:i}}function dl(e,t,n){return e||!t.length?[]:t.reduce(function(i,r){return r.contentType!=n||i.push.apply(i,H(r.streams)),i},[])}function r0(e,t,n,i){function r(R){var O=R.attributes["dvb:fontFamily"];R=R.attributes["dvb:url"],O&&R&&(R=gt(t.ma.cb(),[R],t.Ib()),e.j.addFont(O,R[0]))}function o(R){switch(R){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function s(R){switch(R){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ma=Rd(e,i,t.ra,null),t.ma.position=n;var u=!1;n=Pe(i,"Role");var a=n.map(function(R){return R.attributes.value}).filter(Oi),l=void 0,c=t.ma.contentType==he;c&&(l="subtitle"),n=g(n);for(var f=n.next();!f.done;f=n.next()){f=f.value;var p=f.attributes.schemeIdUri;if(p==null||p=="urn:mpeg:dash:role:2011")switch(f=f.attributes.value,f){case"main":u=!0;break;case"caption":case"subtitle":l=f}}var h=Pe(i,"EssentialProperty");n=null;var m=!1;f=null,p=!1,h=g(h);for(var y=h.next();!y.done;y=h.next()){y=y.value;var v=y.attributes.schemeIdUri;if(v=="http://dashif.org/guidelines/trickmode")n=y.attributes.value;else if(v=="urn:mpeg:mpegB:cicp:TransferCharacteristics")var x=s(parseInt(y.attributes.value,10));else if(v=="urn:mpeg:mpegB:cicp:ColourPrimaries")var S=o(parseInt(y.attributes.value,10));else v!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(v=="urn:mpeg:dash:ssr:2023"&&e.g.dash.enableFastSwitching?m=!0:v=="urn:dvb:dash:fontdownload:2014"?r(y):v=="urn:mpeg:dash:urlparam:2014"&&(f=Zs(e,y))||(p=!0))}if(p)return null;var w=null;for(p=Pe(i,"SupplementalProperty"),p=g(p),h=p.next();!h.done;h=p.next())h=h.value,y=h.attributes.schemeIdUri,y=="http://dashif.org/guidelines/last-segment-number"?w=parseInt(h.attributes.value,10)-1:y=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?x=s(parseInt(h.attributes.value,10)):y=="urn:mpeg:mpegB:cicp:ColourPrimaries"?S=o(parseInt(h.attributes.value,10)):y=="urn:dvb:dash:fontdownload:2014"?r(h):y=="urn:mpeg:dash:urlparam:2014"&&(f=Zs(e,h));f&&(t.Ib=f),f=Pe(i,"Accessibility");var A=new Map,D;for(f=g(f),p=f.next();!p.done;p=f.next())if(h=p.value,p=h.attributes.schemeIdUri,h=h.attributes.value,p!="urn:scte:dash:cc:cea-608:2015"||e.g.disableText)if(p!="urn:scte:dash:cc:cea-708:2015"||e.g.disableText)p=="urn:mpeg:dash:role:2011"?h!=null&&(a.push(h),h=="captions"&&(l="caption")):p=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(h=="1"?D="visually impaired":h=="2"?D="hard of hearing":h=="9"&&(D="spoken subtitles"));else if(p=1,h!=null)for(h=g(h.split(";")),y=h.next();!y.done;y=h.next()){v=y.value;var I=y=void 0;v.includes("=")?(v=v.split("="),y="svc"+v[0],I=v[1].split(",")[0].split(":").pop()):(y="svc"+p,p++,I=v),A.set(y,Ne(I))}else A.set("svc1","und");else if(p=1,h!=null)for(h=h.split(";"),y=g(h),v=y.next();!v.done;v=y.next()){I=v.value;var E=v=void 0;I.includes("=")?(I=I.split("="),v=I[0].startsWith("CC")?I[0]:"CC"+I[0],E=I[1]||"und"):(v="CC"+p,h.length==2?p+=2:p++,E=I),A.set(v,Ne(E))}else A.set("CC1","und");f=Pe(i,"ContentProtection");var M=Ry(f,e.g.ignoreDrmInfo,e.g.dash.keySystemsByURI);t.ma.encrypted=0<f.length;var P=Ne(t.ma.language||"und"),N=t.ma.label,L=new Map;if(i=Pe(i,"Representation"),!e.g.ignoreSupplementalCodecs){for(f=[],p=g(i),h=p.next();!h.done;h=p.next())y=h.value,(h=ui(y,"urn:scte:dash:scte214-extensions","supplementalCodecs"))&&(y=Bn(y),y.attributes.codecs=h.split(" ").join(","),y.attributes.id&&(y.attributes.supplementalId=y.attributes.id+"_supplementalCodecs"),f.push(y));i.push.apply(i,H(f))}if(f=i.map(function(R){var O=W2(e,t,M,l,P,N,u,a,A,R,D,w);return O&&(O.hdr=O.hdr||x,O.colorGamut=O.colorGamut||S,O.fastSwitching=m,R=R.attributes.dependencyId)?(O.baseOriginalId=R,L.set(R,O),null):O}).filter(function(R){return!!R}),f.length==0&&L.size==0){if(n=t.ma.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||c||n)return null;throw new C(2,4,4003)}if(!t.ma.contentType||t.ma.contentType=="application")for(t.ma.contentType=a0(f[0].mimeType,f[0].codecs),c=g(f),p=c.next();!p.done;p=c.next())p.value.type=t.ma.contentType;for(c=t.ma.id||"__fake__"+e.Ba++,p=g(f),h=p.next();!h.done;h=p.next()){for(h=h.value,y=g(M.drmInfos),v=y.next();!v.done;v=y.next())v=v.value,v.keyIds=v.keyIds&&h.keyIds?new Set([].concat(H(v.keyIds),H(h.keyIds))):v.keyIds||h.keyIds;h.groupId=c}return i=i.map(function(R){return R.attributes.supplementalId||R.attributes.id}).filter(Oi),{id:c,contentType:t.ma.contentType,language:P,tm:u,streams:f,drmInfos:M.drmInfos,vh:n,Gk:i,mj:L}}function Zs(e,t){if((t=Dn(t,"urn:mpeg:dash:schema:urlparam:2014","UrlQueryInfo"))&&se(t,"useMPDUrlQuery",Iu,!1)){var n=t.attributes.queryTemplate;if(n)return function(){return n=="$querypart$"?e.$:n.split("&").map(function(i){if(i=="$querypart$")return e.$;var r=/\$query:(.*?)\$/g.exec(i);if(r&&r.length==2){r=r[1];var o=new Br(e.$).get(r);if(o.length)return r+"="+o[0]}return i}).join("&")}}return null}function W2(e,t,n,i,r,o,s,u,a,l,c,f){t.J=Rd(e,l,t.ma,null);var p=t.J.id;if(e.ia=Math.min(e.ia,t.J.pb),e.S=0<e.ia,!Q2(t.J))return null;var h=t.na.start;t.bandwidth=se(l,"bandwidth",li)||0,t.roles=u;var m=Pe(l,"SupplementalProperty"),y=Pe(l,"EssentialProperty"),v=Pe(l,"ContentProtection");l=null;var x=y.find(function(j){return j.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"});(x||(x=m.find(function(j){return j.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"})))&&(l=Zs(e,x)),l&&(t.Ib=l),x=t.J.contentType,l=x==he||x=="application",x=x=="image",v.length&&(t.ma.encrypted=!0);try{var S=void 0;if(n.Wf){var w=t.J.cb,A=t.Ib,D=gt(w(),[n.Wf.hk],A()),I=ct(D,e.g.retryParameters);S={bitsKey:128,blockCipherMode:"CBC",iv:n.Wf.iv,firstMediaSequenceNumber:0,fetchKey:function(){var j,_,F;return k(function(V){if(V.g==1)return T(V,Pd(e,I,6),2);if(V.g!=3){if(j=V.h,!j.data||j.data.byteLength!=16)throw new C(2,4,4049);return _={name:"AES-CBC"},F=S,T(V,B.crypto.subtle.importKey("raw",j.data,_,!0,["decrypt"]),3)}F.cryptoKey=V.h,S.fetchKey=void 0,K(V)})}}}if(t.J.aesKey=S,w=function(j,_,F,V){return u0(e,j,_,F,V)},t.J.xd)var E=p2(t,w,S);else if(t.J.pc)E=g2(t,e.o,S);else if(t.J.Cc)E=Fy(t,w,e.o,!!e.i,e.g.dash.initialSegmentLimit,e.wa,S,f,!1,e.B);else{var M=t.na.duration||0,P=t.J.cb,N=t.J.mimeType,L=t.J.codecs;E={endTime:-1,timeline:-1,Kc:function(){var j=fa(h,M,P());return j.Cb(function(_){_.mimeType=N,_.codecs=L}),Promise.resolve(j)},timescale:1}}}catch(j){if((l||x)&&j.code==4002)return null;throw j}f=e2(v,n,e.g.ignoreDrmInfo,e.g.dash.keySystemsByURI),f=new Set(f?[f]:[]),v=!1,m.some(function(j){return j.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&j.attributes.value=="JOC"})&&(v=!0),m=!1,l&&(m=u.includes("forced_subtitle")||u.includes("forced-subtitle"));var R;if(x&&((y=y.find(function(j){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(j.attributes.schemeIdUri)}))&&(R=y.attributes.value),!R))return null;var O;l=t.J.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(l.includes("hvc1.2.4.L153.B0")||l.includes("hev1.2.4.L153.B0"))&&(O="PQ"),y=t.J.id?t.ra.id+","+t.J.id:"",e.G.length&&p&&e.s.set(t.ra.id+","+p,Y2(t)),t.J.uf&&z2(e,t.J.uf,E,t.presentationTimeline),E.endTime!=-1&&t.ra.id!=null&&t.J.id!=null&&((p=e.B.get(t.ra.id))?(p.endTime=E.endTime,p.Vg.includes(t.J.id)||p.Vg.push(t.J.id),e.B.set(t.ra.id,p)):e.B.set(t.ra.id,{endTime:E.endTime,timeline:E.timeline,Vg:[t.J.id]}));var U=y&&e.o.has(y)?e.o.get(y):{id:e.Ba++,originalId:t.J.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){U.segmentIndex&&(U.segmentIndex.release(),U.segmentIndex=null)},segmentIndex:null,mimeType:t.J.mimeType,codecs:l,frameRate:t.J.frameRate,pixelAspectRatio:t.J.pixelAspectRatio,bandwidth:t.bandwidth,width:t.J.width,height:t.J.height,kind:i,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:f,language:r,originalLanguage:t.ma.language,label:o,type:t.ma.contentType,primary:s,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:t.J.emsgSchemeIdUris,roles:u,forced:m,channelsCount:t.J.lf,audioSamplingRate:t.J.audioSamplingRate,spatialAudio:v,closedCaptions:a,hdr:O,colorGamut:void 0,videoLayout:void 0,tilesLayout:R,accessibilityPurpose:c,external:!1,fastSwitching:!1,fullMimeTypes:new Set([it(t.J.mimeType,t.J.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null};return U.createSegmentIndex=function(){var j;return k(function(_){if(_.g==1)return U.segmentIndex?_.u(0):(j=U,T(_,E.Kc(),3));j.segmentIndex=_.h,K(_)})},y&&t.hc&&!e.o.has(y)&&(t=t.ra.id||"",e.C.has(t)||e.C.set(t,[]),e.o.set(y,U),e.C.get(t).push(y)),U}function z2(e,t,n,i){if(!e.ka.has(t)){e.ka.add(t);var r=se(t,"presentationTime",wt)||0,o=Ye(t,"UTCTiming"),s;(s=o&&o.attributes.schemeIdUri)&&(o=o.attributes.schemeIdUri,s=!(o==="urn:mpeg:dash:utc:http-ntp:2014"||o==="urn:mpeg:dash:utc:ntp:2014"||o==="urn:mpeg:dash:utc:sntp:2014")),s?t=1e3*(se(t,"wallClockTime",ai)||0):(t=se(t,"wallClockTime",wt)||0,t=Qg(t)),n=new Date(t-r/n.timescale*1e3),r=n.getTime()/1e3,isNaN(r)||(i.o||i.gh(r),i=new Map().set("detail",{wallClockTime:t,programStartDate:n}),i=new G("prft",i),e.j.onEvent(i))}}function Y2(e){function t(n){return n?(n=ar(n),n.xd=null,n.pc=null,n.Cc=Sc(n.Cc),n.uf=null,n):null}return e=ar(e),e.ra=t(e.ra),e.ma=t(e.ma),e.J=t(e.J),e.na&&(e.na=ar(e.na),e.na.node=null),e}function o0(e){var t,n;return k(function(i){switch(i.g){case 1:return t=0,ue(i,2),T(i,kd(e),4);case 4:t=i.h,pe(i,3);break;case 2:if(n=ae(i),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),i.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return i.return();e.j.onManifestUpdated(),Dd(e,t),K(i)}})}function Dd(e,t){if(!(0>e.K)){var n=e.K;0<=e.g.updatePeriod&&(n=e.g.updatePeriod),e.L.ha(Math.max(n-t,mu(e.ya)))}}function Rd(e,t,n,i){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,lf:null,audioSamplingRate:null,pb:0,zf:0,encrypted:!1},i=i||n.cb;var r=t.attributes.id,o=t.attributes.supplementalId,s=Pe(t,"BaseURL"),u,a=!1;if(e.h)for(var l=g(s),c=l.next();!c.done;c=l.next()){var f=c.value;c=f.attributes.serviceLocation,f=$t(f),c&&f&&(Do(e.h,r,c,f),a=!0)}a&&e.h||(u=s.map($t)),l=t.attributes.contentType||n.contentType,c=t.attributes.mimeType||n.mimeType,f=yf([t.attributes.codecs||n.codecs]).join(",");var p=se(t,"frameRate",jx)||n.frameRate,h=t.attributes.sar||n.pixelAspectRatio,m=q2(Pe(t,"InbandEventStream"),n.emsgSchemeIdUris),y=Pe(t,"AudioChannelConfiguration");y=$2(y)||n.lf;var v=se(t,"audioSamplingRate",wt)||n.audioSamplingRate;l||(l=a0(c,f));var x=Ye(t,"SegmentBase"),S=Ye(t,"SegmentTemplate"),w=x&&se(x,"availabilityTimeOffset",Eu)||0,A=S&&se(S,"availabilityTimeOffset",Eu)||0,D=s&&s.length&&se(s[0],"availabilityTimeOffset",Eu)||0;w=n.pb+D+w+A,A=null,(D=Ye(t,"SegmentSequenceProperties"))&&(D=Ye(D,"SAP"))&&(A=se(D,"cadence",yt)),D=t.attributes.label;var I=Pe(t,"Label");return I&&I.length&&(I=I[0],ot(I)&&(D=ot(I))),{cb:function(){return gt(i(),s.length?e.h&&a?Ys(e.h,r):u||[]:[])},xd:x||n.xd,pc:Ye(t,"SegmentList")||n.pc,Cc:S||n.Cc,uf:Ye(t,"ProducerReferenceTime")||n.uf,width:se(t,"width",wt)||n.width,height:se(t,"height",wt)||n.height,contentType:l,mimeType:c,codecs:f,frameRate:p,pixelAspectRatio:h,emsgSchemeIdUris:m,id:o||r,originalId:r,language:t.attributes.lang,lf:y,audioSamplingRate:v,pb:w,Xe:null,zf:A||n.zf,label:D||null,encrypted:!1}}function q2(e,t){t=t.slice(),e=g(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function $2(e){e=g(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=t.attributes.schemeIdUri;if(n&&(t=t.attributes.value))switch(n){case"urn:mpeg:dash:outputChannelPositionList:2012":return t.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(t,10),!t)continue;return t;case"tag:dolby.com,2015:dash:audio_channel_configuration:2015":if(n=[2,1,2,2,2,2,1,2,2,1,1,1,1,2,1,1,2,2],t=parseInt(t,16),!t)continue;for(var i=0,r=0;r<n.length;r++)t&1<<r&&(i+=n[r]);if(i)return i;continue;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(n=[1,1,1,1,1,2,2,1,1,2,2,2,1,2,1,1].reverse(),t=parseInt(t,16),!t)continue;for(r=i=0;r<n.length;r++)t&1<<r&&(i+=n[r]);if(i)return i;continue;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(n=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(t=parseInt(t,10))&&0<t&&t<n.length)return n[t]}}return null}function Q2(e){var t=e.xd?1:0;return t+=e.pc?1:0,t+=e.Cc?1:0,t==0?e.contentType==he||e.contentType=="application":(t!=1&&(e.xd&&(e.pc=null),e.Cc=null),!0)}function s0(e,t,n,i){var r,o,s,u,a,l,c;return k(function(f){if(f.g==1)return r=[Gt(n)],o=gt(t(),r),s=ct(o,e.g.retryParameters),s.method=i,u=e.j.networkingEngine.request(4,s,{isPreload:e.oa()}),vr(e.P,u),T(f,u.promise,2);if(a=f.h,i=="HEAD"){if(!a.headers||!a.headers.date)return f.return(0);l=a.headers.date}else l=ze(a.data);return c=Date.parse(l),isNaN(c)?f.return(0):f.return(c-Date.now())})}function J2(e,t,n){var i,r,o,s,u,a,l,c;return k(function(f){switch(f.g){case 1:i=n.map(function(p){return{scheme:p.attributes.schemeIdUri,value:p.attributes.value}}),r=e.g.dash.clockSyncUri,!i.length&&r&&i.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),o=g(i),s=o.next();case 2:if(s.done){f.u(4);break}switch(u=s.value,ue(f,5),a=u.scheme,l=u.value,a){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return f.u(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return f.u(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return c=Date.parse(l),f.return(isNaN(c)?0:c-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":we("NTP UTCTiming scheme is not supported");break;default:we("Unrecognized scheme in UTCTiming element",a)}f.u(9);break;case 7:return T(f,s0(e,t,l,"HEAD"),10);case 10:return f.return(f.h);case 8:return T(f,s0(e,t,l,"GET"),11);case 11:return f.return(f.h);case 9:pe(f,3);break;case 5:ae(f);case 3:s=o.next(),f.u(2);break;case 4:return we("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),f.return(0)}})}function Z2(e,t,n,i,r){var o=i.attributes.schemeIdUri||"",s=i.attributes.value||"",u=se(i,"timescale",wt)||1,a=se(i,"presentationTimeOffset",wt)||0;i=g(Pe(i,"Event"));for(var l=i.next();!l.done;l=i.next()){l=l.value;var c=se(l,"presentationTime",wt)||0,f=se(l,"duration",wt)||0;c=Math.max((c-a)/u+t,t),f=c+f/u,n!=null&&(c=Math.min(c,t+n),f=Math.min(f,t+n)),f<r||(l={schemeIdUri:o,value:s,startTime:c,endTime:f,id:l.attributes.id||"",timescale:u,eventElement:Dh(l),eventNode:Sc(l)},e.j.onTimelineRegionAdded(l))}}function u0(e,t,n,i,r){var o,s,u,a;return k(function(l){return l.g==1?(o=Pn,s=r?0:1,u=As(t,n,i,e.g.retryParameters),T(l,Pd(e,u,o,{type:s}),2)):(a=l.h,l.return(a.data))})}function a0(e,t){return t=it(e,t),ts(t)?he:e.split("/")[0]}function Pd(e,t,n,i){return i||(i={}),i.isPreload=e.oa(),t=e.j.networkingEngine.request(n,t,i),vr(e.P,t),t.promise}function eI(e){var t=e.l.Zd;if(!e.l.jf||!t||!e.G.length)return[];var n=Date.now()/1e3,i=e.G.filter(function(r){return r=wt(r.attributes.ttl),!r||t+r>n}).map($t).filter(Oi);return i.length?gt(e.A,i):[]}W("shaka.dash.DashParser",fl),Tr("application/dash+xml",function(){return new fl}),Tr("video/vnd.mpeg.dash.mpd",function(){return new fl});function pl(){}W("shaka.dependencies",pl),pl.has=function(e){return Ld.has(e)},pl.add=function(e,t){if(!c0[e])throw Error(e+" is not supported");e==l0?Ae("mux.js","mux.js is no longer used in Shaka Player."):Ld.set(e,function(){return t})};var l0="muxjs",c0={um:l0,ISOBoxer:"ISOBoxer"};pl.Allowed=c0;var Ld=new Map([["ISOBoxer",function(){return B.ISOBoxer}]]);function Ve(){this.j=new St(function(){return navigator.userAgent.match(/Smart( ?|_)TV/i)||navigator.userAgent.match(/Android ?TV/i)?"TV":navigator.userAgentData?navigator.userAgentData.mobile?"MOBILE":"DESKTOP":/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)?"MOBILE":navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="android"?"MOBILE":"DESKTOP":navigator.userAgent.includes("Android")?"MOBILE":"DESKTOP"}),this.l=new St(function(){return navigator.vendor.includes("Apple")&&(navigator.userAgent.includes("Version/")||navigator.userAgent.includes("OS/"))?"WEBKIT":navigator.userAgent.includes("Edge/")?"EDGE":navigator.userAgent.includes("Chrome/")?"CHROMIUM":navigator.userAgent.includes("Firefox/")?"GECKO":"UNKNOWN"})}function Zn(){var e=B.ManagedMediaSource||B.MediaSource;return!!(e&&e.isTypeSupported)}d=Ve.prototype,d.bc=function(){return!!navigator.mediaCapabilities},d.La=function(){return this.j.value()},d.Ea=function(){return this.l.value()},d.be=function(){return!1},d.wi=function(){return!1},d.Ye=function(){return!1},d.xi=function(){return!1},d.ae=function(){return!1},d.Yc=function(){return!0},d.Zc=function(){return!0},d.fe=function(){return!0},d.Di=function(){return 0},d.ec=function(){return Promise.resolve({width:1/0,height:1/0})},d.Mi=function(){return!1},d.jh=function(){return!1},d.Ta=function(e){var t=this.La();return(t==="TV"||t==="CONSOLE"||t==="CAST")&&(e.ads.customPlayheadTracker=!0,e.ads.skipPlayDetection=!0,e.ads.supportsMultipleMediaElements=!1),e},d.oh=function(){return!!B.indexedDB},d.ti=function(){return[]};function f0(e){return ye(),B.matchMedia!==void 0&&B.matchMedia("(color-gamut: p3)").matches?e?"HLG":"PQ":"SDR"}d.Ti=function(){return!1},d.ii=function(){return!1},d.Zg=function(){return!1},d.nh=function(){return!0},d.ji=function(){return!1},d.Si=function(){return!0},d.toString=function(){return"Device: "+this.Lb()+" v"+this.Ca()+"; Type: "+this.La()};function Nd(){Ve.call(this),this.g=new St(function(){var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}),this.h=new St(function(){return/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||1<navigator.maxTouchPoints?"MOBILE":"xr"in navigator?"VR":"DESKTOP"})}et(Nd,Ve),d=Nd.prototype,d.Ca=function(){return this.g.value()},d.Lb=function(){return"Apple Browser"},d.La=function(){return this.h.value()},d.Ea=function(){return"WEBKIT"},d.bc=function(){return!1},d.be=function(e,t){return t==="audio"},d.Ye=function(){return!0},d.xi=function(e){return e==="audio"},d.Ta=function(e){return Ve.prototype.Ta.call(this,e),e.abr.minTimeToSwitch=.5,e},d.Ti=function(){return!0},(navigator.vendor||"").includes("Apple")&&(/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||1<navigator.maxTouchPoints||navigator.userAgentData&&navigator.userAgentData.platform&&navigator.userAgentData.platform.toLowerCase()=="macos"||navigator.platform&&navigator.platform.toLowerCase().includes("mac"))&&(_n=function(){return new Nd});function jd(){if(!d0())throw Error("Not a Chromecast device!");Ve.call(this),this.h=new St(function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}),this.g=new St(function(){var e=navigator.userAgentData&&navigator.userAgentData.platform||navigator.userAgent;return e=e.toLowerCase(),e.includes("android")?p0:e.includes("fuchsia")?h0:Ud})}et(jd,Ve),d=jd.prototype,d.Ca=function(){return this.h.value()},d.Lb=function(){return"Chromecast with "+this.g.value()},d.La=function(){return"CAST"},d.Ea=function(){return"CHROMIUM"},d.bc=function(){return Ve.prototype.bc.call(this)&&this.g.value()!==Ud},d.Zc=function(){return this.g.value()!==Ud},d.Di=function(){switch(this.g.value()){case p0:return 0;case h0:return 3;default:return 1}},d.ec=function(){var e,t,n,i,r;return k(function(o){switch(o.g){case 1:if(e=B.cast&&cast.__platform__&&cast.__platform__.canDisplayType,t={width:1280,height:720},ue(o,2),!(n=e)){o.u(4);break}return T(o,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),5);case 5:n=o.h;case 4:if(n){t.width=3840,t.height=2160,o.u(6);break}if(!(i=e)){o.u(7);break}return T(o,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),8);case 8:i=o.h;case 7:i&&(t.width=1920,t.height=1080);case 6:pe(o,3);break;case 2:r=ae(o),zn("Failed to check canDisplayType:",r);case 3:return o.return(t)}})},d.Ta=function(e){return Ve.prototype.Ta.call(this,e),e.streaming.stallSkip=0,e},d.oh=function(){return!1};function d0(){return navigator.userAgent.includes("CrKey")&&!navigator.userAgent.includes("VIZIO SmartCast")}var p0="Android",h0="Fuchsia",Ud="Linux";d0()&&(_n=function(){return new jd});function Od(){Ve.call(this);var e=this;this.i=new St(function(){var t=navigator.userAgent.match(/(Chrome|Firefox)\/(\d+)/);return t?parseInt(t[2],10):null}),this.g=new St(function(){return navigator.userAgent.match(/Edge?\//)?"Edge":navigator.userAgent.includes("Chrome")?"Chrome":navigator.userAgent.includes("Firefox")?"Firefox":"Unknown"}),this.h=new St(function(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform?navigator.platform.toLowerCase().includes("win32"):!1}),this.o=new St(function(){return navigator.userAgent.match(/Edge?\//)?!e.h.value():!0}),this.m=new St(function(){return navigator.userAgent.includes("sony.hbbtv.tv.G5")})}et(Od,Ve),d=Od.prototype,d.Ca=function(){return this.i.value()},d.Lb=function(){return this.g.value()},d.be=function(e){return _c(e)?this.g.value()==="Edge"&&this.h.value():!1},d.wi=function(){return this.g.value()==="Edge"&&this.h.value()},d.Ye=function(){return this.g.value()==="Edge"&&this.h.value()},d.Zc=function(){return this.o.value()},d.Ta=function(e){if(Ve.prototype.Ta.call(this,e),this.h.value())switch(this.g.value()){case"Firefox":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation"};break;case"Chrome":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation.3000","com.microsoft.playready.recommendation":"com.microsoft.playready.recommendation.3000"}}return e},d.Zg=function(){return this.g.value()==="Edge"||this.m.value()},sc=function(){return new Od};function _d(){Ve.apply(this,arguments)}et(_d,Ve),d=_d.prototype,d.Ca=function(){return null},d.Lb=function(){return"Hisense"},d.La=function(){return"TV"},d.bc=function(){return!1},d.ec=function(){var e={width:1920,height:1080},t=null;if(B.Hisense_Get4KSupportState)try{t=B.Hisense_Get4KSupportState()}catch{}return t==null&&(t=navigator.userAgent.includes("UHD")),t&&(e.width=3840,e.height=2160),Promise.resolve(e)},d.Ta=function(e){return Ve.prototype.Ta.call(this,e),e.streaming.stallSkip=0,e},(navigator.userAgent.includes("Hisense")||navigator.userAgent.includes("VIDAA"))&&(_n=function(){return new _d});function bd(){Ve.call(this),this.g=new St(function(){var e=navigator.userAgent.match(/PlayStation (\d+)/);return e?parseInt(e[1],10):null})}et(bd,Ve),d=bd.prototype,d.Lb=function(){return"PlayStation"},d.La=function(){return"CONSOLE"},d.Ea=function(){return"WEBKIT"},d.Ca=function(){return this.g.value()},d.bc=function(){return!1},d.Yc=function(){return!1},d.Zc=function(){return!1},d.jh=function(){return this.Ca()===4},d.ec=function(){var e,t,n,i,r;return k(function(o){switch(o.g){case 1:return e={width:1920,height:1080},t=!1,ue(o,2),T(o,B.msdk.device.getDisplayInfo(),4);case 4:n=o.h,t=n.resolution==="4K",pe(o,3);break;case 2:return ae(o),ue(o,5),T(o,B.msdk.device.getDisplayInfoImmediate(),7);case 7:i=o.h,t=i.resolution==="4K",pe(o,3);break;case 5:r=ae(o),we("PlayStation: Failed to get the display info:",r);case 3:return t&&(e.width=3840,e.height=2160),o.return(e)}})},d.Ta=function(e){return Ve.prototype.Ta.call(this,e),this.Ca()===4&&e.drm.preferredKeySystems.push("com.microsoft.playready"),e.streaming.clearDecodingCache=!0,e},d.Zg=function(){return this.Ca()===4},d.nh=function(){return this.Ca()!==4},navigator.userAgent.includes("PlayStation")&&(_n=function(){return new bd});function Bd(){Ve.call(this);var e=navigator.userAgent.match(/Tizen (\d+).(\d+)/);this.g=e?parseInt(e[1],10):null,this.h=e?parseInt(e[2],10):null}et(Bd,Ve),d=Bd.prototype,d.Ca=function(){return this.g},d.Lb=function(){return"Tizen"},d.Ea=function(){return"CHROMIUM"},d.La=function(){return"TV"},d.be=function(){return!0},d.ae=function(){return this.Ca()===3},d.bc=function(){return!1},d.Yc=function(){var e=this.Ca();return e!==null?4<=e:Ve.prototype.Yc.call(this)},d.Zc=function(){return!1},d.fe=function(){return this.g&&this.h?this.g===5?5<=this.h:5<this.g:Ve.prototype.fe.call(this)},d.ec=function(){var e={width:1920,height:1080};try{if(webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution){var t=webapis.systeminfo.getMaxVideoResolution();e.width=t.width,e.height=t.height}else webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch{we("Tizen: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},d.Ta=function(e){return Ve.prototype.Ta.call(this,e),e.drm.ignoreDuplicateInitData=this.Ca()!==2,this.Ca()===3&&(e.streaming.crossBoundaryStrategy="reset"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e.streaming.gapPadding=2,e},d.ti=function(){var e=[];return this.g!==null&&5>this.g&&e.push("opus"),e},d.ii=function(){return!0},d.ji=function(){return this.Ca()===3},navigator.userAgent.includes("Tizen")&&(_n=function(){return new Bd});function Po(){Ve.apply(this,arguments)}et(Po,Ve),Po.prototype.Ca=function(){return null},Po.prototype.Lb=function(){return"Vizio"},Po.prototype.La=function(){return"TV"},Po.prototype.bc=function(){return!1},navigator.userAgent.includes("VIZIO SmartCast")&&(_n=function(){return new Po});function Fd(){Ve.call(this),this.h=new St(function(){return navigator.userAgent.includes("DT_STB_BCM")}),this.g=new St(function(){if(navigator.userAgent.includes("DT_STB_BCM"))return 11;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null})}et(Fd,Ve),d=Fd.prototype,d.Ca=function(){return this.g.value()},d.Lb=function(){return"WebKit STB"},d.La=function(){return"TV"},d.Ea=function(){return"WEBKIT"},d.bc=function(){return!1},d.Yc=function(){var e=this.g.value();return e!==null?15<=e:!0},d.ec=function(){return Promise.resolve({width:B.screen.width*B.devicePixelRatio,height:B.screen.height*B.devicePixelRatio})},d.nh=function(){return!this.h.value()},(navigator.userAgent.includes("DT_STB_BCM")||navigator.userAgent.includes("DT_STB_BCM")||!(!(navigator.vendor||"").includes("Apple")||/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||1<navigator.maxTouchPoints||navigator.userAgentData&&navigator.userAgentData.platform&&navigator.userAgentData.platform.toLowerCase()=="macos"||navigator.platform&&navigator.platform.toLowerCase().includes("mac")))&&(_n=function(){return new Fd});function Vd(){Ve.call(this),this.g=tI()}et(Vd,Ve),d=Vd.prototype,d.Ca=function(){return this.g},d.Lb=function(){return"WebOS"},d.La=function(){return"TV"},d.Ea=function(){return"CHROMIUM"},d.bc=function(){return!1},d.Yc=function(){var e=this.Ca();return e!==null?3<e:Ve.prototype.Yc.call(this)},d.Zc=function(){var e=this.Ca();return e!==null?6<e:Ve.prototype.Zc.call(this)},d.fe=function(){var e=this.Ca();return e!==null?3<e:Ve.prototype.fe.call(this)},d.ec=function(){var e={width:1920,height:1080};try{var t=JSON.parse(B.PalmSystem.deviceInfo);e.width=Math.max(1920,t.screenWidth),e.height=Math.max(1080,t.screenHeight)}catch{we("WebOS: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},d.Ta=function(e){return Ve.prototype.Ta.call(this,e),this.Ca()===3&&(e.streaming.crossBoundaryStrategy="reset"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e};function tI(){var e=null,t=navigator.userAgent.match(/Chrome\/(\d+)/);switch(t&&(e=parseInt(t[1],10)),e){case 38:return 3;case 53:return 4;case 68:return 5;case 79:return 6;case 87:return 22;case 94:return 23;case 108:return 24;case 120:return 25;default:return null}}d.Si=function(){return!1},navigator.userAgent.includes("Web0S")&&(_n=function(){return new Vd});function Hd(){Ve.call(this),this.g=navigator.userAgent.includes("Edge/");var e=navigator.userAgent.match(/Edge?\/(\d+)/);this.h=e?parseInt(e[1],10):null}et(Hd,Ve),d=Hd.prototype,d.Ca=function(){return this.h},d.Lb=function(){return"Xbox"},d.La=function(){return"CONSOLE"},d.Ea=function(){return this.g?"EDGE":"CHROMIUM"},d.be=function(){return!0},d.Ye=function(){return!0},d.Mi=function(){return this.g},d.ec=function(){var e={width:1920,height:1080},t=g0();if(t)try{var n=new t.Media.Protection.ProtectionCapabilities,i=t.Media.Protection.ProtectionCapabilityResult;t=null;do t=n.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(t===i.maybe);t===i.probably&&(e.width=3840,e.height=2160)}catch{we("Xbox: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},d.Ta=function(e){return Ve.prototype.Ta.call(this,e),e.drm.parseInbandPsshEnabled=this.g,e.drm.preferredKeySystems.push("com.microsoft.playready"),this.g&&(e.streaming.gapPadding=.01),e},d.oh=function(){return!1};function g0(){var e=null;try{e=typeof Windows<"u"?Windows:chrome.webview.hostObjects.sync.Windows}catch{}return e}(navigator.userAgent.includes("Xbox One")||g0()!==null)&&(_n=function(){return new Hd});function m0(e,t,n){this.type=e,this.ea=t,this.segments=n||null}function hl(e,t,n,i){this.id=e,this.name=t,this.attributes=n,this.value=i===void 0?null:i}hl.prototype.toString=function(e){function t(r){return r.name+"="+(isNaN(Number(r.value))?'"'+r.value+'"':r.value)}var n="#"+this.name,i=this.attributes?this.attributes.filter(function(r){return e?!e.has(r.name):!0}).map(t):[];return this.value&&i.unshift(this.value),0<i.length&&(n+=":"+i.join(",")),n};function v0(e,t){return t?e.toString():(t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(t))}function Lo(e,t){return e=e.attributes.filter(function(n){return n.name==t}),e.length?e[0]:null}function $(e,t,n){return(e=Lo(e,t))?e.value:n||null}function Oe(e,t){if(e=Lo(e,t),!e)throw new C(2,4,4023,t);return e.value}function y0(e,t,n){n=n===void 0?[]:n,this.ea=t,this.g=e,this.Zb=n}function gl(e,t){this.name=e,this.value=t}function xn(e,t){return e.filter(function(n){return n.name==t})}function T0(e,t){return e.filter(function(n){return Oe(n,"TYPE")==t})}function Tt(e,t){e=g(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function No(e,t,n){return n=n===void 0?0:n,(e=Tt(e,t))?Number(e.value):n}function zi(e,t,n){return t?x0(e,[t],n):[]}function x0(e,t,n){if(!t.length)return[];var i=t;return n&&n.size&&(i=t.map(function(r){return S0(r,n)})),gt(e,i)}function S0(e,t){if(!t||!t.size)return e;e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var n=e.match(/{\$\w*}/g);if(n){n=g(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;var r=i.slice(2,i.length-1),o=t.get(r);if(o)e=e.replace(i,o);else throw new C(2,4,4039,r)}}return e}function nI(){this.g=0}function Gd(e,t){t=ze(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`).trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new C(2,4,4015);t=0;for(var i=!0,r=g(n),o=r.next();!o.done;o=r.next())if(o=o.value,/^#(?!EXT)/m.test(o)||i)i=!1;else if(o=Kd(e,o),--e.g,w0.includes(o.name)){t=1;break}else o.name=="EXT-X-STREAM-INF"&&(i=!0);for(r=[],i=!0,o=0;o<n.length;o++){var s=n[o],u=n[o+1];if(/^#(?!EXT)/m.test(s)||i)i=!1;else{if(s=Kd(e,s),iI.includes(s.name)){if(t!=1)throw new C(2,4,4017);s=n.splice(o,n.length-o),n=[],i=[],o=[],u=null,s=g(s);for(var a=s.next();!a.done;a=s.next())a=a.value,/^(#EXT)/.test(a)?(a=Kd(e,a),w0.includes(a.name)?r.push(a):a.name=="EXT-X-MAP"?u=a:a.name=="EXT-X-PART"?o.push(a):a.name=="EXT-X-PRELOAD-HINT"?$(a,"TYPE")=="PART"?o.push(a):$(a,"TYPE")=="MAP"&&(a.name="EXT-X-MAP",u=a):i.push(a)):/^#(?!EXT)/m.test(a)||(a=a.trim(),u&&i.push(u),n.push(new y0(a,i,o)),i=[],o=[]);return o.length&&(u&&i.push(u),n.push(new y0("",i,o))),new m0(t,r,n)}r.push(s),s.name=="EXT-X-STREAM-INF"&&(s.attributes.push(new gl("URI",u)),i=!0)}}return new m0(t,r)}function Kd(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new C(2,4,4016,t);t=n[1];var i=n[2];n=[];var r;if(i){i=new Hr(i);var o;(o=sr(i,/^([^,=]+)(?:,|$)/g))&&(r=o[1]);for(var s=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;o=sr(i,s);)n.push(new gl(o[1],o[2]||o[3])),Gr(i)}return new hl(e,t,n,r)}var w0="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" "),iI="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP EXT-X-TILES".split(" ");function A0(){}function E0(e,t){try{var n=ml(e);return $r({uri:e,originalUri:e,data:n.data,headers:{"content-type":n.contentType},originalRequest:t})}catch(i){return mr(i)}}function ml(e){var t=e.split(":");if(2>t.length||t[0]!="data")throw new C(2,1,1004,e);if(t=t.slice(1).join(":").split(","),2>t.length)throw new C(2,1,1004,e);var n=t[0];e=B.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var i=!1;1<t.length&&t[t.length-1]=="base64"&&(i=!0,t.pop());var r;return i?r=mn(e):r=Cn(e),{data:r,contentType:n}}W("shaka.net.DataUriPlugin",A0),A0.parse=E0,pi("data",E0);function vl(){var e=this;this.g=this.h=null,this.F=1,this.A=new Map,this.I=new Map,this.M=new Map,this.M.set("video",new Map),this.M.set("audio",new Map),this.M.set(he,new Map),this.M.set("image",new Map),this.Yb=new Map().set("com.apple.streamingkeydelivery",function(t,n,i){return CI(e,t,n,i)}).set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",function(t){var n=Oe(t,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var i="cenc";n=="SAMPLE-AES"&&(i="cbcs"),n=Oe(t,"URI"),n=ml(n.split("?")[0]),n=le(n.data),i=Pi("com.widevine.alpha",i,[{initDataType:"cenc",initData:n}]),(t=$(t,"KEYID"))&&i.keyIds.add(t.toLowerCase().substr(2)),t=Promise.resolve(i)}else t=Promise.resolve(null);return t}).set("com.microsoft.playready",function(t){var n=Oe(t,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var i="cenc";n=="SAMPLE-AES"&&(i="cbcs"),t=Oe(t,"URI"),t=ml(t.split("?")[0]),t=le(t.data),n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),n=Yu(t,n,new Set,0),i=Pi("com.microsoft.playready",i,[{initDataType:"cenc",initData:n}]),(t=lr(["<PLAYREADY>",oi(t),"</PLAYREADY>"].join(`
`)))&&(i.licenseServerUri=ol(t)),i=Promise.resolve(i)}else i=Promise.resolve(null);return i}).set("urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c",function(t){var n=Oe(t,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var i="cenc";n=="SAMPLE-AES"&&(i="cbcs"),n=Oe(t,"URI"),n=ml(n.split("?")[0]),n=le(n.data),i=Pi("com.huawei.wiseplay",i,[{initDataType:"cenc",initData:n}]),(t=$(t,"KEYID"))&&i.keyIds.add(t.toLowerCase().substr(2)),t=Promise.resolve(i)}else t=Promise.resolve(null);return t}),this.ab=new Set,this.i=new Map,this.l=null,this.C="",this.Pa=new nI,this.K=-1,this.ia=1/0,this.$=this.mc=this.Za=!1,this.B=new ve(function(){if(e.U&&!e.g.continueLoadingWhenPaused&&(e.S.Ja(e.U,"timeupdate"),e.U.paused)){e.S.za(e.U,"timeupdate",function(){return X0(e)});return}X0(e)}),this.Ba=wl,this.m=null,this.Ua=0,this.o=1/0,this.Ya=this.Ka=this.P=0,this.W=new Qr,this.G=new Map,this.H=new Map,this.ya=new Map,this.oa=new Map,this.L=new Map,this.va=new Map,this.wa=new Map,this.kc=this.ka=!1,this.eb=new _r(5),this.j=null,this.N=!0,this.S=new Ce,this.s=this.U=null,this.Xb=function(){return!1}}d=vl.prototype,d.configure=function(e,t){var n=this.h&&e.updatePeriod!=this.g.updatePeriod&&0<=e.updatePeriod;this.g=e,t&&(this.Xb=t),this.j&&this.j.configure(this.g),n&&this.m&&this.m.presentationTimeline.V()&&this.B.Gb()},d.start=function(e,t){var n=this,i;return k(function(r){return r.g==1?(n.h=t,n.ka=t.isLowLatencyMode(),T(r,Jd(n,[e]).promise,2)):r.g!=3?(i=r.h,n.C=i.uri,T(r,sI(n,i.data),3)):r.return(n.m)})},d.stop=function(){this.B&&(this.B.stop(),this.B=null);var e=[];return this.W&&(e.push(this.W.destroy()),this.W=null),this.g=this.h=null,this.ab.clear(),this.m=null,this.i.clear(),this.I.clear(),this.H.clear(),this.A.clear(),this.ya.clear(),this.oa.clear(),this.L.clear(),this.va.clear(),this.wa.clear(),this.j&&this.j.destroy(),this.S&&(this.S.release(),this.S=null),Promise.all(e)},d.update=function(){var e=this,t,n,i,r,o,s,u,a,l,c,f,p;return k(function(h){if(h.g==1){if(!bt(e))return h.return();for(t=[],n=Array.from(e.i.values()),e.o=1/0,e.m.gapCount=0,i=n.filter(function(m){return m.stream.segmentIndex}),r=g(i),o=r.next();!o.done;o=r.next())s=o.value,t.push(rI(e,s));return T(h,Promise.all(t),2)}for(L0(e,i.map(function(m){return m.stream})),u=i.some(function(m){return m.Od==0}),i.length&&!u&&(a=LI,xl(e,a.$i),l=i.map(function(m){return m.ic}),e.l.ob(Math.min.apply(Math,H(l))),e.h.updateDuration()),u&&Wd(e),c=g(i),f=c.next();!f.done;f=c.next())p=f.value,p.stream.isAudioMuxedInVideo||!p.stream.segmentIndex||Hn(p.stream.segmentIndex)||e.h.disableStream(p.stream);K(h)})};function Xd(e,t){return bt(e)?e.M.get(t.type):t.ef}function rI(e,t){var n,i,r,o,s,u,a,l,c,f,p,h,m,y,v,x,S,w,A,D,I,E,M,P,N,L,R,O,U,j,_,F,V,q,X,Me;return k(function(ge){switch(ge.g){case 1:if(t.stream.isAudioMuxedInVideo)return ge.return();for(n=[],i=g(t.O()),r=i.next();!r.done;r=i.next())o=r.value,s=new tt(o),u=s.g,t.Ke&&(0<=t.Qb&&u.add("_HLS_msn",String(t.Qb)),0<=t.Rb&&u.add("_HLS_part",String(t.Rb))),t.Le&&u.add("_HLS_skip","YES"),fh(u)&&er(s,br(u.toString())),n.push(s.toString());return ue(ge,2),T(ge,Jd(e,n,!0).promise,4);case 4:a=ge.h,pe(ge,3);break;case 2:throw l=ae(ge),e.h&&e.h.disableStream(t.stream),l;case 3:if(!t.stream.segmentIndex)return ge.return();if(c=Gd(e.Pa,a.data),c.type!=1)throw new C(2,4,4017);return f=a.uri,f==a.originalUri||t.O().includes(f)||t.vf.push(f),p=xn(c.ea,"EXT-X-DEFINE"),h=zd(e,p,f),m=t.stream,y=Xd(e,t),T(ge,O0(e,c,m.mimeType,t.O,h),5);case 5:for(v=ge.h,x=v.keyIds,S=v.drmInfos,w=v.encrypted,A=v.Dh,m.encrypted||!w||A||(m.encrypted=!0),D=function(xe,me){return xe.size===me.size&&[].concat(H(xe)).every(function(Ee){return me.has(Ee)})},D(m.keyIds,x)||(m.keyIds=x,m.drmInfos=S,e.h.newDrmInfo(m)),I=H0(e,c,y,h,t.O,t.type),E=I.segments,(M=I.bandwidth)&&(m.bandwidth=M),P=pa(m),N=g(E),L=N.next();!L.done;L=N.next())R=L.value,R.Z&&(R.Z.nd=P);m.segmentIndex.Vd(E,e.l.Eb()),E.length&&(O=No(c.ea,"EXT-X-MEDIA-SEQUENCE",0),j=(U=Tt(c.ea,"EXT-X-SKIP"))?Number($(U,"SKIPPED-SEGMENTS")):0,_=j0(O,E),F=_.Qb,V=_.Rb,t.Qb=F+j,t.Rb=V,q=y.get(O),m.segmentIndex.$a(q)),(X=Hn(m.segmentIndex))&&(t.Sc=X.startTime,Me=E[E.length-1],t.ic=Me.endTime),Tt(c.ea,"EXT-X-ENDLIST")&&(t.Od=!0),qd(e,c),$d(e,c.ea,m.type,h,t.O),K(ge)}})}d.onExpirationUpdated=function(){},d.onInitialVariantChosen=function(){},d.banLocation=function(e){this.j&&this.j.banLocation(e)},d.setMediaElement=function(e){this.U=e};function I0(e,t,n){n=n===void 0?!1:n;for(var i=e.K==-1,r=g(t),o=r.next();!o.done;o=r.next()){o=o.value;var s=o.stream.segmentIndex,u=Xd(e,o);if(s=Hn(s)){u=g(u);for(var a=u.next();!a.done;a=u.next()){a=g(a.value);var l=a.next().value;if(a.next().value==s.startTime){i&&(e.K=Math.max(e.K,l)),o.ig=l;break}}}}if(!(0>e.K))for(t=g(t),i=t.next();!i.done;i=t.next())i=i.value,(eu(e,i.type)||n)&&(r=i.stream.segmentIndex)&&(o=e.K-i.ig,0<o&&(r.g.splice(0,o),r=Hn(r))&&(r=-r.startTime,i.stream.segmentIndex.offset(r),M0(e,i,r)))}function oI(e,t){if(e.ia==1/0){t=g(t);for(var n=t.next();!n.done;n=t.next())n=Hn(n.value.stream.segmentIndex),n!=null&&n.h!=null&&(e.ia=Math.min(e.ia,n.h))}if(t=e.ia,t!=1/0){n=g(e.i.values());for(var i=n.next();!i.done;i=n.next())if(i=i.value,!eu(e,i.type)){var r=i.stream.segmentIndex;if(r!=null){var o=Hn(r);if(o)if(o.h==null)zn("Missing EXT-X-PROGRAM-DATE-TIME for stream",i.O(),"Expect AV sync issues!");else for(M0(e,i,o.h-t-o.startTime),i=g(r),r=i.next();!r.done;r=i.next())r.value.ph(t)}}}}function M0(e,t,n){if(!(.001>Math.abs(n))){t.Sc+=n,t.ic+=n,e=Xd(e,t);for(var i=g(e),r=i.next();!r.done;r=i.next()){var o=g(r.value);r=o.next().value,o=o.next().value,e.set(r,o+n)}t.O()}}function sI(e,t){var n,i,r,o,s,u,a,l,c,f,p,h,m,y,v,x,S,w,A,D,I,E,M,P,N,L,R,O,U,j,_,F,V,q,X,Me,ge,xe,me,Ee,Le,fe,re;return k(function(ce){switch(ce.g){case 1:return n=lt,i=Gd(e.Pa,t),r=xn(i.ea,"EXT-X-DEFINE"),o=[],s=[],u=[],e.l=new oe(null,0),e.l.Xc(!0),a=function(){return[e.C]},l=null,c=new Map,i.type==1?(e.N=!1,F=xn(i.ea,"EXT-X-DEFINE"),c=zd(e,F,e.C),l=n.xa,V="",q=new Map,T(ce,N0(e,e.F++,c,i,a,"",l,V,!0,"Media Playlist",null,q,null,!1,null,!1),7)):(aI(e,r),f=xn(i.ea,"EXT-X-MEDIA"),p=xn(i.ea,"EXT-X-STREAM-INF"),h=xn(i.ea,"EXT-X-IMAGE-STREAM-INF"),m=xn(i.ea,"EXT-X-I-FRAME-STREAM-INF"),y=xn(i.ea,"EXT-X-SESSION-KEY"),v=xn(i.ea,"EXT-X-SESSION-DATA"),x=xn(i.ea,"EXT-X-CONTENT-STEERING"),cI(e,v),T(ce,fI(e,x),4));case 4:if(!e.g.ignoreSupplementalCodecs){for(S=[],w=g(p),A=w.next(),D={};!A.done;D={Qi:void 0},A=w.next())I=A.value,(E=$(I,"SUPPLEMENTAL-CODECS"))&&(D.Qi=E.split(/\s*,\s*/).map(function(Xe){return Xe.split("/")[0]}),M=I.attributes.map(function(Xe){return function(We){var $e=We.name,at=We.value;return $e=="CODECS"&&(at=Xe.Qi.join(","),We=We.value.split(","),1<We.length&&(We=Kt("audio",We))&&(at+=","+We)),new gl($e,at)}}(D)),S.push(new hl(I.id,I.name,M,null)));for(p.push.apply(p,H(S)),P=[],N=g(m),L=N.next(),R={};!L.done;R={Ri:void 0},L=N.next())O=L.value,(U=$(O,"SUPPLEMENTAL-CODECS"))&&(R.Ri=U.split(/\s*,\s*/).map(function(Xe){return Xe.split("/")[0]}),j=O.attributes.map(function(Xe){return function(We){var $e=We.name;return We=We.value,$e=="CODECS"&&(We=Xe.Ri.join(",")),new gl($e,We)}}(R)),P.push(new hl(O.id,O.name,j,null)));m.push.apply(m,H(P))}return lI(e,p),TI(e,f),_=gI(e,m),T(ce,mI(e,p,y,f,a,e.A,_),5);case 5:return o=ce.h,s=dI(e,f),T(ce,pI(e,h,m),6);case 6:u=ce.h,ce.u(3);break;case 7:X=ce.h,e.i.set(e.C,X),X.stream&&(Me=pa(X.stream),X.stream.segmentIndex.Cb(function(Xe){Xe.Z&&(Xe.Z.nd=Me)})),l=X.stream.type,ge=!0,(e.g.disableAudio&&X.type=="audio"||e.g.disableVideo&&X.type=="video"&&!X.stream.codecs.includes(","))&&(ge=!1),ge&&o.push({id:0,language:Ne(V||"und"),disabledUntilTime:0,primary:!0,audio:X.type=="audio"?X.stream:null,video:X.type=="video"?X.stream:null,bandwidth:X.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new C(2,7,7001);if(b0(e,i),i.type==1&&(bt(e)&&(B0(e,i),xe=e.o,e.B.ha(xe)),me=Array.from(e.i.values()),Yd(e,me),Wd(e),$d(e,i.ea,l,c,a)),e.m={presentationTimeline:e.l,variants:o,textStreams:s,imageStreams:u,offlineSessionIds:[],sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:e.s},e.$||!e.g.hls.disableCodecGuessing){ce.u(8);break}for(Ee=[],Le=g(e.m.variants),fe=Le.next();!fe.done;fe=Le.next())re=fe.value,re.audio&&re.audio.codecs===""&&Ee.push(re.audio.createSegmentIndex()),re.video&&re.video.codecs===""&&Ee.push(re.video.createSegmentIndex());return T(ce,Promise.all(Ee),8);case 8:e.h.makeTextStreamsForClosedCaptions(e.m),K(ce)}})}function uI(e,t){var n,i,r,o,s,u,a,l,c,f,p,h,m,y,v,x,S,w;return k(function(A){if(A.g==1)return n=vf(e.g.hls.mediaPlaylistFullMimeType),t.length?(i=G0(e,t),r=i.segment,o=i.segmentIndex,s=r.O(),u=s[0],a=new tt(u),l=a.mb.split(".").pop(),(c=Zd.get(l))?A.return(vf(c)):T(A,Promise.all([C0(e,r.Z,0),C0(e,r,o)]),2)):A.return(n);if(f=A.h,p=f[1].mimeType,h=f[0].data,m=f[1].data,y="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),v=["audio/mp4","video/mp4","video/iso.segment"],x=r.Z||v.includes(p),!x&&so(le(m))){var D=m,I=e.g.disableAudio,E=e.g.disableVideo,M=e.g.disableText,P=le(D),N=new Ge().parse(P),L=N.Ld();P=N.Cg();var R=[],O=!1,U=!1;if(!I)switch(L.audio){case"aac":case"aac-loas":N.rb().length&&(R.push("mp4a.40.2"),O=!0);break;case"mp3":N.rb().length&&(R.push("mp4a.40.34"),O=!0);break;case"ac3":N.rb().length&&(R.push("ac-3"),O=!0);break;case"ec3":N.rb().length&&(R.push("ec-3"),O=!0);break;case"opus":N.rb().length&&(R.push("opus"),O=!0)}if(!E)switch(L.video){case"avc":P.codec?R.push(P.codec):R.push("avc1.42E01E"),U=!0;break;case"hvc":P.codec?R.push(P.codec):R.push("hvc1.1.6.L93.90"),U=!0;break;case"av1":R.push("av01.0.01M.08"),U=!0}if(R.length){if(I=O&&!U,E=new Map,U&&!M){for(M=new bn("video/mp2t"),M.qf(D),D=g(M.Of()),U=D.next();!U.done;U=D.next())U=U.value,E.set(U,U);M.Bd()}P={type:I?"audio":"video",mimeType:"video/mp2t",codecs:R.join(", "),language:null,height:P.height,width:P.width,channelCount:null,sampleRate:null,closedCaptions:E,ke:null,colorGamut:null,frameRate:P.frameRate}}else P=null;if(S=P)return A.return(S)}else if((x||y.includes(l))&&(w=Iw(h,m,e.g.disableText)))return A.return(w);return p?A.return(vf(p)):A.return(n)})}function C0(e,t,n){var i,r,o,s,u,a;return k(function(l){switch(l.g){case 1:return t?(i=Pn,r=As(t.O(),t.wc(),t.uc(),e.g.retryParameters),o=t instanceof Z?1:0,T(l,Ci(e,r,i,{type:o}).promise,2)):l.return({mimeType:null,data:null});case 2:if(s=l.h,u=s.data,!t.aesKey){l.u(3);break}return T(l,Tf(u,t.aesKey,n),4);case 4:u=l.h;case 3:return t instanceof Z?t.ce(u,!0):t.ce(u),(a=s.headers["content-type"])&&(a=a.split(";")[0].toLowerCase()),l.return({mimeType:a,data:u})}})}function Wd(e){if(bt(e)){if(e.Ba==Al){for(var t=1/0,n=1/0,i=g(e.i.values()),r=i.next();!r.done;r=i.next())r=r.value,r.stream.segmentIndex&&r.stream.type!="text"&&!r.stream.isAudioMuxedInVideo&&(t=Math.min(t,r.ic),n=Math.min(n,r.Sc));t=t-n||0,isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.Bf(t)}}else e.l.ob(P0(e));if(!e.l.o)for(t=g(e.i.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=Hn(n.stream.segmentIndex))&&n.h&&e.l.gh(n.h);e.l.df()}function aI(e,t){var n=new tt(e.C).g;t=g(t);for(var i=t.next();!i.done;i=t.next()){var r=i.value;i=$(r,"NAME");var o=$(r,"VALUE");r=$(r,"QUERYPARAM"),i&&o&&(e.A.has(i)||e.A.set(i,o)),r&&(i=n.get(r)[0])&&!e.A.has(i)&&e.A.set(r,i)}}function zd(e,t,n){n=new tt(n).g;var i=new Map;t=g(t);for(var r=t.next();!r.done;r=t.next()){var o=r.value,s=$(o,"NAME"),u=$(o,"VALUE");r=$(o,"QUERYPARAM"),o=$(o,"IMPORT"),s&&u&&(i.has(s)||i.set(s,u)),r&&(s=n.get(r)[0])&&!i.has(s)&&i.set(r,s),o&&(r=e.A.get(o))&&i.set(o,r)}return i}function lI(e,t){t=g(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,r=$(i,"AUDIO");n=$(i,"VIDEO");var o=$(i,"SUBTITLES");if(i=k0(e,i),o){var s=Kt(he,i);e.H.set(o,s),kn(i,s)}r&&(o=Kt("audio",i),o||(o=e.g.hls.defaultAudioCodec),e.H.set(r,o)),n&&(r=Kt("video",i),r||(r=e.g.hls.defaultVideoCodec),e.H.set(n,r))}}function cI(e,t){t=g(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,r=$(i,"DATA-ID");n=$(i,"URI");var o=$(i,"LANGUAGE");i=$(i,"VALUE"),r=new Map().set("id",r),n&&r.set("uri",zi([e.C],n,e.A)[0]),o&&r.set("language",o),i&&r.set("value",i),n=new G("sessiondata",r),e.h&&e.h.onEvent(n)}}function fI(e,t){var n,i,r,o,s,u;return k(function(a){if(!e.h||!e.g)return a.return();for(i=g(t),r=i.next();!r.done;r=i.next())if(o=r.value,s=$(o,"PATHWAY-ID"),u=$(o,"SERVER-URI"),s&&u){e.j=new ko(e.h),e.j.configure(e.g),e.j.i=[e.C],e.j.setManifestType("HLS"),e.j.h=s,n=zs(e.j,u);break}return T(a,n,0)})}function dI(e,t){var n=T0(t,"SUBTITLES");t=n.map(function(s){if(e.g.disableText)return null;try{return D0(e,[s],new Map).stream}catch(u){if(e.g.hls.ignoreTextStreamFailures)return null;throw u}}),n=g(n);for(var i=n.next();!i.done;i=n.next()){var r=Oe(i.value,"GROUP-ID");if((i=e.H.get(r))&&(r=e.I.get(r))){r=g(r);for(var o=r.next();!o.done;o=r.next())o=o.value,o.stream.codecs=i,o.stream.mimeType=Qd(he,i)||Tl(he),Lr(o.stream)}}return t.filter(function(s){return s})}function Lr(e){var t=new Set([it(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.Cb(function(n){n.mimeType&&t.add(it(n.mimeType,e.codecs))}),e.fullMimeTypes=t}function pI(e,t,n){var i,r;return k(function(o){return o.g==1?(i=t.map(function(s){var u,a;return k(function(l){if(l.g==1)return e.g.disableThumbnails?l.return(null):(ue(l,2),T(l,xI(e,s),4));if(l.g!=2)return u=l.h,l.return(u.stream);if(a=ae(l),e.g.hls.ignoreImageStreamFailures)return l.return(null);throw a})}).concat(n.map(function(s){if(e.g.disableThumbnails)return null;try{var u=R0(e,s);return u.stream.type!=="image"?null:u.stream}catch(a){if(e.g.hls.ignoreImageStreamFailures)return null;throw a}})),T(o,Promise.all(i),2)):(r=o.h,o.return(r.filter(function(s){return s})))})}function hI(e,t,n){t=t.filter(function(u){var a=$(u,"URI")||"";return u=$(u,"TYPE"),u!="SUBTITLES"&&(a!=""||u=="AUDIO")});var i={};t=g(t);for(var r=t.next();!r.done;r=t.next()){r=r.value;var o=v0(r,!e.j);i[o]?i[o].push(r):i[o]=[r]}for(var s in i)D0(e,i[s],n,!1)}function gI(e,t){return t.map(function(n){return n=R0(e,n),n.stream.type!=="video"?null:n.stream}).filter(function(n){return n})}function mI(e,t,n,i,r,o,s){var u,a,l,c,f,p,h,m,y,v,x,S,w,A,D,I,E,M,P,N,L,R,O,U,j,_,F,V,q,X,Me,ge,xe,me,Ee,Le;return k(function(fe){switch(fe.g){case 1:if(u=[],a=new Set,e.g.ignoreDrmInfo||!(0<n.length)){fe.u(2);break}l=g(n),c=l.next();case 3:if(c.done){fe.u(2);break}if(f=c.value,p=Oe(f,"METHOD"),h=$(f,"KEYFORMAT")||"identity",m=null,p=="NONE"){fe.u(4);break}if(Sl(p)){y=zi(r(),Oe(f,"URI"),o),v=y.sort().join(""),e.L.has(v)||(x=ct(y,e.g.retryParameters),S=Ci(e,x,6).promise,e.L.set(v,S)),fe.u(4);break}if(h=="identity")return T(fe,W0(e,f,"",r,null,o),12);if(w=e.Yb.get(h),!w){A=null,fe.u(10);break}return T(fe,w(f,"",null),11);case 11:A=fe.h;case 10:m=A,fe.u(6);break;case 12:m=fe.h;case 6:if(m){if(m.keyIds)for(D=g(m.keyIds),I=D.next();!I.done;I=D.next())E=I.value,a.add(E);u.push(m)}case 4:c=l.next(),fe.u(3);break;case 2:for(M={},P=g(t),N=P.next();!N.done;N=P.next())L=N.value,R=v0(L,!e.j),M[R]?M[R].push(L):M[R]=[L];O=[];for(U in M)j=M[U],_=j[0],F=$(_,"FRAME-RATE"),V=Number($(_,"AVERAGE-BANDWIDTH"))||Number(Oe(_,"BANDWIDTH")),q=$(_,"RESOLUTION"),X=g(q?q.split("x"):[null,null]),Me=X.next().value,ge=X.next().value,xe=$(_,"VIDEO-RANGE"),(me=$(_,"REQ-VIDEO-LAYOUT"))&&me.includes(",")&&(Ee=me.split(",").filter(function(re){return re=="CH-STEREO"||re=="CH-MONO"}),me=Ee[0]),me=me||"CH-MONO",Le=vI(e,j,i),O.push.apply(O,H(yI(e,Le.audio,Le.video,V,Me,ge,F,xe,me,u,a,s)));return fe.return(O.filter(function(re){return re!=null}))}})}function vI(e,t,n){for(var i={audio:[],video:[]},r=new Map,o=[],s=!1,u=!1,a=g(t),l=a.next();!l.done;l=a.next()){var c=l.value;l=$(c,"AUDIO");var f=$(c,"VIDEO"),p=l||f;p&&(o.includes(p)||o.push(p),(c=$(c,"PATHWAY-ID"))&&r.set(p,c),l?s=!0:f&&(u=!0))}o.length&&n.length&&(n=n.filter(function(m){return o.includes(Oe(m,"GROUP-ID"))}),hI(e,n,r)),n=(r=o.sort().join(","))&&e.I.has(r)?e.I.get(r):[],s?i.audio.push.apply(i.audio,H(n)):u&&i.video.push.apply(i.video,H(n)),s=!1;var h=t.map(function(m){return Oe(m,"URI")});return l=i.audio.find(function(m){return m&&m.O().find(function(y){return h.includes(y)})}),u=k0(e,t[0]),n=Kt("video",u),(a=Kt("audio",u))&&!n?(l="audio",s=0<i.audio.length):!i.audio.length&&!i.video.length&&a&&n?(l="video",u=[[n,a].join()]):i.audio.length&&l?(l="audio",s=!0):l=i.video.length&&!i.audio.length?"audio":"video",s||(e=SI(e,t,u,l),r&&(e.stream.groupId=r),i[e.stream.type]=[e]),i}function k0(e,t){return t=$(t,"CODECS")||"",e.$=0<t.length,e.$||e.g.hls.disableCodecGuessing||(t=[],e.g.disableVideo||t.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||t.push(e.g.hls.defaultAudioCodec),t=t.join(",")),yf(t.split(/\s*,\s*/))}function yI(e,t,n,i,r,o,s,u,a,l,c,f){for(var p=g(n),h=p.next();!h.done;h=p.next())K0(h.value.stream,r,o,s,u,a,null);for(r=e.g.disableAudio,(!t.length||r)&&(t=[null]),r=e.g.disableVideo,(!n.length||r)&&(n=[null]),r=[],t=g(t),o=t.next();!o.done;o=t.next())for(o=o.value,s=g(n),u=s.next();!u.done;u=s.next()){var m=u.value;(u=o?o.stream:null)&&(u.drmInfos=l,u.keyIds=c),(a=m?m.stream:null)&&(a.drmInfos=l,a.keyIds=c,e.g.disableIFrames||Jh(a,f)),a&&!u&&(a.bandwidth=i),!a&&u&&(u.bandwidth=i),p=o?o.stream.drmInfos:null,h=m?m.stream.drmInfos:null,m=m?m.O().sort().join(","):"";var y=o?o.O().sort().join(","):"",v=[];u&&u.codecs&&v.push(u.codecs),a&&a.codecs&&v.push(a.codecs),m=[m,y,v.sort()].join("-"),u&&a&&!ng(p,h)||e.ab.has(m)||(u={id:e.F++,language:u?u.language:"und",disabledUntilTime:0,primary:!!u&&u.primary||!!a&&a.primary,audio:u,video:a,bandwidth:i,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},r.push(u),e.ab.add(m))}return r}function TI(e,t){t=T0(t,"CLOSED-CAPTIONS"),e.N=t.length==0,t=g(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,r=$(i,"LANGUAGE");n=Ne(r||"und"),r||(r=$(i,"NAME"))&&(n=r),r=Oe(i,"GROUP-ID"),i=Oe(i,"INSTREAM-ID").replace("SERVICE","svc"),e.G.get(r)||e.G.set(r,new Map),e.G.get(r).set(i,n)}}function D0(e,t,n,i){i=i===void 0?!0:i;for(var r=[],o=[],s=new Map,u=g(t),a=u.next();!a.done;a=u.next()){var l=a.value;a=i?Oe(l,"URI"):$(l,"URI")||"shaka://hls-muxed",l=Oe(l,"GROUP-ID"),r.push(a),o.push(l),s.set(l,a)}if(i=o.sort().join(","),a=t[0],t="",u=Oe(a,"TYPE").toLowerCase(),u=="subtitles"&&(u=he),u==he)t=$(a,"CODECS")||"";else for(o=g(o),l=o.next();!l.done;l=o.next())if(l=l.value,e.H.has(l)){t=e.H.get(l);break}if(o=r.sort().join(","),e.i.has(o))return e.i.get(o);if(l=e.F++,e.j){s=g(s);for(var c=s.next();!c.done;c=s.next()){var f=g(c.value);c=f.next().value,f=f.next().value,(c=n.get(c))&&Do(e.j,l,c,f)}}n=$(a,"LANGUAGE"),s=$(a,"NAME"),c=$(a,"DEFAULT")=="YES",u=="audio"?f=(f=$(a,"CHANNELS"))?parseInt(f.split("/")[0],10):null:f=null;var p;u=="audio"&&(p=$(a,"CHANNELS"))?(p=p.split("/"),p=p.length!=2?!1:p[1]==="JOC"||p[1].includes("ATMOS")):p=!1;var h=$(a,"CHARACTERISTICS"),m=$(a,"FORCED")=="YES";return u=="audio"?a=(a=$(a,"SAMPLE-RATE"))?parseInt(a,10):null:a=null,r=yl(e,l,r,t,u,n,c,s,f,null,h,m,a,p),r.stream&&(r.stream.groupId=i),e.I.has(i)?e.I.get(i).push(r):e.I.set(i,[r]),e.i.set(o,r),r}function xI(e,t){var n,i,r,o,s,u,a,l,c,f;return k(function(p){return p.g==1?(n=Oe(t,"URI"),i=$(t,"CODECS","jpeg")||"",e.i.has(n)?p.return(e.i.get(n)):(r=$(t,"LANGUAGE"),o=$(t,"NAME"),s=$(t,"CHARACTERISTICS"),u=yl(e,e.F++,[n],i,"image",r,!1,o,null,null,s,!1,null,!1),(a=$(t,"RESOLUTION"))?T(p,u.stream.createSegmentIndex(),3):p.u(2))):(p.g!=2&&(l=Hn(u.stream.segmentIndex),c=l.tilesLayout)&&(u.stream.width=Number(a.split("x")[0])*Number(c.split("x")[0]),u.stream.height=Number(a.split("x")[1])*Number(c.split("x")[1])),(f=$(t,"BANDWIDTH"))&&(u.stream.bandwidth=Number(f)),e.i.set(n,u),p.return(u))})}function R0(e,t){var n="video",i=Oe(t,"URI"),r=$(t,"CODECS")||"";if(r=="mjpg"&&(n="image"),e.i.has(i))return e.i.get(i);var o=$(t,"LANGUAGE"),s=$(t,"NAME"),u=$(t,"CHARACTERISTICS");return n=yl(e,e.F++,[i],r,n,o,!1,s,null,null,u,!1,null,!1),r=$(t,"RESOLUTION"),o=g(r?r.split("x"):[null,null]),r=o.next().value,o=o.next().value,n.stream.width=Number(r)||void 0,n.stream.height=Number(o)||void 0,(t=$(t,"BANDWIDTH"))&&(n.stream.bandwidth=Number(t)),e.i.set(i,n),n}function SI(e,t,n,i){for(var r=e.F++,o=[],s=g(t),u=s.next();!u.done;u=s.next()){var a=u.value;u=Oe(a,"URI"),a=$(a,"PATHWAY-ID"),e.j&&a&&Do(e.j,r,a,u),o.push(u)}if(s=o.sort().join(",")+n.sort().join(","),e.i.has(s))return e.i.get(s);u=o.join(",");e:{if(t=$(t[0],"CLOSED-CAPTIONS"),i=="video"){if(e.g.disableText){e.N=!1,t=null;break e}if(t){if(t!="NONE"){t=e.G.get(t);break e}e.N=!1}else if(!t&&e.G.size)for(t=g(e.G.keys()).next();!t.done;){t=e.G.get(t.value);break e}}t=null}return n=Vr(i,n),i=yl(e,r,o,n,i,null,!1,u,null,t,null,!1,null,!1),e.i.set(s,i),i}function yl(e,t,n,i,r,o,s,u,a,l,c,f,p,h){function m(A){var D,I,E,M,P,N,L,R,O,U,j,_,F,V,q,X,Me,ge,xe,me,Ee,Le,fe;return k(function(re){switch(re.g){case 1:return D=lt,ue(re,2),T(re,A.promise,4);case 4:if(I=re.h,A.aborted)return re.return();if(E=I.uri,E!=I.originalUri&&(M=x.O(),M.includes(E)||x.vf.push(E)),P=Gd(e.Pa,I.data),P.type!=1)throw new C(2,4,4017);return N=xn(P.ea,"EXT-X-DEFINE"),L=zd(e,N,E),R=!1,(!e.$&&e.g.hls.disableCodecGuessing||e.N&&r==D.xa&&!e.g.hls.disableClosedCaptionsDetection)&&0<P.segments.length&&(e.N=!1,R=!0),O=!e.$&&e.g.hls.disableCodecGuessing,U=bt(e),T(re,N0(e,0,L,P,y,i,r,o,s,u,a,l,c,f,p,h,void 0,R,O),5);case 5:if(j=re.h,A.aborted)return re.return();if(_=j.stream,b0(e,P),bt(e)&&!U&&B0(e,P),x.Sc=j.Sc,x.ic=j.ic,x.Le=j.Le,x.Ke=j.Ke,x.Od=j.Od,x.ef=j.ef,x.Qb=j.Qb,x.Rb=j.Rb,x.Jg=!0,v.segmentIndex=_.segmentIndex,v.encrypted=_.encrypted,v.drmInfos=_.drmInfos,v.keyIds=_.keyIds,v.mimeType=_.mimeType,v.bandwidth=v.bandwidth||_.bandwidth,v.codecs=v.codecs||_.codecs,v.closedCaptions=v.closedCaptions||_.closedCaptions,v.width=v.width||_.width,v.height=v.height||_.height,v.hdr=v.hdr||_.hdr,v.colorGamut=v.colorGamut||_.colorGamut,v.frameRate=v.frameRate||_.frameRate,v.language=="und"&&_.language!="und"&&(v.language=_.language),v.language=v.language||_.language,v.channelsCount=v.channelsCount||_.channelsCount,v.audioSamplingRate=v.audioSamplingRate||_.audioSamplingRate,Lr(v),v.drmInfos.length&&e.h.newDrmInfo(v),F=!1,(!l&&v.closedCaptions||l&&v.closedCaptions&&l.size!=v.closedCaptions.size)&&(F=!0),e.m&&F&&e.h.makeTextStreamsForClosedCaptions(e.m),r==D.xa||r==D.Y)for(V=g(e.i.values()),q=V.next();!q.done;q=V.next())X=q.value,X.Jg||X.type!=r||(X.stream.mimeType=_.mimeType,Lr(X.stream));r==D.Oa&&(Me=Hn(_.segmentIndex))&&Me.Z&&(v.mimeType="application/mp4",Lr(v)),ge=pa(v),v.segmentIndex.Cb(function(ce){ce.Z&&(ce.Z.nd=ge)}),wI(e)&&(e.mc?Yd(e,[x]):(e.mc=!0,xe=Array.from(e.i.values()),me=xe.filter(function(ce){return ce.stream.segmentIndex}),Yd(e,me),Wd(e),Ee=e.o,0<Ee&&e.B.ha(Ee))),$d(e,P.ea,v.type,L,y),e.m&&(e.m.startTime=e.s),pe(re,0);break;case 2:if(Le=ae(re),v.closeSegmentIndex(),Le.code===7001)return re.return();if(fe=e.h.disableStream(v),!fe)throw Le;K(re)}})}function y(){return e.j&&1<n.length?Ys(e.j,t):x.vf.concat(x0([e.C],n,e.A))}var v=U0(e,i,r,o,s,u,a,l,c,f,p,h);n.includes("shaka://hls-muxed")&&(v.isAudioMuxedInVideo=!0,v.mimeType="video/mp2t",Lr(v));var x={stream:v,type:r,vf:[],Sc:0,ic:0,ef:new Map,Le:!1,Ke:!1,Od:!1,ig:-1,Qb:-1,Rb:-1,Jg:!1,O:y},S=null,w;return v.createSegmentIndex=function(){return S||(v.isAudioMuxedInVideo?(v.segmentIndex=new Ie([]),Promise.resolve()):(w=Jd(e,x.O(),!0),S=new Promise(function(A){A(m(w))})))},v.closeSegmentIndex=function(){S&&!v.segmentIndex&&w.abort(),v.segmentIndex&&(v.segmentIndex.release(),v.segmentIndex=null),S=null},x}function P0(e){var t=1/0;e=g(e.i.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&!n.stream.isAudioMuxedInVideo&&(t=Math.min(t,n.ic));return t}function L0(e,t){var n=[];t=g(t);for(var i=t.next();!i.done;i=t.next())i=i.value,i.segmentIndex&&i.segmentIndex.Cb(function(r){n.push(r)});e.l.Xd(n)}function Yd(e,t){if(!bt(e))for(var n=P0(e),i=g(t),r=i.next();!r.done;r=i.next())r.value.stream.segmentIndex.gd(0,n);L0(e,t.map(function(o){return o.stream})),i=Array.from(e.i.values()).filter(function(o){return o.stream.segmentIndex}),n=i.some(function(o){return o.stream.type=="audio"}),r=i.some(function(o){return o.stream.type=="video"}),i=bt(e)&&!e.Za,n=!bt(e)&&e.Za&&!(n&&r),e.g.hls.ignoreManifestProgramDateTime||i||n?I0(e,t,i):(oI(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&I0(e,t))}function eu(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function wI(e){if(!e.m)return!1;var t=[],n=[];e=g(e.m.variants);for(var i=e.next();!i.done;i=e.next())i=i.value,i.video&&t.push(i.video),i.audio&&n.push(i.audio);return!(0<t.length&&!t.some(function(r){return r.segmentIndex})||0<n.length&&!n.some(function(r){return r.segmentIndex}))}function N0(e,t,n,i,r,o,s,u,a,l,c,f,p,h,m,y,v,x,S){x=x===void 0?!0:x,S=S===void 0?!0:S;var w,A,D,I,E,M,P,N,L,R,O,U,j,_,F,V,q,X,Me,ge,xe,me,Ee,Le,fe,re,ce,Xe,We;return k(function($e){switch($e.g){case 1:if(w=i.segments||[],A=w.every(function(at){return!!Tt(at.ea,"EXT-X-GAP")}),!w.length||A)throw new C(2,4,4053);if(AI(e,i),bt(e)&&qd(e,i),D=bt(e)?e.M.get(s):new Map,I=H0(e,i,D,n,r,s),E=I.segments,M=I.bandwidth,O=R=L=N=P=null,!(0<E.length&&x)){$e.u(2);break}return T($e,uI(e,E),3);case 3:U=$e.h,s=U.type,u=U.language,c=U.channelCount,m=U.sampleRate,e.g.disableText||(f=U.closedCaptions),N=U.height,P=U.width,L=U.ke,R=U.colorGamut,O=U.frameRate,S&&(v=U.mimeType,o=U.codecs);case 2:if(v){$e.u(4);break}return T($e,MI(e,s,o,E),5);case 5:v=$e.h,s!=he||o||v!="application/mp4"||!E[0]||E[0].Z||(v="text/vtt");case 4:return T($e,O0(e,i,v,r,n),6);case 6:if(j=$e.h,_=j.drmInfos,F=j.keyIds,V=j.encrypted,q=j.Dh,V&&!_.length&&!q)throw new C(2,4,4026);return X=U0(e,o,s,u,a,l,c,f,p,h,m,y),X.encrypted=V&&!q,X.drmInfos=_,X.keyIds=F,X.mimeType=v,M&&(X.bandwidth=M),Lr(X),s=="video"&&(P||N||L||R)&&K0(X,P,N,O,L,null,R),bt(e)&&qd(e,i),Me=E[0].startTime,ge=E[E.length-1],xe=ge.endTime,me=new Ie(E),X.segmentIndex=me,Le=(Ee=Tt(i.ea,"EXT-X-SERVER-CONTROL"))?Lo(Ee,"CAN-SKIP-UNTIL")!=null:!1,fe=Ee?Lo(Ee,"CAN-BLOCK-RELOAD")!=null:!1,re=No(i.ea,"EXT-X-MEDIA-SEQUENCE",0),ce=j0(re,E),Xe=ce.Qb,We=ce.Rb,$e.return({stream:X,type:s,vf:[],O:r,Sc:Me,ic:xe,Le,Ke:fe,Od:!1,ig:-1,Qb:Xe,Rb:We,ef:D,Jg:!1})}})}function j0(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{Qb:e,Rb:n};t=t[t.length-1];var i=t.g;return t.g.length?(n=i.length-1,i[i.length-1].isPreload()||(e++,n=0),{Qb:e,Rb:n}):(e++,t.m&&(n=0),{Qb:e,Rb:n})}function U0(e,t,n,i,r,o,s,u,a,l,c,f){var p=Qd(n,t)||Tl(n),h=[];if(a){a=g(a.split(","));for(var m=a.next();!m.done;m=a.next())h.push(m.value)}return a=void 0,m=null,n==he?a=h.includes("public.accessibility.transcribes-spoken-dialog")&&h.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":h.includes("public.accessibility.describes-video")&&(m="visually impaired"),h.length||a!=="subtitle"||h.push("subtitle"),e={id:e.F++,originalId:o,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:p,codecs:t,kind:n==he?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Ne(i||"und"),originalLanguage:i,label:o,type:n,primary:r,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:h,forced:l,channelsCount:s,audioSamplingRate:c,spatialAudio:f,closedCaptions:u,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:m,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null},Lr(e),e}function O0(e,t,n,i,r){var o,s,u,a,l,c,f,p,h,m,y,v,x,S,w,A,D,I,E,M,P,N,L,R,O,U,j,_,F;return k(function(V){switch(V.g){case 1:if(o=new Map,!e.g.ignoreDrmInfo&&t.segments){for(s=g(t.segments),u=s.next();!u.done;u=s.next())if(a=u.value,l=xn(a.ea,"EXT-X-KEY"),c=null,l.length)for(c=F0(e,t,a.ea,i,r),f=g(l),p=f.next();!p.done;p=f.next())h=p.value,o.set(h,c)}y=m=!1,v=[],x=new Set,S=g(o),w=S.next();case 2:if(w.done){V.u(4);break}if(A=w.value,D=g(A),I=D.next().value,E=D.next().value,M=I,P=E,N=Oe(M,"METHOD"),N=="NONE"){V.u(3);break}if(m=!0,L=$(M,"KEYFORMAT")||"identity",R=null,Sl(N)){y=!0,V.u(3);break}if(L=="identity")return T(V,W0(e,M,n,i,P,r),11);if(O=e.Yb.get(L),!O){U=null,V.u(9);break}return T(V,O(M,n,P),10);case 10:U=V.h;case 9:R=U,V.u(6);break;case 11:R=V.h;case 6:if(R){if(R.keyIds)for(j=g(R.keyIds),_=j.next();!_.done;_=j.next())F=_.value,x.add(F);v.push(R)}case 3:w=S.next(),V.u(2);break;case 4:return V.return({drmInfos:v,keyIds:x,encrypted:m,Dh:y})}})}function _0(e,t,n,i,r){if(!B.crypto||!B.crypto.subtle)throw we("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new C(2,4,4042);var o=0,s=$(t,"IV","");if(s){var u=nr(s.substr(2));if(u.byteLength!=16)throw new C(2,4,4048)}else o=No(n.ea,"EXT-X-MEDIA-SEQUENCE",0);var a=zi(i(),Oe(t,"URI"),r),l=a.sort().join("");if(n=t.toString()+"-"+o+"-"+l,!e.oa.has(n)){var c={bitsKey:128,blockCipherMode:"CBC",iv:u,firstMediaSequenceNumber:o};switch(Oe(t,"METHOD")){case"AES-256":c.bitsKey=256;break;case"AES-256-CTR":c.bitsKey=256,c.blockCipherMode="CTR"}c.fetchKey=function(){var f,p,h,m;return k(function(y){if(y.g==1)return e.L.has(l)||(f=ct(a,e.g.retryParameters),p=Ci(e,f,6).promise,e.L.set(l,p)),T(y,e.L.get(l),2);if(y.g!=3){if(h=y.h,!h.data||h.data.byteLength!=c.bitsKey/8)throw new C(2,4,4049);return m={name:c.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:c.bitsKey},T(y,B.crypto.subtle.importKey("raw",h.data,m,!0,["decrypt"]),3)}c.cryptoKey=y.h,c.fetchKey=void 0,K(y)})},e.oa.set(n,c)}return e.oa.get(n)}function b0(e,t){e.s==null&&(t=Tt(t.ea,"EXT-X-START"))&&(e.s=Number(Oe(t,"TIME-OFFSET")))}function AI(e,t){var n=Tt(t.ea,"EXT-X-PLAYLIST-TYPE");t=Tt(t.ea,"EXT-X-ENDLIST"),t=n&&n.value=="VOD"||t,n=n&&n.value=="EVENT"&&!t,n=!t&&!n,t?xl(e,wl):n?xl(e,Al):xl(e,q0)}function qd(e,t){var n=1/0,i=t.segments;if(i.length)for(var r=i.length-1;0<=r;){var o=Tt(i[r].ea,"EXTINF");if(o){n=Number(o.value.split(",")[0]);break}r--}if(i=Tt(t.ea,"EXT-X-TARGETDURATION"),!i)throw new C(2,4,4024,"EXT-X-TARGETDURATION");i=Number(i.value),(r=Tt(t.ea,"EXT-X-PART-INF"))&&(e.P=Number(Oe(r,"PART-TARGET"))),t=Tt(t.ea,"EXT-X-SERVER-CONTROL"),e.ka&&e.P?(e.o=e.kc?5*e.P<=n?Math.min(e.P,e.o):Math.min(n,e.o):Math.min(e.P,e.o),e.Ya=t?Number(Oe(t,"PART-HOLD-BACK")):0):(e.o=Math.min(n,e.o),n=t?Lo(t,"HOLD-BACK"):null,e.Ka=n?Number(n.value):0),e.Ua=Math.max(i,e.Ua)}function B0(e,t){var n=0;if(e.g.defaultPresentationDelay)n=e.g.defaultPresentationDelay;else if(e.Ya)n=e.Ya;else if(e.Ka)n=e.Ka;else{var i=t.segments.length,r=e.g.hls.liveSegmentsDelay;for(r>i-2&&(r=Math.max(1,i-2)),r=i-r;r<i;r++){var o=Tt(t.segments[r].ea,"EXTINF");n=o?n+Math.ceil(Number(o.value.split(",")[0])):n+e.Ua}}e.s&&0>e.s&&(n=Math.min(-e.s,n),e.s+=n),e.l.Ii(0),e.l.fh(n),e.l.Xc(!1)}function F0(e,t,n,i,r){var o=Tt(n,"EXT-X-MAP");if(!o)return null;var s=Oe(o,"URI"),u=zi(i(),s,r);if(s=[u.toString(),$(o,"BYTERANGE","")].join("-"),!e.ya.has(s)){var a=void 0,l=null,c=!1;n=g(n);for(var f=n.next();!f.done;f=n.next())f=f.value,f.name=="EXT-X-KEY"?(c=Oe(f,"METHOD"),Sl(c)&&f.id<o.id?(c=!1,a=_0(e,f,t,i,r)):c=c!="NONE"):f.name=="EXT-X-BYTERANGE"&&f.id<o.id&&(l=f);t=EI(u,o,l,a,c),e.ya.set(s,t)}return e.ya.get(s)}function EI(e,t,n,i,r){var o=0,s=null;return t=$(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(o=t.split("@"),s=Number(o[0]),o=Number(o[1]),s=o+s-1,i&&(n=s+1-o,n%16&&(s+=16-n%16))),new Xt(function(){return e},o,s,null,null,null,i,r)}function II(e,t,n,i,r,o,s,u,a){function l(V){V=new tt(V).mb.split(".").pop();var q=ep.get(s).get(V);return q||(q=Zd.get(V)),q}var c=i.ea,f=Tt(c,"EXTINF"),p=0,h=0,m=null;i.Zb.length&&(e.m.isLowLatency=!0);var y=null;if(!e.g.hls.ignoreManifestProgramDateTime){var v=Tt(c,"EXT-X-PROGRAM-DATE-TIME");v&&v.value&&(y=ai(v.value),e.Za=!0)}var x=mi;if(Tt(c,"EXT-X-GAP")&&(e.m.gapCount++,x=2),!f){if(i.Zb.length==0)throw new C(2,4,4024,"EXTINF");if(!e.ka)return null}var S=[];v=!1;var w=null,A=!1,D=!1;if(e.ka&&i.Zb.length){p=t&&B.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var I=y,E={},M=0;M<i.Zb.length;E={If:void 0,pf:void 0},M++){var P=i.Zb[M],N=M==0?n:S[S.length-1],L=M==0?r:N.endTime,R=Number($(P,"DURATION"))||e.P;if(R){var O=L+R,U=0,j=null;if(P.name=="EXT-X-PRELOAD-HINT"?(U=(U=$(P,"BYTERANGE-START"))?Number(U):0,(N=$(P,"BYTERANGE-LENGTH"))?j=U+Number(N)-1:U&&(j=Number.MAX_SAFE_INTEGER)):(U=$(P,"BYTERANGE"),j=g(V0(N,U)),U=j.next().value,j=j.next().value),E.pf=$(P,"URI"),E.pf){N=mi,$(P,"GAP")=="YES"&&(e.m.gapCount++,N=2,A=!0),E.If=null;var _=function(V){return function(){return V.If==null&&(V.If=zi(u(),V.pf,o)),V.If}}(E);p&&0<=U&&j!=null&&(w=_,v=!0),L=new Z(L,O,_,U,j,t,0,0,1/0,[],"",null,I,N,a),P.name=="EXT-X-PRELOAD-HINT"&&(L.Kg(),D=!0),$(P,"INDEPENDENT")!="YES"&&0<M&&L.md(),(E=l(E.pf))&&(L.mimeType=E,Y0.has(E)&&(L.Z=null)),S.push(L),I&&(I+=R)}}}}if(f){if(f=Number(f.value.split(",")[0]),f==0)return null;p=r+f}else if(S.length)p=S[S.length-1].endTime;else return null;v&&(A||S[0].startByte!=0?(v=!1,w=null):S=[]),(f=Tt(c,"EXT-X-BYTERANGE"))?(m=g(V0(n,f.value)),h=m.next().value,m=m.next().value):S.length&&(h=S[0].startByte,m=S[S.length-1].endByte),n="",f=null,s=="image"&&(n="1x1",c=Tt(c,"EXT-X-TILES"))&&(n=Oe(c,"LAYOUT"),(c=$(c,"DURATION"))&&(f=Number(c)));var F=null;return t=new Z(r,p,function(){return w?w():(F==null&&(F=zi(u(),i.g,o)),F||[])},h,m,t,0,0,1/0,S,n,f,y,x,a,0<S.length&&!!i.g),(r=l(i.g))&&(t.mimeType=r,Y0.has(r)&&(t.Z=null)),v&&(e.kc=!0,t.di(),D&&t.Kg()),t}function V0(e,t){var n=0,i=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.endByte+1,i=n+t-1),[n,i]}function $d(e,t,n,i,r){if(n=="video"||n=="audio"){var o=e.l.m;if(o&&!eu(e,n))for(t=xn(t,"EXT-X-DATERANGE"),t=t.filter(function(N){return Lo(N,"START-DATE")!=null}).sort(function(N,L){return N=Oe(N,"START-DATE"),L=Oe(L,"START-DATE"),N<L?-1:N>L?1:0}),n=0;n<t.length;n++){var s=t[n];try{var u=Oe(s,"START-DATE"),a=ai(u);if(!isNaN(a)){var l=Math.max(0,a-o),c=null,f=$(s,"END-DATE");if(f){var p=ai(f);if(!isNaN(p)&&(c=p-o,0>c))continue}if(c==null){var h=$(s,"DURATION")||$(s,"PLANNED-DURATION");if(h){var m=parseFloat(h);if(isNaN(m)||(c=l+m),0>a-o+m)continue}}var y=$(s,"CLASS")||"com.apple.quicktime.HLS",v=$(s,"END-ON-NEXT")=="YES";if(c==null&&v){for(var x=n+1;x<t.length;x++){var S=$(t[x],"CLASS")||"com.apple.quicktime.HLS";if(y==S){var w=Oe(t[x],"START-DATE"),A=ai(w);if(!isNaN(A)&&A&&A>a){c=Math.max(0,A-o);break}}}if(c==null)continue}x=["CLASS","START-DATE","END-DATE","DURATION","END-ON-NEXT"];for(var D=[],I=g(s.attributes),E=I.next();!E.done;E=I.next()){var M=E.value;if(!x.includes(M.name)){var P=S0(M.value,i);(M.name=="X-ASSET-URI"||M.name=="X-ASSET-LIST")&&(P=zi(r(),M.value,i)[0]),D.push({key:M.name,description:"",data:P,mimeType:null,pictureType:null})}}1<D.length&&e.h.onMetadata(y,l,c,D)}}catch{}}}}function H0(e,t,n,i,r,o){var s=t.segments,u=void 0,a=No(t.ea,"EXT-X-DISCONTINUITY-SEQUENCE",-1),l=No(t.ea,"EXT-X-MEDIA-SEQUENCE",0),c=Tt(t.ea,"EXT-X-SKIP"),f=c?Number($(c,"SKIPPED-SEGMENTS")):0,p=l+f,h=0;bt(e)&&n.has(p)&&(h=n.get(p)),h===0&&e.Ba==Al&&0<n.size&&!n.has(p)&&e.l.i!=null&&(h=e.l.Eb());var m=[],y=null;c=[];for(var v=0;v<s.length;v++){var x=s[v],S=v==0?h:y.endTime;p=l+f+v,Tt(x.ea,"EXT-X-DISCONTINUITY")&&(a++,y&&y.Z&&(y.Z.g=S));for(var w=g(x.ea),A=w.next();!A.done;A=w.next())A=A.value,A.name=="EXT-X-KEY"&&(Sl(Oe(A,"METHOD"))?u=_0(e,A,t,r,i):u=void 0);n.set(p,S),w=F0(e,t,x.ea,r,i),(S=II(e,w,y,x,S,i,o,r,u))&&((y=No(x.ea,"EXT-X-BITRATE"))?c.push({bitrate:y,duration:S.endTime-S.startTime}):c.length&&(y=c.pop(),y.duration+=S.endTime-S.startTime,c.push(y)),y=S,S.i=a,eu(e,o)&&e.K!=null&&p<e.K||m.push(S))}if(t=void 0,c.length&&(t=c.reduce(function(D,I){return D+I.duration},0),t=Math.round(c.reduce(function(D,I){return D+I.bitrate*I.duration},0)/t*1e3)),c=m.some(function(D){return D.h!=null})){for(n={},i=0;i<m.length;n={Qe:void 0,Pe:void 0,He:void 0,Uc:void 0,Ge:void 0},i++)if(n.Uc=m[i],n.Uc.h==null)for(n.Pe=0,n.Qe=i,r=function(D){return function(){var I=m[D.Qe];if(I){if(I.h!=null)return I.h+D.Pe;D.Pe-=I.endTime-I.startTime,D.Qe+=1}return null}}(n),n.Ge=0,n.He=i,s=function(D){return function(){var I=m[D.He];if(I){if(I!=D.Uc&&(D.Ge+=I.endTime-I.startTime),I.h!=null)return I.h+D.Ge;--D.He}return null}}(n);n.Uc.h==null;)n.Uc.h=s(),n.Uc.h==null&&(n.Uc.h=r())}if(c)for(n=g(m),i=n.next();!i.done;i=n.next())for(r=i.value,i=r.h,r=g(r.g),s=r.next();!s.done;s=r.next())s=s.value,s.h=i,i+=s.endTime-s.startTime;if(n=e.ia,c&&n!=1/0&&!eu(e,o))for(e=g(m),o=e.next();!o.done;o=e.next())o.value.ph(n);return{segments:m,bandwidth:t}}function Qd(e,t){if(e==he){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function Tl(e){return e==he?"text/vtt":ep.get(e).get("mp4")}function G0(e,t){e=bt(e)?Math.trunc((t.length-1)/2):0;for(var n=t[e];n.xc()==2&&e+1<t.length;)e++,n=t[e];return{segment:n,segmentIndex:e}}function MI(e,t,n,i){var r,o,s,u,a,l,c,f,p,h,m,y,v;return k(function(x){switch(x.g){case 1:return r=Pn,o=G0(e,i),s=o.segment,s.status==2?x.return(Tl(t)):(u=s.O(),a=new tt(u[0]),l=a.mb.split(".").pop(),c=ep.get(t),(f=c.get(l))||(f=Zd.get(l))||(f=Qd(t,n))?x.return(f):(h=1,m=ct(u,e.g.retryParameters),ue(x,2),m.method="HEAD",T(x,Ci(e,m,r,{type:h}).promise,4)));case 4:y=x.h,p=y.headers["content-type"],pe(x,3);break;case 2:if(v=ae(x),!v||v.code!=1002&&v.code!=1001){x.u(3);break}return m.method="GET",e.g.hls.allowRangeRequestsToGuessMimeType&&(m.headers.Range="bytes=0-0"),T(x,Ci(e,m,r,{type:h}).promise,6);case 6:y=x.h,p=y.headers["content-type"];case 3:if(!p){x.u(7);break}if(f=p.toLowerCase().split(";")[0],f!="application/octet-stream"){x.u(8);break}if(y.data.byteLength){x.u(9);break}return m.method="GET",T(x,Ci(e,m,r,{type:h}).promise,10);case 10:y=x.h;case 9:so(le(y.data))&&(f="video/mp2t");case 8:if(f!="application/octet-stream")return x.return(f);case 7:return x.return(Tl(t))}})}function K0(e,t,n,i,r,o,s){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(i)||void 0,e.hdr=r||void 0,e.videoLayout=o||void 0,e.colorGamut=s||void 0)}function Jd(e,t,n){return Ci(e,ct(t,e.g.retryParameters),0,{type:n?2:3})}function X0(e){var t,n,i,r,o,s;return k(function(u){switch(u.g){case 1:return e.h?(ue(u,2),t=Date.now(),T(u,e.update(),4)):u.return();case 4:n=Date.now(),bt(e)&&(i=(n-t)/1e3,e.eb.sample(1,i),r=0<e.g.updatePeriod?e.g.updatePeriod:e.o,o=Math.max(0,r-mu(e.eb)),e.B.ha(o)),pe(u,3);break;case 2:if(s=ae(u),!e.h)return u.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(s),u.return();s.severity=1,e.h.onError(s),e.B.ha(.1);case 3:if(!e.h)return u.return();e.h.onManifestUpdated(),K(u)}})}function bt(e){return e.Ba!=wl}function xl(e,t){e.Ba=t,e.l&&e.l.Xc(!bt(e)),bt(e)||e.B.stop()}function Ci(e,t,n,i){if(!e.W)throw new C(2,7,7001);return i||(i={}),i.isPreload=e.Xb(),t=e.h.networkingEngine.request(n,t,i),vr(e.W,t),t}function Sl(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function CI(e,t,n,i){var r,o,s,u,a,l;return k(function(c){if(c.g==1){if(n=="video/mp2t")throw new C(2,4,4040);if(B.shakaMediaKeysPolyfill==="apple")throw new C(2,4,4041);if(r=Oe(t,"METHOD"),o=["SAMPLE-AES","SAMPLE-AES-CTR"],!o.includes(r))return c.return(null);s="cenc",r=="SAMPLE-AES"&&(s="cbcs"),u=Oe(t,"URI"),a=Pi("com.apple.fps",s,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}],u);var f=new tt(u).Bb.replace(/-/g,"").toLowerCase();return(l=f.length===32&&/^[0-9a-f]+$/.test(f)?f:null)||!i?c.u(2):T(c,z0(e,i),3)}return c.g!=2&&(l=c.h),l&&a.keyIds.add(l),c.return(a)})}function W0(e,t,n,i,r,o){var s,u,a,l,c,f,p,h,m,y,v,x;return k(function(S){switch(S.g){case 1:if(n=="video/mp2t")throw new C(2,4,4040);if(B.shakaMediaKeysPolyfill==="apple")throw new C(2,4,4041);if(s=Oe(t,"METHOD"),u=["SAMPLE-AES","SAMPLE-AES-CTR"],!u.includes(s))return S.return(null);if(a=zi(i(),Oe(t,"URI"),o),a[0].startsWith("data:text/plain;base64,")){l=si(mn(a[0].split("data:text/plain;base64,").pop())),S.u(2);break}return c=a.sort().join(""),e.va.has(c)||(f=ct(a,e.g.retryParameters),p=Ci(e,f,6).promise,e.va.set(c,p)),T(S,e.va.get(c),3);case 3:h=S.h,l=si(h.data);case 2:if(m="00000000000000000000000000000000",!r){S.u(4);break}return T(S,z0(e,r),5);case 5:(y=S.h)&&(m=y);case 4:return v=new Map,v.set(m,l),x="cenc",s=="SAMPLE-AES"&&(x="cbcs"),S.return(hh(v,x))}})}function z0(e,t){var n,i,r,o;return k(function(s){return s.g==1?(n=null,e.wa.has(t)?(n=e.wa.get(t),s.u(2)):(i=As(t.O(),t.wc(),t.uc(),e.g.retryParameters),r=Pn,T(s,Ci(e,i,r,{type:0}).promise,3))):(s.g!=2&&(o=s.h,t.ce(o.data),n=Cw(o.data),e.wa.set(t,n)),s.return(n))})}W("shaka.hls.HlsParser",vl);var Zd=new Map().set("aac","audio/aac").set("ac3","audio/ac3").set("ec3","audio/ec3").set("mp3","audio/mpeg"),kI=new Map().set("mp4","audio/mp4").set("mp4a","audio/mp4").set("m4s","audio/mp4").set("m4i","audio/mp4").set("m4a","audio/mp4").set("m4f","audio/mp4").set("cmfa","audio/mp4").set("ts","video/mp2t").set("tsa","video/mp2t"),DI=new Map().set("mp4","video/mp4").set("mp4v","video/mp4").set("m4s","video/mp4").set("m4i","video/mp4").set("m4v","video/mp4").set("m4f","video/mp4").set("cmfv","video/mp4").set("ts","video/mp2t").set("tsv","video/mp2t"),RI=new Map().set("mp4","application/mp4").set("m4s","application/mp4").set("m4i","application/mp4").set("m4f","application/mp4").set("cmft","application/mp4").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml"),PI=new Map().set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif"),ep=new Map().set("audio",kI).set("video",DI).set("text",RI).set("image",PI),Y0=new Set(["video/mp2t"].concat(H(Ui))),wl="VOD",q0="EVENT",Al="LIVE",LI={$i:wl,yl:q0,Il:Al};Tr("application/x-mpegurl",function(){return new vl}),Tr("application/vnd.apple.mpegurl",function(){return new vl});function El(e){return ol(e)}var NI=new Map().set("com.microsoft.playready",El).set("com.microsoft.playready.recommendation",El).set("com.microsoft.playready.software",El).set("com.microsoft.playready.hardware",El);function tp(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.s=1,this.i=null,this.C=new _r(5),this.o=new ve(function(){jI(e)}),this.B=new Qr,this.m=new Map,this.A=function(){return!1}}d=tp.prototype,d.configure=function(e,t){this.g=e,t&&(this.A=t)},d.start=function(e,t){var n=this;return k(function(i){if(i.g==1)return n.l=[e],n.h=t,T(i,np(n),2);if(!n.h)throw new C(2,7,7001);return i.return(n.j)})};function jI(e){var t;k(function(n){switch(n.g){case 1:return ue(n,2),T(n,np(e),4);case 4:pe(n,3);break;case 2:t=ae(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();K(n)}})}d.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.B.destroy()},d.update=function(){var e=this,t;return k(function(n){if(n.g==1)return ue(n,2),T(n,np(e),4);if(n.g!=2)return pe(n,0);if(t=ae(n),!e.h||!t)return n.return();e.h.onError(t),K(n)})},d.onExpirationUpdated=function(){},d.onInitialVariantChosen=function(){},d.banLocation=function(){},d.setMediaElement=function(){};function np(e){var t,n,i,r,o,s,u;return k(function(a){if(a.g==1)return t=ct(e.l,e.g.retryParameters),n=e.h.networkingEngine,i=Date.now(),r=n.request(0,t,{type:5,isPreload:e.A()}),vr(e.B,r),T(a,r.promise,2);if(o=a.h,!e.h)return a.return();o.uri&&!e.l.includes(o.uri)&&e.l.unshift(o.uri);var l=o.uri,c=o.data,f=e.g.mss.manifestPreprocessor;if(f!=Ia){if(Ae("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),c=Jy(c,"SmoothStreamingMedia"),!c)throw new C(2,4,4046,l);f(c),c=Cn(c.outerHTML)}var p=Yo(c,"SmoothStreamingMedia");if(!p)throw new C(2,4,4046,l);if(l=e.g.mss.manifestPreprocessorTXml,l!=Ma&&l(p),e.i||(e.i=new oe(null,0)),l=se(p,"IsLive",Iu,!1))throw new C(2,4,4047);e.i.Xc(!l),f=se(p,"TimeScale",wt,1e7),c=se(p,"DVRWindowLength",wt),l&&(c===0||isNaN(c))&&(c=1/0);var h=se(p,"CanSeek",Iu,!1);c===0&&h&&(c=1/0),h=null,c&&0<c&&(h=c/f),l&&!isNaN(e.g.availabilityWindowOverride)&&(h=e.g.availabilityWindowOverride),h==null&&(h=1/0),e.i.Bf(h),c=se(p,"Duration",wt,1/0),l||e.i.ob(c/f),l={variants:[],textStreams:[],timescale:f,duration:c/f};var m;for(h=Pe(p,"Protection"),f=e.g.mss.keySystemsBySystemId,c=[],h=g(h),m=h.next();!m.done;m=h.next())c=c.concat(Pe(m.value,"ProtectionHeader"));if(c.length){for(h=[],m=0;m<c.length;m++){var y=c[m],v=y.attributes.SystemID.toLowerCase(),x=f[v];if(x){var S;e:{if(S=Dy(y)){S=g(Fn(S,"DATA"));for(var w=S.next();!w.done;w=S.next())if(w=Ye(w.value,"KID")){S=mn(ot(w)),S=new Uint8Array([S[3],S[2],S[1],S[0],S[5],S[4],S[7],S[6]].concat(H(S.slice(8)))),S=si(S);break e}}S=null}w=mn(ot(y)),v=nr(v.replace(/-/g,"")),v=[{initData:Yu(w,v,new Set,0),initDataType:"cenc",keyId:S}],v=Pi(x,"cenc",v),S&&v.keyIds.add(S),(x=NI.get(x))&&(v.licenseServerUri=x(y)),h.push(v)}}f=h}else f=[];for(m=f,h=[],f=[],c=[],p=Pe(p,"StreamIndex"),p=g(p),y=p.next();!y.done;y=p.next()){y=y.value,x=Pe(y,"QualityLevel"),v=l.timescale,S=l.duration,w=Pe(y,"c");for(var A=[],D=0,I=0;I<w.length;++I){var E=w[I],M=w[I+1],P=se(E,"t",wt),N=se(E,"d",wt);if(E=se(E,"r",yt),!N)break;if(P=P??D,(E=E||0)&&E--,0>E)if(M){if(M=se(M,"t",wt),M==null)break;if(P>=M)break;E=Math.ceil((M-P)/N)-1}else{if(S==1/0)break;if(P/v>=S)break;E=Math.ceil((S*v-P)/N)-1}for(M=0;M<=E;++M)D=P+N,A.push({start:P/v,end:D/v,xh:P}),P=D}for(v=A,x=g(x),S=x.next();!S.done;S=x.next())(S=UI(e,y,S.value,v,m,l))&&(S.type!="audio"||e.g.disableAudio?S.type!="video"||e.g.disableVideo?S.type!=he||e.g.disableText||c.push(S):f.push(S):h.push(S))}for(p=[],h=g(0<h.length?h:[null]),m=h.next();!m.done;m=h.next())for(m=m.value,y=g(0<f.length?f:[null]),A=y.next();!A.done;A=y.next())x=p,v=x.push,S=e,w=m,A=A.value,I=0,w&&w.bandwidth&&0<w.bandwidth&&(I+=w.bandwidth),A&&A.bandwidth&&0<A.bandwidth&&(I+=A.bandwidth),S={id:S.s++,language:w?w.language:"und",disabledUntilTime:0,primary:!!w&&w.primary||!!A&&A.primary,audio:w,video:A,bandwidth:I,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},v.call(x,S);l.variants=p,l.textStreams=c,e.j?(e.j.variants=l.variants,e.j.textStreams=l.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:l.variants,textStreams:l.textStreams,imageStreams:[],offlineSessionIds:[],sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null},e.i.df()),Promise.resolve(),s=Date.now(),u=(s-i)/1e3,e.C.sample(1,u),K(a)})}function UI(e,t,n,i,r,o){var s=t.attributes.Type;if(s!=="audio"&&s!=="video"&&s!=="text")return we("Ignoring unrecognized type:",s),null;var u=t.attributes.Language,a=e.s++,l=se(n,"Bitrate",li),c=se(n,"MaxWidth",li),f=se(n,"MaxHeight",li),p=se(n,"Channels",li),h=se(n,"SamplingRate",li),m=o.duration;i.length&&(m=i[i.length-1].end-i[0].start);var y=e.i.getDuration();e.i.ob(Math.min(m,y));var v={id:a,originalId:t.attributes.Name||String(a),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:l||0,width:c||void 0,height:f||void 0,kind:"",encrypted:0<r.length,drmInfos:r,keyIds:new Set,language:Ne(u||"und"),originalLanguage:u,label:"",type:"",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:p,audioSamplingRate:h,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:m,timescale:o.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};if((r=t.attributes.Subtype)&&((r=VI.get(r))&&v.roles.push(r),r==="main"&&(v.primary=!0)),r=n.attributes.FourCC,(r===null||r==="")&&(r=t.attributes.FourCC),!r){if(s==="audio")r="AAC";else if(s==="video")return we('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!FI.includes(r.toUpperCase()))return we("Codec not supported:",r),null;switch(n=OI(n,s,r,v),v.mssPrivateData.codecPrivateData=n,s){case"audio":if(!n)return we("Quality unsupported without CodecPrivateData",s),null;v.type="audio",v.mimeType="mss/audio/mp4",v.codecs=_I(r,n);break;case"video":if(!n)return we("Quality unsupported without CodecPrivateData",s),null;v.type="video",v.mimeType="mss/video/mp4",v.codecs=bI(n);break;case"text":v.type=he,v.mimeType="application/mp4",(r==="TTML"||r==="DFXP")&&(v.codecs="stpp")}return v.fullMimeTypes.add(it(v.mimeType,v.codecs)),v.createSegmentIndex=function(){if(v.segmentIndex)return Promise.resolve();if(e.m.has(v.id))var x=e.m.get(v.id);else x=[],v.type=="video"&&(x=v.mssPrivateData.codecPrivateData.split("00000001").slice(1)),x={id:v.id,type:v.type,codecs:v.codecs,encrypted:v.encrypted,timescale:v.mssPrivateData.timescale,duration:v.mssPrivateData.duration,zb:x,Da:new Uint8Array([]),Na:new Uint8Array([]),Wa:0,Xa:0,data:null,stream:v},x=no(new xr([x])),e.m.set(v.id,x);return x=BI(e,new Xt(function(){return[]},0,null,pa(v),v.mssPrivateData.timescale,x,null,v.encrypted),v,t,i),v.segmentIndex=new Ie(x),Promise.resolve()},v.closeSegmentIndex=function(){v.segmentIndex&&(v.segmentIndex.release(),v.segmentIndex=null)},v}function OI(e,t,n,i){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=i.channelsCount||2,e=i.audioSamplingRate||44100;var r={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return i=r[e],n==="AACH"?(n=new Uint8Array(4),e=r[2*e],n[0]=40|i>>1,n[1]=i<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|i>>1,n[1]=i<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function _I(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function bI(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function BI(e,t,n,i,r){var o=i.attributes.Url.replace("{bitrate}",String(n.bandwidth));i=[],r=g(r);for(var s=r.next(),u={};!s.done;u={Df:void 0},s=r.next())u.Df=s.value,i.push(new Z(u.Df.start,u.Df.end,function(a){return function(){return gt(e.l,[o.replace("{start time}",String(a.Df.xh))])}}(u),0,null,t,0,0,n.mssPrivateData.duration));return i}W("shaka.mss.MssParser",tp);var FI="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),VI=new Map().set("CAPT","main").set("SUBT","alternate").set("DESC","main");Tr("application/vnd.ms-sstr+xml",function(){return new tp});function $0(e,t,n,i,r,o,s){if(200<=n&&299>=n&&n!=202||n==304)return{uri:r||i,originalUri:i,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"],originalRequest:o};o=null;try{o=Yn(t)}catch{}throw new C(n==401||n==403?2:1,1,1001,i,n,o,e,s,r||i)}function ip(){}function Il(e,t,n,i,r,o){var s=new zI;yr(t.headers).forEach(function(c,f){s.append(f,c)});var u=new XI,a={Hh:!1,Vi:!1};if(e=HI(e,t,n,{body:t.body||void 0,headers:s,method:t.method,signal:u.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},a,i,r,t.streamDataCallback,o.minBytesForProgressEvents||0),e=new rt(e,function(){return a.Hh=!0,u.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var l=new ve(function(){a.Vi=!0,u.abort()});l.ha(t/1e3),e.finally(function(){l.stop()})}return e}function HI(e,t,n,i,r,o,s,u,a){var l,c,f,p,h,m,y,v,x,S,w,A,D,I,E;return k(function(M){switch(M.g){case 1:return l=KI,c=WI,p=new ArrayBuffer(0),m=h=0,y={},v=Date.now(),ue(M,2),T(M,l(e,i),4);case 4:if(f=M.h,y=GI(f.headers),s(y),i.method=="HEAD"){M.u(5);break}return S=(x=f.headers.get("Content-Length"))?parseInt(x,10):0,f.body?(w=f.clone().body.getReader(),A=function(P){function N(){var L,R,O,U;return k(function(j){switch(j.g){case 1:return ue(j,2),T(j,w.read(),4);case 4:L=j.h,pe(j,3);break;case 2:return ae(j),j.return();case 3:if(L.done){j.u(5);break}if(h+=L.value.byteLength,!u){j.u(5);break}return T(j,u(L.value),5);case 5:R=Date.now(),O=h-m,(100<R-v&&O>=a||L.done)&&(U=L.done?0:S-h,o(R-v,O,U),m=h,v=R),L.done?P.close():(P.enqueue(L.value),N()),K(j)}})}N()},new c({start:A}),T(M,f.arrayBuffer(),8)):T(M,f.arrayBuffer(),9);case 8:p=M.h,M.u(5);break;case 9:p=M.h,D=Date.now(),o(D-v,p.byteLength,0);case 5:t.headers.Range&&(I=t.headers.Range.replace("bytes=","").split("-").filter(function(P){return P}).map(function(P){return parseInt(P,10)}),I.length==2&&p.byteLength!=I[1]-I[0]+1&&we("Payload length does not match range requested bytes",t,f)),pe(M,3);break;case 2:throw E=ae(M),r.Hh?new C(1,1,7001,e,n):r.Vi?new C(1,1,1003,e,n):new C(1,1,1002,e,E,n);case 3:return M.return($0(y,p,f.status,e,f.url,t,n))}})}function GI(e){var t={};return e.forEach(function(n,i){t[i.trim()]=n}),t}function Q0(){if(B.ReadableStream)try{new ReadableStream({})}catch{return!1}else return!1;if(B.Response){if(!new Response("").body)return!1}else return!1;return!(!B.fetch||"polyfill"in B.fetch||!B.AbortController)}W("shaka.net.HttpFetchPlugin",ip),ip.isSupported=Q0,ip.parse=Il;var KI=B.fetch,XI=B.AbortController,WI=B.ReadableStream,zI=B.Headers;Q0()&&(pi("http",Il,2,!0),pi("https",Il,2,!0),pi("blob",Il,2,!0));function J0(){}function Ml(e,t,n,i,r,o){var s=new YI,u=Date.now(),a=0,l=new Promise(function(c,f){s.open(t.method,e,!0),s.responseType="arraybuffer",s.timeout=t.retryParameters.timeout,s.withCredentials=t.allowCrossSiteCredentials;var p={};s.onabort=function(){f(new C(1,1,7001,e,n))},s.onreadystatechange=function(){if(s.readyState===XMLHttpRequest.HEADERS_RECEIVED){var m=s.getAllResponseHeaders().trim().split(`\r
`),y={};m=g(m);for(var v=m.next();!v.done;v=m.next())v=v.value.split(": "),y[v[0].toLowerCase()]=v.slice(1).join(": ");p=y,r(p)}},s.onload=function(m){var y=s.response;try{i(Date.now()-u,m.loaded-a,0);var v=$0(p,y,s.status,e,s.responseURL,t,n);c(v)}catch(x){f(x)}},s.onerror=function(m){f(new C(1,1,1002,e,m,n))},s.ontimeout=function(){f(new C(1,1,1003,e,n))},s.onprogress=function(m){var y=Date.now(),v=o.minBytesForProgressEvents||0,x=m.loaded-a;(100<y-u&&x>=v||m.lengthComputable&&m.loaded==m.total)&&(i(y-u,x,s.readyState==4?0:m.total-m.loaded),a=m.loaded,u=y)};for(var h in t.headers)s.setRequestHeader(h.toLowerCase(),t.headers[h]);s.send(t.body)});return new rt(l,function(){return s.abort(),Promise.resolve()})}W("shaka.net.HttpXHRPlugin",J0),J0.parse=Ml;var YI=B.XMLHttpRequest;pi("http",Ml,1,!0),pi("https",Ml,1,!0),pi("blob",Ml,1,!0);function Z0(e,t,n,i,r){this.g=e,this.i=t,this.groupId=n,this.h=i,this.j=r}function rp(e){var t=e.Wb(!1);return t?oi(t):e.O().map(function(n){return"{"+encodeURI(n.split("#xywh=")[0])+"}"}).join("")+":"+e.startByte+":"+e.endByte}function qI(e,t){return As(e.g.O(),e.g.startByte,e.g.endByte,t.streaming.retryParameters)}function e1(){this.g=this.j=this.i=0,this.h=new Map,this.l=0}function t1(e,t){e.i+=t;var n=e.l;return e.l++,e.h.set(n,t),n}e1.prototype.close=function(e,t){if(this.h.has(e)){var n=this.h.get(e);this.h.delete(e),this.j+=n,this.g+=t}};function n1(e){return e.i==0?0:e.j/e.i}function op(e){var t=this;this.s=e,this.i=new Map,this.h=new Jr(function(){return sp(t).catch(function(){})}),this.j=[],this.o=function(){},this.m=function(){},this.g=new e1,this.l=!1}op.prototype.destroy=function(){return this.h.destroy()};function $I(e,t,n){e.o=t,e.m=n}function sp(e){e.l=!0;var t=e.j.map(function(n){return n()});return e.j=[],Promise.all(t)}op.prototype.queue=function(e,t,n,i,r){var o=this;be(this.h);var s=(this.i.get(e)||Promise.resolve()).then(function(){var u,a,l,c,f,p,h;return k(function(m){if(m.g==1)return T(m,ZI(o,t),2);if(u=m.h,o.h.g)throw new C(2,9,7001);if(i)for(c in a=le(u),l=new Vc(a),l.data)f=Number(c),p=l.data[f],h=l.g[f],o.m(p,h);return o.g.close(n,u.byteLength),o.o(n1(o.g),o.g.g),m.return(r(u))})});return this.i.set(e,s),s};function QI(e,t,n,i,r,o){be(e.h);var s=(e.i.get(t)||Promise.resolve()).then(function(){if(e.h.g)throw new C(2,9,7001);if(r){var u=le(n);u=new Vc(u);for(var a in u.data){var l=Number(a);e.m(u.data[l],u.g[l])}}return e.g.close(i,n.byteLength),e.o(n1(e.g),e.g.g),o(n)});e.i.set(t,s)}function JI(e){return k(function(t){return t.g==1?T(t,Promise.all(e.i.values()),2):t.return(e.g.g)})}function ZI(e,t){var n,i,r,o;return k(function(s){return s.g==1?(n=Pn,i=e.s.request(n,t),r=function(){return i.abort()},e.j.push(r),T(s,i.promise,2)):(o=s.h,kn(e.j,r),s.return(o.data))})}function Cl(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new je,e.onabort=function(i){i.preventDefault(),n.g.reject()},e.onerror=function(i){i.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}Cl.prototype.abort=function(){var e=this;return k(function(t){if(t.g==1){try{e.i.abort()}catch{}return ue(t,2),T(t,e.g,4)}if(t.g!=2)return pe(t,0);ae(t),K(t)})};function up(e,t){return new Promise(function(n,i){var r=e.h.openCursor();r.onerror=i,r.onsuccess=function(){var o;return k(function(s){if(s.g==1)return r.result==null?(n(),s.return()):(o=r.result,T(s,t(o.key,o.value,o),2));o.continue(),K(s)})}})}Cl.prototype.store=function(){return this.h},Cl.prototype.promise=function(){return this.g};function ap(e){this.h=e,this.g=[]}ap.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function Nr(e,t){return kl(e,t,"readwrite")}function kl(e,t,n){n=e.h.transaction([t],n);var i=new Cl(n,t);return e.g.push(i),i.promise().then(function(){kn(e.g,i)},function(){kn(e.g,i)}),i}function jr(e,t,n){this.h=new ap(e),this.i=t,this.g=n}d=jr.prototype,d.destroy=function(){return this.h.destroy()},d.hasFixedKeySpace=function(){return!0},d.addSegments=function(){return i1(this.i)},d.removeSegments=function(e,t){return r1(this,this.i,e,t)},d.getSegments=function(e){var t=this,n;return k(function(i){return i.g==1?T(i,o1(t,t.i,e),2):(n=i.h,i.return(n.map(function(r){return t.Jh(r)})))})},d.addManifests=function(){return i1(this.g)},d.updateManifest=function(){return Promise.reject(new C(2,9,9016,"Cannot modify values in "+this.g))};function eM(e,t,n){e=Nr(e.h,e.g);var i=e.store();return i.get(t).onsuccess=function(){i.put(n,t)},e.promise()}d.updateManifestExpiration=function(e,t){var n=Nr(this.h,this.g),i=n.store();return i.get(e).onsuccess=function(r){(r=r.target.result)&&(r.expiration=t,i.put(r,e))},n.promise()},d.removeManifests=function(e,t){return r1(this,this.g,e,t)},d.getManifests=function(e){var t=this,n;return k(function(i){return i.g==1?T(i,o1(t,t.g,e),2):(n=i.h,i.return(Promise.all(n.map(function(r){return t.Gd(r)}))))})},d.getAllManifests=function(){var e=this,t,n;return k(function(i){return i.g==1?(t=kl(e.h,e.g,"readonly"),n=new Map,T(i,up(t,function(r,o){var s;return k(function(u){if(u.g==1)return T(u,e.Gd(o),2);s=u.h,n.set(r,s),K(u)})}),2)):i.g!=3?T(i,t.promise(),3):i.return(n)})},d.Jh=function(e){return e},d.Gd=function(e){return Promise.resolve(e)};function i1(e){return Promise.reject(new C(2,9,9011,"Cannot add new value to "+e))}d.add=function(e,t){var n=this,i,r,o,s,u,a,l;return k(function(c){if(c.g==1){for(i=Nr(n.h,e),r=i.store(),o=[],s=g(t),u=s.next(),a={};!u.done;a={Wg:void 0},u=s.next())l=u.value,a.Wg=r.add(l),a.Wg.onsuccess=function(f){return function(){o.push(f.Wg.result)}}(a);return T(c,i.promise(),2)}return c.return(o)})};function r1(e,t,n,i){e=Nr(e.h,t),t=e.store(),n=g(n);for(var r=n.next(),o={};!r.done;o={Ig:void 0},r=n.next())o.Ig=r.value,t.delete(o.Ig).onsuccess=function(s){return function(){return i(s.Ig)}}(o);return e.promise()}function o1(e,t,n){var i,r,o,s,u,a,l;return k(function(c){if(c.g==1){for(i=kl(e.h,t,"readonly"),r=i.store(),o={},s=[],u=g(n),a=u.next(),l={};!a.done;l={wf:void 0,Ze:void 0},a=u.next())l.Ze=a.value,l.wf=r.get(l.Ze),l.wf.onsuccess=function(f){return function(){f.wf.result==null&&s.push(f.Ze),o[f.Ze]=f.wf.result}}(l);return T(c,i.promise(),2)}if(s.length)throw new C(2,9,9012,"Could not find values for "+s);return c.return(n.map(function(f){return o[f]}))})}function tu(e){this.g=new ap(e)}tu.prototype.destroy=function(){return this.g.destroy()},tu.prototype.getAll=function(){var e=this,t,n;return k(function(i){return i.g==1?(t=kl(e.g,"session-ids","readonly"),n=[],T(i,up(t,function(r,o){n.push(o)}),2)):i.g!=3?T(i,t.promise(),3):i.return(n)})},tu.prototype.add=function(e){var t=Nr(this.g,"session-ids"),n=t.store();e=g(e);for(var i=e.next();!i.done;i=e.next())n.add(i.value);return t.promise()},tu.prototype.remove=function(e){var t=this,n;return k(function(i){return i.g==1?(n=Nr(t.g,"session-ids"),T(i,up(n,function(r,o,s){e.includes(o.sessionId)&&s.delete()}),2)):T(i,n.promise(),0)})};function Yt(){this.g=new Map}Yt.prototype.destroy=function(){for(var e=[],t=g(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},Yt.prototype.init=function(){var e=this;nu.forEach(function(r,o){(r=r())&&e.g.set(o,r)});for(var t=[],n=g(this.g.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)};function s1(e){var t=null;if(e.g.forEach(function(n,i){n.getCells().forEach(function(r,o){r.hasFixedKeySpace()||t||(t={path:{Pb:i,bb:o},bb:r})})}),t)return t;throw new C(2,9,9013,"Could not find a cell that supports add-operations")}function tM(e,t){e.g.forEach(function(n,i){n.getCells().forEach(function(r,o){t({Pb:i,bb:o},r)})})}function Dl(e,t,n){if(e=e.g.get(t),!e)throw new C(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new C(2,9,9013,"Could not find cell with name "+n);return t}function nM(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function iM(e){var t=Array.from(e.g.keys());if(!t.length)throw new C(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function rM(e){var t,n,i;return k(function(r){return r.g==1?(t=Array.from(e.g.values()),n=0<t.length,n||(i=nu,i.forEach(function(o){(o=o())&&t.push(o)})),T(r,Promise.all(t.map(function(o){return o.erase()})),2)):n?r.u(0):T(r,Promise.all(t.map(function(o){return o.destroy()})),0)})}function u1(e,t){nu.set(e,t)}W("shaka.offline.StorageMuxer",Yt),Yt.unregister=function(e){nu.delete(e)},Yt.register=u1,Yt.prototype.destroy=Yt.prototype.destroy;var nu=new Map;function iu(){jr.apply(this,arguments)}et(iu,jr),iu.prototype.updateManifestExpiration=function(e,t){var n=this,i,r,o;return k(function(s){return i=Nr(n.h,n.g),r=i.store(),o=new je,r.get(e).onsuccess=function(u){(u=u.target.result)?(u.expiration=t,r.put(u),o.resolve()):o.reject(new C(2,9,9012,"Could not find values for "+e))},T(s,Promise.all([i.promise(),o]),0)})},iu.prototype.Gd=function(e){var t,n,i,r,o,s;return k(function(u){if(u.g==1){for(t=[],n=0;n<e.periods.length;++n)i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime,o=oM(e.periods[n],r),t.push(o);return T(u,Ky(t),2)}return s=u.h,u.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:s,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function oM(e,t){uM(e);for(var n=g(e.streams),i=n.next();!i.done;i=n.next());return e.streams.map(function(r){return sM(r,e.startTime,t)})}function sM(e,t,n){var i=e.initSegmentUri?a1(e.initSegmentUri):null,r=t+e.presentationTimeOffset,o=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:i,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(s){var u=a1(s.uri);return{startTime:t+s.startTime,endTime:t+s.endTime,dataKey:u,initSegmentKey:i,appendWindowStart:t,appendWindowEnd:o,timestampOffset:r,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}iu.prototype.Jh=function(e){return{data:e.data}};function a1(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new C(2,9,9004,"Could not parse uri "+e)}function uM(e){var t=e.streams.filter(function(u){return u.contentType=="audio"});if(e=e.streams.filter(function(u){return u.contentType=="video"}),!t.every(function(u){return u.variantIds})||!e.every(function(u){return u.variantIds})){for(var n=g(t),i=n.next();!i.done;i=n.next())i.value.variantIds=[];for(n=g(e),i=n.next();!i.done;i=n.next())i.value.variantIds=[];if(n=0,e.length&&!t.length){i=n++;for(var r=g(e),o=r.next();!o.done;o=r.next())o.value.variantIds.push(i)}if(!e.length&&t.length)for(i=n++,r=g(t),o=r.next();!o.done;o=r.next())o.value.variantIds.push(i);if(e.length&&t.length)for(t=g(t),i=t.next();!i.done;i=t.next())for(i=i.value,r=g(e),o=r.next();!o.done;o=r.next()){o=o.value;var s=n++;i.variantIds.push(s),o.variantIds.push(s)}}}function Rl(){jr.apply(this,arguments)}et(Rl,jr),Rl.prototype.Gd=function(e){var t,n,i,r,o,s;return k(function(u){if(u.g==1){for(t=[],n=0;n<e.periods.length;++n){i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime;for(var a=e.periods[n],l=[],c=g(a.streams),f=c.next();!f.done;f=c.next())f=f.value,f.variantIds.length!=0&&l.push(aM(f,a.startTime,a.startTime+r));o=l,t.push(o)}return T(u,Ky(t),2)}return s=u.h,u.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:s,sequenceMode:!1})})};function aM(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(i){return{startTime:t+i.startTime,endTime:t+i.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:i.dataKey,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}function lp(){jr.apply(this,arguments)}et(lp,jr),d=lp.prototype,d.hasFixedKeySpace=function(){return!1},d.addSegments=function(e){return this.add(this.i,e)},d.addManifests=function(e){return this.add(this.g,e)},d.updateManifest=function(e,t){return eM(this,e,t)},d.Gd=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function l1(){this.m=this.j=this.i=this.h=this.g=this.l=null}d=l1.prototype,d.init=function(){var e=this,t=new je,n=!1,i=new ve(function(){n=!0,t.reject(new C(2,9,9017))});i.ha(c1);var r=B.indexedDB.open("shaka_offline_db",5);return r.onsuccess=function(){if(!n){i.stop();var o=r.result;e.l=o;var s=o.objectStoreNames;s=s.contains("manifest")&&s.contains("segment")?new iu(o,"segment","manifest"):null,e.g=s,s=o.objectStoreNames,s=s.contains("manifest-v2")&&s.contains("segment-v2")?new Rl(o,"segment-v2","manifest-v2"):null,e.h=s,s=o.objectStoreNames,s=s.contains("manifest-v3")&&s.contains("segment-v3")?new Rl(o,"segment-v3","manifest-v3"):null,e.i=s,s=o.objectStoreNames,s=s.contains("manifest-v5")&&s.contains("segment-v5")?new lp(o,"segment-v5","manifest-v5"):null,e.j=s,o=o.objectStoreNames.contains("session-ids")?new tu(o):null,e.m=o,t.resolve()}},r.onupgradeneeded=function(){for(var o=r.result,s=g(["segment-v5","manifest-v5","session-ids"]),u=s.next();!u.done;u=s.next())u=u.value,o.objectStoreNames.contains(u)||o.createObjectStore(u,{autoIncrement:!0})},r.onerror=function(o){n||(i.stop(),t.reject(new C(2,9,9001,r.error)),o.preventDefault())},t},d.destroy=function(){var e=this;return k(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return T(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return T(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return T(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return T(t,e.j.destroy(),8);case 8:if(!e.m){t.u(10);break}return T(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),K(t)}})},d.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},d.getEmeSessionCell=function(){return this.m},d.erase=function(){var e=this;return k(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return T(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return T(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return T(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return T(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),T(t,lM(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,T(t,e.init(),0)}})};function lM(){var e=new je,t=B.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new C(2,9,9001,t.error)),n.preventDefault()},e}var c1=5;W("shaka.offline.indexeddb.StorageMechanismOpenTimeout",c1),u1("idb",function(){return ye().oh()?new l1:null});function ei(e,t,n,i){this.g=e,this.i=t,this.h=n,this.l=i,this.j=["offline:",e,"/",t,"/",n,"/",i].join("")}ei.prototype.Pb=function(){return this.i},ei.prototype.bb=function(){return this.h},ei.prototype.key=function(){return this.l},ei.prototype.toString=function(){return this.j};function cp(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var i=e[3];return i&&t!=null?new ei(t,n,i,Number(e[4])):null}function f1(e,t){this.h=e,this.g=t}function d1(e,t){var n=new oe(null,0);n.ob(t.duration);var i=t.streams.filter(function(l){return l.type=="audio"}),r=t.streams.filter(function(l){return l.type=="video"});i=cM(e,i,r,n),r=t.streams.filter(function(l){return l.type==he}).map(function(l){return Pl(e,l,n)});var o=t.streams.filter(function(l){return l.type=="image"}).map(function(l){return Pl(e,l,n)}),s=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var u=g(i.values()),a=u.next();!a.done;a=u.next())a=a.value,a.audio&&a.audio.encrypted&&(a.audio.drmInfos=s),a.video&&a.video.encrypted&&(a.video.drmInfos=s);return{presentationTimeline:n,offlineSessionIds:t.sessionIds,variants:Array.from(i.values()),textStreams:r,imageStreams:o,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null}}function cM(e,t,n,i){for(var r=new Set,o=g(t),s=o.next();!s.done;s=o.next()){s=g(s.value.variantIds);for(var u=s.next();!u.done;u=s.next())r.add(u.value)}for(o=g(n),s=o.next();!s.done;s=o.next())for(s=g(s.value.variantIds),u=s.next();!u.done;u=s.next())r.add(u.value);for(o=new Map,r=g(r),s=r.next();!s.done;s=r.next())s=s.value,o.set(s,{id:s,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=g(t),r=t.next();!r.done;r=t.next())for(s=r.value,r=Pl(e,s,i),s=g(s.variantIds),u=s.next();!u.done;u=s.next())u=o.get(u.value),u.language=r.language,u.primary=u.primary||r.primary,u.audio=r;for(n=g(n),t=n.next();!t.done;t=n.next())for(r=t.value,t=Pl(e,r,i),r=g(r.variantIds),s=r.next();!s.done;s=r.next())s=o.get(s.value),s.primary=s.primary||t.primary,s.video=t;return o}function Pl(e,t,n){var i=t.segments.map(function(r){return fM(e,r,t)});return n.Xd(i),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ie(i),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,mssPrivateData:t.mssPrivateData,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([it(t.mimeType,t.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null}}function fM(e,t,n){var i=new ei("segment",e.h,e.g,t.dataKey);return e=new Z(t.startTime,t.endTime,function(){return[i.toString()]},0,null,t.initSegmentKey!=null?dM(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",t.thumbnailSprite&&e.Cf(t.thumbnailSprite),e}function dM(e,t){var n=new ei("segment",e.h,e.g,t);return new Xt(function(){return[n.toString()]},0,null)}function p1(){this.g=null}d=p1.prototype,d.configure=function(){},d.start=function(e,t){var n=this,i,r,o,s,u,a,l;return k(function(c){switch(c.g){case 1:if(i=cp(e),n.g=i,i==null||i.g!="manifest")throw new C(2,1,9004,e);return r=new Yt,ii(c,2),T(c,r.init(),4);case 4:return T(c,Dl(r,i.Pb(),i.bb()),5);case 5:return o=c.h,T(c,o.getManifests([i.key()]),6);case 6:return s=c.h,u=s[0],a=new f1(i.Pb(),i.bb()),l=d1(a,u),t.makeTextStreamsForClosedCaptions(l),c.return(l);case 2:return sn(c),T(c,r.destroy(),7);case 7:un(c,0)}})},d.stop=function(){return Promise.resolve()},d.update=function(){},d.onExpirationUpdated=function(e,t){var n=this,i,r,o,s,u,a,l;return k(function(c){switch(c.g){case 1:return i=n.g,r=new Yt,ue(c,2,3),T(c,r.init(),5);case 5:return T(c,Dl(r,i.Pb(),i.bb()),6);case 6:return o=c.h,T(c,o.getManifests([i.key()]),7);case 7:if(s=c.h,u=s[0],a=u.sessionIds.includes(e),l=u.expiration==null||u.expiration>t,!a||!l){c.u(3);break}return T(c,o.updateManifestExpiration(i.key(),t),3);case 3:return sn(c),T(c,r.destroy(),10);case 10:un(c,0);break;case 2:ae(c),c.u(3)}})},d.onInitialVariantChosen=function(){},d.banLocation=function(){},d.setMediaElement=function(){},Tr("application/x-offline-manifest",function(){return new p1});function h1(){}function g1(e,t){var n=cp(e);return n&&n.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"},originalRequest:t},e=$r(e)):e=n&&n.g=="segment"?pM(n.key(),n,t):mr(new C(2,1,9004,e)),e}function pM(e,t,n){var i=new Yt;return $r(void 0).Va(function(){return i.init()}).Va(function(){return Dl(i,t.Pb(),t.bb())}).Va(function(r){return r.getSegments([t.key()])}).Va(function(r){return{uri:t,data:r[0].data,headers:{},originalRequest:n}}).finally(function(){return i.destroy()})}W("shaka.offline.OfflineScheme",h1),h1.plugin=g1,pi("offline",g1);function m1(e,t,n){var i,r,o,s,u,a;return k(function(l){switch(l.g){case 1:i=[];for(var c=[],f=g(n),p=f.next();!p.done;p=f.next()){p=p.value;for(var h=!1,m=g(c),y=m.next();!y.done;y=m.next())if(y=y.value,gM(y.info,p)){y.sessionIds.push(p.sessionId),h=!0;break}h||c.push({info:p,sessionIds:[p.sessionId]})}r=g(c),o=r.next();case 2:if(o.done){l.u(4);break}return s=o.value,u=hM(e,t,s),T(l,u,5);case 5:a=l.h,i=i.concat(a),o=r.next(),l.u(2);break;case 4:return l.return(i)}})}function hM(e,t,n){var i,r;return k(function(o){switch(o.g){case 1:return i=new qu({lc:t,onError:function(){},mf:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),ue(o,2),i.configure(e),T(o,aS(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:pe(o,3);break;case 2:return ae(o),T(o,i.destroy(),5);case 5:return o.return([]);case 3:return r=[],T(o,Promise.all(n.sessionIds.map(function(s){return k(function(u){if(u.g==1)return ue(u,2),T(u,fS(i,s),4);if(u.g!=2)return r.push(s),pe(u,0);ae(u),K(u)})})),6);case 6:return T(o,i.destroy(),7);case 7:return o.return(r)}})}function gM(e,t){function n(i,r){return i.robustness==r.robustness&&i.contentType==r.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&yc(e.audioCapabilities,t.audioCapabilities,n)&&yc(e.videoCapabilities,t.videoCapabilities,n)}function mM(e,t,n){var i=t.presentationTimeline.getDuration();return t=v1(t),{offlineUri:null,originalManifestUri:e,duration:i,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function fp(e,t){var n=d1(new f1(e.Pb(),e.bb()),t),i=t.appMetadata||{};return n=v1(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i,isIncomplete:t.isIncomplete||!1}}function v1(e){var t=[],n=_u(e.variants);n=g(n);for(var i=n.next();!i.done;i=n.next())t.push(hr(i.value));for(e=g(e.textStreams),n=e.next();!n.done;n=e.next())t.push(gr(n.value));return t}function vM(){this.g=new Map}function yM(e,t){var n=t.audio,i=t.video;if(n&&!i&&e.g.set(n.id,n.bandwidth||t.bandwidth),!n&&i&&e.g.set(i.id,i.bandwidth||t.bandwidth),n&&i){var r=n.bandwidth||393216,o=i.bandwidth||t.bandwidth-r;0>=o&&(o=t.bandwidth),e.g.set(n.id,r),e.g.set(i.id,o)}}function TM(e,t){e.g.set(t.id,t.bandwidth||2048)}function y1(e,t){return e=e.g.get(t),e==null&&(e=0),e}function xt(e){var t=this;if(e&&e.constructor!=b)throw new C(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.Mb()):(this.h=vo(),this.g=new He,this.g.configure(this.h.networking)),this.i=[],this.l=[];var n=!e;this.j=new Jr(function(){var i,r,o,s,u;return k(function(a){switch(a.g){case 1:return T(a,Promise.all(t.l.map(function(l){return sp(l)})),2);case 2:for(i=function(){},r=[],o=g(t.i),s=o.next();!s.done;s=o.next())u=s.value,r.push(u.then(i,i));return T(a,Promise.all(r),3);case 3:if(!n){a.u(4);break}return T(a,t.g.destroy(),4);case 4:t.h=null,t.g=null,K(a)}})}),this.m=1e9}function dp(){if(Zn(ye()))e:{for(var e=g(nu.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}d=xt.prototype,d.destroy=function(){return this.j.destroy()},d.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=Sa(e,t)),Ti(this.h,e)},d.getConfiguration=function(){var e=vo();return Ti(e,this.h,vo()),e},d.Mb=function(){return this.g},d.store=function(e,t,n,i,r){var o=this,s=this.getConfiguration(),u=new op(this.g);return this.l.push(u),t=xM(this,e,t||{},i||[],r||[],function(){var a;return k(function(l){return l.g==1?n?l.u(2):T(l,Cr(e,o.g,s.manifest.retryParameters),3):(l.g!=2&&(n=l.h),a=_g(e,n||null),l.return(a()))})},s,u),t=new rt(t,function(){return sp(u)}),t.finally(function(){kn(o.l,u)}),OM(this,t)};function xM(e,t,n,i,r,o,s,u){var a,l,c,f,p,h,m,y,v,x,S,w,A,D,I,E,M,P,N,L,R,O,U,j;return k(function(_){switch(_.g){case 1:return Ll(),l=a=null,c=new Yt,h=p=f=null,ue(_,2,3),T(_,o(),5);case 5:return a=_.h,T(_,DM(e,t,a,s),6);case 6:if(m=_.h,an(e),y=!m.presentationTimeline.V()&&!m.presentationTimeline.Pc(),!y)throw new C(2,9,9005,t);v=g(i),x=v.next();case 7:if(x.done){_.u(9);break}return S=x.value,T(_,RM(e,S,m),10);case 10:w=_.h,m.imageStreams.push(w),an(e),x=v.next(),_.u(7);break;case 9:A=g(r),D=A.next();case 11:return D.done?(Dg(s.drm.clearKeys,m.variants),M=m.variants.some(function(F){if(F.audio){for(var V=g(F.audio.drmInfos),q=V.next();!q.done;q=V.next())if(q.value.licenseServerUri.startsWith("data:"))return!0}if(F.video){for(F=g(F.video.drmInfos),V=F.next();!V.done;V=F.next())if(V.value.licenseServerUri.startsWith("data:"))return!0}return!1}),P=s.offline.usePersistentLicense,M&&(P=!1),T(_,e.dd(m,function(F){h=h||F},s,P),15)):(I=D.value,T(_,PM(e,m,I.uri,I.language,I.kind,I.mime,I.codecs),14));case 14:E=_.h,m.textStreams.push(E),an(e),D=A.next(),_.u(11);break;case 15:if(l=_.h,an(e),h)throw h;return T(_,wM(m,l,s,P),16);case 16:return T(_,c.init(),17);case 17:return an(e),T(_,s1(c),18);case 18:return f=_.h,an(e),N=AM(l,m,t,n,s,u,P),L=N.ik,R=N.sh,T(_,f.bb.addManifests([L]),19);case 19:if(O=_.h,an(e),p=O[0],an(e),h)throw h;return T(_,SM(e,R,p,L,u,s,f.bb,m,l,P),20);case 20:return an(e),w1(m,L,l,P),T(_,f.bb.updateManifest(p,L),21);case 21:return an(e),U=new ei("manifest",f.path.Pb,f.path.bb,p),_.return(fp(U,L));case 3:return sn(_),T(_,c.destroy(),22);case 22:if(!a){_.u(23);break}return T(_,a.stop(),23);case 23:if(!l){_.u(25);break}return T(_,l.destroy(),25);case 25:un(_,0);break;case 2:if(j=ae(_),p==null){_.u(27);break}return T(_,T1(p),27);case 27:throw h||j}})}function SM(e,t,n,i,r,o,s,u,a,l){var c,f,p,h,m,y,v,x,S,w,A;return k(function(D){switch(D.g){case 1:if(c={},f=0,p=function(){if(e.j.g||r.l)throw new C(2,9,7001)},h=function(I,E){var M,P,N,L,R,O,U,j,_;return k(function(F){if(F.g==1){for(M=g(I),P=M.next(),N={};!P.done;N={fc:void 0},P=M.next())N.fc=P.value,p(),L=qI(N.fc,o),R=N.fc.i,O=N.fc.h,U=function(V){return function(q){var X,Me,ge,xe;return k(function(me){switch(me.g){case 1:if(X=V.fc.g,Me=X.Wb(!1),!X.aesKey||Me){me.u(2);break}return T(me,Tf(q,X.aesKey,V.fc.j),3);case 3:q=me.h;case 2:return ge=rp(X),T(me,s.addSegments([{data:q}]),4);case 4:xe=me.h,p(),c[ge]=xe[0],f+=q.byteLength,K(me)}})}}(N),j=N.fc.g,(_=j.Wb(!1))?QI(r,N.fc.groupId,_,R,O,U):r.queue(N.fc.groupId,L,R,O,U);return T(F,JI(r),2)}return p(),!E||r.l?F.u(0):(w1(u,i,a,l),T(F,s.updateManifest(n,i),0))})},m=!1,ue(D,2),!pp(u)||!m||S1(u)){D.u(4);break}return T(D,h(t.filter(function(I){return I.h}),!0),5);case 5:return p(),t=t.filter(function(I){return!I.h}),y=c,v=f,c={},f=0,T(D,x1(s,n,i,y,v,function(){return an(e)}),6);case 6:p();case 4:if(m){D.u(7);break}return T(D,h(t,!1),8);case 8:return p(),x=c,S=f,c={},f=0,T(D,x1(s,n,i,x,S,function(){return p()}),9);case 9:p();case 7:pe(D,0);break;case 2:return w=ae(D),A=Object.values(c),T(D,s.removeSegments(A,function(){}),10);case 10:throw w}})}function T1(e){var t,n,i,r;return k(function(o){switch(o.g){case 1:return t=new Yt,T(o,t.init(),2);case 2:return T(o,s1(t),3);case 3:return n=o.h,i=new ei("manifest",n.path.Pb,n.path.bb,e),T(o,t.destroy(),4);case 4:return r=new xt,T(o,r.remove(i.toString()),0)}})}function x1(e,t,n,i,r,o){var s,u,a,l,c,f,p,h,m,y,v;return k(function(x){switch(x.g){case 1:for(s=!1,ue(x,2),u=!0,a=g(n.streams),l=a.next();!l.done;l=a.next())for(c=l.value,f=g(c.segments),p=f.next();!p.done;p=f.next())h=p.value,m=h.pendingSegmentRefId?i[h.pendingSegmentRefId]:null,m!=null&&(h.dataKey=m,h.pendingSegmentRefId=void 0),m=h.pendingInitSegmentRefId?i[h.pendingInitSegmentRefId]:null,m!=null&&(h.initSegmentKey=m,h.pendingInitSegmentRefId=void 0),h.pendingSegmentRefId&&(u=!1),h.pendingInitSegmentRefId&&(u=!1);return n.size+=r,u&&(n.isIncomplete=!1),T(x,e.updateManifest(t,n),4);case 4:s=!0,o(),pe(x,0);break;case 2:return y=ae(x),T(x,T1(t),5);case 5:if(s){x.u(6);break}return v=Object.values(i),T(x,e.removeSegments(v,function(){}),6);case 6:throw y}})}function wM(e,t,n,i){var r,o,s,u,a,l,c,f,p,h,m,y,v,x,S,w,A,D,I,E,M,P,N,L,R,O,U,j,_,F;return k(function(V){switch(V.g){case 1:return r={width:1/0,height:1/0},Gx(e,n.restrictions,r),T(V,Xh(t,e,i,n.drm.preferredKeySystems,n.drm.keySystemsMapping),2);case 2:for(o=[],s=n.preferredDecodingAttributes,u=n.preferredVideoCodecs,a=n.preferredAudioCodecs,l=n.preferredTextFormats,Kh(e,u,a,s,l),c=g(e.variants),f=c.next();!f.done;f=c.next())p=f.value,o.push(hr(p));for(h=g(e.textStreams),m=h.next();!m.done;m=h.next())y=m.value,o.push(gr(y));for(v=g(e.imageStreams),x=v.next();!x.done;x=v.next())S=x.value,o.push(Uc(S));return T(V,n.offline.trackSelectionCallback(o),3);case 3:for(w=V.h,A=e.presentationTimeline.getDuration(),D=0,I=g(w),E=I.next();!E.done;E=I.next())M=E.value,P=M.bandwidth*A/8,D+=P;return ue(V,4),T(V,n.offline.downloadSizeCallback(D),6);case 6:if(N=V.h,!N)throw new C(2,9,9014);pe(V,5);break;case 4:throw L=ae(V),L instanceof C?L:new C(2,9,9015);case 5:for(R=new Set,O=new Set,U=new Set,j=g(w),_=j.next();!_.done;_=j.next())F=_.value,F.type=="variant"&&R.add(F.id),F.type=="text"&&O.add(F.id),F.type=="image"&&U.add(F.id);e.variants=e.variants.filter(function(q){return R.has(q.id)}),e.textStreams=e.textStreams.filter(function(q){return O.has(q.id)}),e.imageStreams=e.imageStreams.filter(function(q){return U.has(q.id)}),BM(e),K(V)}})}function AM(e,t,n,i,r,o,s){var u=mM(n,t,i),a=r.offline.progressCallback;$I(o,function(m,y){u.size=y,a(u,m)},function(m,y){l&&s&&c==y&&us(e,"cenc",m)});var l=pp(t)&&!S1(t),c=null;l&&(c=FM.get(e.h.keySystem));for(var f=new vM,p=g(t.textStreams),h=p.next();!h.done;h=p.next())f.g.set(h.value.id,52);for(p=g(t.imageStreams),h=p.next();!h.done;h=p.next())TM(f,h.value);for(p=g(t.variants),h=p.next();!h.done;h=p.next())yM(f,h.value);return o=NM(o,f,t,r),r=o.streams,o=o.sh,(f=e.h)&&s&&(f.initData=[]),{ik:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.Md(),streams:r,sessionIds:s?Sg(e):[],drmInfo:f,appMetadata:i,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},sh:o}}function pp(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function S1(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function w1(e,t,n,i){if(t.expiration=n.Md(),n=Sg(n),t.sessionIds=i?n:[],pp(e)&&i&&!n.length)throw new C(2,9,9007)}d.remove=function(e){return hp(this,EM(this,e))};function EM(e,t){var n,i,r,o,s,u;return k(function(a){switch(a.g){case 1:if(Ll(),n=cp(t),n==null||n.g!="manifest")throw new C(2,9,9004,t);return i=n,r=new Yt,ii(a,2),T(a,r.init(),4);case 4:return T(a,Dl(r,i.Pb(),i.bb()),5);case 5:return o=a.h,T(a,o.getManifests([i.key()]),6);case 6:return s=a.h,u=s[0],T(a,Promise.all([IM(e,u,r),MM(o,i,u)]),2);case 2:return sn(a),T(a,r.destroy(),8);case 8:un(a,0)}})}function A1(e,t){for(var n=[],i=g(e.streams),r=i.next();!r.done;r=i.next())r=r.value,t&&r.type=="video"?n.push({contentType:it(r.mimeType,r.codecs),robustness:e.drmInfo.videoRobustness}):t||r.type!="audio"||n.push({contentType:it(r.mimeType,r.codecs),robustness:e.drmInfo.audioRobustness});return n}function IM(e,t,n){return k(function(i){return T(i,bM(e.g,e.h.drm,n,t),0)})}function MM(e,t,n){function i(){}var r=_M(n);return fp(t,n),Promise.all([e.removeSegments(r,i),e.removeManifests([t.key()],i)])}d.Fk=function(){return hp(this,CM(this))};function CM(e){var t,n,i,r,o,s,u,a,l,c;return k(function(f){switch(f.g){case 1:return Ll(),t=e.g,n=e.h.drm,i=new Yt,r=!1,ii(f,2),T(f,i.init(),4);case 4:o=[],nM(i,function(p){return o.push(p)}),s=g(o),u=s.next();case 5:if(u.done){f.u(2);break}return a=u.value,T(f,a.getAll(),8);case 8:return l=f.h,T(f,m1(n,t,l),9);case 9:return c=f.h,T(f,a.remove(c),10);case 10:c.length!=l.length&&(r=!0),u=s.next(),f.u(5);break;case 2:return sn(f),T(f,i.destroy(),11);case 11:un(f,3);break;case 3:return f.return(!r)}})}d.list=function(){return hp(this,kM())};function kM(){var e,t,n;return k(function(i){switch(i.g){case 1:return Ll(),e=[],t=new Yt,ii(i,2),T(i,t.init(),4);case 4:return n=Promise.resolve(),tM(t,function(r,o){n=n.then(function(){var s;return k(function(u){if(u.g==1)return T(u,o.getAllManifests(),2);s=u.h,s.forEach(function(a,l){a=fp(new ei("manifest",r.Pb,r.bb,l),a),e.push(a)}),K(u)})})}),T(i,n,2);case 2:return sn(i),T(i,t.destroy(),6);case 6:un(i,3);break;case 3:return i.return(e)}})}function DM(e,t,n,i){var r,o,s,u,a;return k(function(l){if(l.g==1)return r=null,o=e.g,s={networkingEngine:o,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(c){r=c},isLowLatencyMode:function(){return!1},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return i.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){},addFont:function(){}},n.configure(i.manifest),an(e),T(l,n.start(t,s),2);if(l.g!=3)return u=l.h,an(e),a=I1(u),T(l,Promise.all(Bc(a,function(c){return c.createSegmentIndex()})),3);if(an(e),r)throw r;return l.return(u)})}function RM(e,t,n){var i,r,o,s,u,a,l,c,f,p,h,m,y,v,x;return k(function(S){switch(S.g){case 1:return T(S,E1(e,t),2);case 2:if(i=S.h,i!="text/vtt")throw new C(1,2,2017,t);return T(S,LM(t,e.g,e.h.streaming.retryParameters),3);case 3:if(r=S.h,o=es(i),!o)throw new C(2,2,2014,i);for(s=o(),u={periodStart:0,segmentStart:0,segmentEnd:n.presentationTimeline.getDuration(),vttOffset:0},a=le(r),l=s.parseMedia(a,u,t,[]),c=[],f=g(l),p=f.next(),h={};!p.done;h={Jf:void 0,fd:void 0},p=f.next())h.fd=p.value,h.Jf=null,m=function(w){return function(){return w.Jf==null&&(w.Jf=gt([t],[w.fd.payload])),w.Jf||[]}}(h),y=new Z(h.fd.startTime,h.fd.endTime,m,0,null,null,0,0,1/0),h.fd.payload.includes("#xywh")&&(v=h.fd.payload.split("#xywh=")[1].split(","),v.length===4&&y.Cf({height:parseInt(v[3],10),positionX:parseInt(v[0],10),positionY:parseInt(v[1],10),width:parseInt(v[2],10)})),c.push(y);if(x=i,!c.length){S.u(4);break}return T(S,Cr(c[0].O()[0],e.g,e.h.manifest.retryParameters),5);case 5:x=S.h;case 4:return S.return({id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ie(c),mimeType:x||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"image",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([it(x||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null})}})}function PM(e,t,n,i,r,o,s){var u,a,l;return k(function(c){if(c.g==1)return o?c.u(2):T(c,E1(e,n),3);if(c.g!=2&&(o=c.h),u={id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:fa(0,t.presentationTimeline.getDuration(),[n]),mimeType:o||"",codecs:s||"",kind:r,encrypted:!1,drmInfos:[],keyIds:new Set,language:i,originalLanguage:i,label:null,type:he,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([it(o||"",s||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},a=it(u.mimeType,u.codecs),l=ts(a),!l)throw new C(2,2,2014,o);return c.return(u)})}function E1(e,t){var n;return k(function(i){switch(i.g){case 1:return ue(i,2),T(i,Cr(t,e.g,e.h.streaming.retryParameters),4);case 4:n=i.h,pe(i,3);break;case 2:ae(i);case 3:if(n)return i.return(n);throw new C(1,2,2011,t)}})}function LM(e,t,n){var i,r,o;return k(function(s){return s.g==1?(i=Pn,r=ct([e],n),r.method="GET",T(s,t.request(i,r).promise,2)):(o=s.h,s.return(o.data))})}d.dd=function(e,t,n,i){var r=this,o;return k(function(s){return s.g==1?(o=new qu({lc:r.g,onError:t,mf:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),o.configure(n.drm),T(s,uS(o,e.variants,i),2)):s.g!=3?T(s,xg(o),3):s.return(o)})};function NM(e,t,n,i){var r=new Map,o=I1(n),s=new Map;o=g(o);for(var u=o.next();!u.done;u=o.next()){u=u.value;var a=jM(e,t,n,u,i,r);s.set(u.id,a)}for(e=g(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&s.get(t.audio.id).variantIds.push(t.id),t.video&&s.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(s.values()),sh:Array.from(r.values())}}function jM(e,t,n,i,r,o){var s={id:i.id,originalId:i.originalId,groupId:i.groupId,primary:i.primary,type:i.type,mimeType:i.mimeType,codecs:i.codecs,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,colorGamut:i.colorGamut,videoLayout:i.videoLayout,kind:i.kind,language:i.language,originalLanguage:i.originalLanguage,label:i.label,width:i.width||null,height:i.height||null,encrypted:i.encrypted,keyIds:i.keyIds,segments:[],variantIds:[],roles:i.roles,forced:i.forced,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,closedCaptions:i.closedCaptions,tilesLayout:i.tilesLayout,mssPrivateData:i.mssPrivateData,external:i.external,fastSwitching:i.fastSwitching,isAudioMuxedInVideo:i.isAudioMuxedInVideo},u=r.offline.numberOfParallelDownloads,a=u===0?i.id:0;return UM(i,n.presentationTimeline.Eb(),function(l,c){var f=rp(l),p=void 0;if(!o.has(f)){var h=l.endTime-l.startTime;h=y1(t,i.id)*h,h=t1(e.g,h),o.set(f,new Z0(l,h,a,!1,c))}l.Z&&(p=rp(l.Z),o.has(p)||(h=.5*y1(t,i.id),h=t1(e.g,h),o.set(p,new Z0(l.Z,h,a,!0,c)))),s.segments.push({pendingInitSegmentRefId:p,initSegmentKey:p?0:null,startTime:l.startTime,endTime:l.endTime,appendWindowStart:l.appendWindowStart,appendWindowEnd:l.appendWindowEnd,timestampOffset:l.timestampOffset,tilesLayout:l.tilesLayout,pendingSegmentRefId:f,dataKey:0,mimeType:l.mimeType,codecs:l.codecs,thumbnailSprite:l.thumbnailSprite}),u!==0&&(a=(a+1)%u)}),s}function UM(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var i=e.segmentIndex.get(t);i;)n(i,t),i=e.segmentIndex.get(++t)}function an(e){if(e.j.g)throw new C(2,9,7001)}function Ll(){if(!dp())throw new C(2,9,9e3)}function hp(e,t){return k(function(n){return n.g==1?(e.i.push(t),ii(n,2),T(n,t,4)):n.g!=2?n.return(n.h):(sn(n),kn(e.i,t),un(n,0))})}function OM(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){kn(e.i,n)})}function _M(e){var t=new Set;e=g(e.streams);for(var n=e.next();!n.done;n=e.next()){n=g(n.value.segments);for(var i=n.next();!i.done;i=n.next())i=i.value,i.initSegmentKey!=null&&t.add(i.initSegmentKey),t.add(i.dataKey)}return Array.from(t)}function bM(e,t,n,i){var r,o,s;return k(function(u){return u.g==1?i.drmInfo?(r=iM(n),o=i.sessionIds.map(function(a){return{sessionId:a,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:A1(i,!1),videoCapabilities:A1(i,!0)}}),T(u,m1(t,e,o),2)):u.return():u.g!=3?(s=u.h,T(u,r.remove(s),3)):T(u,r.add(o.filter(function(a){return!s.includes(a.sessionId)})),0)})}function I1(e){for(var t=new Set,n=g(e.variants),i=n.next();!i.done;i=n.next())i=i.value,i.audio&&t.add(i.audio),i.video&&t.add(i.video);for(n=g(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(e=g(e.imageStreams),n=e.next();!n.done;n=e.next())t.add(n.value);return t}function BM(e){e.variants.map(function(o){return o.video});var t=new Set(e.variants.map(function(o){return o.audio}));e=e.textStreams;for(var n=g(t),i=n.next();!i.done;i=n.next()){i=g(t);for(var r=i.next();!r.done;r=i.next());}for(t=g(e),n=t.next();!n.done;n=t.next())for(n=g(e),i=n.next();!i.done;i=n.next());}W("shaka.offline.Storage",xt),xt.deleteAll=function(){var e;return k(function(t){return t.g==1?(e=new Yt,ii(t,2),T(t,rM(e),2)):t.g!=5?(sn(t),T(t,e.destroy(),5)):un(t,0)})},xt.prototype.list=xt.prototype.list,xt.prototype.removeEmeSessions=xt.prototype.Fk,xt.prototype.remove=xt.prototype.remove,xt.prototype.store=xt.prototype.store,xt.prototype.getNetworkingEngine=xt.prototype.Mb,xt.prototype.getConfiguration=xt.prototype.getConfiguration,xt.prototype.configure=xt.prototype.configure,xt.prototype.destroy=xt.prototype.destroy,xt.support=dp;var FM=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.huawei.wiseplay","3d5e6d359b9a41e8b843dd3c6e72c42c");ov("offline",dp);function Pt(){}function Bt(e,t){for(e={priority:t||0,callback:e},t=0;t<ru.length;t++)if(ru[t].priority<e.priority){ru.splice(t,0,e);return}ru.push(e)}W("shaka.polyfill",Pt),Pt.register=Bt,Pt.installAll=function(){for(var e=g(ru),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){we("Error installing polyfill!",n)}}};var ru=[];function M1(){}function C1(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=g(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())VM(t.value)}function VM(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){n==null||n==null?this.removeAttribute(t):this.setAttribute(t,n)}})}Pt.Aria=M1,M1.install=C1,Bt(C1);function k1(){}function D1(){ye().nh()&&GT()}Pt.EncryptionScheme=k1,k1.install=D1,Bt(D1,-2);function R1(){}function P1(){if(B.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",jo),document.addEventListener("webkitfullscreenerror",jo),document.addEventListener("mozfullscreenchange",jo),document.addEventListener("mozfullscreenerror",jo),document.addEventListener("MSFullscreenChange",jo),document.addEventListener("MSFullscreenError",jo)}}function jo(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}Pt.Fullscreen=R1,R1.install=P1,Bt(P1);function Nl(){}function L1(){ye().bc()||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),Nl.originalMcap=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=HM)}function HM(e){var t,n,i,r,o,s,u,a,l,c,f;return k(function(p){switch(p.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},ye(),n=e.video,i=e.audio,e.type!="media-source"){if(e.type=="file"){if(n&&(r=n.contentType,o=wr().canPlayType(r)!="",!o)||i&&(s=i.contentType,u=wr().canPlayType(s)!="",!u))return p.return(t)}else return p.return(t);p.u(2);break}if(!Zn())return p.return(t);if(!n){p.u(3);break}return T(p,GM(n),4);case 4:if(a=p.h,!a)return p.return(t);case 3:if(i){var h=ye().La(),m=i.contentType;if(h==="CAST"&&i.spatialRendering&&(m+="; spatialRendering=true"),l=It(m),!l)return p.return(t)}case 2:return e.keySystemConfiguration?(c=e.keySystemConfiguration,T(p,KM(n,i,c),6)):(t.supported=!0,p.return(t));case 6:(f=p.h)&&(t.supported=!0,t.keySystemAccess=f);case 5:return p.return(t)}})}function GM(e){var t,n,i;return k(function(r){return r.g==1?(t=ye(),n=t.La(),n!=="CAST"?r.u(2):T(r,XM(e),3)):r.g!=2?(i=r.h,r.return(i)):r.return(It(e.contentType))})}function KM(e,t,n){var i,r,o,s,u,a,l,c,f,p,h;return k(function(m){switch(m.g){case 1:if(i=[],r=[],n.audio&&(o={robustness:n.audio.robustness||"",contentType:t.contentType},ye().ii()&&t.contentType.includes('codecs="ac-3"')&&(o.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(o.encryptionScheme=n.audio.encryptionScheme),i.push(o)),n.video&&(s={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(s.encryptionScheme=n.video.encryptionScheme),r.push(s)),u={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},i.length&&(u.audioCapabilities=i),r.length&&(u.videoCapabilities=r),a=e?e.contentType:"",l=t?t.contentType:"",c=Qt(a)+";"+ji(a),f=Qt(l)+";"+ji(l),p=n.keySystem,h=null,ue(m,2),qr.has(c+"#"+f+"#"+p)){h=qr.get(c+"#"+f+"#"+p)||null,m.u(4);break}return T(m,navigator.requestMediaKeySystemAccess(n.keySystem,[u]),5);case 5:h=m.h,qr.set(c+"#"+f+"#"+p,h);case 4:pe(m,3);break;case 2:ae(m);case 3:return m.return(h)}})}function XM(e){var t,n,i,r,o;return k(function(s){if(s.g==1){if(!(B.cast&&cast.__platform__&&cast.__platform__.canDisplayType))return s.return(It(e.contentType));switch(t=e.contentType,e.width&&e.height&&1280<e.width&&720<e.height&&(t+="; width="+e.width+"; height="+e.height),e.framerate&&(n=Math.round(e.framerate),24>n||30<n)&&(t+="; framerate="+e.framerate),i=e.transferFunction||"",i){case"":case"srgb":break;case"pq":t+="; eotf=smpte2084";break;case"hlg":t+="; eotf=arib-std-b67";break;default:return s.return(!1)}return r=!1,o=WM,o.has(t)?(r=o.get(t),s.u(2)):T(s,cast.__platform__.canDisplayType(t),3)}return s.g!=2&&(r=s.h,o.set(t,r)),s.return(r)})}Pt.MediaCapabilities=Nl,Nl.install=L1,Nl.originalMcap=null;var WM=new Map;Bt(L1,-1);function N1(){}function j1(){var e=ye(),t=e.Ea()==="WEBKIT"?e.Ca():null;for((B.MediaSource||B.ManagedMediaSource)&&t&&B.MediaSource&&(12>=t?(U1(),zM()):15>=t&&U1()),e=g(e.ti()),t=e.next();!t.done;t=e.next())qM(t.value);(B.MediaSource||B.ManagedMediaSource)&&YM(),B.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&$M()}function U1(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,ht.apply(0,arguments));return t.abort=function(){},t}}function zM(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function YM(){if(B.MediaSource){var e=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(n){return Ru(n)!="mp2t"&&e(n)}}if(B.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);B.ManagedMediaSource.isTypeSupported=function(n){return Ru(n)!="mp2t"&&t(n)}}}function qM(e){var t=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(i){return ji(i)!=e&&t(i)},B.ManagedMediaSource){var n=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);B.ManagedMediaSource.isTypeSupported=function(i){return ji(i)!=e&&n(i)}}}function $M(){var e=MediaSource.isTypeSupported;ye().Si()&&(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),i=n.findIndex(function(s){return s.startsWith("codecs=")});if(0>i)return e(t);var r=n[i].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),o=r.findIndex(function(s){return s.startsWith("vp09")});return 0<=o&&(r[o]="vp9",n[i]='codecs="'+r.join(",")+'"',t=n.join("; ")),e(t)})}Pt.MediaSource=N1,N1.install=j1,Bt(j1);function O1(){}function _1(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?QM():B.orientation!=null&&JM())}function QM(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function JM(){function e(){switch(B.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new jl;screen.orientation=t,e(),B.addEventListener("orientationchange",function(){e();var n=new G("change");t.dispatchEvent(n)})}Pt.Orientation=O1,O1.install=_1;function jl(){ke.call(this),this.type="",this.angle=0}et(jl,ke),jl.prototype.lock=function(e){function t(i){return screen.lockOrientation?screen.lockOrientation(i):screen.mozLockOrientation?screen.mozLockOrientation(i):screen.msLockOrientation?screen.msLockOrientation(i):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},jl.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},Bt(_1);function gp(){}var mp,vp,yp,Tp,xp,Sp;function b1(e){B.HTMLVideoElement&&B.WebKitMediaKeys&&B.shakaMediaKeysPolyfill!=Ap&&(e!==void 0&&e&&(mp=!0,vp=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),yp=HTMLMediaElement.prototype.setMediaKeys,Tp=B.MediaKeys,xp=B.MediaKeySystemAccess,Sp=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=eC,B.MediaKeys=ou,B.MediaKeySystemAccess=Ul,navigator.requestMediaKeySystemAccess=ZM,B.shakaMediaKeysPolyfill=Ap,bu.clear(),qr.clear())}function ZM(e,t){try{var n=new Ul(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function eC(e){var t=this.mediaKeys;return t&&t!=e&&B1(t,null),delete this.mediaKeys,(this.mediaKeys=e)?B1(e,this):Promise.resolve()}function tC(e){if(e=le(e.initData),Ht(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Ri(e.subarray(4),!0),e=Cn(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=gn(e),this.dispatchEvent(t)}Pt.PatchedMediaKeysApple=gp,gp.uninstall=function(){B.shakaMediaKeysPolyfill==Ap&&mp&&(mp=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",vp),HTMLMediaElement.prototype.setMediaKeys=yp,B.MediaKeys=Tp,B.MediaKeySystemAccess=xp,navigator.requestMediaKeySystemAccess=Sp,vp=Sp=yp=xp=Tp=null,B.shakaMediaKeysPolyfill="",bu.clear(),qr.clear())},gp.install=b1;function Ul(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=g(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var i=!1,r=!1;if(n.audioCapabilities)for(var o=g(n.audioCapabilities),s=o.next();!s.done;s=o.next())s=s.value,s.contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,s.contentType.split(";")[0])&&(t.audioCapabilities.push(s),r=!0));if(n.videoCapabilities)for(n=g(n.videoCapabilities),o=n.next();!o.done;o=n.next())o=o.value,o.contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,o.contentType.split(";")[0])&&(t.videoCapabilities.push(o),r=!0));i||(r=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=r?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Ul.prototype.createMediaKeys=function(){var e=new ou(this.keySystem);return Promise.resolve(e)},Ul.prototype.getConfiguration=function(){return this.g};function ou(e){this.h=new WebKitMediaKeys(e),this.g=new Ce}ou.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new wp(this.h)},ou.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function B1(e,t){if(e.g.Ra(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",tC);try{return po(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}ou.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function wp(e){ke.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Ce,this.sessionId="",this.expiration=NaN,this.closed=new je,this.keyStatuses=new F1}et(wp,ke),d=wp.prototype,d.generateRequest=function(e,t){var n=this;this.h=new je;try{var i=this.l.createSession("video/mp4",le(t));this.i=i,this.sessionId=i.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(r){n.h&&(n.h.resolve(),n.h=null),r=new Map().set("messageType",n.keyStatuses.xc()==null?"license-request":"license-renewal").set("message",gn(r.message)),r=new G("message",r),n.dispatchEvent(r)}),this.j.D(i,"webkitkeyadded",function(){n.g&&(Ol(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(i,"webkitkeyerror",function(){var r=Error("EME PatchedMediaKeysApple key error");if(r.errorCode=n.i.error,n.h!=null)n.h.reject(r),n.h=null;else if(n.g!=null)n.g.reject(r),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Ol(n,"output-not-allowed");break;default:Ol(n,"internal-error")}}),Ol(this,"status-pending")}catch(r){this.h.reject(r)}return this.h},d.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},d.update=function(e){this.g=new je;try{this.i.update(le(e))}catch(t){this.g.reject(t)}return this.g},d.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Ra()}catch(e){this.closed.reject(e)}return this.closed},d.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function Ol(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new G("keystatuseschange"),e.dispatchEvent(t)}function F1(){this.size=0,this.g=void 0}d=F1.prototype,d.xc=function(){return this.g},d.forEach=function(e){this.g&&e(this.g,Hu.value())},d.get=function(e){if(this.has(e))return this.g},d.has=function(e){var t=Hu.value();return!!(this.g&&ri(e,t))},d.entries=function(){},d.keys=function(){},d.values=function(){};var Ap="apple";Bt(function(){B.HTMLVideoElement&&B.WebKitMediaKeys&&(navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||b1())});function V1(){}function H1(){if(B.MediaKeys){var e=ye();MediaKeys.prototype.setServerCertificate&&e.fe()||(MediaKeys.prototype.setServerCertificate=nC)}}function nC(){return Promise.resolve(!1)}Pt.PatchedMediaKeysCert=V1,V1.install=H1,Bt(H1);function G1(){}function K1(){if(!(!B.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)kp="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=iC,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=rC,B.MediaKeys=su,B.MediaKeySystemAccess=_l,B.shakaMediaKeysPolyfill=oC}}function Ep(e){var t=kp;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function iC(e,t){try{var n=new _l(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function rC(e){var t=this.mediaKeys;return t&&t!=e&&X1(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&X1(e,this),Promise.resolve()}Pt.PatchedMediaKeysWebkit=G1,G1.install=K1;function _l(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var i=!1,r=document.getElementsByTagName("video");r=r.length?r[0]:document.createElement("video"),t=g(t);for(var o=t.next();!o.done;o=t.next()){o=o.value;var s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:o.initDataTypes,sessionTypes:["temporary"],label:o.label},u=!1;if(o.audioCapabilities)for(var a=g(o.audioCapabilities),l=a.next();!l.done;l=a.next())l=l.value,l.contentType&&(u=!0,r.canPlayType(l.contentType.split(";")[0],this.g)&&(s.audioCapabilities.push(l),i=!0));if(o.videoCapabilities)for(a=g(o.videoCapabilities),l=a.next();!l.done;l=a.next())l=l.value,l.contentType&&(u=!0,r.canPlayType(l.contentType,this.g)&&(s.videoCapabilities.push(l),i=!0));if(u||(i=r.canPlayType("video/mp4",this.g)||r.canPlayType("video/webm",this.g)),o.persistentState=="required"&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):i=!1),i){this.h=s;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}_l.prototype.createMediaKeys=function(){var e=new su(this.g);return Promise.resolve(e)},_l.prototype.getConfiguration=function(){return this.h};function su(e){this.l=e,this.h=null,this.g=new Ce,this.i=[],this.j=new Map}function X1(e,t){e.h=t,e.g.Ra();var n=kp;t&&(e.g.D(t,n+"needkey",function(i){var r=new CustomEvent("encrypted");r.initDataType="cenc",r.initData=gn(i.initData),e.h.dispatchEvent(r)}),e.g.D(t,n+"keymessage",function(i){var r=Ip(e,i.sessionId);r&&(i=new Map().set("messageType",r.keyStatuses.xc()==null?"licenserequest":"licenserenewal").set("message",i.message),i=new G("message",i),r.h&&(r.h.resolve(),r.h=null),r.dispatchEvent(i))}),e.g.D(t,n+"keyadded",function(i){(i=Ip(e,i.sessionId))&&i.ready()}),e.g.D(t,n+"keyerror",function(i){var r=Ip(e,i.sessionId);if(r){var o=Error("EME v0.1b key error"),s=i.errorCode;s.systemCode=i.systemCode,o.errorCode=s,!i.sessionId&&r.h?(i.systemCode==45&&(o.message="Unsupported session type."),r.h.reject(o),r.h=null):i.sessionId&&r.g?(r.g.reject(o),r.g=null):(o=i.systemCode,i.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?bl(r,"output-restricted"):o==1?bl(r,"expired"):bl(r,"internal-error"))}}))}su.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new Mp(t,this.l,e),this.i.push(e),e},su.prototype.setServerCertificate=function(){return Promise.resolve(!1)},su.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function Ip(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function Mp(e,t,n){ke.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new je,this.keyStatuses=new z1}et(Mp,ke),d=Mp.prototype,d.ready=function(){bl(this,"usable"),this.g&&this.g.resolve(),this.g=null};function W1(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var i=le(Cn("LOAD_SESSION|"+n));else{var r=Cn("PERSISTENT|");i=nt(r,t)}else i=le(t)}catch(s){return Promise.reject(s)}e.h=new je;var o=Ep("generateKeyRequest");try{e.j[o](e.i,i)}catch(s){if(s.name!="InvalidStateError")return e.h=null,Promise.reject(s);new ve(function(){try{e.j[o](e.i,i)}catch(u){e.h.reject(u),e.h=null}}).ha(.01)}return e.h}function Cp(e,t,n){if(e.g)e.g.then(function(){return Cp(e,t,n)}).catch(function(){return Cp(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var i=ze(n),r=JSON.parse(i);r.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),i=mn(r.keys[0].k),r=mn(r.keys[0].kid)}else i=le(n),r=null;var o=Ep("addKey");try{e.j[o](e.i,i,r,e.sessionId)}catch(s){e.g.reject(s),e.g=null}}}function bl(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new G("keystatuseschange"),e.dispatchEvent(t)}d.generateRequest=function(e,t){return W1(this,t,null)},d.load=function(e){return this.l=="persistent-license"?W1(this,null,e):Promise.reject(Error("Not a persistent session."))},d.update=function(e){var t=new je;return Cp(this,t,e),t},d.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Ep("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch{}}return this.closed.resolve(),this.closed},d.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function z1(){this.size=0,this.g=void 0}d=z1.prototype,d.xc=function(){return this.g},d.forEach=function(e){this.g&&e(this.g,Hu.value())},d.get=function(e){if(this.has(e))return this.g},d.has=function(e){var t=Hu.value();return!!(this.g&&ri(e,t))},d.entries=function(){},d.keys=function(){},d.values=function(){};var kp="",oC="webkit";Bt(K1);function Y1(){}function q1(){if(B.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=uC,Object.defineProperty(e,"disablePictureInPicture",{get:lC,set:cC,enumerable:!0,configurable:!0}),document.exitPictureInPicture=aC,document.addEventListener("webkitpresentationmodechanged",sC,!0))}}function sC(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function uC(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function aC(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function lC(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function cC(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}Pt.PiPWebkit=Y1,Y1.install=q1,Bt(q1);function $1(){}function Q1(){B.crypto&&("randomUUID"in B.crypto||(B.crypto.randomUUID=fC))}function fC(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}Pt.RandomUUID=$1,$1.install=Q1,Bt(Q1);function J1(){}function Z1(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:dC})}function dC(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}Pt.Symbol=J1,J1.install=Z1,Bt(Z1);function eT(){}function tT(){for(var e=g([Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array]),t=e.next();!t.done;t=e.next())t=t.value,t.prototype.indexOf||(t.prototype.indexOf=pC),t.prototype.lastIndexOf||(t.prototype.lastIndexOf=hC),t.prototype.includes||(t.prototype.includes=gC)}function pC(e,t){return Array.prototype.indexOf.call(this,e,t)}function hC(e,t){return Array.prototype.lastIndexOf.call(this,e,t)}function gC(e,t){return this.indexOf(e,t)!==-1}Pt.TypedArray=eT,eT.install=tT,Bt(tT);function nT(){}function iT(){if(B.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}Pt.VideoPlayPromise=nT,nT.install=iT,Bt(iT);function rT(){}function oT(){if(B.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||typeof wr().webkitDroppedFrameCount=="number")&&(e.getVideoPlaybackQuality=mC)}}function mC(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}Pt.VideoPlaybackQuality=rT,rT.install=oT,Bt(oT);function sT(){}function uT(){if(!B.VTTCue&&B.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=Dp;else if(t==6)e=vC;else{try{var n=!!Dp(1,2,"")}catch{n=!1}n&&(e=Dp)}e&&(B.VTTCue=function(i,r,o){return e(i,r,o)})}}function Dp(e,t,n){return new B.TextTrackCue(e,t,n)}function vC(e,t,n){return new B.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}Pt.VTTCue=sT,sT.install=uT,Bt(uT);function vt(e){ke.call(this),this.h=e,this.l=null,this.g=[],this.i=-1,this.j=null,this.m=new Ce}et(vt,ke),d=vt.prototype,d.destroy=function(){var e=this;return k(function(t){if(t.g==1)return T(t,e.removeAllItems(),2);e.h=null,e.m&&(e.m.release(),e.m=null),ke.prototype.release.call(e),K(t)})},d.configure=function(e){this.l=e},d.getConfiguration=function(){return this.l},d.getCurrentItem=function(){return this.g.length&&0<=this.i&&this.i<this.g.length?this.g[this.i]:null},d.getCurrentItemIndex=function(){return this.i},d.getItems=function(){return this.g.slice()},d.insertItems=function(e){this.g.push.apply(this.g,H(e)),this.dispatchEvent(new G("itemsinserted"))},d.removeAllItems=function(){var e=this;return k(function(t){switch(t.g){case 1:if(e.m.Ra(),!(e.g.length&&0<=e.i)){t.u(2);break}return T(t,e.h.rc(),2);case 2:if(!e.j){t.u(4);break}if(e.j.tf.o){t.u(5);break}return T(t,e.j.tf.destroy(),5);case 5:e.j=null;case 4:e.g=[],e.i=-1,e.dispatchEvent(new G("itemsremoved")),K(t)}})},d.playItem=function(e){var t=this,n,i,r,o,s,u,a,l,c,f,p,h,m,y;return k(function(v){if(v.g==1){if(t.m.Ra(),!t.g.length||e>=t.g.length)throw new C(2,7,7007);return n=t.g[e],t.i!=e&&(t.i=e,t.dispatchEvent(new G("currentitemchanged"))),i=t.h.h,r=t.l?t.l.preloadNextUrlWindow:0,0<r&&(o=!1,t.m.D(i,"timeupdate",function(){var x,S,w,A;return k(function(D){switch(D.g){case 1:if(t.j||1>=t.g.length||o||t.h.V()||!i.duration)return D.return();if(x=t.h.Sa().end-i.currentTime,isNaN(x)){D.u(0);break}if(!(x<=r)){D.u(0);break}if(S=t.l&&t.l.repeatMode,w=null,t.i+1<t.g.length?w=t.g[t.i+1]:S==1&&(w=t.g[0]),!w){D.u(0);break}return o=!0,A=null,ue(D,5),T(D,t.h.preload(w.manifestUri,w.startTime,w.mimeType,w.config),7);case 7:A=D.h,pe(D,6);break;case 5:ae(D),A=null;case 6:t.j={item:w,tf:A},o=!1,K(D)}})})),t.m.D(t.h,"complete",function(){var x=t.l&&t.l.repeatMode,S=!1;if(x==2)S=!0;else{var w=t.i+1;w<t.g.length?t.playItem(w):x==1&&(t.g.length==1?S=!0:t.playItem(0))}S&&(i.paused?(i.currentTime=t.h.Sa().start,i.play()):t.m.D(i,"paused",function(){i.currentTime=t.h.Sa().start,i.play()}))}),n.config&&(t.h.zi(),t.h.configure(n.config)),s=n.manifestUri,t.j&&t.j.item==n&&t.j.tf&&(s=t.j.tf),T(v,t.h.load(s,n.startTime,n.mimeType),2)}if(t.j=null,n.extraText)for(u=g(n.extraText),a=u.next();!a.done;a=u.next())l=a.value,l.mime?t.h.Dd(l.uri,l.language,l.kind,l.mime,l.codecs):t.h.Dd(l.uri,l.language,l.kind);if(n.extraThumbnail)for(c=g(n.extraThumbnail),f=c.next();!f.done;f=c.next())p=f.value,t.h.Fe(p);if(n.extraChapter)for(h=g(n.extraChapter),m=h.next();!m.done;m=h.next())y=m.value,t.h.Ee(y.uri,y.language,y.mime);K(v)})},W("shaka.queue.QueueManager",vt),vt.prototype.playItem=vt.prototype.playItem,vt.prototype.removeAllItems=vt.prototype.removeAllItems,vt.prototype.insertItems=vt.prototype.insertItems,vt.prototype.getItems=vt.prototype.getItems,vt.prototype.getCurrentItemIndex=vt.prototype.getCurrentItemIndex,vt.prototype.getCurrentItem=vt.prototype.getCurrentItem,vt.prototype.getConfiguration=vt.prototype.getConfiguration,vt.prototype.configure=vt.prototype.configure,vt.prototype.destroy=vt.prototype.destroy,Ka=function(e){return new vt(e)};function ln(){}ln.prototype.parseInit=function(){},ln.prototype.setSequenceMode=function(){},ln.prototype.setManifestType=function(){},ln.prototype.parseMedia=function(e,t){var n=null,i=[];e=ze(e).split(/\r?\n/),e=g(e);for(var r=e.next();!r.done;r=e.next())if((r=r.value)&&!/^\s+$/.test(r)&&(r=yC.exec(r))){var o=TC.exec(r[1]);o=60*parseInt(o[1],10)+parseFloat(o[2].replace(",",".")),r=new Be(o,t.segmentEnd?t.segmentEnd:o+2,r[2]),n&&(n.endTime=o,i.push(n)),n=r}return n&&i.push(n),i},W("shaka.text.LrcTextParser",ln),ln.prototype.parseMedia=ln.prototype.parseMedia,ln.prototype.setManifestType=ln.prototype.setManifestType,ln.prototype.setSequenceMode=ln.prototype.setSequenceMode,ln.prototype.parseInit=ln.prototype.parseInit;var yC=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,TC=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;At("application/x-subtitle-lrc",function(){return new ln});function rn(){}rn.prototype.parseInit=function(){},rn.prototype.setSequenceMode=function(){},rn.prototype.setManifestType=function(){},rn.prototype.parseMedia=function(e,t,n,i){var r=ze(e);if(e=[],r=="")return e;var o=lr(r,"tt",!0);if(!o)throw new C(2,2,2005,"Failed to parse TTML.");if(r=Fn(o,"body")[0],!r)return[];var s=qn(o,uu,"frameRate"),u=qn(o,uu,"subFrameRate"),a=qn(o,uu,"frameRateMultiplier"),l=qn(o,uu,"tickRate"),c=qn(o,uu,"cellResolution"),f=o.attributes["xml:space"]||"default",p=qn(o,Vl,"extent");if(f!="default"&&f!="preserve")throw new C(2,2,2005,"Invalid xml:space value: "+f);f=f=="default",s=new EC(s,u,a,l),c=AC(c),u=Fn(o,"metadata")[0],u=(u?u.children:[]).filter(function(y){return y!=`
`}),a=Fn(o,"style"),o=Fn(o,"region"),l=[];for(var h=g(o),m=h.next();!m.done;m=h.next())(m=xC(m.value,a,p))&&l.push(m);if(Pe(r,"p").length)throw new C(2,2,2001,"<p> can only be inside <div> in TTML");for(p=g(Pe(r,"div")),h=p.next();!h.done;h=p.next())if(Pe(h.value,"span").length)throw new C(2,2,2001,"<span> can only be inside <p> in TTML");return(t=aT(r,t,s,u,a,o,l,f,c,null,!1,n,i))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function aT(e,t,n,i,r,o,s,u,a,l,c,f,p){var h=l;if(wu(e)){if(!c)return null;var m={tagName:"span",children:[ot(e)],attributes:{},parent:null}}else m=e;for(var y=null,v=g(yT),x=v.next();!x.done&&!(y=Fl(m,"backgroundImage",i,"#",x.value)[0]);x=v.next());v=null,x=qn(m,yT,"backgroundImage");var S=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;if(x&&S.test(x)){if(v=parseInt(x.split(":").pop(),10)-1,v>=p.length)return null;v=p[v]}else f&&x&&!x.startsWith("#")&&(S=new tt(f),x=new tt(x),(x=S.resolve(x).toString())&&(v=x));if((e.tagName=="p"||y||v)&&(c=!0),e=c,x=(m.attributes["xml:space"]||(u?"default":"preserve"))=="default",S=m.children.every(wu),u=[],!S)for(var w=g(m.children),A=w.next();!A.done;A=w.next())(A=aT(A.value,t,n,i,r,o,s,x,a,m,c,f,p))&&u.push(A);if(i=l!=null,f=ot(m),f=m.children.length&&f&&/\S/.test(f),w=m.attributes.begin||m.attributes.end||m.attributes.dur,!(w||f||m.tagName=="br"||u.length!=0||i&&!x))return null;for(p=fT(m,n),f=p.start,p=p.end;h&&h.tagName&&h.tagName!="tt";)p=wC(h,n,f,p),f=p.start,p=p.end,h=h.parent;if(f==null&&(f=0),f+=t.periodStart,p=p==null?1/0:p+t.periodStart,f=Math.max(f,t.segmentStart),p=Math.min(p,t.segmentEnd),!w&&0<u.length)for(f=1/0,p=0,t=g(u),n=t.next();!n.done;n=t.next())n=n.value,f=Math.min(f,n.startTime),p=Math.max(p,n.endTime);if(m.tagName=="br")return r=new Be(f,p,""),r.lineBreak=!0,r;if(t="",S&&(t=Gt(ot(m)||""),x&&(t=t.replace(/\s+/g," "))),t=new Be(f,p,t),t.nestedCues=u,c||(t.isContainer=!0),a&&(t.cellResolution=a),a=Fl(m,"region",o,"")[0],m.attributes.region&&a&&a.attributes["xml:id"]){var D=a.attributes["xml:id"];t.region=s.filter(function(I){return I.id==D})[0]}return s=a,l&&i&&!m.attributes.region&&!m.attributes.style&&(s=Fl(l,"region",o,"")[0]),SC(t,m,s,y,v,r,e,u.length==0),t}function xC(e,t,n){var i=new or,r=e.attributes["xml:id"];if(!r)return null;i.id=r,r=null,n&&(r=jp.exec(n)||Up.exec(n)),n=r?Number(r[1]):null,r=r?Number(r[2]):null;var o,s=Bl(e,t,"extent");if(s){var u=(o=jp.exec(s))||Up.exec(s);u!=null&&(i.width=Number(u[1]),i.height=Number(u[2]),o||(n!=null&&(i.width=100*i.width/n),r!=null&&(i.height=100*i.height/r)),i.widthUnits=o||n!=null?qt:0,i.heightUnits=o||r!=null?qt:0)}return(e=Bl(e,t,"origin"))&&(u=(o=jp.exec(e))||Up.exec(e),u!=null&&(i.viewportAnchorX=Number(u[1]),i.viewportAnchorY=Number(u[2]),o?s||(i.width=100-i.viewportAnchorX,i.widthUnits=qt,i.height=100-i.viewportAnchorY,i.heightUnits=qt):(r!=null&&(i.viewportAnchorY=100*i.viewportAnchorY/r),n!=null&&(i.viewportAnchorX=100*i.viewportAnchorX/n)),i.viewportAnchorUnits=o||n!=null?qt:0)),i}function Rp(e){var t=e.match(/rgba\(([^)]+)\)/);return t&&(t=t[1].split(","),t.length==4)?(t[3]=String(Number(t[3])/255),"rgba("+t.join(",")+")"):e}function SC(e,t,n,i,r,o,s,u){if(s=s||u,Lt(t,n,o,"direction",s)=="rtl"&&(e.direction="rtl"),u=Lt(t,n,o,"writingMode",s),u=="tb"||u=="tblr"?e.writingMode="vertical-lr":u=="tbrl"?e.writingMode="vertical-rl":u=="rltb"||u=="rl"?e.direction="rtl":u&&(e.direction=Qo),(u=Lt(t,n,o,"textAlign",!0))?(e.positionAlign=CC.get(u),e.lineAlign=MC.get(u),e.textAlign=Ec[u.toUpperCase()]):e.textAlign=Qn,(u=Lt(t,n,o,"displayAlign",!0))&&(e.displayAlign=Nh[u.toUpperCase()]),(u=Lt(t,n,o,"color",s))&&(e.color=Rp(u)),(u=Lt(t,n,o,"backgroundColor",s))&&(e.backgroundColor=Rp(u)),(u=Lt(t,n,o,"border",s))&&(e.border=u),u=Lt(t,n,o,"fontFamily",s))switch(u){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=u.split(",").filter(function(a){return a!="default"}).join(",")}switch((u=Lt(t,n,o,"fontWeight",s))&&u=="bold"&&(e.fontWeight=Xr),u=Lt(t,n,o,"wrapOption",s),e.wrapLine=!(u&&u=="noWrap"),(u=Lt(t,n,o,"lineHeight",s))&&u.match(Uo)&&(e.lineHeight=u),(u=Lt(t,n,o,"fontSize",s))&&(u.match(Uo)||u.match(IC))&&(e.fontSize=u),(u=Lt(t,n,o,"fontStyle",s))&&(e.fontStyle=_h[u.toUpperCase()]),i?(r=i.attributes.imageType||i.attributes.imagetype,u=i.attributes.encoding,i=ot(i).trim(),r=="PNG"&&u=="Base64"&&i&&(e.backgroundImage="data:image/png;base64,"+i)):r&&(e.backgroundImage=r),(i=Lt(t,n,o,"textOutline",s))&&(i=i.split(" "),i[0].match(Uo)?e.textStrokeColor=e.color:(e.textStrokeColor=Rp(i[0]),i.shift()),i[0]&&i[0].match(Uo)?e.textStrokeWidth=i[0]:e.textStrokeColor=""),(i=Lt(t,n,o,"letterSpacing",s))&&i.match(Uo)&&(e.letterSpacing=i),(i=Lt(t,n,o,"linePadding",s))&&i.match(Uo)&&(e.linePadding=i),(i=Lt(t,n,o,"opacity",s))&&(e.opacity=parseFloat(i)),(i=Bl(n,o,"textDecoration"))&&lT(e,i),(i=Pp(t,o,"textDecoration"))&&lT(e,i),(i=Lt(t,n,o,"textCombine",s))&&(e.textCombineUpright=i),Lt(t,n,o,"ruby",s)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function lT(e,t){t=g(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes(ci)||e.textDecoration.push(ci);break;case"noUnderline":e.textDecoration.includes(ci)&&kn(e.textDecoration,ci);break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&kn(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&kn(e.textDecoration,"overline")}}function Lt(e,t,n,i,r){return r=r===void 0?!0:r,(e=Pp(e,n,i))?e:r?Bl(t,n,i):null}function Bl(e,t,n){if(!e)return null;var i=qn(e,Vl,n);return i||cT(e,t,n)}function Pp(e,t,n){var i=qn(e,Vl,n);return i||cT(e,t,n)}function cT(e,t,n){e=Fl(e,"style",t,"");for(var i=null,r=0;r<e.length;r++){var o=ui(e[r],"urn:ebu:tt:style",n);o||(o=qn(e[r],Vl,n)),o||(o=Pp(e[r],t,n)),o&&(i=o)}return i}function Fl(e,t,n,i,r){var o=[];if(!e||1>n.length)return o;var s=e;for(e=null;!e&&!(e=r?ui(s,r,t):s.attributes[t])&&(s=s.parent,s););if(t=e){for(t=g(t.split(" ")),r=t.next();!r.done;r=t.next())for(r=r.value,e=g(n),s=e.next();!s.done;s=e.next())if(s=s.value,i+s.attributes["xml:id"]==r){o.push(s);break}}return o}function wC(e,t,n,i){return e=fT(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),i==null?i=e.end:e.start!=null&&(i+=e.start),{start:n,end:i}}function fT(e,t){var n=Lp(e.attributes.begin,t),i=Lp(e.attributes.end,t);return e=Lp(e.attributes.dur,t),i==null&&e!=null&&(i=n+e),{start:n,end:i}}function Lp(e,t){var n=null;if(dT.test(e)){e=dT.exec(e),n=Number(e[1]);var i=Number(e[2]),r=Number(e[3]),o=Number(e[4]);o+=(Number(e[5])||0)/t.h,r+=o/t.frameRate,n=r+60*i+3600*n}else if(pT.test(e))n=Np(pT,e);else if(hT.test(e))n=Np(hT,e);else if(gT.test(e))e=gT.exec(e),n=Number(e[1])/t.frameRate;else if(mT.test(e))e=mT.exec(e),n=Number(e[1])/t.g;else if(vT.test(e))n=Np(vT,e);else if(e)throw new C(2,2,2001,"Could not parse cue time range in TTML");return n}function Np(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function AC(e){return e&&(e=/^(\d+) (\d+)$/.exec(e))?{Hc:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}W("shaka.text.TtmlTextParser",rn),rn.prototype.parseMedia=rn.prototype.parseMedia,rn.prototype.setManifestType=rn.prototype.setManifestType,rn.prototype.setSequenceMode=rn.prototype.setSequenceMode,rn.prototype.parseInit=rn.prototype.parseInit;function EC(e,t,n,i){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(i),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var jp=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,IC=/^(\d{1,4}(?:\.\d+)?|100)%$/,Uo=/^(\d+px|\d+em|\d*\.?\d+c)$/,Up=/^(\d+)px (\d+)px$/,dT=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,pT=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,hT=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,gT=/^(\d*(?:\.\d*)?)f$/,mT=/^(\d*(?:\.\d*)?)t$/,vT=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),MC=new Map().set("left",fr).set("center","center").set("right","end").set("start",fr).set("end","end"),CC=new Map().set("left","line-left").set("center","center").set("right","line-right"),uu=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],Vl=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],yT=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];At("application/ttml+xml",function(){return new rn});function pt(){this.g=new rn}pt.prototype.parseInit=function(e){var t=!1;if(new Ue().box("moov",de).box("trak",de).box("mdia",de).box("minf",de).box("stbl",de).R("stsd",gi).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new C(2,2,2007)},pt.prototype.setSequenceMode=function(){},pt.prototype.setManifestType=function(){},pt.prototype.parseMedia=function(e,t,n){var i=[],r=null,o=[],s=new Map,u=[];if(new Ue().box("moof",de).box("traf",de).R("tfhd",function(x){r=Ju(x.reader,x.flags).Jd}).R("trun",function(x){x=ta(x.reader,x.version,x.flags),x=g(x.$g);for(var S=x.next();!S.done;S=x.next())u.push(S.value.sampleSize||r||0)}).R("subs",function(x){for(var S=x.reader,w=S.T(),A=-1,D=0;D<w;D++){var I=S.T();A+=I,I=S.Aa();for(var E=[],M=0;M<I;M++)x.version==1?E.push(S.T()):E.push(S.Aa()),S.X(),S.X(),S.T();s.set(A,E)}}).box("mdat",Zr(function(x){o.push(x)})).parse(e,!1),o.length==0)throw new C(2,2,2007);for(var a=nt.apply(Et,H(o)),l=0,c=0;c<u.length;c++){var f=le(a,l,u[c]);l+=u[c];var p=s.get(c);if(p&&p.length){f=le(f,0,p[0]);for(var h=[],m=p[0],y=1;y<p.length;y++){var v=le(e,m,p[y]);v=Su(v),h.push("data:image/png;base64,"+v),m+=p[y]}i=i.concat(this.g.parseMedia(f,t,n,h))}else i=i.concat(this.g.parseMedia(f,t,n,[]))}return i},W("shaka.text.Mp4TtmlParser",pt),pt.prototype.parseMedia=pt.prototype.parseMedia,pt.prototype.setManifestType=pt.prototype.setManifestType,pt.prototype.setSequenceMode=pt.prototype.setSequenceMode,pt.prototype.parseInit=pt.prototype.parseInit,At('application/mp4; codecs="stpp"',function(){return new pt}),At('application/mp4; codecs="stpp.ttml"',function(){return new pt}),At('application/mp4; codecs="stpp.ttml.im1i"',function(){return new pt}),At('application/mp4; codecs="stpp.ttml.im1t"',function(){return new pt}),At('application/mp4; codecs="stpp.ttml.im2i"',function(){return new pt}),At('application/mp4; codecs="stpp.ttml.im2t"',function(){return new pt}),At('application/mp4; codecs="stpp.ttml.etd1"',function(){return new pt}),At('application/mp4; codecs="stpp.ttml.etd1|im1t"',function(){return new pt}),At('application/mp4; codecs="stpp.ttml.im1t|etd1"',function(){return new pt}),At('application/mp4; codecs="stpp.TTML.im1t"',function(){return new pt});function Ft(){this.g="UNKNOWN"}Ft.prototype.parseInit=function(){},Ft.prototype.setSequenceMode=function(){},Ft.prototype.setManifestType=function(e){this.g=e},Ft.prototype.parseMedia=function(e,t){e=ze(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`);var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new C(2,2,2e3);if(e=t.vttOffset,this.g=="HLS")if(n[0].includes("X-TIMESTAMP-MAP")){var i=n[0];if(e=i.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),i=i.match(/MPEGTS:(\d+)/m),!e||!i)throw new C(2,2,2e3);if(e=Kr(e[1]),e==null)throw new C(2,2,2e3);i=Number(i[1]);for(var r=t.segmentStart-t.periodStart;95443.7176888889<=r;)r-=95443.7176888889,i+=8589934592;e=t.periodStart+i/9e4-e}else t.periodStart&&t.vttOffset==t.periodStart&&(e=0);for(t=[],i=g(n[0].split(`
`)),r=i.next();!r.done;r=i.next())if(r=r.value,/^Region:/.test(r)){r=new Hr(r);var o=new or;ur(r),Gr(r);for(var s=ur(r);s;){var u=o,a=s;(s=/^id=(.*)$/.exec(a))?u.id=s[1]:(s=/^width=(\d{1,2}|100)%$/.exec(a))?u.width=Number(s[1]):(s=/^lines=(\d+)$/.exec(a))?(u.height=Number(s[1]),u.heightUnits=2):(s=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(a))?(u.regionAnchorX=Number(s[1]),u.regionAnchorY=Number(s[2])):(s=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(a))?(u.viewportAnchorX=Number(s[1]),u.viewportAnchorY=Number(s[2])):/^scroll=up$/.exec(a)&&(u.scroll="up"),Gr(r),s=ur(r)}t.push(o)}for(i=new Map,Ph(i),r=[],n=g(n.slice(1)),o=n.next();!o.done;o=n.next()){if(o=o.value.split(`
`),(o.length!=1||o[0])&&!/^NOTE($|[ \t])/.test(o[0])&&o[0]=="STYLE"){for(u=[],s=-1,a=1;a<o.length;a++)o[a].includes("::cue")&&(u.push([]),s=u.length-1),s!=-1&&(u[s].push(o[a]),o[a].includes("}")&&(s=-1));for(u=g(u),s=u.next();!s.done;s=u.next()){var l=s.value;s="global",(a=l[0].match(/\((.*)\)/))&&(s=a.pop()),a=l.slice(1,-1),l[0].includes("}")&&(l=/\{(.*?)\}/.exec(l[0]))&&(a=l[1].split(";")),(l=i.get(s))||(l=new Be(0,0,""));for(var c=!1,f=0;f<a.length;f++){var p=/^\s*([^:]+):\s*(.*)/.exec(a[f]);if(p){var h=p[2].trim().replace(";","");switch(p[1].trim()){case"background-color":case"background":c=!0,l.backgroundColor=h;break;case"color":c=!0,l.color=h;break;case"font-family":c=!0,l.fontFamily=h;break;case"font-size":c=!0,l.fontSize=h;break;case"font-weight":(700<=parseInt(h,10)||h=="bold")&&(c=!0,l.fontWeight=Xr);break;case"font-style":switch(h){case"normal":c=!0,l.fontStyle=Mc;break;case"italic":c=!0,l.fontStyle=Wr;break;case"oblique":c=!0,l.fontStyle="oblique"}break;case"opacity":c=!0,l.opacity=parseFloat(h);break;case"text-combine-upright":c=!0,l.textCombineUpright=h;break;case"text-shadow":c=!0,l.textShadow=h;break;case"white-space":c=!0,l.wrapLine=h!="noWrap"}}}c&&i.set(s,l)}}if(l=o,c=e,l.length==1&&!l[0]||/^NOTE($|[ \t])/.test(l[0])||l[0]=="STYLE"||l[0]=="REGION")o=null;else if(o=null,l[0].includes("-->")||(o=l[0],l.splice(0,1)),u=new Hr(l[0]),s=zo(u),f=sr(u,/[ \t]+--\x3e[ \t]+/g),a=zo(u),s==null||f==null||a==null)we("Failed to parse VTT time code. Cue skipped:",o,l),o=null;else{for(s+=c,a+=c,c=l.slice(1).join(`
`).trim(),i.has("global")?(l=i.get("global").clone(),l.startTime=s,l.endTime=a,l.payload=c):l=new Be(s,a,c),Gr(u),s=ur(u);s;)TT(l,s,t),Gr(u),s=ur(u);ku(l,i),o!=null&&(l.id=o),o=l}o&&r.push(o)}return r};function TT(e,t,n){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=i[1],t=="middle"?e.textAlign=Qn:e.textAlign=Ec[t.toUpperCase()]):(i=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=i[1]=="lr"?"vertical-lr":"vertical-rl":(i=/^size:([\d.]+)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":Du)):(i=/^region:(.*)$/.exec(t))?(t=kC(n,i[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Ic[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=Jo,e.line=Number(n[1]),n[2]&&(e.lineAlign=Ic[n[2].toUpperCase()]))}function kC(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}W("shaka.text.VttTextParser",Ft),Ft.prototype.parseMedia=Ft.prototype.parseMedia,Ft.prototype.setManifestType=Ft.prototype.setManifestType,Ft.prototype.setSequenceMode=Ft.prototype.setSequenceMode,Ft.prototype.parseInit=Ft.prototype.parseInit,At("text/vtt",function(){return new Ft}),At('text/vtt; codecs="vtt"',function(){return new Ft}),At('text/vtt; codecs="wvtt"',function(){return new Ft});function cn(){this.g=null}cn.prototype.parseInit=function(e){var t=this,n=!1;if(new Ue().box("moov",de).box("trak",de).box("mdia",de).R("mdhd",function(i){i=ea(i.reader,i.version),t.g=i.timescale}).box("minf",de).box("stbl",de).R("stsd",gi).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new C(2,2,2008);if(!n)throw new C(2,2,2008)},cn.prototype.setSequenceMode=function(){},cn.prototype.setManifestType=function(){},cn.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new C(2,2,2008);var n=0,i=[],r,o=[],s=!1,u=!1,a=!1,l=null;if(new Ue().box("moof",de).box("traf",de).R("tfdt",function(w){s=!0,n=Zu(w.reader,w.version).baseMediaDecodeTime}).R("tfhd",function(w){l=Ju(w.reader,w.flags).Id}).R("trun",function(w){u=!0,i=ta(w.reader,w.version,w.flags).$g}).box("mdat",Zr(function(w){a=!0,r=w})).parse(e,!1),!a&&!s&&!u)throw new C(2,2,2008);e=n;for(var c=new Fe(r,0),f=g(i),p=f.next();!p.done;p=f.next()){p=p.value;var h=p.ah||l,m=p.xf?n+p.xf:e;e=m+(h||0);var y=0;do{var v=c.T();y+=v;var x=c.T(),S=null;zu(x)=="vttc"?8<v&&(S=c.Sb(v-8)):c.skip(v-8),h&&S&&(v=DC(S,t.periodStart+m/this.g,t.periodStart+e/this.g),o.push(v))}while(p.sampleSize&&y<p.sampleSize)}return o.filter(Oi)};function DC(e,t,n){var i,r,o;return new Ue().box("payl",Zr(function(s){i=ze(s)})).box("iden",Zr(function(s){r=ze(s)})).box("sttg",Zr(function(s){o=ze(s)})).parse(e),i?RC(i,r,o,t,n):null}function RC(e,t,n,i,r){if(e=new Be(i,r,e),ku(e),t&&(e.id=t),n)for(t=new Hr(n),n=ur(t);n;)TT(e,n,[]),Gr(t),n=ur(t);return e}W("shaka.text.Mp4VttParser",cn),cn.prototype.parseMedia=cn.prototype.parseMedia,cn.prototype.setManifestType=cn.prototype.setManifestType,cn.prototype.setSequenceMode=cn.prototype.setSequenceMode,cn.prototype.parseInit=cn.prototype.parseInit,At('application/mp4; codecs="wvtt"',function(){return new cn});function fn(){}fn.prototype.parseInit=function(){},fn.prototype.setSequenceMode=function(){},fn.prototype.setManifestType=function(){},fn.prototype.parseMedia=function(e){var t=ze(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=g(t.split(`

`));for(var n=t.next();!n.done;n=t.next()){n=n.value.split(`
`);var i=new Hr(n[0]),r=zo(i),o=sr(i,/,/g);if(i=zo(i),r==null||o==null||i==null)throw new C(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new Be(r,i,n.slice(1).join(`
`).trim()))}return e},W("shaka.text.SbvTextParser",fn),fn.prototype.parseMedia=fn.prototype.parseMedia,fn.prototype.setManifestType=fn.prototype.setManifestType,fn.prototype.setSequenceMode=fn.prototype.setSequenceMode,fn.prototype.parseInit=fn.prototype.parseInit,At("text/x-subviewer",function(){return new fn});function on(){this.g=new Ft}on.prototype.parseInit=function(){},on.prototype.setSequenceMode=function(){},on.prototype.setManifestType=function(){},on.prototype.parseMedia=function(e,t,n){return e=ze(e),e=xT(e),e=le(Cn(e)),this.g.parseMedia(e,t,n,[])};function xT(e){var t=`WEBVTT

`;if(e=="")return t;e=e.replace(/\r+/g,""),e=e.trim(),e=g(e.split(`

`));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join(`
`).replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+`

`;return t}W("shaka.text.SrtTextParser",on),on.srt2webvtt=xT,on.prototype.parseMedia=on.prototype.parseMedia,on.prototype.setManifestType=on.prototype.setManifestType,on.prototype.setSequenceMode=on.prototype.setSequenceMode,on.prototype.parseInit=on.prototype.parseInit,At("text/srt",function(){return new on});function dn(){}dn.prototype.parseInit=function(){},dn.prototype.setSequenceMode=function(){},dn.prototype.setManifestType=function(){},dn.prototype.parseMedia=function(e){var t="",n="",i=null,r=null;for(r=ze(e).split(/\r?\n\s*\r?\n/),e=g(r),r=e.next();!r.done;r=e.next()){var o=r.value;r=o,(o=LC.exec(o))&&(i=o[1],r=o[2]),i=="V4 Styles"||i=="V4+ Styles"?(t=r,t=n?t+(`
`+r):r):i=="Events"&&(n=n?n+(`
`+r):r)}for(i=[],r=null,t=g(t.split(/\r?\n/)),e=t.next();!e.done;e=t.next())if(e=e.value,!/^\s*;/.test(e)&&(o=AT.exec(e))){if(e=o[1].trim(),o=o[2].trim(),e=="Format")r=o.split(Hl);else if(e=="Style"){e=o.split(Hl),o={};for(var s=0;s<r.length&&s<e.length;s++)o[r[s]]=e[s];i.push(o)}}for(r=[],t=null,n=g(n.split(/\r?\n/)),o=n.next(),e={};!o.done;e={Ni:void 0},o=n.next())if(o=o.value,!/^\s*;/.test(o)&&(s=AT.exec(o))){if(o=s[1].trim(),s=s[2].trim(),o=="Format")t=s.split(Hl);else if(o=="Dialogue"){s=s.split(Hl),o={};for(var u=0;u<t.length&&u<s.length;u++)o[t[u]]=s[u];u=wT(o.Start);var a=wT(o.End);s=new Be(u,a,s.slice(t.length-1).join(",").replace(/\\N/g,`
`).replace(/\{[^}]+\}/g,"")),e.Ni=o.Style,(e=i.find(function(l){return function(c){return c.Name==l.Ni}}(e)))&&PC(s,e),r.push(s)}}return r};function PC(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=ST(n))&&(e.color=n),(n=t.BackColour)&&(n=ST(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=Xr),t.Italic&&(e.fontStyle=Wr),t.Underline&&e.textDecoration.push(ci),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=$o,e.textAlign="start";break;case 2:e.displayAlign=$o,e.textAlign=Qn;break;case 3:e.displayAlign=$o,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=Qn;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=Qn;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function ST(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function wT(e){return e=NC.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}W("shaka.text.SsaTextParser",dn),dn.prototype.parseMedia=dn.prototype.parseMedia,dn.prototype.setManifestType=dn.prototype.setManifestType,dn.prototype.setSequenceMode=dn.prototype.setSequenceMode,dn.prototype.parseInit=dn.prototype.parseInit;var LC=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,AT=/^\s*([^:]+):\s*(.*)/,Hl=/\s*,\s*/,NC=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;At("text/x-ssa",function(){return new dn});function ET(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,0<e)?{Rd:n,qa:e}:null}function IT(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],i=(e[t+2]&60)>>>2;if(i>n.length-1)return null;var r=((e[t+2]&192)>>>6)+1,o=(e[t+2]&1)<<2;return o|=(e[t+3]&192)>>>6,{sampleRate:n[i],channelCount:o,codec:"mp4a.40."+r}}function MT(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var i=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return i<=n?!1:(t+=i,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function jC(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function pn(e){this.j=e,this.h=0,this.g=new Map,this.i=null}d=pn.prototype,d.destroy=function(){this.g.clear()},d.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?It(this.convertCodecs("audio",e)):!1},d.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(Jt(t)||"mp4a.40.2")+'"':t},d.getOriginalMimeType=function(){return this.j},d.transmux=function(e,t,n,i){for(var r=le(e),o=ro(r),s=o.length;s<r.length&&!MT(r,s);s++);if(e=1e3*n.endTime,o=Ar(o),o.length&&n&&(o=o.find(function(c){return c.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=o.data),o=IT(r,s),!o)return Promise.reject(new C(2,3,3018,n?n.O()[0]:null));t.audioSamplingRate=o.sampleRate,t.channelsCount=o.channelCount;for(var u=[];s<r.length;){var a=ET(r,s);if(!a)return Promise.reject(new C(2,3,3018,n?n.O()[0]:null));var l=a.Rd+a.qa;s+l<=r.length&&u.push({data:r.subarray(s+a.Rd,s+l),size:a.qa,duration:1024,qb:0,flags:{vb:0,kb:0,jb:0,hb:0,ib:2,wb:0}}),s+=l}return r=o.sampleRate,e=Math.floor(e*r/1e3),i={id:t.id,type:"audio",codecs:o.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:r,duration:i,zb:[],Da:new Uint8Array([]),Na:new Uint8Array([]),Wa:0,Xa:0,data:{Tb:this.h,baseMediaDecodeTime:e,xb:u},stream:t},i=new xr([i]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=no(i),this.g.set(n,t)),n=this.i!==t,i=hs(i),this.i=t,this.h++,n?(t=nt(t,i),Promise.resolve(t)):Promise.resolve(i)},W("shaka.transmuxer.AacTransmuxer",pn),pn.prototype.transmux=pn.prototype.transmux,pn.prototype.getOriginalMimeType=pn.prototype.getOriginalMimeType,pn.prototype.convertCodecs=pn.prototype.convertCodecs,pn.prototype.isSupported=pn.prototype.isSupported,pn.prototype.destroy=pn.prototype.destroy,fi("audio/aac",function(){return new pn("audio/aac")},Ni);function CT(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(3<=n)return null;var i=e[t+4]&63,r=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*i+n];if(t+r>e.length)return null;var o=e[t+6]>>5,s=0;o===2?s+=2:(o&1&&o!==1&&(s+=2),o&4&&(s+=2)),s=(e[t+6]<<8|e[t+7])>>12-s&1;var u=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|u>>2,(u&3)<<6|o<<3|s<<2|i>>4,i<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][o]+s,Da:e,qa:r}}function UC(e,t){if(e[t]===11&&e[t+1]===119){var n=0,i=5;t+=i;for(var r,o;0<i;){o=e[t];var s=Math.min(i,8),u=8-s;r=4278190080>>>24+u<<u,r=(o&r)>>u,n=n?n<<s|r:r,t+=1,i-=s}if(16>n)return!0}return!1}function Sn(e){this.j=e,this.h=0,this.g=new Map,this.i=null}d=Sn.prototype,d.destroy=function(){this.g.clear()},d.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?It(this.convertCodecs("audio",e)):!1},d.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?ye().ae()?'audio/mp4; codecs="ec-3"':'audio/mp4; codecs="ac-3"':t},d.getOriginalMimeType=function(){return this.j},d.transmux=function(e,t,n,i){e=le(e);for(var r=ro(e),o=r.length;o<e.length&&!UC(e,o);o++);var s=1e3*n.endTime;r=Ar(r),r.length&&n&&(r=r.find(function(c){return c.description==="com.apple.streaming.transportStreamTimestamp"}))&&(s=r.data),r=0;for(var u=new Uint8Array([]),a=[];o<e.length;){var l=CT(e,o);if(!l)return Promise.reject(new C(2,3,3018,n?n.O()[0]:null));t.audioSamplingRate=l.sampleRate,t.channelsCount=l.channelCount,r=l.sampleRate,u=l.Da,a.push({data:e.subarray(o,o+l.qa),size:l.qa,duration:1536,qb:0,flags:{vb:0,kb:0,jb:0,hb:0,ib:2,wb:0}}),o+=l.qa}return e=Math.floor(s*r/1e3),i={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:r,duration:i,zb:[],Da:u,Na:new Uint8Array([]),Wa:0,Xa:0,data:{Tb:this.h,baseMediaDecodeTime:e,xb:a},stream:t},i=new xr([i]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=no(i),this.g.set(n,t)),n=this.i!==t,i=hs(i),this.i=t,this.h++,n?(t=nt(t,i),Promise.resolve(t)):Promise.resolve(i)},W("shaka.transmuxer.Ac3Transmuxer",Sn),Sn.prototype.transmux=Sn.prototype.transmux,Sn.prototype.getOriginalMimeType=Sn.prototype.getOriginalMimeType,Sn.prototype.convertCodecs=Sn.prototype.convertCodecs,Sn.prototype.isSupported=Sn.prototype.isSupported,Sn.prototype.destroy=Sn.prototype.destroy,fi("audio/ac3",function(){return new Sn("audio/ac3")},Ni);function kT(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new yi(e.subarray(t+2));tn(n,2),tn(n,3);var i=Te(n,11)+1<<1,r=Te(n,2);if(r==3){r=Te(n,2),r=[24e3,22060,16e3][r];var o=3}else r=[48e3,44100,32e3][r],o=Te(n,2);var s=Te(n,3),u=Te(n,1);return n=Te(n,5),t+i>e.byteLength?null:(e=Math.floor(i*r/(16*[1,2,3,6][o])),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,r<<6|n<<1|0,0|s<<1|u<<0,0]),{sampleRate:r,channelCount:[2,1,2,3,3,4,4,5][s]+u,Da:e,qa:i})}function wn(e){this.j=e,this.h=0,this.g=new Map,this.i=null}d=wn.prototype,d.destroy=function(){this.g.clear()},d.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?It(this.convertCodecs("audio",e)):!1},d.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},d.getOriginalMimeType=function(){return this.j},d.transmux=function(e,t,n,i){e=le(e);for(var r=ro(e),o=r.length;o<e.length&&(e[o]<<8|e[o+1]<<0)!==2935;o++);var s=1e3*n.endTime;r=Ar(r),r.length&&n&&(r=r.find(function(c){return c.description==="com.apple.streaming.transportStreamTimestamp"}))&&(s=r.data),r=0;for(var u=new Uint8Array([]),a=[];o<e.length;){var l=kT(e,o);if(!l)return Promise.reject(new C(2,3,3018,n?n.O()[0]:null));t.audioSamplingRate=l.sampleRate,t.channelsCount=l.channelCount,r=l.sampleRate,u=l.Da,a.push({data:e.subarray(o,o+l.qa),size:l.qa,duration:1536,qb:0,flags:{vb:0,kb:0,jb:0,hb:0,ib:2,wb:0}}),o+=l.qa}return e=Math.floor(s*r/1e3),i={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:r,duration:i,zb:[],Da:u,Na:new Uint8Array([]),Wa:0,Xa:0,data:{Tb:this.h,baseMediaDecodeTime:e,xb:a},stream:t},i=new xr([i]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=no(i),this.g.set(n,t)),n=this.i!==t,i=hs(i),this.i=t,this.h++,n?(t=nt(t,i),Promise.resolve(t)):Promise.resolve(i)},W("shaka.transmuxer.Ec3Transmuxer",wn),wn.prototype.transmux=wn.prototype.transmux,wn.prototype.getOriginalMimeType=wn.prototype.getOriginalMimeType,wn.prototype.convertCodecs=wn.prototype.convertCodecs,wn.prototype.isSupported=wn.prototype.isSupported,wn.prototype.destroy=wn.prototype.destroy,fi("audio/ec3",function(){return new wn("audio/ec3")},Ni);function OC(e){if(!e.length)return null;var t=e.find(function(y){return y.type==7});if(e=e.find(function(y){return y.type==8}),!t||!e)return null;var n=new yi(t.data),i=De(n);if(De(n),De(n),Wt(n),bC.includes(i)&&(i=z(n),i===3&&tn(n,1),Wt(n),Wt(n),tn(n,1),Q(n))){i=i!==3?8:12;for(var r=0;r<i;r++)Q(n)&&(6>r?sa(n,16):sa(n,64))}if(Wt(n),i=z(n),i===0)z(n);else if(i===1)for(tn(n,1),Wt(n),Wt(n),i=z(n),r=0;r<i;r++)Wt(n);Wt(n),tn(n,1);var o=z(n),s=z(n),u=Te(n,1);u===0&&tn(n,1),tn(n,1);var a=0,l=0,c=0,f=0;if(Q(n)&&(a=z(n),l=z(n),c=z(n),f=z(n)),r=i=1,Q(n)&&Q(n)){var p=De(n),h=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],m=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<p&&16>=p?(i=h[p-1],r=m[p-1]):p===255&&(i=Te(n,16),r=Te(n,16))}return n=(2-u)*(s+1)*16-2*c-2*f,o=16*(o+1)-2*a-2*l,a=[],t=t.fullData,a.push(t.byteLength>>>8&255),a.push(t.byteLength&255),a=a.concat.apply(a,H(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,H(e)),e=new Uint8Array([1,a[3],a[4],a[5],255,225].concat(a,[1],t)),{height:n,width:o,Na:e,Wa:i,Xa:r}}function _C(e){function t(m){r={data:new Uint8Array([]),frame:!1,isKeyframe:!1,pts:m.pts,dts:m.dts,nalus:[]}}function n(){if(r&&r.nalus.length&&r.frame){for(var m=[],y=g(r.nalus),v=y.next();!v.done;v=y.next()){v=v.value;var x=v.fullData.byteLength,S=new Uint8Array(4);S[0]=x>>24&255,S[1]=x>>16&255,S[2]=x>>8&255,S[3]=x&255,m.push(S),m.push(v.fullData)}r.data=nt.apply(Et,H(m)),i.push(r)}}for(var i=[],r=null,o=!1,s=0;s<e.length;s++){var u=e[s],a=u.nalus,l=!1;r&&a.length&&!o&&(n(),t(u)),a=g(u.nalus);for(var c=a.next();!c.done;c=a.next()){c=c.value;var f=!1;switch(c.type){case 1:var p=!1;f=!0;var h=c.data;l&&4<h.length&&(h=qS(new yi(h)),h===2||h===4||h===7||h===9)&&(p=!0),p&&r&&r.frame&&!r.isKeyframe&&(n(),r=null),r||t(u),r.frame=!0,r.isKeyframe=p;break;case 5:f=!0,r&&r.frame&&!r.isKeyframe&&(n(),r=null),r||t(u),r.frame=!0,r.isKeyframe=!0;break;case 6:f=!0;break;case 7:l=f=!0;break;case 8:f=!0;break;case 9:o=f=!0,r&&r.frame&&(n(),r=null),r||t(u);break;case 12:f=!0;break;default:f=!1}r&&f&&r.nalus.push(c)}}return n(),i}var bC=[100,110,122,244,44,83,86,118,128,138,139,134];function BC(e){if(!e.length)return null;var t=e.find(function(s){return s.type==32}),n=e.find(function(s){return s.type==33}),i=e.find(function(s){return s.type==34});if(!t||!n||!i)return null;var r=FC(t.fullData);e=VC(n.fullData);var o=HC(i.fullData);return t=GC(t.fullData,n.fullData,i.fullData,{Mg:r.Mg,qh:r.qh,wg:e.wg,xg:e.xg,pg:e.pg,vg:e.vg,qg:e.qg,rg:e.rg,sg:e.sg,ug:e.ug,jg:e.jg,kg:e.kg,lg:e.lg,mg:e.mg,ng:e.ng,og:e.og,ag:e.ag,hf:e.hf,Zf:e.Zf,Yf:e.Yf,Xf:e.Xf,Og:o.Og}),{height:e.height,width:e.width,Na:t,Wa:e.Jk,Xa:e.Ik}}function FC(e){var t=new yi(e,!0);return De(t),De(t),Te(t,4),Te(t,2),Te(t,6),e=Te(t,3),t=Q(t),{Mg:e+1,qh:t}}function VC(e){e=new yi(e,!0),De(e),De(e);var t=0,n=0,i=0,r=0;Te(e,4);var o=Te(e,3);Q(e);for(var s=Te(e,2),u=Te(e,1),a=Te(e,5),l=De(e),c=De(e),f=De(e),p=De(e),h=De(e),m=De(e),y=De(e),v=De(e),x=De(e),S=De(e),w=De(e),A=[],D=[],I=0;I<o;I++)A.push(Q(e)),D.push(Q(e));if(0<o)for(I=o;8>I;I++)Te(e,2);for(I=0;I<o;I++)A[I]&&Te(e,88),D[I]&&De(e);z(e),A=z(e),A==3&&Te(e,1),D=z(e),I=z(e),Q(e)&&(t+=z(e),n+=z(e),i+=z(e),r+=z(e));var E=z(e),M=z(e),P=z(e);if(Q(e))for(var N=0;N<=o;N++)z(e),z(e),z(e);else z(e),z(e),z(e);if(z(e),z(e),z(e),z(e),z(e),z(e),Q(e)&&Q(e))for(N=0;4>N;N++)for(var L=0;L<(N===3?2:6);L++)if(Q(e)){var R=Math.min(64,1<<4+(N<<1));1<N&&oo(e);for(var O=0;O<R;O++)oo(e)}else z(e);for(Q(e),Q(e),Q(e)&&(De(e),z(e),z(e),Q(e)),N=z(e),R=L=0;R<N;R++)if(O=!1,R!==0&&(O=Q(e)),O){R===N&&z(e),Q(e),z(e);for(var U=O=0;U<=L;U++){var j=Q(e),_=!1;j||(_=Q(e)),(j||_)&&O++}L=O}else{for(U=z(e),O=z(e),L=U+O,j=0;j<U;j++)z(e),Q(e);for(U=0;U<O;U++)z(e),Q(e)}if(Q(e))for(N=z(e),L=0;L<N;L++){for(R=0;R<P+4;R++)Te(e,1);Te(e,1)}if(N=P=1,L=0,Q(e),Q(e),Q(e)){if(Q(e)&&(R=De(e),O=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],U=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<R&&16>=R?(P=O[R-1],N=U[R-1]):R===255&&(P=Te(e,16),N=Te(e,16))),Q(e)&&Q(e),Q(e)&&(Te(e,3),Q(e),Q(e)&&(De(e),De(e),De(e))),Q(e)&&(z(e),z(e)),Q(e),Q(e),Q(e),(R=Q(e))&&(z(e),z(e),z(e),z(e)),Q(e)&&(Te(e,32),Te(e,32),Q(e)&&z(e),Q(e)))for(U=!1,R=Q(e),O=Q(e),(R||O)&&((U=Q(e))&&(De(e),Te(e,5),Q(e),Te(e,5)),Te(e,4),Te(e,4),U&&Te(e,4),Te(e,5),Te(e,5),Te(e,5)),j=0;j<=o;j++){var F=!0;_=1,Q(e)||(F=Q(e));var V=!1;if(F?z(e):V=Q(e),V||(_=z(e)+1),R){for(F=0;F<_;F++)z(e),z(e),U&&(z(e),z(e));Q(e)}if(O){for(F=0;F<_;F++)z(e),z(e),U&&(z(e),z(e));Q(e)}}Q(e)&&(Q(e),Q(e),Q(e),L=z(e),z(e),z(e),z(e),z(e))}return{pg:w,wg:s,xg:u,vg:a,qg:l,rg:c,sg:f,ug:p,jg:h,kg:m,lg:y,mg:v,ng:x,og:S,hf:L,ag:0,Zf:A,Yf:E,Xf:M,width:D-(t+n)*(A===1||A===2?2:1),height:I-(i+r)*(A===1?2:1),Jk:P,Ik:N}}function HC(e){var t=new yi(e,!0);De(t),De(t),z(t),z(t),Q(t),Q(t),Te(t,3),Q(t),Q(t),z(t),z(t),oo(t),Q(t),Q(t),Q(t)&&z(t),oo(t),oo(t),Q(t),Q(t),Q(t),Q(t),e=Q(t),t=Q(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{Og:n}}function GC(e,t,n,i){var r=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return r[0]=1,r[1]=(i.wg&3)<<6|(i.xg?1:0)<<5|i.vg&31,r[2]=i.qg,r[3]=i.rg,r[4]=i.sg,r[5]=i.ug,r[6]=i.jg,r[7]=i.kg,r[8]=i.lg,r[9]=i.mg,r[10]=i.ng,r[11]=i.og,r[12]=i.pg,r[13]=240|(i.hf&3840)>>8,r[14]=i.hf&255,r[15]=252|i.Og&3,r[16]=252|i.Zf&3,r[17]=248|i.Yf&7,r[18]=248|i.Xf&7,r[19]=0,r[20]=0,r[21]=(i.ag&3)<<6|(i.Mg&7)<<3|(i.qh?1:0)<<2|3,r[22]=3,r[23]=160,r[24]=0,r[25]=1,r[26]=(e.byteLength&65280)>>8,r[27]=(e.byteLength&255)>>0,r.set(e,28),r[23+(5+e.byteLength)]=161,r[e.byteLength+29]=0,r[e.byteLength+30]=1,r[e.byteLength+31]=(t.byteLength&65280)>>8,r[e.byteLength+32]=(t.byteLength&255)>>0,r.set(t,e.byteLength+33),r[23+(e.byteLength+10+t.byteLength)]=162,r[e.byteLength+10+t.byteLength+24]=0,r[e.byteLength+10+t.byteLength+25]=1,r[e.byteLength+10+t.byteLength+26]=(n.byteLength&65280)>>8,r[e.byteLength+10+t.byteLength+27]=(n.byteLength&255)>>0,r.set(n,e.byteLength+10+t.byteLength+28),r}function Gl(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,r=e[t+2]>>4&15,o=e[t+2]>>2&3;if(n!==1&&r!==0&&r!==15&&o!==3){var s=e[t+3]>>6;r=1e3*KC[14*(n===3?3-i:i===3?3:4)+r-1],o=XC[3*(n===3?0:n===2?1:2)+o],n=WC[n][i];var u=zC[i],a=Math.floor(n*r/o+(e[t+2]>>1&1))*u,l=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(l=l?parseInt(l[1],10):0)&&87>=l&&i===2&&224e3<=r&&s===0&&(e[t+3]|=128),{sampleRate:o,channelCount:s===3?1:2,qa:a,Hk:8*n*u}}return null}function DT(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function RT(e,t){if(t+1<e.length&&DT(e,t)){var n=Gl(e,t),i=4;return n&&n.qa&&(i=n.qa),t+=i,t===e.length||t+1<e.length&&DT(e,t)}return!1}var KC=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],XC=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],WC=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],zC=[0,1,1,4];function An(e){this.j=e,this.h=0,this.g=new Map,this.i=null}d=An.prototype,d.destroy=function(){this.g.clear()},d.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?It(this.convertCodecs("audio",e)):!1},d.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},d.getOriginalMimeType=function(){return this.j},d.transmux=function(e,t,n,i){for(var r=le(e),o=ro(r).length;o<r.length&&!RT(r,o);o++);var s;for(e=[];o<r.length;){var u=Gl(r,o);if(!u)return Promise.reject(new C(2,3,3018,n?n.O()[0]:null));s||(s=u),o+u.qa<=r.length&&e.push({data:r.subarray(o,o+u.qa),size:u.qa,duration:1152,qb:0,flags:{vb:0,kb:0,jb:0,hb:0,ib:2,wb:0}}),o+=u.qa}return s?(r=9e4*s.Hk/s.sampleRate*this.h,i={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:s.sampleRate,duration:i,zb:[],Da:new Uint8Array([]),Na:new Uint8Array([]),Wa:0,Xa:0,data:{Tb:this.h,baseMediaDecodeTime:r,xb:e},stream:t},i=new xr([i]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=no(i),this.g.set(n,t)),n=this.i!==t,i=hs(i),this.i=t,this.h++,n?(t=nt(t,i),Promise.resolve(t)):Promise.resolve(i)):Promise.reject(new C(2,3,3018,n?n.O()[0]:null))},W("shaka.transmuxer.Mp3Transmuxer",An),An.prototype.transmux=An.prototype.transmux,An.prototype.getOriginalMimeType=An.prototype.getOriginalMimeType,An.prototype.convertCodecs=An.prototype.convertCodecs,An.prototype.isSupported=An.prototype.isSupported,An.prototype.destroy=An.prototype.destroy,fi("audio/mpeg",function(){return new An("audio/mpeg")},Ni);function En(e){this.h=e,this.g=null}d=En.prototype,d.destroy=function(){},d.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=Jt(e).split(","),n=Kt("audio",t);return t=Kt("video",t),!n||t||Mt(n)!="mp3"?!1:It(this.convertCodecs("audio",e))},d.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},d.getOriginalMimeType=function(){return this.h},d.transmux=function(e,t,n,i,r){if(this.g?this.g.clearData():this.g=new Ge,e=le(e),e=this.g.parse(e),e.Ld().audio!="mp3"||r!="audio")return Promise.reject(new C(2,3,3018,n?n.O()[0]:null));for(n=new Uint8Array([]),r=g(e.rb()),e=r.next();!e.done;e=r.next())if(e=e.value.data)for(t=0;t<e.length;)(i=Gl(e,t))?(t+i.qa<=e.length&&(n=nt(n,e.subarray(t,t+i.qa))),t+=i.qa):t++;return Promise.resolve(n)},W("shaka.transmuxer.MpegTsTransmuxer",En),En.prototype.transmux=En.prototype.transmux,En.prototype.getOriginalMimeType=En.prototype.getOriginalMimeType,En.prototype.convertCodecs=En.prototype.convertCodecs,En.prototype.isSupported=En.prototype.isSupported,En.prototype.destroy=En.prototype.destroy,fi("video/mp2t",function(){return new En("video/mp2t")},kc);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function hn(e){this.h=e,(this.g=Ld.get("ISOBoxer")())&&YC(this)}function YC(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(i){this._procEntryField(i,"BytesOfClearData","uint",16),this._procEntryField(i,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,i=0;16>i;i++)this.usertype[i]!==qC[i]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}d=hn.prototype,d.destroy=function(){},d.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?It(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),It(t)||It(e))},d.convertCodecs=function(e,t){return t.replace("mss/","")},d.getOriginalMimeType=function(){return this.h},d.transmux=function(e,t,n){if(!n)return Promise.resolve(le(e));if(!t.mssPrivateData)return Promise.reject(new C(2,3,3020,n?n.O()[0]:null));try{var i,r=this.g.parseBuffer(e),o=r.fetch("tfhd");o.track_ID=t.id+1;var s=r.fetch("tfdt"),u=r.fetch("traf");s===null&&(s=this.g.createFullBox("tfdt",u,o),s.version=1,s.flags=0,s.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var a=r.fetch("trun"),l=r.fetch("tfxd");l&&l._parent.boxes.splice(l._parent.boxes.indexOf(l),1);var c=r.fetch("tfrf");c&&c._parent.boxes.splice(c._parent.boxes.indexOf(c),1);var f=r.fetch("sepiff");if(f!==null){f.type="senc",f.usertype=void 0;var p=r.fetch("saio");if(p===null){p=this.g.createFullBox("saio",u),p.version=0,p.flags=0,p.entry_count=1,p.offset=[0];var h=this.g.createFullBox("saiz",u);if(h.version=0,h.flags=0,h.sample_count=f.sample_count,h.default_sample_info_size=0,h.sample_info_size=[],f.flags&2)for(i=0;i<f.sample_count;i+=1)h.sample_info_size[i]=10+6*f.entry[i].NumberOfEntries;else h.default_sample_info_size=8}}o.flags&=16777214,o.flags|=131072,a.flags|=1;var m=r.fetch("moof");a.data_offset=m.getLength()+8;var y=r.fetch("saio");y!==null&&(y.offset[0]=PT(m,"traf")+PT(u,"senc")+16);var v=le(r.write());return Promise.resolve(v)}catch(x){return x instanceof C?Promise.reject(x):Promise.reject(new C(2,3,3022,n?n.O()[0]:null))}};function PT(e,t){for(var n=8,i=0;i<e.boxes.length&&e.boxes[i].type!==t;i++)n+=e.boxes[i].size;return n}W("shaka.transmuxer.MssTransmuxer",hn),hn.prototype.transmux=hn.prototype.transmux,hn.prototype.getOriginalMimeType=hn.prototype.getOriginalMimeType,hn.prototype.convertCodecs=hn.prototype.convertCodecs,hn.prototype.isSupported=hn.prototype.isSupported,hn.prototype.destroy=hn.prototype.destroy;var qC=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);fi("mss/audio/mp4",function(){return new hn("mss/audio/mp4")},Ni),fi("mss/video/mp4",function(){return new hn("mss/video/mp4")},Ni);function In(e){this.m=e,this.g=0,this.i=new Map,this.l=this.h=this.j=null}d=In.prototype,d.destroy=function(){this.i.clear(),this.h&&this.h.destroy()},d.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var i=Jt(n).split(",");return n=Kt("audio",i),i=Kt("video",i),n&&(n=Mt(n),!$C.includes(n))||i&&(n=Mt(i),!QC.includes(n))?!1:t?It(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),It(t)||It(e))},d.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=Jt(t).replace("mp4a.40.34","mp3").split(",").map(function(n){return ju(n,"audio/mp4")}).map(qh).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},d.getOriginalMimeType=function(){return this.m},d.transmux=function(e,t,n,i,r){var o=le(e);if(r=="audio"&&!so(o)){for(var s=ro(o),u=s.length;u<o.length;u++)if(RT(o,u))return Promise.reject(new C(2,3,3018,n?n.O()[0]:null));for(u=s.length;u<o.length;u++)if(MT(o,u))return this.h||(this.h=new pn("audio/aac")),this.h.transmux(e,t,n,i,r);return Promise.reject(new C(2,3,3018,n?n.O()[0]:null))}this.j?this.j.clearData():this.j=new Ge;var a=this.j.parse(o),l=[],c=a.Ld();try{var f=null;if(r=="video"){switch(c.video){case"avc":var p=[],h=null,m=a.Nc(),y=_C(m);if(!y.length)throw new C(2,3,3023,n?n.O()[0]:null);for(var v=0;v<y.length;v++){var x=y[v];h==null&&(h=x.dts);var S=void 0;S=v+1<y.length?(y[v+1].dts||0)-(x.dts||0):1<y.length?(x.dts||0)-(y[v-1].dts||0):9e4*(n.endTime-n.startTime),p.push({data:x.data,size:x.data.byteLength,duration:S,qb:Math.round((x.pts||0)-(x.dts||0)),flags:{vb:0,kb:0,jb:0,hb:0,ib:x.isKeyframe?2:1,wb:x.isKeyframe?0:1}})}for(var w=[],A=g(m),D=A.next();!D.done;D=A.next())w.push.apply(w,H(D.value.nalus));var I=OC(w);if(!I||h==null)throw new C(2,3,3018,n?n.O()[0]:null);t.height=I.height,t.width=I.width,f={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:i,zb:[],Da:new Uint8Array([]),Na:I.Na,Wa:I.Wa,Xa:I.Xa,data:{Tb:this.g,baseMediaDecodeTime:h,xb:p},stream:t};break;case"hvc":var E=[],M=null,P=[],N=a.Nc();if(!N.length)throw new C(2,3,3023,n?n.O()[0]:null);for(var L=0;L<N.length;L++){var R=N[L],O=R.nalus;P.push.apply(P,H(O));for(var U=!1,j=[],_=!1,F=g(O),V=F.next();!V.done;V=F.next()){var q=V.value;switch(q.type){case 1:case 0:var X=_=!0;break;case 19:case 20:case 21:U=X=_=!0;break;case 32:X=!0;break;case 33:X=!0;break;case 34:X=!0;break;case 35:_=X=!0;break;case 39:case 40:X=!0;break;default:X=!1}if(_&&X){var Me=q.fullData.byteLength,ge=new Uint8Array(4);ge[0]=Me>>24&255,ge[1]=Me>>16&255,ge[2]=Me>>8&255,ge[3]=Me&255,j.push(ge),j.push(q.fullData)}}var xe=j.length?{data:nt.apply(Et,H(j)),isKeyframe:U}:null;if(xe){M==null&&R.dts!=null&&(M=R.dts);var me=void 0;me=L+1<N.length?(N[L+1].dts||0)-(R.dts||0):1<N.length?(R.dts||0)-(N[L-1].dts||0):9e4*(n.endTime-n.startTime),E.push({data:xe.data,size:xe.data.byteLength,duration:me,qb:Math.round((R.pts||0)-(R.dts||0)),flags:{vb:0,kb:0,jb:0,hb:0,ib:xe.isKeyframe?2:1,wb:xe.isKeyframe?0:1}})}}var Ee=BC(P);if(!Ee||M==null)throw new C(2,3,3018,n?n.O()[0]:null);t.height=Ee.height,t.width=Ee.width,f={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:i,zb:[],Da:new Uint8Array([]),Na:Ee.Na,Wa:Ee.Wa,Xa:Ee.Xa,data:{Tb:this.g,baseMediaDecodeTime:M,xb:E},stream:t}}f&&(l.push(f),f=null)}if(r=="audio"){switch(c.audio){case"aac":for(var Le=[],fe,re=null,ce=null,Xe=null,We=g(a.rb()),$e=We.next();!$e.done;$e=We.next()){var at=$e.value,ut=at.data;if(ut){var Re=0;if(ce==-1&&Xe)ut=nt(Xe,at.data),ce=null;else if(ce!=null&&Xe){Re=Math.max(0,ce);var Yi=nt(Xe,ut.subarray(0,Re));Le.push({data:Yi,size:Yi.byteLength,duration:1024,qb:0,flags:{vb:0,kb:0,jb:0,hb:0,ib:2,wb:0}}),ce=Xe=null}if(fe=IT(ut,Re),!fe)throw new C(2,3,3018,n?n.O()[0]:null);for(t.audioSamplingRate=fe.sampleRate,t.channelsCount=fe.channelCount,re==null&&at.pts!==null&&(re=at.pts);Re<ut.length;){var Wn=ET(ut,Re);if(!Wn){Xe=ut.subarray(Re,ut.length),ce=-1;break}var qi=Wn.Rd+Wn.qa;ce=Math.max(0,Re+qi-ut.length),ce!=0?Xe=ut.subarray(Re+Wn.Rd,Re+qi):Re+qi<=ut.length&&Le.push({data:ut.subarray(Re+Wn.Rd,Re+qi),size:Wn.qa,duration:1024,qb:0,flags:{vb:0,kb:0,jb:0,hb:0,ib:2,wb:0}}),Re+=qi}}}if(!fe||re==null){if(!a.Nc().length)throw new C(2,3,3018,n?n.O()[0]:null);re=9e4*n.startTime;var Mn=Kt("audio",t.codecs.split(","));if(!Mn||!t.channelsCount||!t.audioSamplingRate)throw new C(2,3,3018,n?n.O()[0]:null);fe={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,codec:Mn};var Bp=jC(Mn,t.channelsCount);if(!Bp)throw new C(2,3,3018,n?n.O()[0]:null);for(var ik=re+9e4*(n.endTime-n.startTime),WT=re;WT<ik;)Le.push({data:Bp,size:Bp.byteLength,duration:1024,qb:0,flags:{vb:0,kb:0,jb:0,hb:0,ib:2,wb:0}}),WT+=1024/fe.sampleRate*9e4}var zT=fe.sampleRate,rk=re/9e4*zT;f={id:t.id,type:"audio",codecs:fe.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:zT,duration:i,zb:[],Da:new Uint8Array([]),Na:new Uint8Array([]),Wa:0,Xa:0,data:{Tb:this.g,baseMediaDecodeTime:rk,xb:Le},stream:t};break;case"ac3":for(var YT=[],Xl=0,Fp=new Uint8Array([]),Wl=null,qT=g(a.rb()),Vp=qT.next();!Vp.done;Vp=qT.next()){var Hp=Vp.value,Gp=Hp.data;Wl==null&&Hp.pts!==null&&(Wl=Hp.pts);for(var Oo=0;Oo<Gp.length;){var $i=CT(Gp,Oo);$i?(t.audioSamplingRate=$i.sampleRate,t.channelsCount=$i.channelCount,Xl=$i.sampleRate,Fp=$i.Da,YT.push({data:Gp.subarray(Oo,Oo+$i.qa),size:$i.qa,duration:1536,qb:0,flags:{vb:0,kb:0,jb:0,hb:0,ib:2,wb:0}}),Oo+=$i.qa):Oo++}}if(Xl==0||Fp.byteLength==0||Wl==null)throw new C(2,3,3018,n?n.O()[0]:null);var ok=Wl/9e4*Xl;f={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Xl,duration:i,zb:[],Da:Fp,Na:new Uint8Array([]),Wa:0,Xa:0,data:{Tb:this.g,baseMediaDecodeTime:ok,xb:YT},stream:t};break;case"ec3":for(var $T=[],zl=0,Kp=new Uint8Array([]),Yl=null,QT=g(a.rb()),Xp=QT.next();!Xp.done;Xp=QT.next()){var Wp=Xp.value,zp=Wp.data;Yl==null&&Wp.pts!==null&&(Yl=Wp.pts);for(var _o=0;_o<zp.length;){var Qi=kT(zp,_o);Qi?(t.audioSamplingRate=Qi.sampleRate,t.channelsCount=Qi.channelCount,zl=Qi.sampleRate,Kp=Qi.Da,$T.push({data:zp.subarray(_o,_o+Qi.qa),size:Qi.qa,duration:1536,qb:0,flags:{vb:0,kb:0,jb:0,hb:0,ib:2,wb:0}}),_o+=Qi.qa):_o++}}if(zl==0||Kp.byteLength==0||Yl==null)throw new C(2,3,3018,n?n.O()[0]:null);var sk=Yl/9e4*zl;f={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:zl,duration:i,zb:[],Da:Kp,Na:new Uint8Array([]),Wa:0,Xa:0,data:{Tb:this.g,baseMediaDecodeTime:sk,xb:$T},stream:t};break;case"mp3":for(var JT=[],ql,$l=null,ZT=g(a.rb()),Yp=ZT.next();!Yp.done;Yp=ZT.next()){var qp=Yp.value,cu=qp.data;if(cu){$l==null&&qp.pts!==null&&($l=qp.pts);for(var Ur=0;Ur<cu.length;){var bo=Gl(cu,Ur);bo?(ql||(ql=bo),Ur+bo.qa<=cu.length&&JT.push({data:cu.subarray(Ur,Ur+bo.qa),size:bo.qa,duration:1152,qb:0,flags:{vb:0,kb:0,jb:0,hb:0,ib:2,wb:0}}),Ur+=bo.qa):Ur++}}}if(!ql||$l==null)throw new C(2,3,3018,n?n.O()[0]:null);var ex=ql.sampleRate,uk=$l/9e4*ex;f={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:ex,duration:i,zb:[],Da:new Uint8Array([]),Na:new Uint8Array([]),Wa:0,Xa:0,data:{Tb:this.g,baseMediaDecodeTime:uk,xb:JT},stream:t};break;case"opus":var tx=[],Ql=null,ti=a.F;if(!ti)throw new C(2,3,3018,n?n.O()[0]:null);var Vt=[];switch(ti.gj){case 1:case 2:Vt=[0];break;case 0:Vt=[255,1,1,0,1];break;case 128:Vt=[255,2,0,0,1];break;case 3:Vt=[1,2,1,0,2,1];break;case 4:Vt=[1,2,2,0,1,2,3];break;case 5:Vt=[1,3,2,0,4,1,2,3];break;case 6:Vt=[1,4,2,0,4,1,2,3,5];break;case 7:Vt=[1,4,2,0,4,1,2,3,5,6];break;case 8:Vt=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Vt=[1,1,2,0,1];break;case 131:Vt=[1,1,3,0,1,2];break;case 132:Vt=[1,1,4,0,1,2,3];break;case 133:Vt=[1,1,5,0,1,2,3,4];break;case 134:Vt=[1,1,6,0,1,2,3,4,5];break;case 135:Vt=[1,1,7,0,1,2,3,4,5,6];break;case 136:Vt=[1,1,8,0,1,2,3,4,5,6,7]}for(var nx=new Uint8Array([0,ti.channelCount,0,0,ti.sampleRate>>>24&255,ti.sampleRate>>>17&255,ti.sampleRate>>>8&255,ti.sampleRate>>>0&255,0,0].concat(H(Vt))),ix=ti.sampleRate,rx=g(a.rb()),$p=rx.next();!$p.done;$p=rx.next()){var Qp=$p.value,Bo=Qp.data;Ql==null&&Qp.pts!==null&&(Ql=Qp.pts);for(var fu=0;fu<Bo.length;){for(var ak=(Bo[fu+1]&16)!==0,lk=(Bo[fu+1]&8)!==0,ki=fu+2,Jl=0;Bo[ki]===255;)Jl+=255,ki+=1;Jl+=Bo[ki],ki+=1,ki+=ak?2:0,ki+=lk?2:0;var ox=Bo.slice(ki,ki+Jl);tx.push({data:ox,size:ox.byteLength,duration:960,qb:0,flags:{vb:0,kb:0,jb:0,hb:0,ib:2,wb:0}}),fu=ki+Jl}}if(nx.byteLength==0||Ql==null)throw new C(2,3,3018,n?n.O()[0]:null);t.audioSamplingRate=ti.sampleRate,t.channelsCount=ti.channelCount;var ck=Ql/9e4*ix;f={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:ix,duration:i,zb:[],Da:nx,Na:new Uint8Array([]),Wa:0,Xa:0,data:{Tb:this.g,baseMediaDecodeTime:ck,xb:tx},stream:t}}f&&(l.push(f),f=null)}}catch(Zp){return Zp&&Zp.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(Zp)}if(!l.length)return Promise.reject(new C(2,3,3018,n?n.O()[0]:null));var sx=new xr(l),Jp=t.id+"_"+n.i;if(this.i.has(Jp))var du=this.i.get(Jp);else du=no(sx),this.i.set(Jp,du);var fk=this.l!==du,ux=hs(sx);if(this.l=du,this.g++,fk){var dk=nt(du,ux);return Promise.resolve(dk)}return Promise.resolve(ux)},W("shaka.transmuxer.TsTransmuxer",In),In.prototype.transmux=In.prototype.transmux,In.prototype.getOriginalMimeType=In.prototype.getOriginalMimeType,In.prototype.convertCodecs=In.prototype.convertCodecs,In.prototype.isSupported=In.prototype.isSupported,In.prototype.destroy=In.prototype.destroy;var $C=["aac","ac-3","ec-3","mp3","opus"],QC=["avc","hevc"];fi("video/mp2t",function(){return new In("video/mp2t")},Dc);function LT(){}et(LT,zt),W("shaka.util.FairPlayUtils",LT);/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function NT(){}var au;function jT(){au||navigator.emeEncryptionSchemePolyfilled?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(au=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=JC,navigator.emeEncryptionSchemePolyfilled=!0):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function JC(e,t){var n=this,i;return k(function(r){return r.g==1?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),T(r,au.call(n,e,t),2)):(i=r.h,HT(i)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=au,r.return(i)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=UT,r.return(UT.call(n,e,t))))})}function UT(e,t){var n=this,i,r,o,s,u,a,l,c,f,p,h,m;return k(function(y){if(y.g==1){for(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),i=VT(e),r=[],o=g(t),s=o.next();!s.done;s=o.next())u=s.value,a=OT(u.videoCapabilities,i),l=OT(u.audioCapabilities,i),u.videoCapabilities&&u.videoCapabilities.length&&!a.length||u.audioCapabilities&&u.audioCapabilities.length&&!l.length||(c=Object.assign({},u),c.videoCapabilities=a,c.audioCapabilities=l,r.push(c));if(!r.length)throw f=Error("Unsupported keySystem or supportedConfigurations."),f.name="NotSupportedError",f.code=DOMException.NOT_SUPPORTED_ERR,f;return T(y,au.call(n,e,r),2)}return p=y.h,m=h=null,r[0]&&(r[0].videoCapabilities&&(h=r[0].videoCapabilities[0].encryptionScheme),r[0].audioCapabilities&&(m=r[0].audioCapabilities[0].encryptionScheme)),y.return(new Kl(p,h,m))})}function OT(e,t){return e&&e.filter(function(n){return Op(n.encryptionScheme,t)})}W("EmeEncryptionSchemePolyfill",NT),NT.install=jT;function _T(){}var lu;function bT(){lu||navigator.mediaCapabilitiesEncryptionSchemePolyfilled?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(lu=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=ZC,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function ZC(e){var t=this,n,i;return k(function(r){switch(r.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),T(r,lu.call(t,e),2);case 2:if(n=r.h,!n.supported||!e.keySystemConfiguration)return r.return(n);if((i=n.keySystemAccess)&&HT(i))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=lu,r.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=BT,i){r.u(3);break}return T(r,FT(e),4);case 4:return n.keySystemAccess=r.h,r.return(n);case 3:return r.return(BT.call(t,e))}})}function BT(e){var t=this,n,i,r,o,s,u,a;return k(function(l){switch(l.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),i=n=null,!e.keySystemConfiguration||(r=e.keySystemConfiguration,o=r.keySystem,i=r.audio&&r.audio.encryptionScheme,n=r.video&&r.video.encryptionScheme,s=VT(o),u={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},Op(i,s)&&Op(n,s))?T(l,lu.call(t,e),2):l.return(u);case 2:if(a=l.h,a.keySystemAccess){a.keySystemAccess=new Kl(a.keySystemAccess,n,i),l.u(3);break}if(!e.keySystemConfiguration){l.u(3);break}return T(l,FT(e),5);case 5:a.keySystemAccess=l.h;case 3:return l.return(a)}})}function FT(e){var t,n;return k(function(i){if(i.g==1){var r=e.keySystemConfiguration,o=[],s=[];return r.audio&&o.push({robustness:r.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:r.audio.encryptionScheme}),r.video&&s.push({robustness:r.video.robustness||"",contentType:e.video.contentType,encryptionScheme:r.video.encryptionScheme}),r={initDataTypes:r.initDataType?[r.initDataType]:[],distinctiveIdentifier:r.distinctiveIdentifier,persistentState:r.persistentState,sessionTypes:r.sessionTypes},o.length&&(r.audioCapabilities=o),s.length&&(r.videoCapabilities=s),t=r,T(i,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=i.h,i.return(n)})}W("McEncryptionSchemePolyfill",_T),_T.install=bT;function Kl(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}Kl.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=g(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(t=g(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},Kl.prototype.createMediaKeys=function(){return this.g.createMediaKeys()};function VT(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs":e.startsWith("com.huawei")?"cenc":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function HT(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function Op(e,t){return!!(!e||e==t||(e=="cbcs"||e=="cbcs-1-9")&&(tk||nk||ek))}function _p(){}function GT(){jT(),bT()}W("EncryptionSchemePolyfills",_p),_p.install=GT;var ek=navigator.userAgent.includes("CrKey"),tk=100<=parseInt(navigator.userAgent.split("Firefox/").pop(),10),bp,KT=navigator.userAgent||"";if(KT.includes("Web0S")){var XT=KT.match(/Chrome\/(\d+)/);bp=XT?79<=parseInt(XT[1],10):!1}else bp=!1;var nk=bp;typeof Zl<"u"&&Zl.exports&&(Zl.exports=_p)}).call(Ji,Fo,Fo,void 0);for(var Di in Ji.shaka)Un[Di]=Ji.shaka[Di]})()}(eh)),eh}var lx=mk();const vk=gk(lx),xk=pk({__proto__:null,default:vk},[lx]);export{xk as s};
